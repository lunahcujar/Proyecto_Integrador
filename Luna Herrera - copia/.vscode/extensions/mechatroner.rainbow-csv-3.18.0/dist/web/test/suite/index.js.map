{"version":3,"file":"test/suite/index.js","mappings":"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AQ,MAAU,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAClD,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAClD,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAClD,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAClD,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAClD,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAClD,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAClD,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAClD,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAClD,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAClD,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAClD,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAClD,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAClD,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAClD,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAClD,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAClD,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAClD,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAClD,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAClD,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAClD,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAClD,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAClD,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAClD,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAClD,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAClD,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAAU,CAAE,KAAQ,MAClD,CAAE,KAAQ,M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","sources":["webpack://rainbow-csv/./node_modules/define-data-property/index.js","webpack://rainbow-csv/./node_modules/call-bind-apply-helpers/functionCall.js","webpack://rainbow-csv/./node_modules/math-intrinsics/round.js","webpack://rainbow-csv/./node_modules/get-intrinsic/index.js","webpack://rainbow-csv/./node_modules/call-bind/index.js","webpack://rainbow-csv/./node_modules/util/util.js","webpack://rainbow-csv/./node_modules/has-property-descriptors/index.js","webpack://rainbow-csv/./node_modules/es-define-property/index.js","webpack://rainbow-csv/./rainbow_utils.js","webpack://rainbow-csv/./node_modules/call-bind-apply-helpers/functionApply.js","webpack://rainbow-csv/./node_modules/get-proto/Object.getPrototypeOf.js","webpack://rainbow-csv/./node_modules/object-keys/isArguments.js","webpack://rainbow-csv/./node_modules/util/support/isBufferBrowser.js","webpack://rainbow-csv/./node_modules/object-keys/index.js","webpack://rainbow-csv/./node_modules/es-errors/eval.js","webpack://rainbow-csv/./node_modules/has-symbols/shams.js","webpack://rainbow-csv/external commonjs \"vscode\"","webpack://rainbow-csv/./node_modules/math-intrinsics/abs.js","webpack://rainbow-csv/./contrib/wcwidth/combining.js","webpack://rainbow-csv/./node_modules/call-bind-apply-helpers/applyBind.js","webpack://rainbow-csv/./node_modules/assert/build/internal/util/comparisons.js","webpack://rainbow-csv/./node_modules/is-nan/shim.js","webpack://rainbow-csv/./node_modules/for-each/index.js","webpack://rainbow-csv/./node_modules/is-nan/implementation.js","webpack://rainbow-csv/./node_modules/math-intrinsics/sign.js","webpack://rainbow-csv/./node_modules/call-bind-apply-helpers/index.js","webpack://rainbow-csv/./node_modules/call-bind-apply-helpers/actualApply.js","webpack://rainbow-csv/./contrib/wcwidth/index.js","webpack://rainbow-csv/./fast_load_utils.js","webpack://rainbow-csv/./node_modules/get-proto/index.js","webpack://rainbow-csv/./node_modules/assert/build/internal/assert/assertion_error.js","webpack://rainbow-csv/./extension.js","webpack://rainbow-csv/./node_modules/is-regex/index.js","webpack://rainbow-csv/./node_modules/has-symbols/index.js","webpack://rainbow-csv/./node_modules/is-nan/index.js","webpack://rainbow-csv/./node_modules/assert/build/assert.js","webpack://rainbow-csv/./rbql_core/rbql-js/csv_utils.js","webpack://rainbow-csv/./node_modules/math-intrinsics/isNaN.js","webpack://rainbow-csv/./node_modules/es-errors/uri.js","webpack://rainbow-csv/./node_modules/process/browser.js","webpack://rainbow-csv/./node_modules/is-typed-array/index.js","webpack://rainbow-csv/./node_modules/which-typed-array/index.js","webpack://rainbow-csv/./node_modules/gopd/index.js","webpack://rainbow-csv/./node_modules/math-intrinsics/pow.js","webpack://rainbow-csv/./node_modules/math-intrinsics/max.js","webpack://rainbow-csv/./node_modules/gopd/gOPD.js","webpack://rainbow-csv/./node_modules/call-bound/index.js","webpack://rainbow-csv/./node_modules/object-is/shim.js","webpack://rainbow-csv/./node_modules/possible-typed-array-names/index.js","webpack://rainbow-csv/./node_modules/is-nan/polyfill.js","webpack://rainbow-csv/./node_modules/inherits/inherits_browser.js","webpack://rainbow-csv/./node_modules/function-bind/index.js","webpack://rainbow-csv/./node_modules/set-function-length/index.js","webpack://rainbow-csv/./rbql_core/rbql-js/rbql_csv.js","webpack://rainbow-csv/./node_modules/call-bind-apply-helpers/reflectApply.js","webpack://rainbow-csv/./node_modules/dunder-proto/get.js","webpack://rainbow-csv/./test/suite/unit_tests.js","webpack://rainbow-csv/./node_modules/is-arguments/index.js","webpack://rainbow-csv/./node_modules/object-is/index.js","webpack://rainbow-csv/./node_modules/math-intrinsics/min.js","webpack://rainbow-csv/./node_modules/es-errors/syntax.js","webpack://rainbow-csv/./node_modules/call-bind/callBound.js","webpack://rainbow-csv/./node_modules/is-generator-function/index.js","webpack://rainbow-csv/./node_modules/object.assign/implementation.js","webpack://rainbow-csv/./node_modules/define-properties/index.js","webpack://rainbow-csv/./node_modules/get-proto/Reflect.getPrototypeOf.js","webpack://rainbow-csv/./node_modules/object-keys/implementation.js","webpack://rainbow-csv/./node_modules/math-intrinsics/floor.js","webpack://rainbow-csv/./rbql_core/rbql-js/rbql.js","webpack://rainbow-csv/./node_modules/util/support/types.js","webpack://rainbow-csv/./node_modules/has-tostringtag/shams.js","webpack://rainbow-csv/./node_modules/object.assign/polyfill.js","webpack://rainbow-csv/./node_modules/available-typed-arrays/index.js","webpack://rainbow-csv/./node_modules/object-is/implementation.js","webpack://rainbow-csv/./node_modules/es-errors/range.js","webpack://rainbow-csv/./node_modules/function-bind/implementation.js","webpack://rainbow-csv/./node_modules/es-errors/index.js","webpack://rainbow-csv/./node_modules/object-is/polyfill.js","webpack://rainbow-csv/./node_modules/es-errors/ref.js","webpack://rainbow-csv/./node_modules/assert/build/internal/errors.js","webpack://rainbow-csv/./node_modules/is-callable/index.js","webpack://rainbow-csv/./node_modules/es-object-atoms/index.js","webpack://rainbow-csv/./node_modules/es-errors/type.js","webpack://rainbow-csv/./node_modules/safe-regex-test/index.js","webpack://rainbow-csv/./node_modules/hasown/index.js","webpack://rainbow-csv/webpack/bootstrap","webpack://rainbow-csv/webpack/runtime/global","webpack://rainbow-csv/./test/suite/index.js"],"sourcesContent":["'use strict';\n\nvar $defineProperty = require('es-define-property');\n\nvar $SyntaxError = require('es-errors/syntax');\nvar $TypeError = require('es-errors/type');\n\nvar gopd = require('gopd');\n\n/** @type {import('.')} */\nmodule.exports = function defineDataProperty(\n\tobj,\n\tproperty,\n\tvalue\n) {\n\tif (!obj || (typeof obj !== 'object' && typeof obj !== 'function')) {\n\t\tthrow new $TypeError('`obj` must be an object or a function`');\n\t}\n\tif (typeof property !== 'string' && typeof property !== 'symbol') {\n\t\tthrow new $TypeError('`property` must be a string or a symbol`');\n\t}\n\tif (arguments.length > 3 && typeof arguments[3] !== 'boolean' && arguments[3] !== null) {\n\t\tthrow new $TypeError('`nonEnumerable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 4 && typeof arguments[4] !== 'boolean' && arguments[4] !== null) {\n\t\tthrow new $TypeError('`nonWritable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 5 && typeof arguments[5] !== 'boolean' && arguments[5] !== null) {\n\t\tthrow new $TypeError('`nonConfigurable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 6 && typeof arguments[6] !== 'boolean') {\n\t\tthrow new $TypeError('`loose`, if provided, must be a boolean');\n\t}\n\n\tvar nonEnumerable = arguments.length > 3 ? arguments[3] : null;\n\tvar nonWritable = arguments.length > 4 ? arguments[4] : null;\n\tvar nonConfigurable = arguments.length > 5 ? arguments[5] : null;\n\tvar loose = arguments.length > 6 ? arguments[6] : false;\n\n\t/* @type {false | TypedPropertyDescriptor<unknown>} */\n\tvar desc = !!gopd && gopd(obj, property);\n\n\tif ($defineProperty) {\n\t\t$defineProperty(obj, property, {\n\t\t\tconfigurable: nonConfigurable === null && desc ? desc.configurable : !nonConfigurable,\n\t\t\tenumerable: nonEnumerable === null && desc ? desc.enumerable : !nonEnumerable,\n\t\t\tvalue: value,\n\t\t\twritable: nonWritable === null && desc ? desc.writable : !nonWritable\n\t\t});\n\t} else if (loose || (!nonEnumerable && !nonWritable && !nonConfigurable)) {\n\t\t// must fall back to [[Set]], and was not explicitly asked to make non-enumerable, non-writable, or non-configurable\n\t\tobj[property] = value; // eslint-disable-line no-param-reassign\n\t} else {\n\t\tthrow new $SyntaxError('This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.');\n\t}\n};\n","'use strict';\n\n/** @type {import('./functionCall')} */\nmodule.exports = Function.prototype.call;\n","'use strict';\n\n/** @type {import('./round')} */\nmodule.exports = Math.round;\n","'use strict';\n\nvar undefined;\n\nvar $Object = require('es-object-atoms');\n\nvar $Error = require('es-errors');\nvar $EvalError = require('es-errors/eval');\nvar $RangeError = require('es-errors/range');\nvar $ReferenceError = require('es-errors/ref');\nvar $SyntaxError = require('es-errors/syntax');\nvar $TypeError = require('es-errors/type');\nvar $URIError = require('es-errors/uri');\n\nvar abs = require('math-intrinsics/abs');\nvar floor = require('math-intrinsics/floor');\nvar max = require('math-intrinsics/max');\nvar min = require('math-intrinsics/min');\nvar pow = require('math-intrinsics/pow');\nvar round = require('math-intrinsics/round');\nvar sign = require('math-intrinsics/sign');\n\nvar $Function = Function;\n\n// eslint-disable-next-line consistent-return\nvar getEvalledConstructor = function (expressionSyntax) {\n\ttry {\n\t\treturn $Function('\"use strict\"; return (' + expressionSyntax + ').constructor;')();\n\t} catch (e) {}\n};\n\nvar $gOPD = require('gopd');\nvar $defineProperty = require('es-define-property');\n\nvar throwTypeError = function () {\n\tthrow new $TypeError();\n};\nvar ThrowTypeError = $gOPD\n\t? (function () {\n\t\ttry {\n\t\t\t// eslint-disable-next-line no-unused-expressions, no-caller, no-restricted-properties\n\t\t\targuments.callee; // IE 8 does not throw here\n\t\t\treturn throwTypeError;\n\t\t} catch (calleeThrows) {\n\t\t\ttry {\n\t\t\t\t// IE 8 throws on Object.getOwnPropertyDescriptor(arguments, '')\n\t\t\t\treturn $gOPD(arguments, 'callee').get;\n\t\t\t} catch (gOPDthrows) {\n\t\t\t\treturn throwTypeError;\n\t\t\t}\n\t\t}\n\t}())\n\t: throwTypeError;\n\nvar hasSymbols = require('has-symbols')();\n\nvar getProto = require('get-proto');\nvar $ObjectGPO = require('get-proto/Object.getPrototypeOf');\nvar $ReflectGPO = require('get-proto/Reflect.getPrototypeOf');\n\nvar $apply = require('call-bind-apply-helpers/functionApply');\nvar $call = require('call-bind-apply-helpers/functionCall');\n\nvar needsEval = {};\n\nvar TypedArray = typeof Uint8Array === 'undefined' || !getProto ? undefined : getProto(Uint8Array);\n\nvar INTRINSICS = {\n\t__proto__: null,\n\t'%AggregateError%': typeof AggregateError === 'undefined' ? undefined : AggregateError,\n\t'%Array%': Array,\n\t'%ArrayBuffer%': typeof ArrayBuffer === 'undefined' ? undefined : ArrayBuffer,\n\t'%ArrayIteratorPrototype%': hasSymbols && getProto ? getProto([][Symbol.iterator]()) : undefined,\n\t'%AsyncFromSyncIteratorPrototype%': undefined,\n\t'%AsyncFunction%': needsEval,\n\t'%AsyncGenerator%': needsEval,\n\t'%AsyncGeneratorFunction%': needsEval,\n\t'%AsyncIteratorPrototype%': needsEval,\n\t'%Atomics%': typeof Atomics === 'undefined' ? undefined : Atomics,\n\t'%BigInt%': typeof BigInt === 'undefined' ? undefined : BigInt,\n\t'%BigInt64Array%': typeof BigInt64Array === 'undefined' ? undefined : BigInt64Array,\n\t'%BigUint64Array%': typeof BigUint64Array === 'undefined' ? undefined : BigUint64Array,\n\t'%Boolean%': Boolean,\n\t'%DataView%': typeof DataView === 'undefined' ? undefined : DataView,\n\t'%Date%': Date,\n\t'%decodeURI%': decodeURI,\n\t'%decodeURIComponent%': decodeURIComponent,\n\t'%encodeURI%': encodeURI,\n\t'%encodeURIComponent%': encodeURIComponent,\n\t'%Error%': $Error,\n\t'%eval%': eval, // eslint-disable-line no-eval\n\t'%EvalError%': $EvalError,\n\t'%Float16Array%': typeof Float16Array === 'undefined' ? undefined : Float16Array,\n\t'%Float32Array%': typeof Float32Array === 'undefined' ? undefined : Float32Array,\n\t'%Float64Array%': typeof Float64Array === 'undefined' ? undefined : Float64Array,\n\t'%FinalizationRegistry%': typeof FinalizationRegistry === 'undefined' ? undefined : FinalizationRegistry,\n\t'%Function%': $Function,\n\t'%GeneratorFunction%': needsEval,\n\t'%Int8Array%': typeof Int8Array === 'undefined' ? undefined : Int8Array,\n\t'%Int16Array%': typeof Int16Array === 'undefined' ? undefined : Int16Array,\n\t'%Int32Array%': typeof Int32Array === 'undefined' ? undefined : Int32Array,\n\t'%isFinite%': isFinite,\n\t'%isNaN%': isNaN,\n\t'%IteratorPrototype%': hasSymbols && getProto ? getProto(getProto([][Symbol.iterator]())) : undefined,\n\t'%JSON%': typeof JSON === 'object' ? JSON : undefined,\n\t'%Map%': typeof Map === 'undefined' ? undefined : Map,\n\t'%MapIteratorPrototype%': typeof Map === 'undefined' || !hasSymbols || !getProto ? undefined : getProto(new Map()[Symbol.iterator]()),\n\t'%Math%': Math,\n\t'%Number%': Number,\n\t'%Object%': $Object,\n\t'%Object.getOwnPropertyDescriptor%': $gOPD,\n\t'%parseFloat%': parseFloat,\n\t'%parseInt%': parseInt,\n\t'%Promise%': typeof Promise === 'undefined' ? undefined : Promise,\n\t'%Proxy%': typeof Proxy === 'undefined' ? undefined : Proxy,\n\t'%RangeError%': $RangeError,\n\t'%ReferenceError%': $ReferenceError,\n\t'%Reflect%': typeof Reflect === 'undefined' ? undefined : Reflect,\n\t'%RegExp%': RegExp,\n\t'%Set%': typeof Set === 'undefined' ? undefined : Set,\n\t'%SetIteratorPrototype%': typeof Set === 'undefined' || !hasSymbols || !getProto ? undefined : getProto(new Set()[Symbol.iterator]()),\n\t'%SharedArrayBuffer%': typeof SharedArrayBuffer === 'undefined' ? undefined : SharedArrayBuffer,\n\t'%String%': String,\n\t'%StringIteratorPrototype%': hasSymbols && getProto ? getProto(''[Symbol.iterator]()) : undefined,\n\t'%Symbol%': hasSymbols ? Symbol : undefined,\n\t'%SyntaxError%': $SyntaxError,\n\t'%ThrowTypeError%': ThrowTypeError,\n\t'%TypedArray%': TypedArray,\n\t'%TypeError%': $TypeError,\n\t'%Uint8Array%': typeof Uint8Array === 'undefined' ? undefined : Uint8Array,\n\t'%Uint8ClampedArray%': typeof Uint8ClampedArray === 'undefined' ? undefined : Uint8ClampedArray,\n\t'%Uint16Array%': typeof Uint16Array === 'undefined' ? undefined : Uint16Array,\n\t'%Uint32Array%': typeof Uint32Array === 'undefined' ? undefined : Uint32Array,\n\t'%URIError%': $URIError,\n\t'%WeakMap%': typeof WeakMap === 'undefined' ? undefined : WeakMap,\n\t'%WeakRef%': typeof WeakRef === 'undefined' ? undefined : WeakRef,\n\t'%WeakSet%': typeof WeakSet === 'undefined' ? undefined : WeakSet,\n\n\t'%Function.prototype.call%': $call,\n\t'%Function.prototype.apply%': $apply,\n\t'%Object.defineProperty%': $defineProperty,\n\t'%Object.getPrototypeOf%': $ObjectGPO,\n\t'%Math.abs%': abs,\n\t'%Math.floor%': floor,\n\t'%Math.max%': max,\n\t'%Math.min%': min,\n\t'%Math.pow%': pow,\n\t'%Math.round%': round,\n\t'%Math.sign%': sign,\n\t'%Reflect.getPrototypeOf%': $ReflectGPO\n};\n\nif (getProto) {\n\ttry {\n\t\tnull.error; // eslint-disable-line no-unused-expressions\n\t} catch (e) {\n\t\t// https://github.com/tc39/proposal-shadowrealm/pull/384#issuecomment-1364264229\n\t\tvar errorProto = getProto(getProto(e));\n\t\tINTRINSICS['%Error.prototype%'] = errorProto;\n\t}\n}\n\nvar doEval = function doEval(name) {\n\tvar value;\n\tif (name === '%AsyncFunction%') {\n\t\tvalue = getEvalledConstructor('async function () {}');\n\t} else if (name === '%GeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('function* () {}');\n\t} else if (name === '%AsyncGeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('async function* () {}');\n\t} else if (name === '%AsyncGenerator%') {\n\t\tvar fn = doEval('%AsyncGeneratorFunction%');\n\t\tif (fn) {\n\t\t\tvalue = fn.prototype;\n\t\t}\n\t} else if (name === '%AsyncIteratorPrototype%') {\n\t\tvar gen = doEval('%AsyncGenerator%');\n\t\tif (gen && getProto) {\n\t\t\tvalue = getProto(gen.prototype);\n\t\t}\n\t}\n\n\tINTRINSICS[name] = value;\n\n\treturn value;\n};\n\nvar LEGACY_ALIASES = {\n\t__proto__: null,\n\t'%ArrayBufferPrototype%': ['ArrayBuffer', 'prototype'],\n\t'%ArrayPrototype%': ['Array', 'prototype'],\n\t'%ArrayProto_entries%': ['Array', 'prototype', 'entries'],\n\t'%ArrayProto_forEach%': ['Array', 'prototype', 'forEach'],\n\t'%ArrayProto_keys%': ['Array', 'prototype', 'keys'],\n\t'%ArrayProto_values%': ['Array', 'prototype', 'values'],\n\t'%AsyncFunctionPrototype%': ['AsyncFunction', 'prototype'],\n\t'%AsyncGenerator%': ['AsyncGeneratorFunction', 'prototype'],\n\t'%AsyncGeneratorPrototype%': ['AsyncGeneratorFunction', 'prototype', 'prototype'],\n\t'%BooleanPrototype%': ['Boolean', 'prototype'],\n\t'%DataViewPrototype%': ['DataView', 'prototype'],\n\t'%DatePrototype%': ['Date', 'prototype'],\n\t'%ErrorPrototype%': ['Error', 'prototype'],\n\t'%EvalErrorPrototype%': ['EvalError', 'prototype'],\n\t'%Float32ArrayPrototype%': ['Float32Array', 'prototype'],\n\t'%Float64ArrayPrototype%': ['Float64Array', 'prototype'],\n\t'%FunctionPrototype%': ['Function', 'prototype'],\n\t'%Generator%': ['GeneratorFunction', 'prototype'],\n\t'%GeneratorPrototype%': ['GeneratorFunction', 'prototype', 'prototype'],\n\t'%Int8ArrayPrototype%': ['Int8Array', 'prototype'],\n\t'%Int16ArrayPrototype%': ['Int16Array', 'prototype'],\n\t'%Int32ArrayPrototype%': ['Int32Array', 'prototype'],\n\t'%JSONParse%': ['JSON', 'parse'],\n\t'%JSONStringify%': ['JSON', 'stringify'],\n\t'%MapPrototype%': ['Map', 'prototype'],\n\t'%NumberPrototype%': ['Number', 'prototype'],\n\t'%ObjectPrototype%': ['Object', 'prototype'],\n\t'%ObjProto_toString%': ['Object', 'prototype', 'toString'],\n\t'%ObjProto_valueOf%': ['Object', 'prototype', 'valueOf'],\n\t'%PromisePrototype%': ['Promise', 'prototype'],\n\t'%PromiseProto_then%': ['Promise', 'prototype', 'then'],\n\t'%Promise_all%': ['Promise', 'all'],\n\t'%Promise_reject%': ['Promise', 'reject'],\n\t'%Promise_resolve%': ['Promise', 'resolve'],\n\t'%RangeErrorPrototype%': ['RangeError', 'prototype'],\n\t'%ReferenceErrorPrototype%': ['ReferenceError', 'prototype'],\n\t'%RegExpPrototype%': ['RegExp', 'prototype'],\n\t'%SetPrototype%': ['Set', 'prototype'],\n\t'%SharedArrayBufferPrototype%': ['SharedArrayBuffer', 'prototype'],\n\t'%StringPrototype%': ['String', 'prototype'],\n\t'%SymbolPrototype%': ['Symbol', 'prototype'],\n\t'%SyntaxErrorPrototype%': ['SyntaxError', 'prototype'],\n\t'%TypedArrayPrototype%': ['TypedArray', 'prototype'],\n\t'%TypeErrorPrototype%': ['TypeError', 'prototype'],\n\t'%Uint8ArrayPrototype%': ['Uint8Array', 'prototype'],\n\t'%Uint8ClampedArrayPrototype%': ['Uint8ClampedArray', 'prototype'],\n\t'%Uint16ArrayPrototype%': ['Uint16Array', 'prototype'],\n\t'%Uint32ArrayPrototype%': ['Uint32Array', 'prototype'],\n\t'%URIErrorPrototype%': ['URIError', 'prototype'],\n\t'%WeakMapPrototype%': ['WeakMap', 'prototype'],\n\t'%WeakSetPrototype%': ['WeakSet', 'prototype']\n};\n\nvar bind = require('function-bind');\nvar hasOwn = require('hasown');\nvar $concat = bind.call($call, Array.prototype.concat);\nvar $spliceApply = bind.call($apply, Array.prototype.splice);\nvar $replace = bind.call($call, String.prototype.replace);\nvar $strSlice = bind.call($call, String.prototype.slice);\nvar $exec = bind.call($call, RegExp.prototype.exec);\n\n/* adapted from https://github.com/lodash/lodash/blob/4.17.15/dist/lodash.js#L6735-L6744 */\nvar rePropName = /[^%.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|%$))/g;\nvar reEscapeChar = /\\\\(\\\\)?/g; /** Used to match backslashes in property paths. */\nvar stringToPath = function stringToPath(string) {\n\tvar first = $strSlice(string, 0, 1);\n\tvar last = $strSlice(string, -1);\n\tif (first === '%' && last !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected closing `%`');\n\t} else if (last === '%' && first !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected opening `%`');\n\t}\n\tvar result = [];\n\t$replace(string, rePropName, function (match, number, quote, subString) {\n\t\tresult[result.length] = quote ? $replace(subString, reEscapeChar, '$1') : number || match;\n\t});\n\treturn result;\n};\n/* end adaptation */\n\nvar getBaseIntrinsic = function getBaseIntrinsic(name, allowMissing) {\n\tvar intrinsicName = name;\n\tvar alias;\n\tif (hasOwn(LEGACY_ALIASES, intrinsicName)) {\n\t\talias = LEGACY_ALIASES[intrinsicName];\n\t\tintrinsicName = '%' + alias[0] + '%';\n\t}\n\n\tif (hasOwn(INTRINSICS, intrinsicName)) {\n\t\tvar value = INTRINSICS[intrinsicName];\n\t\tif (value === needsEval) {\n\t\t\tvalue = doEval(intrinsicName);\n\t\t}\n\t\tif (typeof value === 'undefined' && !allowMissing) {\n\t\t\tthrow new $TypeError('intrinsic ' + name + ' exists, but is not available. Please file an issue!');\n\t\t}\n\n\t\treturn {\n\t\t\talias: alias,\n\t\t\tname: intrinsicName,\n\t\t\tvalue: value\n\t\t};\n\t}\n\n\tthrow new $SyntaxError('intrinsic ' + name + ' does not exist!');\n};\n\nmodule.exports = function GetIntrinsic(name, allowMissing) {\n\tif (typeof name !== 'string' || name.length === 0) {\n\t\tthrow new $TypeError('intrinsic name must be a non-empty string');\n\t}\n\tif (arguments.length > 1 && typeof allowMissing !== 'boolean') {\n\t\tthrow new $TypeError('\"allowMissing\" argument must be a boolean');\n\t}\n\n\tif ($exec(/^%?[^%]*%?$/, name) === null) {\n\t\tthrow new $SyntaxError('`%` may not be present anywhere but at the beginning and end of the intrinsic name');\n\t}\n\tvar parts = stringToPath(name);\n\tvar intrinsicBaseName = parts.length > 0 ? parts[0] : '';\n\n\tvar intrinsic = getBaseIntrinsic('%' + intrinsicBaseName + '%', allowMissing);\n\tvar intrinsicRealName = intrinsic.name;\n\tvar value = intrinsic.value;\n\tvar skipFurtherCaching = false;\n\n\tvar alias = intrinsic.alias;\n\tif (alias) {\n\t\tintrinsicBaseName = alias[0];\n\t\t$spliceApply(parts, $concat([0, 1], alias));\n\t}\n\n\tfor (var i = 1, isOwn = true; i < parts.length; i += 1) {\n\t\tvar part = parts[i];\n\t\tvar first = $strSlice(part, 0, 1);\n\t\tvar last = $strSlice(part, -1);\n\t\tif (\n\t\t\t(\n\t\t\t\t(first === '\"' || first === \"'\" || first === '`')\n\t\t\t\t|| (last === '\"' || last === \"'\" || last === '`')\n\t\t\t)\n\t\t\t&& first !== last\n\t\t) {\n\t\t\tthrow new $SyntaxError('property names with quotes must have matching quotes');\n\t\t}\n\t\tif (part === 'constructor' || !isOwn) {\n\t\t\tskipFurtherCaching = true;\n\t\t}\n\n\t\tintrinsicBaseName += '.' + part;\n\t\tintrinsicRealName = '%' + intrinsicBaseName + '%';\n\n\t\tif (hasOwn(INTRINSICS, intrinsicRealName)) {\n\t\t\tvalue = INTRINSICS[intrinsicRealName];\n\t\t} else if (value != null) {\n\t\t\tif (!(part in value)) {\n\t\t\t\tif (!allowMissing) {\n\t\t\t\t\tthrow new $TypeError('base intrinsic for ' + name + ' exists, but the property is not available.');\n\t\t\t\t}\n\t\t\t\treturn void undefined;\n\t\t\t}\n\t\t\tif ($gOPD && (i + 1) >= parts.length) {\n\t\t\t\tvar desc = $gOPD(value, part);\n\t\t\t\tisOwn = !!desc;\n\n\t\t\t\t// By convention, when a data property is converted to an accessor\n\t\t\t\t// property to emulate a data property that does not suffer from\n\t\t\t\t// the override mistake, that accessor's getter is marked with\n\t\t\t\t// an `originalValue` property. Here, when we detect this, we\n\t\t\t\t// uphold the illusion by pretending to see that original data\n\t\t\t\t// property, i.e., returning the value rather than the getter\n\t\t\t\t// itself.\n\t\t\t\tif (isOwn && 'get' in desc && !('originalValue' in desc.get)) {\n\t\t\t\t\tvalue = desc.get;\n\t\t\t\t} else {\n\t\t\t\t\tvalue = value[part];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tisOwn = hasOwn(value, part);\n\t\t\t\tvalue = value[part];\n\t\t\t}\n\n\t\t\tif (isOwn && !skipFurtherCaching) {\n\t\t\t\tINTRINSICS[intrinsicRealName] = value;\n\t\t\t}\n\t\t}\n\t}\n\treturn value;\n};\n","'use strict';\n\nvar setFunctionLength = require('set-function-length');\n\nvar $defineProperty = require('es-define-property');\n\nvar callBindBasic = require('call-bind-apply-helpers');\nvar applyBind = require('call-bind-apply-helpers/applyBind');\n\nmodule.exports = function callBind(originalFunction) {\n\tvar func = callBindBasic(arguments);\n\tvar adjustedLength = originalFunction.length - (arguments.length - 1);\n\treturn setFunctionLength(\n\t\tfunc,\n\t\t1 + (adjustedLength > 0 ? adjustedLength : 0),\n\t\ttrue\n\t);\n};\n\nif ($defineProperty) {\n\t$defineProperty(module.exports, 'apply', { value: applyBind });\n} else {\n\tmodule.exports.apply = applyBind;\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnvRegex = /^$/;\n\nif (process.env.NODE_DEBUG) {\n  var debugEnv = process.env.NODE_DEBUG;\n  debugEnv = debugEnv.replace(/[|\\\\{}()[\\]^$+?.]/g, '\\\\$&')\n    .replace(/\\*/g, '.*')\n    .replace(/,/g, '$|^')\n    .toUpperCase();\n  debugEnvRegex = new RegExp('^' + debugEnv + '$', 'i');\n}\nexports.debuglog = function(set) {\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (debugEnvRegex.test(set)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').slice(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.slice(1, -1);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nexports.types = require('./support/types');\n\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\nexports.types.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\nexports.types.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\nexports.types.isNativeError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb.bind(null, null, ret)) },\n            function(rej) { process.nextTick(callbackifyOnRejected.bind(null, rej, cb)) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n","'use strict';\n\nvar $defineProperty = require('es-define-property');\n\nvar hasPropertyDescriptors = function hasPropertyDescriptors() {\n\treturn !!$defineProperty;\n};\n\nhasPropertyDescriptors.hasArrayLengthDefineBug = function hasArrayLengthDefineBug() {\n\t// node v0.6 has a bug where array lengths can be Set but not Defined\n\tif (!$defineProperty) {\n\t\treturn null;\n\t}\n\ttry {\n\t\treturn $defineProperty([], 'length', { value: 1 }).length !== 1;\n\t} catch (e) {\n\t\t// In Firefox 4-22, defining length on an array throws an exception.\n\t\treturn true;\n\t}\n};\n\nmodule.exports = hasPropertyDescriptors;\n","'use strict';\n\n/** @type {import('.')} */\nvar $defineProperty = Object.defineProperty || false;\nif ($defineProperty) {\n\ttry {\n\t\t$defineProperty({}, 'a', { value: 1 });\n\t} catch (e) {\n\t\t// IE 8 has a broken defineProperty\n\t\t$defineProperty = false;\n\t}\n}\n\nmodule.exports = $defineProperty;\n","const os = require('os');\nconst fs = require('fs');\nconst path = require('path');\n\nconst rbql = require('./rbql_core/rbql-js/rbql.js');\nconst rbql_csv = require('./rbql_core/rbql-js/rbql_csv.js');\nconst csv_utils = require('./rbql_core/rbql-js/csv_utils.js');\n\nconst fast_load_utils = require('./fast_load_utils.js');\n\nconst wcwidth = require('./contrib/wcwidth/index.js');\n\n// TODO Allow the number regex to end with dot e.g. 12. or 1245. without the fractional part.\n// Otherwise as soon as someone start typing a fractional part it immediately renders the whole column as non-number for live CSV editing.\nconst number_regex = /^([0-9]+)(\\.[0-9]+)?$/;\n\n// Copypasted from extension.js\nconst QUOTED_RFC_POLICY = 'quoted_rfc';\nconst QUOTED_POLICY = 'quoted';\nconst dynamic_csv_highlight_margin = 50; // TODO make configurable.\nconst max_preview_field_length = 250;\nconst alignment_extra_readability_whitespace_length = 1;\n\n\nclass AssertionError extends Error {}\n\nfunction assert(condition, message=null) {\n    if (!condition) {\n        if (!message) {\n            message = 'Assertion error';\n        }\n        throw new AssertionError(message);\n    }\n}\n\n\nfunction get_default_js_udf_content() {\n    let default_content = `// This file can be used to store RBQL UDFs. Example:\n    //\n    // function foo(value) {\n    //     return 'foo ' + String(value.length);\n    // }\n    //\n    // Functions defined in this file can be used in RBQL queries e.g.\n    // SELECT foo(a1), a2 WHERE foo(a3) != 'foo 5' LIMIT 10\n    //\n    // Don't forget to save this file after editing!\n    //\n    // Write your own functions below this line:\n    `.replace(new RegExp(/^  */, 'mg'), '');\n    return default_content;\n}\n\n\nfunction get_default_python_udf_content() {\n    let default_content = `# This file can be used to store RBQL UDFs. Example:\n    #\n    # def foo(value):\n    #     return 'foo ' + str(len(value))\n    #\n    #\n    # Functions defined in this file can be used in RBQL queries e.g.\n    # SELECT foo(a1), a2 WHERE foo(a3) != 'foo 5' LIMIT 10\n    #\n    # Don't forget to save this file after editing!\n    #\n    # Write your own functions below this line:\n    `.replace(new RegExp(/^  */, 'mg'), '');\n    return default_content;\n}\n\n\nfunction get_cursor_position_if_unambiguous(active_editor) {\n    let selections = active_editor.selections;\n    if (!selections || selections.length != 1) {\n        // Support only single-cursor, multicursor is ambiguous.\n        return null;\n    }\n    let selection = selections[0];\n    let position = selection.active;\n    if (!position.isEqual(selection.anchor)) {\n        // Selections are ambiguous.\n        return null;\n    }\n    return position;\n}\n\n\nfunction is_ascii(src_str) {\n    return /^[\\x00-\\x7F]*$/.test(src_str);\n}\n\n\nclass ColumnStat {\n    constructor(enable_double_width_alignment) {\n        this.enable_double_width_alignment = enable_double_width_alignment;\n        this.can_be_numeric = true;\n        this.max_total_length = 0;\n        this.max_int_length = 0;\n        this.max_fractional_length = 0;\n        this.only_ascii = enable_double_width_alignment ? true : null;\n        this.has_wide_chars = enable_double_width_alignment ? false : null;\n    }\n\n    mark_non_numeric() {\n        this.can_be_numeric = false;\n        this.max_int_length = 0;\n        this.max_fractional_length = 0;\n    }\n\n    is_numeric() {\n        return this.max_int_length > 0;\n    }\n\n    reconcile(rhs) {\n        this.max_total_length = Math.max(this.max_total_length, rhs.max_total_length);\n        if (this.enable_double_width_alignment) {\n            assert(rhs.enable_double_width_alignment, \"Unable to reconcile\");\n            this.only_ascii = this.only_ascii && rhs.only_ascii;\n            this.has_wide_chars = this.has_wide_chars || rhs.has_wide_chars;\n        }\n        if (!rhs.can_be_numeric) {\n            this.mark_non_numeric();\n        }\n        if (!this.can_be_numeric) {\n            return;\n        }\n        this.max_int_length = Math.max(this.max_int_length, rhs.max_int_length);\n        this.max_fractional_length = Math.max(this.max_fractional_length, rhs.max_fractional_length);\n    }\n\n    get_adjusted_total_length() {\n        // The sum of integer and float parts can be bigger than the max width, e.g. here:\n        // value\n        // 0.12\n        // 1234\n        return Math.max(this.max_total_length, this.max_int_length + this.max_fractional_length);\n    }\n\n    get_adjusted_int_length() {\n        // This is needed when the header is wider than numeric components and/or their sum.\n        return Math.max(this.max_int_length, this.max_total_length - this.max_fractional_length);\n    }\n\n    update_from_field(multiline_field_segments, is_first_record) {\n        if (multiline_field_segments.length > 1) {\n            // We don't allow multiline fields to be numeric for simplicity.\n            this.mark_non_numeric();\n        }\n        for (let field_segment of multiline_field_segments) {\n            this.max_total_length = Math.max(this.max_total_length, field_segment.length);\n            if (this.enable_double_width_alignment) {\n                this.only_ascii = this.only_ascii && is_ascii(field_segment);\n                let visual_field_length = this.only_ascii ? field_segment.length : wcwidth(field_segment);\n                this.has_wide_chars = this.has_wide_chars || visual_field_length != field_segment.length;\n                this.max_total_length = Math.max(this.max_total_length, visual_field_length);\n            }\n            if (!this.can_be_numeric) {\n                continue;\n            }\n            // TODO improve number_regex and subsequent logic to work with numeric fields with leading/trailing spaces for virtual alignment.\n            let match_result = number_regex.exec(field_segment);\n            if (match_result === null) {\n                if (!is_first_record && field_segment.length) { // Checking field_length here allows numeric columns to have some of the fields empty.\n                    // We only mark the column as non-numeric if we know that this is not a header line.\n                    this.mark_non_numeric();\n                }\n                continue;\n            }\n            let cur_integer_part_length = match_result[1].length;\n            this.max_int_length = Math.max(this.max_int_length, cur_integer_part_length);\n            let cur_fractional_part_length = match_result[2] === undefined ? 0 : match_result[2].length;\n            this.max_fractional_length = Math.max(this.max_fractional_length, cur_fractional_part_length);\n        }\n    }\n\n    evaluate_align_field(field, is_first_record, is_first_in_line, is_last_in_line) {\n        // Align field, use Math.max() to avoid negative delta_length which can happen theorethically due to async doc edit.\n        let visual_field_length = this.has_wide_chars ? wcwidth(field) : field.length;\n        let readability_gap = is_first_in_line ? 0 : alignment_extra_readability_whitespace_length; \n        if (!this.is_numeric()) {\n            let delta_length = Math.max(this.max_total_length - visual_field_length, 0);\n            let trailing_length = is_last_in_line ? 0 : delta_length;\n            return [readability_gap, trailing_length]\n        }\n        if (is_first_record) {\n            if (number_regex.exec(field) === null) {\n                // The line must be a header - align it using max_width rule.\n                let delta_length = Math.max(this.get_adjusted_total_length() - visual_field_length, 0);\n                let trailing_length = is_last_in_line ? 0 : delta_length;\n                return [readability_gap, trailing_length];\n            }\n        }\n        let dot_pos = field.indexOf('.');\n        let cur_integer_part_length = dot_pos == -1 ? field.length : dot_pos;\n        // Here `cur_fractional_part_length` includes the leading dot too.\n        let cur_fractional_part_length = dot_pos == -1 ? 0 : field.length - dot_pos;\n        let integer_delta_length = Math.max(this.get_adjusted_int_length() - cur_integer_part_length, 0);\n        let fractional_delta_length = Math.max(this.max_fractional_length - cur_fractional_part_length);\n        let trailing_length = is_last_in_line ? 0 : fractional_delta_length;\n        return [integer_delta_length + readability_gap, trailing_length];\n    }\n\n}\n\n\nfunction update_column_stats_from_record(record_fields, is_first_record, all_columns_stats, enable_double_width_alignment) {\n    for (let fnum = 0; fnum < record_fields.length; fnum++) {\n        if (all_columns_stats.length <= fnum) {\n            all_columns_stats.push(new ColumnStat(enable_double_width_alignment));\n        }\n        all_columns_stats[fnum].update_from_field(record_fields[fnum], is_first_record);\n    }\n}\n\n\nfunction get_trimmed_rfc_record_fields_from_record(record) {\n    let record_fields = [];\n    for (let fnum = 0; fnum < record.length; fnum++) {\n        let field_segments = record[fnum].split('\\n');\n        field_segments = field_segments.map(v => v.trim());\n        record_fields.push(field_segments);\n    }\n    return record_fields;\n}\n\n\nfunction calculate_column_offsets(column_stats, delim_length) {\n    let result = [];\n    if (!column_stats.length) {\n        return result;\n    }\n    result.push(0);\n    for (let i = 1; i < column_stats.length; i++) {\n        let previous_length = column_stats[i - 1].get_adjusted_total_length();\n        let previous_offset = result[i - 1];\n        result.push(previous_offset + previous_length + delim_length + alignment_extra_readability_whitespace_length);\n    }\n    assert(result.length == column_stats.length);\n    return result;\n}\n\n\nfunction calc_column_stats(active_doc, delim, policy, comment_prefix, enable_double_width_alignment) {\n    let [records, _num_records_parsed, _fields_info, first_defective_line, _first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/-1, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/true);\n    if (first_defective_line !== null) {\n        return [null, first_defective_line + 1, null, null];\n    }\n    let all_columns_stats = [];\n    let is_first_record = true;\n    for (let record of records) {\n        // TODO for optimization we can actually return a new array of record_fields to avoid doing the same thing again in align.\n        let record_fields = get_trimmed_rfc_record_fields_from_record(record);\n        update_column_stats_from_record(record_fields, is_first_record, all_columns_stats, enable_double_width_alignment);\n        is_first_record = false;\n    }\n    return [all_columns_stats, null, records, comments];\n}\n\n\nfunction calc_column_stats_for_fragment(row_infos, enable_double_width_alignment) {\n    let all_columns_stats = [];\n    let is_first_record = true;\n    for (let row_info of row_infos) {\n        if (row_info.comment_range !== null) {\n            continue;\n        }\n        // The is_first_record check below is flawed because header might be preceeded by some comment lines, but failure here is not a big deal since this is a local alignment anyway.\n        is_first_record = is_first_record && row_info.record_ranges.length && row_info.record_ranges[0].length && row_info.record_ranges[0][0].start.line == 0;\n        update_column_stats_from_record(row_info.record_fields, is_first_record, all_columns_stats, enable_double_width_alignment);\n        is_first_record = false;\n    }\n    return all_columns_stats;\n}\n\n\nfunction reconcile_whole_doc_and_local_column_stats(whole_doc_column_stats, local_column_stats) {\n    let max_num_fields = Math.max(whole_doc_column_stats.length, local_column_stats.length);\n    for (let i = 0; i < max_num_fields; i++) {\n        if (i >= whole_doc_column_stats.length) {\n            break;\n        }\n        if (i >= local_column_stats.length) {\n            local_column_stats.push(whole_doc_column_stats[i]);\n            continue;\n        }\n        local_column_stats[i].reconcile(whole_doc_column_stats[i]);\n    }\n}\n\n\nfunction evaluate_rfc_align_field(field, is_first_record, column_stat, column_offset, is_field_segment, is_first_in_line, is_last_in_line) {\n    let [num_before, num_after] = column_stat.evaluate_align_field(field, is_first_record, is_first_in_line, is_last_in_line);\n    if (is_field_segment) {\n        num_before += column_offset;\n    }\n    return [num_before, num_after];\n}\n\n\nfunction rfc_align_field(field, is_first_record, column_stat, column_offset, is_field_segment, is_first_in_line, is_last_in_line) {\n    let [num_before, num_after] = evaluate_rfc_align_field(field, is_first_record, column_stat, column_offset,  is_field_segment, is_first_in_line, is_last_in_line);\n    return ' '.repeat(num_before) + field + ' '.repeat(num_after);\n}\n\n\nclass RecordCommentMerger {\n    constructor(records, comments) {\n        this.records = records;\n        this.comments = comments;\n        this.nr = 0;\n        this.next_comment = 0;\n    }\n\n    get_next() {\n        // Returns tuple (record, comment).\n        if (this.has_comments_left() && (!this.has_records_left() || this.comments[this.next_comment].record_num <= this.nr)) {\n            let result = [null, this.comments[this.next_comment].comment_text];\n            this.next_comment += 1;\n            return result;\n        }\n        if (this.has_records_left()) {\n            let result = [this.records[this.nr], null];\n            this.nr += 1;\n            return result;\n        }\n        return [null, null];\n    }\n\n    has_comments_left() {\n        return this.next_comment < this.comments.length;\n    }\n\n    has_records_left() {\n        return this.nr < this.records.length;\n    }\n\n    has_entries_left() {\n        return this.has_comments_left() || this.has_records_left();\n    }\n}\n\n\nfunction generate_inlay_hints(vscode, table_ranges, all_columns_stats, delim_length, alignment_char, enable_vertical_grid) {\n    assert(alignment_char.length == 1);\n    let column_offsets = calculate_column_offsets(all_columns_stats, delim_length);\n    let inlay_hints = [];\n    let is_first_record = true;\n    for (let row_info of table_ranges) {\n        if (row_info.comment_range !== null) {\n            continue;\n        }\n        // The is_first_record check below is flawed because header might be preceeded by some comment lines, but failure here is not a big deal since this is a local alignment anyway.\n        is_first_record = is_first_record && row_info.record_ranges.length && row_info.record_ranges[0].length && row_info.record_ranges[0][0].start.line == 0;\n        if (row_info.record_fields.length != row_info.record_ranges.length) {\n            break; // Should never happen.\n        }\n        for (let fnum = 0; fnum < row_info.record_fields.length; fnum++) {\n            if (fnum >= all_columns_stats.length) {\n                break; // Should never happen.\n            }\n            let is_last_field = fnum + 1 == row_info.record_fields.length;\n            let field_segments = row_info.record_fields[fnum];\n            let field_segments_ranges = row_info.record_ranges[fnum];\n            if (field_segments.length != field_segments_ranges.length) {\n                break; // Should never happen.\n            }\n            for (let i = 0; i < field_segments.length; i++) {\n                let field_segment_range = field_segments_ranges[i];\n                let is_field_segment = i > 0;\n                let is_last_in_line = is_last_field || i + 1 < field_segments.length;\n                let is_first_in_line = (fnum == 0) || is_field_segment;\n                let [num_before, num_after] = evaluate_rfc_align_field(field_segments[i], is_first_record, all_columns_stats[fnum], column_offsets[fnum], is_field_segment, is_first_in_line, is_last_in_line);\n                if (num_before > 0) {\n                    let hint_label = ''\n                    if (!enable_vertical_grid || is_field_segment) {\n                        hint_label += alignment_char.repeat(num_before);\n                    } else {\n                        // FIXME find a way to \"draw\" vertical grid by extending hints for multiline rfc fields. Add a screenshot to README when implemented.\n                        hint_label = '\\u2588';\n                        hint_label += alignment_char.repeat(num_before - 1);\n                    }\n                    inlay_hints.push(new vscode.InlayHint(field_segment_range.start, hint_label));\n                }\n                if (num_after > 0) {\n                    let hint_label = alignment_char.repeat(num_after);\n                    inlay_hints.push(new vscode.InlayHint(field_segment_range.end, hint_label));\n                }\n            }\n        }\n        is_first_record = false;\n    }\n    return inlay_hints;\n}\n\n\n\nfunction align_columns(records, comments, column_stats, delim) {\n    // Unlike shrink_columns, here we don't compute `has_edit` flag because it is\n    // 1: Algorithmically complicated (especially for multiline fields) and we also can't just compare fields lengths like in shrink.\n    // 2: The alignment procedure is opinionated and \"Already aligned\" report has little value.\n    // Because of this in case of executing \"Align\" command consecutively N times one would have to run undo N times too.\n    // Here records do not contain delim and column_stats were calculated without taking the delim length into account.\n    let column_offsets = calculate_column_offsets(column_stats, delim.length);\n    let result_lines = [];\n    let is_first_record = true;\n    let merger = new RecordCommentMerger(records, comments);\n    while (merger.has_entries_left()) {\n        let [record, comment] = merger.get_next();\n        assert((comment === null) != (record === null));\n        if (record === null) {\n            result_lines.push(comment);\n            continue;\n        }\n        let aligned_fields = [];\n        let record_fields = get_trimmed_rfc_record_fields_from_record(record);\n        for (let fnum = 0; fnum < record_fields.length; fnum++) {\n            if (fnum >= column_stats.length) // Safeguard against async doc edit, should never happen.\n                break;\n            let is_last_field = fnum + 1 == record_fields.length;\n            let field_segments = record_fields[fnum];\n            for (let i = 0; i < field_segments.length; i++) {\n                let is_field_segment = i > 0;\n                if (is_field_segment) {\n                    result_lines.push(aligned_fields.join(delim));\n                    aligned_fields = [];\n                }\n                let is_last_in_line = is_last_field || i + 1 < field_segments.length;\n                let is_first_in_line = (fnum == 0) || is_field_segment;\n                let aligned_field = rfc_align_field(field_segments[i], is_first_record, column_stats[fnum], column_offsets[fnum], is_field_segment, is_first_in_line, is_last_in_line);\n                aligned_fields.push(aligned_field);\n            }\n        }\n        is_first_record = false;\n        result_lines.push(aligned_fields.join(delim));\n    }\n    return result_lines.join('\\n');\n}\n\n\nfunction shrink_columns(active_doc, delim, policy, comment_prefix) {\n    let [records, _num_records_parsed, _fields_info, first_defective_line, _first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/-1, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/true);\n    if (first_defective_line !== null) {\n        return [null, first_defective_line + 1];\n    }\n    let result_lines = [];\n    let has_edit = false;\n    let merger = new RecordCommentMerger(records, comments);\n    while (merger.has_entries_left()) {\n        let [record, comment] = merger.get_next();\n        assert((comment === null) != (record === null));\n        if (record === null) {\n            result_lines.push(comment);\n            continue;\n        }\n        let aligned_fields = [];\n        for (let fnum = 0; fnum < record.length; fnum++) {\n            let field = record[fnum];\n            let field_lines = field.split('\\n');\n            for (let i = 0; i < field_lines.length; i++) {\n                if (i > 0) {\n                    result_lines.push(aligned_fields.join(delim));\n                    aligned_fields = [];\n                }\n                let aligned_field = field_lines[i].trim();\n                if (aligned_field.length != field_lines[i].length) {\n                    // Unlike in align function here we can just compare resulting length to decide if change has occured.\n                    has_edit = true;\n                }\n                aligned_fields.push(aligned_field);\n            }\n        }\n        result_lines.push(aligned_fields.join(delim));\n    }\n    if (!has_edit)\n        return [null, null];\n    return [result_lines.join('\\n'), null];\n}\n\n\nfunction make_table_name_key(file_path) {\n    return 'rbql_table_name:' + file_path;\n}\n\n\nfunction expanduser(filepath) {\n    if (filepath.charAt(0) === '~') {\n        return path.join(os.homedir(), filepath.slice(1));\n    }\n    return filepath;\n}\n\n\nfunction find_table_path(vscode_global_state, main_table_dir, table_id) {\n    // If table_id is a relative path it could be relative either to the current directory or to the main table dir.\n    var candidate_path = expanduser(table_id);\n    if (fs.existsSync(candidate_path)) {\n        return candidate_path;\n    }\n    if (main_table_dir && !path.isAbsolute(candidate_path)) {\n        candidate_path = path.join(main_table_dir, candidate_path);\n        if (fs.existsSync(candidate_path)) {\n            return candidate_path;\n        }\n    }\n    let table_path = vscode_global_state ? vscode_global_state.get(make_table_name_key(table_id)) : null;\n    if (table_path && fs.existsSync(table_path)) {\n        return table_path;\n    }\n    return null;\n}\n\n\nasync function read_header(table_path, encoding) {\n    if (encoding == 'latin-1')\n        encoding = 'binary';\n    let readline = require('readline');\n    let input_reader = readline.createInterface({ input: fs.createReadStream(table_path, {encoding: encoding}) });\n    let closed = false;\n    let promise_resolve = null;\n    let promise_reject = null;\n    let output_promise = new Promise(function(resolve, reject) {\n        promise_resolve = resolve;\n        promise_reject = reject;\n    });\n    input_reader.on('line', line => {\n        if (!closed) {\n            closed = true;\n            input_reader.close();\n            promise_resolve(line);\n        }\n    });\n    input_reader.on('error', error => {\n        promise_reject(error);\n    });\n    return output_promise;\n}\n\n\nfunction get_header_line(document, comment_prefix) {\n    const num_lines = document.lineCount;\n    for (let lnum = 0; lnum < num_lines; ++lnum) {\n        const line_text = document.lineAt(lnum).text;\n        if (!comment_prefix || !line_text.startsWith(comment_prefix)) {\n            return [lnum, line_text];\n        }\n    }\n    return [null, null];\n}\n\n\nfunction make_inconsistent_num_fields_warning(table_name, inconsistent_records_info) {\n    let [record_num_1, num_fields_1, record_num_2, num_fields_2] = rbql.sample_first_two_inconsistent_records(inconsistent_records_info);\n    let warn_msg = `Number of fields in \"${table_name}\" table is not consistent: `;\n    warn_msg += `e.g. record ${record_num_1 + 1} -> ${num_fields_1} fields, record ${record_num_2 + 1} -> ${num_fields_2} fields`;\n    return warn_msg;\n}\n\n\nclass RbqlIOHandlingError extends Error {}\n\nclass VSCodeRecordIterator extends rbql.RBQLInputIterator {\n    constructor(document, delim, policy, has_header=false, comment_prefix=null, table_name='input', variable_prefix='a') {\n        // We could have done a hack here actually: convert the document to stream/buffer and then use the standard reader.\n        super();\n        this.has_header = has_header;\n        this.table_name = table_name;\n        this.variable_prefix = variable_prefix;\n        this.NR = 0; // Record number.\n        this.NL = 0; // Line number (NL != NR when the CSV file has comments or multiline fields).\n        let fail_on_warning = policy == 'quoted_rfc';\n        let [_num_records_parsed, _comments] = [null, null];\n        [this.records, _num_records_parsed, this.fields_info, this.first_defective_line, this._first_trailing_space_line, _comments] = fast_load_utils.parse_document_records(document, delim, policy, comment_prefix, fail_on_warning);\n        if (fail_on_warning && this.first_defective_line !== null) {\n            throw new RbqlIOHandlingError(`Inconsistent double quote escaping in ${this.table_name} table at record ${this.records.length}, line ${this.first_defective_line}`);\n        }\n        this.first_record = this.records.length ? this.records[0] : [];\n        this.next_record_index = 0;\n    }\n\n    stop() {\n    }\n\n    async get_variables_map(query_text) {\n        let variable_map = new Object();\n        rbql.parse_basic_variables(query_text, this.variable_prefix, variable_map);\n        rbql.parse_array_variables(query_text, this.variable_prefix, variable_map);\n        if (this.has_header) {\n            rbql.parse_attribute_variables(query_text, this.variable_prefix, this.first_record, 'CSV header line', variable_map);\n            rbql.parse_dictionary_variables(query_text, this.variable_prefix, this.first_record, variable_map);\n        }\n        return variable_map;\n    }\n\n    async get_header() {\n        return this.has_header ? this.first_record : null;\n    }\n\n    do_get_record() {\n        if (this.next_record_index >= this.records.length) {\n            return null;\n        }\n        let record = this.records[this.next_record_index];\n        this.next_record_index += 1;\n        return record;\n    }\n\n    async get_record() {\n        if (this.NR == 0 && this.has_header) {\n            this.do_get_record(); // Skip the header record.\n        }\n        this.NR += 1;\n        let record = this.do_get_record();\n        return record;\n    }\n\n    get_warnings() {\n        let result = [];\n        if (this.first_defective_line !== null)\n            result.push(`Inconsistent double quote escaping in ${this.table_name} table. E.g. at line ${this.first_defective_line}`);\n        if (this.fields_info.size > 1)\n            result.push(make_inconsistent_num_fields_warning(this.table_name, this.fields_info));\n        return result;\n    }\n}\n\n\nclass VSCodeWriter extends rbql.RBQLOutputWriter {\n    constructor(delim, policy) {\n        super();\n        this.delim = delim;\n        this.policy = policy;\n        this.header_len = null;\n        this.null_in_output = false;\n        this.delim_in_simple_output = false;\n        this.output_lines = [];\n\n        if (policy == 'simple') {\n            this.polymorphic_join = this.simple_join;\n        } else if (policy == 'quoted') {\n            this.polymorphic_join = this.quoted_join;\n        } else if (policy == 'quoted_rfc') {\n            this.polymorphic_join = this.quoted_join_rfc;\n        } else if (policy == 'monocolumn') {\n            this.polymorphic_join = this.mono_join;\n        } else if (policy == 'whitespace') {\n            this.polymorphic_join = this.simple_join;\n        } else {\n            throw new RbqlIOHandlingError('Unknown output csv policy');\n        }\n    }\n\n    set_header(header) {\n        if (header !== null) {\n            this.header_len = header.length;\n            this.write(header);\n        }\n    }\n\n    quoted_join(fields) {\n        let delim = this.delim;\n        var quoted_fields = fields.map(function(v) { return csv_utils.quote_field(String(v), delim); });\n        return quoted_fields.join(this.delim);\n    };\n\n\n    quoted_join_rfc(fields) {\n        let delim = this.delim;\n        var quoted_fields = fields.map(function(v) { return csv_utils.rfc_quote_field(String(v), delim); });\n        return quoted_fields.join(this.delim);\n    };\n\n\n    mono_join(fields) {\n        if (fields.length > 1) {\n            throw new RbqlIOHandlingError('Unable to use \"Monocolumn\" output format: some records have more than one field');\n        }\n        return fields[0];\n    };\n\n\n    simple_join(fields) {\n        var res = fields.join(this.delim);\n        if (fields.join('').indexOf(this.delim) != -1) {\n            this.delim_in_simple_output = true;\n        }\n        return res;\n    };\n\n\n    normalize_fields(out_fields) {\n        for (var i = 0; i < out_fields.length; i++) {\n            if (out_fields[i] == null) {\n                this.null_in_output = true;\n                out_fields[i] = '';\n            } else if (Array.isArray(out_fields[i])) {\n                this.normalize_fields(out_fields[i]);\n                out_fields[i] = out_fields[i].join(this.sub_array_delim);\n            }\n        }\n    };\n\n\n    write(fields) {\n        if (this.header_len !== null && fields.length != this.header_len)\n            throw new RbqlIOHandlingError(`Inconsistent number of columns in output header and the current record: ${this.header_len} != ${fields.length}`);\n        this.normalize_fields(fields);\n        this.output_lines.push(this.polymorphic_join(fields));\n        return true;\n    };\n\n    async finish() {\n    }\n\n    get_warnings() {\n        let result = [];\n        if (this.null_in_output)\n            result.push('null values in output were replaced by empty strings');\n        if (this.delim_in_simple_output)\n            result.push('Some output fields contain separator');\n        return result;\n    };\n}\n\nclass VSCodeTableRegistry {\n    constructor(){}\n\n    get_iterator_by_table_id(_table_id) {\n        throw new RbqlIOHandlingError(\"JOIN queries are currently not supported in vscode.dev web version.\");\n    }\n\n    get_warnings() {\n        return [];\n    };\n}\n\nasync function rbql_query_web(query_text, input_document, input_delim, input_policy, output_delim, output_policy, output_warnings, with_headers, comment_prefix=null) {\n    let user_init_code = ''; // TODO find a way to have init code.\n    let join_tables_registry = new VSCodeTableRegistry(); // TODO find a way to have join registry.\n    let input_iterator = new VSCodeRecordIterator(input_document, input_delim, input_policy, with_headers, comment_prefix);\n    let output_writer = new VSCodeWriter(output_delim, output_policy);\n    await rbql.query(query_text, input_iterator, output_writer, output_warnings, join_tables_registry, user_init_code);\n    return output_writer.output_lines;\n}\n\n\nclass VSCodeFileSystemCSVRegistry extends rbql.RBQLTableRegistry {\n    constructor(vscode_global_state, input_file_dir, delim, policy, encoding, has_header=false, comment_prefix=null, options=null) {\n        super();\n        this.vscode_global_state = vscode_global_state;\n        this.input_file_dir = input_file_dir;\n        this.delim = delim;\n        this.policy = policy;\n        this.encoding = encoding;\n        this.has_header = has_header;\n        this.comment_prefix = comment_prefix;\n        this.stream = null;\n        this.record_iterator = null;\n\n        this.options = options;\n        this.bulk_input_path = null;\n        this.table_path = null;\n    }\n\n    get_iterator_by_table_id(table_id) {\n        this.table_path = find_table_path(this.vscode_global_state, this.input_file_dir, table_id);\n        if (this.table_path === null) {\n            throw new RbqlIOHandlingError(`Unable to find join table \"${table_id}\"`);\n        }\n        if (this.options && this.options['bulk_read']) {\n            this.bulk_input_path = this.table_path;\n        } else {\n            this.stream = fs.createReadStream(this.table_path);\n        }\n        this.record_iterator = new rbql_csv.CSVRecordIterator(this.stream, this.bulk_input_path, this.encoding, this.delim, this.policy, this.has_header, this.comment_prefix, table_id, 'b');\n        return this.record_iterator;\n    };\n\n    get_warnings(output_warnings) {\n        if (this.record_iterator && this.has_header) {\n            output_warnings.push(`The first record in JOIN file ${path.basename(this.table_path)} was also treated as header (and skipped)`);\n        }\n    }\n}\n\n\nasync function rbql_query_node(vscode_global_state, query_text, input_path, input_delim, input_policy, output_path, output_delim, output_policy, csv_encoding, output_warnings, with_headers=false, comment_prefix=null, user_init_code='', options=null) {\n    let input_stream = null;\n    let bulk_input_path = null;\n    if (options && options['bulk_read'] && input_path) {\n        bulk_input_path = input_path;\n    } else {\n        input_stream = input_path === null ? process.stdin : fs.createReadStream(input_path);\n    }\n    let [output_stream, close_output_on_finish] = output_path === null ? [process.stdout, false] : [fs.createWriteStream(output_path), true];\n    if (input_delim == '\"' && input_policy == 'quoted')\n        throw new RbqlIOHandlingError('Double quote delimiter is incompatible with \"quoted\" policy');\n    if (csv_encoding == 'latin-1')\n        csv_encoding = 'binary';\n    if (!rbql_csv.is_ascii(query_text) && csv_encoding == 'binary')\n        throw new RbqlIOHandlingError('To use non-ascii characters in query enable UTF-8 encoding instead of latin-1/binary');\n    if ((!rbql_csv.is_ascii(input_delim) || !rbql_csv.is_ascii(output_delim)) && csv_encoding == 'binary')\n        throw new RbqlIOHandlingError('To use non-ascii characters in query enable UTF-8 encoding instead of latin-1/binary');\n\n    let default_init_source_path = path.join(os.homedir(), '.rbql_init_source.js');\n    if (user_init_code == '' && fs.existsSync(default_init_source_path)) {\n        user_init_code = rbql_csv.read_user_init_code(default_init_source_path);\n    }\n    let input_file_dir = input_path ? path.dirname(input_path) : null;\n    let join_tables_registry = new VSCodeFileSystemCSVRegistry(vscode_global_state, input_file_dir, input_delim, input_policy, csv_encoding, with_headers, comment_prefix, options);\n    let input_iterator = new rbql_csv.CSVRecordIterator(input_stream, bulk_input_path, csv_encoding, input_delim, input_policy, with_headers, comment_prefix);\n    let output_writer = new rbql_csv.CSVWriter(output_stream, close_output_on_finish, csv_encoding, output_delim, output_policy);\n\n    await rbql.query(query_text, input_iterator, output_writer, output_warnings, join_tables_registry, user_init_code);\n    join_tables_registry.get_warnings(output_warnings);\n}\n\n\nfunction make_multiline_row_info(vscode, delim_length, include_delim_length_in_ranges, newline_marker, fields, start_line, expected_end_line_for_control) {\n    // Semantic ranges in VSCode can't span multiple lines, so we use this workaround.\n    let record_ranges = [];\n    let record_fields = [];\n    let lnum_current = start_line;\n    let pos_in_editor_line = 0;\n    let next_pos_in_editor_line = 0;\n    for (let i = 0; i < fields.length; i++) {\n        let pos_in_multiline_field = 0;\n        // Group tokens belonging to the same logical field.\n        let multiline_field_singleline_ranges = [];\n        let multiline_field_singleline_components = [];\n        while (true) {\n            let newline_marker_pos = fields[i].indexOf(newline_marker, pos_in_multiline_field);\n            if (newline_marker_pos == -1)\n                break;\n            multiline_field_singleline_components.push(fields[i].substring(pos_in_multiline_field, newline_marker_pos));\n            multiline_field_singleline_ranges.push(new vscode.Range(lnum_current, pos_in_editor_line, lnum_current, pos_in_editor_line + newline_marker_pos - pos_in_multiline_field));\n            lnum_current += 1;\n            pos_in_editor_line = 0;\n            next_pos_in_editor_line = 0;\n            pos_in_multiline_field = newline_marker_pos + newline_marker.length;\n        }\n        next_pos_in_editor_line += fields[i].length - pos_in_multiline_field;\n        let current_range_end = next_pos_in_editor_line;\n        if (i + 1 < fields.length) {\n            next_pos_in_editor_line += delim_length;\n            if (include_delim_length_in_ranges) {\n                current_range_end = next_pos_in_editor_line;\n            }\n        }\n        // Note that `multiline_field_singleline_components` NEVER include the delim, while `multiline_field_singleline_ranges` COULD include the delim.\n        multiline_field_singleline_components.push(fields[i].substring(pos_in_multiline_field));\n        multiline_field_singleline_ranges.push(new vscode.Range(lnum_current, pos_in_editor_line, lnum_current, current_range_end));\n        record_fields.push(multiline_field_singleline_components);\n        record_ranges.push(multiline_field_singleline_ranges);\n        // From semantic tokenization perspective the end of token doesn't include the last character of vscode.Range i.e. it treats the range as [) interval, unlike the Range.contains() function which treats ranges as [] intervals.\n        pos_in_editor_line = next_pos_in_editor_line;\n    }\n    if (lnum_current != expected_end_line_for_control) {\n        return null;\n    }\n    return new RowInfo(record_ranges, record_fields, /*comment_prefix=*/null);\n}\n\n\nfunction is_opening_rfc_line(line_text, delim) {\n    // The line is oppening if by adding a character (to avoid accidental double double quote) and single double quote at the end we can make it parsable without warning!\n    // Some lines can be simultaneously opening and closing, e.g. `\",a1,a2` or `a1,a2,\"`\n    let [_record, warning] = csv_utils.split_quoted_str(line_text + 'x\"', delim);\n    return !warning;\n}\n\n\nclass RowInfo {\n    // TODO consider adding parsing_error_range.\n    constructor(record_ranges, record_fields, comment_range) {\n        this.record_ranges = record_ranges;\n        this.record_fields = record_fields;\n        this.comment_range = comment_range;\n    }\n}\n\n\nfunction parse_document_range_rfc(vscode, doc, delim, include_delim_length_in_ranges, comment_prefix, range, custom_parsing_margin=null) {\n    if (custom_parsing_margin === null) {\n        custom_parsing_margin = dynamic_csv_highlight_margin;\n    }\n    let begin_line = Math.max(0, range.start.line - custom_parsing_margin);\n    let end_line = Math.min(doc.lineCount, range.end.line + custom_parsing_margin);\n    let table_ranges = [];\n    let line_aggregator = new csv_utils.MultilineRecordAggregator(comment_prefix);\n    // The first or the second line in range with an odd number of double quotes is a start line, after finding it we can use the standard parsing algorithm.\n    for (let lnum = begin_line; lnum < end_line; lnum++) {\n        let line_text = doc.lineAt(lnum).text;\n        if (lnum + 1 == doc.lineCount && !line_text)\n            break;\n        let inside_multiline_record_before = line_aggregator.is_inside_multiline_record();\n        let start_line = lnum - line_aggregator.get_num_lines_in_record();\n        line_aggregator.add_line(line_text);\n        let inside_multiline_record_after = line_aggregator.is_inside_multiline_record();\n        if (!inside_multiline_record_before && inside_multiline_record_after) {\n            // Must be an odd-num line, check if this is an openning line - otherwise reset ranges.\n            if (!is_opening_rfc_line(line_text, delim)) {\n                table_ranges = [];\n                line_aggregator.reset();\n            }\n        }\n        if (line_aggregator.has_comment_line) {\n            let comment_range = new vscode.Range(lnum, 0, lnum, line_text.length);\n            table_ranges.push(new RowInfo(/*record_ranges=*/null, /*record_fields=*/null, comment_range));\n            line_aggregator.reset();\n        } else if (line_aggregator.has_full_record) {\n            const newline_marker = '\\r\\n'; // Use '\\r\\n' here to guarantee that this sequence is not present anywhere in the lines themselves. We also compare expected_end_line_for_control at the end.\n            let combined_line = line_aggregator.get_full_line(newline_marker);\n            line_aggregator.reset();\n            let [fields, warning] = csv_utils.smart_split(combined_line, delim, QUOTED_POLICY, /*preserve_quotes_and_whitespaces=*/true);\n            if (!warning) {\n                let row_info = make_multiline_row_info(vscode, delim.length, include_delim_length_in_ranges, newline_marker, fields, start_line, /*expected_end_line_for_control=*/lnum);\n                if (row_info !== null) {\n                    // If row_info is null it means that `expected_end_line_for_control` doesn't match and something went very wrong with the newline_marker join workaround.\n                    table_ranges.push(row_info);\n                }\n            }\n        }\n    }\n    return table_ranges;\n}\n\n\nfunction parse_document_range_single_line(vscode, doc, delim, include_delim_length_in_ranges, policy, comment_prefix, range, custom_parsing_margin=null) {\n    if (custom_parsing_margin === null) {\n        custom_parsing_margin = dynamic_csv_highlight_margin;\n    }\n    let table_ranges = [];\n    let begin_line = Math.max(0, range.start.line - custom_parsing_margin);\n    let end_line = Math.min(doc.lineCount, range.end.line + custom_parsing_margin);\n    for (let lnum = begin_line; lnum < end_line; lnum++) {\n        let record_ranges = [];\n        let record_fields = [];\n        let line_text = doc.lineAt(lnum).text;\n        if (lnum + 1 == doc.lineCount && !line_text)\n            break;\n        if (comment_prefix && line_text.startsWith(comment_prefix)) {\n            let comment_range = new vscode.Range(lnum, 0, lnum, line_text.length);\n            table_ranges.push(new RowInfo(/*record_ranges=*/null, /*record_fields=*/null, comment_range));\n            continue;\n        }\n        let [fields, warning] = csv_utils.smart_split(line_text, delim, policy, /*preserve_quotes_and_whitespaces=*/true);\n        if (warning) {\n            // Just skip the faulty line. It is OK to do for all existing use cases of this function.\n            continue;\n        }\n        let cpos = 0;\n        let next_cpos = 0;\n        for (let i = 0; i < fields.length; i++) {\n            next_cpos += fields[i].length;\n            let current_range_end = next_cpos;\n            if (i + 1 < fields.length) {\n                next_cpos += delim.length;\n                if (include_delim_length_in_ranges) {\n                    current_range_end = next_cpos;\n                }\n            }\n            // Note that `record_fields` NEVER include the delim, while `record_ranges` COULD include the delim.\n            record_fields.push([fields[i]]);\n            record_ranges.push([new vscode.Range(lnum, cpos, lnum, current_range_end)]);\n            // From semantic tokenization perspective the end of token doesn't include the last character of vscode.Range i.e. it treats the range as [) interval, unlike the Range.contains() function which treats ranges as [] intervals.\n            cpos = next_cpos;\n        }\n        table_ranges.push(new RowInfo(record_ranges, record_fields, /*comment_range=*/null));\n    }\n    return table_ranges;\n}\n\n\nfunction parse_document_range(vscode, doc, delim, include_delim_length_in_ranges, policy, comment_prefix, range) {\n    // A single field can contain multiple ranges if it spans multiple lines.\n    // A generic example for an rfc file:\n    // [\n    //     record_ranges: [[field_1_range_1, field_1_range_2, ... ,field_1_range_n], ... [field_n_range_1]]\n    //     ...\n    //     record_ranges: [[field_1_range_1], ..., [field_n_range_1]]\n    // ]\n    // There is no warning returned because on parsing failure it would just return a partial range.\n    if (policy == QUOTED_RFC_POLICY) {\n        return parse_document_range_rfc(vscode, doc, delim, include_delim_length_in_ranges, comment_prefix, range);\n    } else {\n        return parse_document_range_single_line(vscode, doc, delim, include_delim_length_in_ranges, policy, comment_prefix, range);\n    }\n}\n\n\nfunction get_field_by_line_position(fields, delim_length, query_pos) {\n    if (!fields.length)\n        return null;\n    var col_num = 0;\n    var cpos = fields[col_num].length + delim_length;\n    while (query_pos > cpos && col_num + 1 < fields.length) {\n        col_num += 1;\n        cpos = cpos + fields[col_num].length + delim_length;\n    }\n    return col_num;\n}\n\n\nfunction get_cursor_position_info_rfc(vscode, document, delim, comment_prefix, position) {\n    const hover_parse_margin = 20;\n    let range = new vscode.Range(Math.max(position.line - hover_parse_margin, 0), 0, position.line + hover_parse_margin, 0);\n    let table_ranges = parse_document_range_rfc(vscode, document, delim, /*include_delim_length_in_ranges=*/true, comment_prefix, range);\n    let last_found_position_info = null; // Use last found instead of first found because cursor position at the border can belong to two ranges simultaneously.\n    for (let row_info of table_ranges) {\n        if (row_info.comment_range !== null) {\n            if (row_info.comment_range.contains(position)) {\n                last_found_position_info = {is_comment: true};\n            }\n        } else {\n            for (let col_num = 0; col_num < row_info.record_ranges.length; col_num++) {\n                // One logical field can map to multiple ranges if it spans multiple lines.\n                for (let record_range of row_info.record_ranges[col_num]) {\n                    if (record_range.contains(position)) {\n                        last_found_position_info = {column_number: col_num, total_columns: row_info.record_ranges.length, split_warning: false};\n                    }\n                }\n            }\n        }\n    }\n    return last_found_position_info;\n}\n\n\nfunction get_cursor_position_info_standard(document, delim, policy, comment_prefix, position) {\n    var lnum = position.line;\n    var cnum = position.character;\n    var line = document.lineAt(lnum).text;\n\n    if (comment_prefix && line.startsWith(comment_prefix))\n        return {is_comment: true};\n\n    let [entries, warning] = csv_utils.smart_split(line, delim, policy, true);\n    var col_num = get_field_by_line_position(entries, delim.length, cnum + 1);\n    if (col_num == null)\n        return null;\n    return {column_number: col_num, total_columns: entries.length, split_warning: warning};\n}\n\n\nfunction get_cursor_position_info(vscode, document, delim, policy, comment_prefix, position) {\n    if (policy === null)\n        return null;\n    if (policy == QUOTED_RFC_POLICY) {\n        return get_cursor_position_info_rfc(vscode, document, delim, comment_prefix, position);\n    } else {\n        return get_cursor_position_info_standard(document, delim, policy, comment_prefix, position);\n    }\n}\n\n\nfunction format_cursor_position_info(cursor_position_info, header, show_column_names, show_comments, max_label_length) {\n    if (cursor_position_info.is_comment) {\n        if (show_comments) {\n            return ['Comment', 'Comment'];\n        } else {\n            return [null, null];\n        }\n    }\n    let short_report = 'Col ' + (cursor_position_info.column_number + 1);\n    let full_report = '[Rainbow CSV] ' + short_report;\n    if (show_column_names && cursor_position_info.column_number < header.length) {\n        let column_label = header[cursor_position_info.column_number].trim();\n        let short_column_label = column_label.substr(0, max_label_length);\n        if (short_column_label != column_label)\n            short_column_label = short_column_label + '...';\n        short_report += ': ' + short_column_label;\n        full_report += ': ' + column_label;\n    }\n    if (cursor_position_info.split_warning) {\n        full_report += '; ERR: Inconsistent double quotes in line';\n    } else if (header.length != cursor_position_info.total_columns) {\n        full_report += `; WARN: Inconsistent num of fields, header: ${header.length}, this line: ${cursor_position_info.total_columns}`;\n    }\n    return [full_report, short_report];\n}\n\n\nfunction sample_records(document, delim, policy, comment_prefix, end_record, preview_window_size, stop_on_warning, cached_table_parse_result) {\n    let records = [];\n    let first_failed_line = null;\n    let vscode_doc_version = null;\n    let [_num_records_parsed, _fields_info, _first_trailing_space_line, _comments] = [null, null, null, null];\n    // Here `preview_window_size` is typically 100.\n    if (end_record < preview_window_size * 5) {\n        // Re-sample the records. Re-sampling top records is fast and it ensures that all manual changes are mirrored into RBQL console.\n        [records, _num_records_parsed, _fields_info, first_failed_line, _first_trailing_space_line, _comments] = fast_load_utils.parse_document_records(document, delim, policy, comment_prefix, stop_on_warning, /*max_records_to_parse=*/end_record, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/false);\n    } else {\n        let need_full_doc_parse = true;\n        if (cached_table_parse_result.has(document.fileName)) {\n            [records, first_failed_line, vscode_doc_version] = cached_table_parse_result.get(document.fileName);\n            if (document.version === vscode_doc_version) {\n                need_full_doc_parse = false;\n            }\n        }\n        if (need_full_doc_parse) {\n            let [records, _num_records_parsed, _fields_info, first_failed_line, _first_trailing_space_line, _comments] = fast_load_utils.parse_document_records(document, delim, policy, comment_prefix, stop_on_warning, /*max_records_to_parse=*/-1, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/false);\n            cached_table_parse_result.set(document.fileName, [records, first_failed_line, document.version]);\n        }\n        [records, first_failed_line, vscode_doc_version] = cached_table_parse_result.get(document.fileName);\n    }\n    return [records, first_failed_line];\n}\n\n\nfunction sample_preview_records_from_context(rbql_context, dst_message, preview_window_size, cached_table_parse_result) {\n    let [document, delim, policy, comment_prefix] = [rbql_context.input_document, rbql_context.delim, rbql_context.policy, rbql_context.comment_prefix];\n    rbql_context.requested_start_record = Math.max(rbql_context.requested_start_record, 0);\n    let stop_on_warning = policy == QUOTED_RFC_POLICY;\n    let [records, first_failed_line] = sample_records(document, delim, policy, comment_prefix, rbql_context.requested_start_record + preview_window_size, preview_window_size, stop_on_warning, cached_table_parse_result);;\n    if (first_failed_line !== null && policy == QUOTED_RFC_POLICY) {\n        dst_message.preview_sampling_error = `Double quotes are not consistent in record ${records.length + 1} which starts at line ${first_failed_line + 1}`;\n        return;\n    }\n    rbql_context.requested_start_record = Math.max(0, Math.min(rbql_context.requested_start_record, records.length - preview_window_size));\n    let preview_records = records.slice(rbql_context.requested_start_record, rbql_context.requested_start_record + preview_window_size);\n\n    // Here we trim excessively long fields. The only benefit of doing is here instead of UI layer is to minimize the ammount of traffic that we send to UI - the total message size is limited.\n    for (let r = 0; r < preview_records.length; r++) {\n        let cur_record = preview_records[r];\n        for (let c = 0; c < cur_record.length; c++) {\n            if (cur_record[c].length > max_preview_field_length) {\n                cur_record[c] = cur_record[c].substr(0, max_preview_field_length) + '###UI_STRING_TRIM_MARKER###';\n            }\n        }\n    }\n    dst_message.preview_records = preview_records;\n    dst_message.actual_start_record = rbql_context.requested_start_record;\n}\n\nfunction show_lint_status_bar_button(vscode, extension_context, file_path, language_id) {\n\n    const COLOR_PROCESSING = '#A0A0A0';\n    const COLOR_ERROR      = '#f44242';\n    const COLOR_WARNING    = '#ffff28';\n    const COLOR_OK         = '#62f442';\n\n    let lint_cache_key = `${file_path}.${language_id}`;\n\n    if (!extension_context.lint_results.has(lint_cache_key)){\n      return;\n    }\n\n    var lint_report = extension_context.lint_results.get(lint_cache_key);\n\n    if (!extension_context.lint_status_bar_button){\n      extension_context.lint_status_bar_button = vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Left);\n    }\n\n    extension_context.lint_status_bar_button.text = 'CSVLint';\n    let lint_report_msg = '';\n    if (lint_report.is_processing) {\n\n        extension_context.lint_status_bar_button.color = COLOR_PROCESSING;\n        extension_context.lint_status_bar_button.text = '$(clock) CSVLint';\n        lint_report_msg = 'Processing';\n\n    } else if (Number.isInteger(lint_report.first_defective_line)) {\n\n        lint_report_msg = `Error. Line ${lint_report.first_defective_line} has formatting error: double quote chars are not consistent`;\n        extension_context.lint_status_bar_button.color = COLOR_ERROR;\n        extension_context.lint_status_bar_button.text = '$(error) CSVLint';\n\n    } else if (lint_report.fields_info && lint_report.fields_info.size > 1) {\n\n        let [record_num_1, num_fields_1, record_num_2, num_fields_2] = rbql.sample_first_two_inconsistent_records(lint_report.fields_info);\n        lint_report_msg = `Error. Number of fields is not consistent: e.g. record ${record_num_1 + 1} has ${num_fields_1} fields, and record ${record_num_2 + 1} has ${num_fields_2} fields`;\n        extension_context.lint_status_bar_button.color = COLOR_ERROR;\n        extension_context.lint_status_bar_button.text = '$(error) CSVLint';\n\n    } else if (Number.isInteger(lint_report.first_trailing_space_line)) {\n\n        lint_report_msg = `Leading/Trailing spaces detected: e.g. at line ${lint_report.first_trailing_space_line + 1}. Run \"Shrink\" command to remove them`;\n        extension_context.lint_status_bar_button.color = COLOR_WARNING;\n        extension_context.lint_status_bar_button.text = '$(alert) CSVLint';\n    } else {\n        assert(lint_report.is_ok);\n        extension_context.lint_status_bar_button.color = COLOR_OK;\n        extension_context.lint_status_bar_button.text = '$(pass) CSVLint';\n        lint_report_msg = 'OK';\n    }\n    extension_context.lint_status_bar_button.tooltip = lint_report_msg + '\\nClick to recheck';\n    extension_context.lint_status_bar_button.command = 'rainbow-csv.CSVLint';\n    extension_context.lint_status_bar_button.show();\n}\n\n\nfunction generate_column_edit_selections(vscode, active_doc, delim, policy, comment_prefix, edit_mode, col_num) {\n    let [records, _num_records_parsed, _fields_info, first_defective_line, _first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/-1, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/true);\n    if (first_defective_line !== null) {\n        return [null, `Unable to enter column edit mode: quoting error at line ${first_defective_line + 1}`, null];\n    }\n    if (records.length + comments.length != active_doc.lineCount) {\n        // It is possible to support editing of non-multiline columns in such files, but for simplicity we won't do this.\n        return [null, 'Column edit mode is not supported for files with multiline fields', null];\n    }\n    let lnum = 0;\n    let selections = [];\n    let warning_msg = null;\n    let merger = new RecordCommentMerger(records, comments);\n    while (merger.has_entries_left()) {\n        let [record, comment] = merger.get_next();\n        assert((comment === null) != (record === null));\n        if (record !== null) {\n            if (col_num >= record.length) {\n                return [null, `Line ${lnum + 1} doesn't have field number ${col_num + 1}`, null];\n            }\n            let char_pos_before = record.slice(0, col_num).join('').length + col_num * delim.length;\n            let char_pos_after = record.slice(0, col_num + 1).join('').length + col_num * delim.length;\n            let line_text = record.join(delim);\n            if (!warning_msg && edit_mode == 'ce_before' && (policy == QUOTED_POLICY || policy == QUOTED_RFC_POLICY) && line_text.substring(char_pos_before - 2, char_pos_before + 2).indexOf('\"') != -1) {\n                warning_msg = `Be careful, cursor at line ${lnum + 1} has a double quote is in proximity.`;\n            }\n            if (!warning_msg && edit_mode == 'ce_after' && (policy == QUOTED_POLICY || policy == QUOTED_RFC_POLICY) && line_text.substring(char_pos_after - 2, char_pos_after + 2).indexOf('\"') != -1) {\n                warning_msg = `Be careful, cursor at line ${lnum + 1} has a double quote is in proximity.`;\n            }\n            if (!warning_msg && edit_mode == 'ce_select' && char_pos_before == char_pos_after) {\n                warning_msg = `Be careful, Field ${col_num + 1} at line ${lnum + 1} is empty.`;\n            }\n            let position_before = new vscode.Position(lnum, char_pos_before);\n            let position_after = new vscode.Position(lnum, char_pos_after);\n            if (edit_mode == 'ce_before') {\n                selections.push(new vscode.Selection(position_before, position_before));\n            }\n            if (edit_mode == 'ce_after') {\n                selections.push(new vscode.Selection(position_after, position_after));\n            }\n            if (edit_mode == 'ce_select') {\n                selections.push(new vscode.Selection(position_before, position_after));\n            }\n        }\n        lnum += 1;\n    }\n    return [selections, null, warning_msg];\n}\n\n\nmodule.exports.make_table_name_key = make_table_name_key;\nmodule.exports.find_table_path = find_table_path;\nmodule.exports.read_header = read_header;\nmodule.exports.rbql_query_web = rbql_query_web;\nmodule.exports.rbql_query_node = rbql_query_node;\nmodule.exports.get_header_line = get_header_line;\nmodule.exports.get_default_js_udf_content = get_default_js_udf_content;\nmodule.exports.get_default_python_udf_content = get_default_python_udf_content;\nmodule.exports.align_columns = align_columns;\nmodule.exports.shrink_columns = shrink_columns;\nmodule.exports.calculate_column_offsets = calculate_column_offsets;\nmodule.exports.calc_column_stats = calc_column_stats;\nmodule.exports.calc_column_stats_for_fragment = calc_column_stats_for_fragment;\nmodule.exports.reconcile_whole_doc_and_local_column_stats = reconcile_whole_doc_and_local_column_stats;\nmodule.exports.rfc_align_field = rfc_align_field;\nmodule.exports.evaluate_rfc_align_field = evaluate_rfc_align_field;\nmodule.exports.assert = assert;\nmodule.exports.get_field_by_line_position = get_field_by_line_position;\nmodule.exports.get_cursor_position_info = get_cursor_position_info;\nmodule.exports.format_cursor_position_info = format_cursor_position_info;\nmodule.exports.parse_document_range = parse_document_range;\nmodule.exports.parse_document_range_single_line = parse_document_range_single_line;\nmodule.exports.parse_document_range_rfc = parse_document_range_rfc; // Only for unit tests.\nmodule.exports.sample_preview_records_from_context = sample_preview_records_from_context;\nmodule.exports.sample_first_two_inconsistent_records = rbql.sample_first_two_inconsistent_records;\nmodule.exports.is_opening_rfc_line = is_opening_rfc_line; // Only for unit tests.\nmodule.exports.show_lint_status_bar_button = show_lint_status_bar_button;\nmodule.exports.get_cursor_position_if_unambiguous = get_cursor_position_if_unambiguous;\nmodule.exports.RecordCommentMerger = RecordCommentMerger;\nmodule.exports.ColumnStat = ColumnStat;\nmodule.exports.generate_column_edit_selections = generate_column_edit_selections;\nmodule.exports.generate_inlay_hints = generate_inlay_hints;\n","'use strict';\n\n/** @type {import('./functionApply')} */\nmodule.exports = Function.prototype.apply;\n","'use strict';\n\nvar $Object = require('es-object-atoms');\n\n/** @type {import('./Object.getPrototypeOf')} */\nmodule.exports = $Object.getPrototypeOf || null;\n","'use strict';\n\nvar toStr = Object.prototype.toString;\n\nmodule.exports = function isArguments(value) {\n\tvar str = toStr.call(value);\n\tvar isArgs = str === '[object Arguments]';\n\tif (!isArgs) {\n\t\tisArgs = str !== '[object Array]' &&\n\t\t\tvalue !== null &&\n\t\t\ttypeof value === 'object' &&\n\t\t\ttypeof value.length === 'number' &&\n\t\t\tvalue.length >= 0 &&\n\t\t\ttoStr.call(value.callee) === '[object Function]';\n\t}\n\treturn isArgs;\n};\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","'use strict';\n\nvar slice = Array.prototype.slice;\nvar isArgs = require('./isArguments');\n\nvar origKeys = Object.keys;\nvar keysShim = origKeys ? function keys(o) { return origKeys(o); } : require('./implementation');\n\nvar originalKeys = Object.keys;\n\nkeysShim.shim = function shimObjectKeys() {\n\tif (Object.keys) {\n\t\tvar keysWorksWithArguments = (function () {\n\t\t\t// Safari 5.0 bug\n\t\t\tvar args = Object.keys(arguments);\n\t\t\treturn args && args.length === arguments.length;\n\t\t}(1, 2));\n\t\tif (!keysWorksWithArguments) {\n\t\t\tObject.keys = function keys(object) { // eslint-disable-line func-name-matching\n\t\t\t\tif (isArgs(object)) {\n\t\t\t\t\treturn originalKeys(slice.call(object));\n\t\t\t\t}\n\t\t\t\treturn originalKeys(object);\n\t\t\t};\n\t\t}\n\t} else {\n\t\tObject.keys = keysShim;\n\t}\n\treturn Object.keys || keysShim;\n};\n\nmodule.exports = keysShim;\n","'use strict';\n\n/** @type {import('./eval')} */\nmodule.exports = EvalError;\n","'use strict';\n\n/** @type {import('./shams')} */\n/* eslint complexity: [2, 18], max-statements: [2, 33] */\nmodule.exports = function hasSymbols() {\n\tif (typeof Symbol !== 'function' || typeof Object.getOwnPropertySymbols !== 'function') { return false; }\n\tif (typeof Symbol.iterator === 'symbol') { return true; }\n\n\t/** @type {{ [k in symbol]?: unknown }} */\n\tvar obj = {};\n\tvar sym = Symbol('test');\n\tvar symObj = Object(sym);\n\tif (typeof sym === 'string') { return false; }\n\n\tif (Object.prototype.toString.call(sym) !== '[object Symbol]') { return false; }\n\tif (Object.prototype.toString.call(symObj) !== '[object Symbol]') { return false; }\n\n\t// temp disabled per https://github.com/ljharb/object.assign/issues/17\n\t// if (sym instanceof Symbol) { return false; }\n\t// temp disabled per https://github.com/WebReflection/get-own-property-symbols/issues/4\n\t// if (!(symObj instanceof Symbol)) { return false; }\n\n\t// if (typeof Symbol.prototype.toString !== 'function') { return false; }\n\t// if (String(sym) !== Symbol.prototype.toString.call(sym)) { return false; }\n\n\tvar symVal = 42;\n\tobj[sym] = symVal;\n\tfor (var _ in obj) { return false; } // eslint-disable-line no-restricted-syntax, no-unreachable-loop\n\tif (typeof Object.keys === 'function' && Object.keys(obj).length !== 0) { return false; }\n\n\tif (typeof Object.getOwnPropertyNames === 'function' && Object.getOwnPropertyNames(obj).length !== 0) { return false; }\n\n\tvar syms = Object.getOwnPropertySymbols(obj);\n\tif (syms.length !== 1 || syms[0] !== sym) { return false; }\n\n\tif (!Object.prototype.propertyIsEnumerable.call(obj, sym)) { return false; }\n\n\tif (typeof Object.getOwnPropertyDescriptor === 'function') {\n\t\t// eslint-disable-next-line no-extra-parens\n\t\tvar descriptor = /** @type {PropertyDescriptor} */ (Object.getOwnPropertyDescriptor(obj, sym));\n\t\tif (descriptor.value !== symVal || descriptor.enumerable !== true) { return false; }\n\t}\n\n\treturn true;\n};\n","module.exports = require(\"vscode\");","'use strict';\n\n/** @type {import('./abs')} */\nmodule.exports = Math.abs;\n","module.exports = [\n    [ 0x0300, 0x036F ], [ 0x0483, 0x0486 ], [ 0x0488, 0x0489 ],\n    [ 0x0591, 0x05BD ], [ 0x05BF, 0x05BF ], [ 0x05C1, 0x05C2 ],\n    [ 0x05C4, 0x05C5 ], [ 0x05C7, 0x05C7 ], [ 0x0600, 0x0603 ],\n    [ 0x0610, 0x0615 ], [ 0x064B, 0x065E ], [ 0x0670, 0x0670 ],\n    [ 0x06D6, 0x06E4 ], [ 0x06E7, 0x06E8 ], [ 0x06EA, 0x06ED ],\n    [ 0x070F, 0x070F ], [ 0x0711, 0x0711 ], [ 0x0730, 0x074A ],\n    [ 0x07A6, 0x07B0 ], [ 0x07EB, 0x07F3 ], [ 0x0901, 0x0902 ],\n    [ 0x093C, 0x093C ], [ 0x0941, 0x0948 ], [ 0x094D, 0x094D ],\n    [ 0x0951, 0x0954 ], [ 0x0962, 0x0963 ], [ 0x0981, 0x0981 ],\n    [ 0x09BC, 0x09BC ], [ 0x09C1, 0x09C4 ], [ 0x09CD, 0x09CD ],\n    [ 0x09E2, 0x09E3 ], [ 0x0A01, 0x0A02 ], [ 0x0A3C, 0x0A3C ],\n    [ 0x0A41, 0x0A42 ], [ 0x0A47, 0x0A48 ], [ 0x0A4B, 0x0A4D ],\n    [ 0x0A70, 0x0A71 ], [ 0x0A81, 0x0A82 ], [ 0x0ABC, 0x0ABC ],\n    [ 0x0AC1, 0x0AC5 ], [ 0x0AC7, 0x0AC8 ], [ 0x0ACD, 0x0ACD ],\n    [ 0x0AE2, 0x0AE3 ], [ 0x0B01, 0x0B01 ], [ 0x0B3C, 0x0B3C ],\n    [ 0x0B3F, 0x0B3F ], [ 0x0B41, 0x0B43 ], [ 0x0B4D, 0x0B4D ],\n    [ 0x0B56, 0x0B56 ], [ 0x0B82, 0x0B82 ], [ 0x0BC0, 0x0BC0 ],\n    [ 0x0BCD, 0x0BCD ], [ 0x0C3E, 0x0C40 ], [ 0x0C46, 0x0C48 ],\n    [ 0x0C4A, 0x0C4D ], [ 0x0C55, 0x0C56 ], [ 0x0CBC, 0x0CBC ],\n    [ 0x0CBF, 0x0CBF ], [ 0x0CC6, 0x0CC6 ], [ 0x0CCC, 0x0CCD ],\n    [ 0x0CE2, 0x0CE3 ], [ 0x0D41, 0x0D43 ], [ 0x0D4D, 0x0D4D ],\n    [ 0x0DCA, 0x0DCA ], [ 0x0DD2, 0x0DD4 ], [ 0x0DD6, 0x0DD6 ],\n    [ 0x0E31, 0x0E31 ], [ 0x0E34, 0x0E3A ], [ 0x0E47, 0x0E4E ],\n    [ 0x0EB1, 0x0EB1 ], [ 0x0EB4, 0x0EB9 ], [ 0x0EBB, 0x0EBC ],\n    [ 0x0EC8, 0x0ECD ], [ 0x0F18, 0x0F19 ], [ 0x0F35, 0x0F35 ],\n    [ 0x0F37, 0x0F37 ], [ 0x0F39, 0x0F39 ], [ 0x0F71, 0x0F7E ],\n    [ 0x0F80, 0x0F84 ], [ 0x0F86, 0x0F87 ], [ 0x0F90, 0x0F97 ],\n    [ 0x0F99, 0x0FBC ], [ 0x0FC6, 0x0FC6 ], [ 0x102D, 0x1030 ],\n    [ 0x1032, 0x1032 ], [ 0x1036, 0x1037 ], [ 0x1039, 0x1039 ],\n    [ 0x1058, 0x1059 ], [ 0x1160, 0x11FF ], [ 0x135F, 0x135F ],\n    [ 0x1712, 0x1714 ], [ 0x1732, 0x1734 ], [ 0x1752, 0x1753 ],\n    [ 0x1772, 0x1773 ], [ 0x17B4, 0x17B5 ], [ 0x17B7, 0x17BD ],\n    [ 0x17C6, 0x17C6 ], [ 0x17C9, 0x17D3 ], [ 0x17DD, 0x17DD ],\n    [ 0x180B, 0x180D ], [ 0x18A9, 0x18A9 ], [ 0x1920, 0x1922 ],\n    [ 0x1927, 0x1928 ], [ 0x1932, 0x1932 ], [ 0x1939, 0x193B ],\n    [ 0x1A17, 0x1A18 ], [ 0x1B00, 0x1B03 ], [ 0x1B34, 0x1B34 ],\n    [ 0x1B36, 0x1B3A ], [ 0x1B3C, 0x1B3C ], [ 0x1B42, 0x1B42 ],\n    [ 0x1B6B, 0x1B73 ], [ 0x1DC0, 0x1DCA ], [ 0x1DFE, 0x1DFF ],\n    [ 0x200B, 0x200F ], [ 0x202A, 0x202E ], [ 0x2060, 0x2063 ],\n    [ 0x206A, 0x206F ], [ 0x20D0, 0x20EF ], [ 0x302A, 0x302F ],\n    [ 0x3099, 0x309A ], [ 0xA806, 0xA806 ], [ 0xA80B, 0xA80B ],\n    [ 0xA825, 0xA826 ], [ 0xFB1E, 0xFB1E ], [ 0xFE00, 0xFE0F ],\n    [ 0xFE20, 0xFE23 ], [ 0xFEFF, 0xFEFF ], [ 0xFFF9, 0xFFFB ],\n    [ 0x10A01, 0x10A03 ], [ 0x10A05, 0x10A06 ], [ 0x10A0C, 0x10A0F ],\n    [ 0x10A38, 0x10A3A ], [ 0x10A3F, 0x10A3F ], [ 0x1D167, 0x1D169 ],\n    [ 0x1D173, 0x1D182 ], [ 0x1D185, 0x1D18B ], [ 0x1D1AA, 0x1D1AD ],\n    [ 0x1D242, 0x1D244 ], [ 0xE0001, 0xE0001 ], [ 0xE0020, 0xE007F ],\n    [ 0xE0100, 0xE01EF ]\n]\n","'use strict';\n\nvar bind = require('function-bind');\nvar $apply = require('./functionApply');\nvar actualApply = require('./actualApply');\n\n/** @type {import('./applyBind')} */\nmodule.exports = function applyBind() {\n\treturn actualApply(bind, $apply, arguments);\n};\n","// Currently in sync with Node.js lib/internal/util/comparisons.js\n// https://github.com/nodejs/node/commit/112cc7c27551254aa2b17098fb774867f05ed0d9\n\n'use strict';\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nvar regexFlagsSupported = /a/g.flags !== undefined;\nvar arrayFromSet = function arrayFromSet(set) {\n  var array = [];\n  set.forEach(function (value) {\n    return array.push(value);\n  });\n  return array;\n};\nvar arrayFromMap = function arrayFromMap(map) {\n  var array = [];\n  map.forEach(function (value, key) {\n    return array.push([key, value]);\n  });\n  return array;\n};\nvar objectIs = Object.is ? Object.is : require('object-is');\nvar objectGetOwnPropertySymbols = Object.getOwnPropertySymbols ? Object.getOwnPropertySymbols : function () {\n  return [];\n};\nvar numberIsNaN = Number.isNaN ? Number.isNaN : require('is-nan');\nfunction uncurryThis(f) {\n  return f.call.bind(f);\n}\nvar hasOwnProperty = uncurryThis(Object.prototype.hasOwnProperty);\nvar propertyIsEnumerable = uncurryThis(Object.prototype.propertyIsEnumerable);\nvar objectToString = uncurryThis(Object.prototype.toString);\nvar _require$types = require('util/').types,\n  isAnyArrayBuffer = _require$types.isAnyArrayBuffer,\n  isArrayBufferView = _require$types.isArrayBufferView,\n  isDate = _require$types.isDate,\n  isMap = _require$types.isMap,\n  isRegExp = _require$types.isRegExp,\n  isSet = _require$types.isSet,\n  isNativeError = _require$types.isNativeError,\n  isBoxedPrimitive = _require$types.isBoxedPrimitive,\n  isNumberObject = _require$types.isNumberObject,\n  isStringObject = _require$types.isStringObject,\n  isBooleanObject = _require$types.isBooleanObject,\n  isBigIntObject = _require$types.isBigIntObject,\n  isSymbolObject = _require$types.isSymbolObject,\n  isFloat32Array = _require$types.isFloat32Array,\n  isFloat64Array = _require$types.isFloat64Array;\nfunction isNonIndex(key) {\n  if (key.length === 0 || key.length > 10) return true;\n  for (var i = 0; i < key.length; i++) {\n    var code = key.charCodeAt(i);\n    if (code < 48 || code > 57) return true;\n  }\n  // The maximum size for an array is 2 ** 32 -1.\n  return key.length === 10 && key >= Math.pow(2, 32);\n}\nfunction getOwnNonIndexProperties(value) {\n  return Object.keys(value).filter(isNonIndex).concat(objectGetOwnPropertySymbols(value).filter(Object.prototype.propertyIsEnumerable.bind(value)));\n}\n\n// Taken from https://github.com/feross/buffer/blob/680e9e5e488f22aac27599a57dc844a6315928dd/index.js\n// original notice:\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\nfunction compare(a, b) {\n  if (a === b) {\n    return 0;\n  }\n  var x = a.length;\n  var y = b.length;\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n  if (x < y) {\n    return -1;\n  }\n  if (y < x) {\n    return 1;\n  }\n  return 0;\n}\nvar ONLY_ENUMERABLE = undefined;\nvar kStrict = true;\nvar kLoose = false;\nvar kNoIterator = 0;\nvar kIsArray = 1;\nvar kIsSet = 2;\nvar kIsMap = 3;\n\n// Check if they have the same source and flags\nfunction areSimilarRegExps(a, b) {\n  return regexFlagsSupported ? a.source === b.source && a.flags === b.flags : RegExp.prototype.toString.call(a) === RegExp.prototype.toString.call(b);\n}\nfunction areSimilarFloatArrays(a, b) {\n  if (a.byteLength !== b.byteLength) {\n    return false;\n  }\n  for (var offset = 0; offset < a.byteLength; offset++) {\n    if (a[offset] !== b[offset]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction areSimilarTypedArrays(a, b) {\n  if (a.byteLength !== b.byteLength) {\n    return false;\n  }\n  return compare(new Uint8Array(a.buffer, a.byteOffset, a.byteLength), new Uint8Array(b.buffer, b.byteOffset, b.byteLength)) === 0;\n}\nfunction areEqualArrayBuffers(buf1, buf2) {\n  return buf1.byteLength === buf2.byteLength && compare(new Uint8Array(buf1), new Uint8Array(buf2)) === 0;\n}\nfunction isEqualBoxedPrimitive(val1, val2) {\n  if (isNumberObject(val1)) {\n    return isNumberObject(val2) && objectIs(Number.prototype.valueOf.call(val1), Number.prototype.valueOf.call(val2));\n  }\n  if (isStringObject(val1)) {\n    return isStringObject(val2) && String.prototype.valueOf.call(val1) === String.prototype.valueOf.call(val2);\n  }\n  if (isBooleanObject(val1)) {\n    return isBooleanObject(val2) && Boolean.prototype.valueOf.call(val1) === Boolean.prototype.valueOf.call(val2);\n  }\n  if (isBigIntObject(val1)) {\n    return isBigIntObject(val2) && BigInt.prototype.valueOf.call(val1) === BigInt.prototype.valueOf.call(val2);\n  }\n  return isSymbolObject(val2) && Symbol.prototype.valueOf.call(val1) === Symbol.prototype.valueOf.call(val2);\n}\n\n// Notes: Type tags are historical [[Class]] properties that can be set by\n// FunctionTemplate::SetClassName() in C++ or Symbol.toStringTag in JS\n// and retrieved using Object.prototype.toString.call(obj) in JS\n// See https://tc39.github.io/ecma262/#sec-object.prototype.tostring\n// for a list of tags pre-defined in the spec.\n// There are some unspecified tags in the wild too (e.g. typed array tags).\n// Since tags can be altered, they only serve fast failures\n//\n// Typed arrays and buffers are checked by comparing the content in their\n// underlying ArrayBuffer. This optimization requires that it's\n// reasonable to interpret their underlying memory in the same way,\n// which is checked by comparing their type tags.\n// (e.g. a Uint8Array and a Uint16Array with the same memory content\n// could still be different because they will be interpreted differently).\n//\n// For strict comparison, objects should have\n// a) The same built-in type tags\n// b) The same prototypes.\n\nfunction innerDeepEqual(val1, val2, strict, memos) {\n  // All identical values are equivalent, as determined by ===.\n  if (val1 === val2) {\n    if (val1 !== 0) return true;\n    return strict ? objectIs(val1, val2) : true;\n  }\n\n  // Check more closely if val1 and val2 are equal.\n  if (strict) {\n    if (_typeof(val1) !== 'object') {\n      return typeof val1 === 'number' && numberIsNaN(val1) && numberIsNaN(val2);\n    }\n    if (_typeof(val2) !== 'object' || val1 === null || val2 === null) {\n      return false;\n    }\n    if (Object.getPrototypeOf(val1) !== Object.getPrototypeOf(val2)) {\n      return false;\n    }\n  } else {\n    if (val1 === null || _typeof(val1) !== 'object') {\n      if (val2 === null || _typeof(val2) !== 'object') {\n        // eslint-disable-next-line eqeqeq\n        return val1 == val2;\n      }\n      return false;\n    }\n    if (val2 === null || _typeof(val2) !== 'object') {\n      return false;\n    }\n  }\n  var val1Tag = objectToString(val1);\n  var val2Tag = objectToString(val2);\n  if (val1Tag !== val2Tag) {\n    return false;\n  }\n  if (Array.isArray(val1)) {\n    // Check for sparse arrays and general fast path\n    if (val1.length !== val2.length) {\n      return false;\n    }\n    var keys1 = getOwnNonIndexProperties(val1, ONLY_ENUMERABLE);\n    var keys2 = getOwnNonIndexProperties(val2, ONLY_ENUMERABLE);\n    if (keys1.length !== keys2.length) {\n      return false;\n    }\n    return keyCheck(val1, val2, strict, memos, kIsArray, keys1);\n  }\n  // [browserify] This triggers on certain types in IE (Map/Set) so we don't\n  // wan't to early return out of the rest of the checks. However we can check\n  // if the second value is one of these values and the first isn't.\n  if (val1Tag === '[object Object]') {\n    // return keyCheck(val1, val2, strict, memos, kNoIterator);\n    if (!isMap(val1) && isMap(val2) || !isSet(val1) && isSet(val2)) {\n      return false;\n    }\n  }\n  if (isDate(val1)) {\n    if (!isDate(val2) || Date.prototype.getTime.call(val1) !== Date.prototype.getTime.call(val2)) {\n      return false;\n    }\n  } else if (isRegExp(val1)) {\n    if (!isRegExp(val2) || !areSimilarRegExps(val1, val2)) {\n      return false;\n    }\n  } else if (isNativeError(val1) || val1 instanceof Error) {\n    // Do not compare the stack as it might differ even though the error itself\n    // is otherwise identical.\n    if (val1.message !== val2.message || val1.name !== val2.name) {\n      return false;\n    }\n  } else if (isArrayBufferView(val1)) {\n    if (!strict && (isFloat32Array(val1) || isFloat64Array(val1))) {\n      if (!areSimilarFloatArrays(val1, val2)) {\n        return false;\n      }\n    } else if (!areSimilarTypedArrays(val1, val2)) {\n      return false;\n    }\n    // Buffer.compare returns true, so val1.length === val2.length. If they both\n    // only contain numeric keys, we don't need to exam further than checking\n    // the symbols.\n    var _keys = getOwnNonIndexProperties(val1, ONLY_ENUMERABLE);\n    var _keys2 = getOwnNonIndexProperties(val2, ONLY_ENUMERABLE);\n    if (_keys.length !== _keys2.length) {\n      return false;\n    }\n    return keyCheck(val1, val2, strict, memos, kNoIterator, _keys);\n  } else if (isSet(val1)) {\n    if (!isSet(val2) || val1.size !== val2.size) {\n      return false;\n    }\n    return keyCheck(val1, val2, strict, memos, kIsSet);\n  } else if (isMap(val1)) {\n    if (!isMap(val2) || val1.size !== val2.size) {\n      return false;\n    }\n    return keyCheck(val1, val2, strict, memos, kIsMap);\n  } else if (isAnyArrayBuffer(val1)) {\n    if (!areEqualArrayBuffers(val1, val2)) {\n      return false;\n    }\n  } else if (isBoxedPrimitive(val1) && !isEqualBoxedPrimitive(val1, val2)) {\n    return false;\n  }\n  return keyCheck(val1, val2, strict, memos, kNoIterator);\n}\nfunction getEnumerables(val, keys) {\n  return keys.filter(function (k) {\n    return propertyIsEnumerable(val, k);\n  });\n}\nfunction keyCheck(val1, val2, strict, memos, iterationType, aKeys) {\n  // For all remaining Object pairs, including Array, objects and Maps,\n  // equivalence is determined by having:\n  // a) The same number of owned enumerable properties\n  // b) The same set of keys/indexes (although not necessarily the same order)\n  // c) Equivalent values for every corresponding key/index\n  // d) For Sets and Maps, equal contents\n  // Note: this accounts for both named and indexed properties on Arrays.\n  if (arguments.length === 5) {\n    aKeys = Object.keys(val1);\n    var bKeys = Object.keys(val2);\n\n    // The pair must have the same number of owned properties.\n    if (aKeys.length !== bKeys.length) {\n      return false;\n    }\n  }\n\n  // Cheap key test\n  var i = 0;\n  for (; i < aKeys.length; i++) {\n    if (!hasOwnProperty(val2, aKeys[i])) {\n      return false;\n    }\n  }\n  if (strict && arguments.length === 5) {\n    var symbolKeysA = objectGetOwnPropertySymbols(val1);\n    if (symbolKeysA.length !== 0) {\n      var count = 0;\n      for (i = 0; i < symbolKeysA.length; i++) {\n        var key = symbolKeysA[i];\n        if (propertyIsEnumerable(val1, key)) {\n          if (!propertyIsEnumerable(val2, key)) {\n            return false;\n          }\n          aKeys.push(key);\n          count++;\n        } else if (propertyIsEnumerable(val2, key)) {\n          return false;\n        }\n      }\n      var symbolKeysB = objectGetOwnPropertySymbols(val2);\n      if (symbolKeysA.length !== symbolKeysB.length && getEnumerables(val2, symbolKeysB).length !== count) {\n        return false;\n      }\n    } else {\n      var _symbolKeysB = objectGetOwnPropertySymbols(val2);\n      if (_symbolKeysB.length !== 0 && getEnumerables(val2, _symbolKeysB).length !== 0) {\n        return false;\n      }\n    }\n  }\n  if (aKeys.length === 0 && (iterationType === kNoIterator || iterationType === kIsArray && val1.length === 0 || val1.size === 0)) {\n    return true;\n  }\n\n  // Use memos to handle cycles.\n  if (memos === undefined) {\n    memos = {\n      val1: new Map(),\n      val2: new Map(),\n      position: 0\n    };\n  } else {\n    // We prevent up to two map.has(x) calls by directly retrieving the value\n    // and checking for undefined. The map can only contain numbers, so it is\n    // safe to check for undefined only.\n    var val2MemoA = memos.val1.get(val1);\n    if (val2MemoA !== undefined) {\n      var val2MemoB = memos.val2.get(val2);\n      if (val2MemoB !== undefined) {\n        return val2MemoA === val2MemoB;\n      }\n    }\n    memos.position++;\n  }\n  memos.val1.set(val1, memos.position);\n  memos.val2.set(val2, memos.position);\n  var areEq = objEquiv(val1, val2, strict, aKeys, memos, iterationType);\n  memos.val1.delete(val1);\n  memos.val2.delete(val2);\n  return areEq;\n}\nfunction setHasEqualElement(set, val1, strict, memo) {\n  // Go looking.\n  var setValues = arrayFromSet(set);\n  for (var i = 0; i < setValues.length; i++) {\n    var val2 = setValues[i];\n    if (innerDeepEqual(val1, val2, strict, memo)) {\n      // Remove the matching element to make sure we do not check that again.\n      set.delete(val2);\n      return true;\n    }\n  }\n  return false;\n}\n\n// See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness#Loose_equality_using\n// Sadly it is not possible to detect corresponding values properly in case the\n// type is a string, number, bigint or boolean. The reason is that those values\n// can match lots of different string values (e.g., 1n == '+00001').\nfunction findLooseMatchingPrimitives(prim) {\n  switch (_typeof(prim)) {\n    case 'undefined':\n      return null;\n    case 'object':\n      // Only pass in null as object!\n      return undefined;\n    case 'symbol':\n      return false;\n    case 'string':\n      prim = +prim;\n    // Loose equal entries exist only if the string is possible to convert to\n    // a regular number and not NaN.\n    // Fall through\n    case 'number':\n      if (numberIsNaN(prim)) {\n        return false;\n      }\n  }\n  return true;\n}\nfunction setMightHaveLoosePrim(a, b, prim) {\n  var altValue = findLooseMatchingPrimitives(prim);\n  if (altValue != null) return altValue;\n  return b.has(altValue) && !a.has(altValue);\n}\nfunction mapMightHaveLoosePrim(a, b, prim, item, memo) {\n  var altValue = findLooseMatchingPrimitives(prim);\n  if (altValue != null) {\n    return altValue;\n  }\n  var curB = b.get(altValue);\n  if (curB === undefined && !b.has(altValue) || !innerDeepEqual(item, curB, false, memo)) {\n    return false;\n  }\n  return !a.has(altValue) && innerDeepEqual(item, curB, false, memo);\n}\nfunction setEquiv(a, b, strict, memo) {\n  // This is a lazily initiated Set of entries which have to be compared\n  // pairwise.\n  var set = null;\n  var aValues = arrayFromSet(a);\n  for (var i = 0; i < aValues.length; i++) {\n    var val = aValues[i];\n    // Note: Checking for the objects first improves the performance for object\n    // heavy sets but it is a minor slow down for primitives. As they are fast\n    // to check this improves the worst case scenario instead.\n    if (_typeof(val) === 'object' && val !== null) {\n      if (set === null) {\n        set = new Set();\n      }\n      // If the specified value doesn't exist in the second set its an not null\n      // object (or non strict only: a not matching primitive) we'll need to go\n      // hunting for something thats deep-(strict-)equal to it. To make this\n      // O(n log n) complexity we have to copy these values in a new set first.\n      set.add(val);\n    } else if (!b.has(val)) {\n      if (strict) return false;\n\n      // Fast path to detect missing string, symbol, undefined and null values.\n      if (!setMightHaveLoosePrim(a, b, val)) {\n        return false;\n      }\n      if (set === null) {\n        set = new Set();\n      }\n      set.add(val);\n    }\n  }\n  if (set !== null) {\n    var bValues = arrayFromSet(b);\n    for (var _i = 0; _i < bValues.length; _i++) {\n      var _val = bValues[_i];\n      // We have to check if a primitive value is already\n      // matching and only if it's not, go hunting for it.\n      if (_typeof(_val) === 'object' && _val !== null) {\n        if (!setHasEqualElement(set, _val, strict, memo)) return false;\n      } else if (!strict && !a.has(_val) && !setHasEqualElement(set, _val, strict, memo)) {\n        return false;\n      }\n    }\n    return set.size === 0;\n  }\n  return true;\n}\nfunction mapHasEqualEntry(set, map, key1, item1, strict, memo) {\n  // To be able to handle cases like:\n  //   Map([[{}, 'a'], [{}, 'b']]) vs Map([[{}, 'b'], [{}, 'a']])\n  // ... we need to consider *all* matching keys, not just the first we find.\n  var setValues = arrayFromSet(set);\n  for (var i = 0; i < setValues.length; i++) {\n    var key2 = setValues[i];\n    if (innerDeepEqual(key1, key2, strict, memo) && innerDeepEqual(item1, map.get(key2), strict, memo)) {\n      set.delete(key2);\n      return true;\n    }\n  }\n  return false;\n}\nfunction mapEquiv(a, b, strict, memo) {\n  var set = null;\n  var aEntries = arrayFromMap(a);\n  for (var i = 0; i < aEntries.length; i++) {\n    var _aEntries$i = _slicedToArray(aEntries[i], 2),\n      key = _aEntries$i[0],\n      item1 = _aEntries$i[1];\n    if (_typeof(key) === 'object' && key !== null) {\n      if (set === null) {\n        set = new Set();\n      }\n      set.add(key);\n    } else {\n      // By directly retrieving the value we prevent another b.has(key) check in\n      // almost all possible cases.\n      var item2 = b.get(key);\n      if (item2 === undefined && !b.has(key) || !innerDeepEqual(item1, item2, strict, memo)) {\n        if (strict) return false;\n        // Fast path to detect missing string, symbol, undefined and null\n        // keys.\n        if (!mapMightHaveLoosePrim(a, b, key, item1, memo)) return false;\n        if (set === null) {\n          set = new Set();\n        }\n        set.add(key);\n      }\n    }\n  }\n  if (set !== null) {\n    var bEntries = arrayFromMap(b);\n    for (var _i2 = 0; _i2 < bEntries.length; _i2++) {\n      var _bEntries$_i = _slicedToArray(bEntries[_i2], 2),\n        _key = _bEntries$_i[0],\n        item = _bEntries$_i[1];\n      if (_typeof(_key) === 'object' && _key !== null) {\n        if (!mapHasEqualEntry(set, a, _key, item, strict, memo)) return false;\n      } else if (!strict && (!a.has(_key) || !innerDeepEqual(a.get(_key), item, false, memo)) && !mapHasEqualEntry(set, a, _key, item, false, memo)) {\n        return false;\n      }\n    }\n    return set.size === 0;\n  }\n  return true;\n}\nfunction objEquiv(a, b, strict, keys, memos, iterationType) {\n  // Sets and maps don't have their entries accessible via normal object\n  // properties.\n  var i = 0;\n  if (iterationType === kIsSet) {\n    if (!setEquiv(a, b, strict, memos)) {\n      return false;\n    }\n  } else if (iterationType === kIsMap) {\n    if (!mapEquiv(a, b, strict, memos)) {\n      return false;\n    }\n  } else if (iterationType === kIsArray) {\n    for (; i < a.length; i++) {\n      if (hasOwnProperty(a, i)) {\n        if (!hasOwnProperty(b, i) || !innerDeepEqual(a[i], b[i], strict, memos)) {\n          return false;\n        }\n      } else if (hasOwnProperty(b, i)) {\n        return false;\n      } else {\n        // Array is sparse.\n        var keysA = Object.keys(a);\n        for (; i < keysA.length; i++) {\n          var key = keysA[i];\n          if (!hasOwnProperty(b, key) || !innerDeepEqual(a[key], b[key], strict, memos)) {\n            return false;\n          }\n        }\n        if (keysA.length !== Object.keys(b).length) {\n          return false;\n        }\n        return true;\n      }\n    }\n  }\n\n  // The pair must have equivalent values for every corresponding key.\n  // Possibly expensive deep test:\n  for (i = 0; i < keys.length; i++) {\n    var _key2 = keys[i];\n    if (!innerDeepEqual(a[_key2], b[_key2], strict, memos)) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction isDeepEqual(val1, val2) {\n  return innerDeepEqual(val1, val2, kLoose);\n}\nfunction isDeepStrictEqual(val1, val2) {\n  return innerDeepEqual(val1, val2, kStrict);\n}\nmodule.exports = {\n  isDeepEqual: isDeepEqual,\n  isDeepStrictEqual: isDeepStrictEqual\n};","'use strict';\n\nvar define = require('define-properties');\nvar getPolyfill = require('./polyfill');\n\n/* http://www.ecma-international.org/ecma-262/6.0/#sec-number.isnan */\n\nmodule.exports = function shimNumberIsNaN() {\n\tvar polyfill = getPolyfill();\n\tdefine(Number, { isNaN: polyfill }, {\n\t\tisNaN: function testIsNaN() {\n\t\t\treturn Number.isNaN !== polyfill;\n\t\t}\n\t});\n\treturn polyfill;\n};\n","'use strict';\n\nvar isCallable = require('is-callable');\n\nvar toStr = Object.prototype.toString;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/** @type {<This, A extends readonly unknown[]>(arr: A, iterator: (this: This | void, value: A[number], index: number, arr: A) => void, receiver: This | undefined) => void} */\nvar forEachArray = function forEachArray(array, iterator, receiver) {\n    for (var i = 0, len = array.length; i < len; i++) {\n        if (hasOwnProperty.call(array, i)) {\n            if (receiver == null) {\n                iterator(array[i], i, array);\n            } else {\n                iterator.call(receiver, array[i], i, array);\n            }\n        }\n    }\n};\n\n/** @type {<This, S extends string>(string: S, iterator: (this: This | void, value: S[number], index: number, string: S) => void, receiver: This | undefined) => void} */\nvar forEachString = function forEachString(string, iterator, receiver) {\n    for (var i = 0, len = string.length; i < len; i++) {\n        // no such thing as a sparse string.\n        if (receiver == null) {\n            iterator(string.charAt(i), i, string);\n        } else {\n            iterator.call(receiver, string.charAt(i), i, string);\n        }\n    }\n};\n\n/** @type {<This, O>(obj: O, iterator: (this: This | void, value: O[keyof O], index: keyof O, obj: O) => void, receiver: This | undefined) => void} */\nvar forEachObject = function forEachObject(object, iterator, receiver) {\n    for (var k in object) {\n        if (hasOwnProperty.call(object, k)) {\n            if (receiver == null) {\n                iterator(object[k], k, object);\n            } else {\n                iterator.call(receiver, object[k], k, object);\n            }\n        }\n    }\n};\n\n/** @type {(x: unknown) => x is readonly unknown[]} */\nfunction isArray(x) {\n    return toStr.call(x) === '[object Array]';\n}\n\n/** @type {import('.')._internal} */\nmodule.exports = function forEach(list, iterator, thisArg) {\n    if (!isCallable(iterator)) {\n        throw new TypeError('iterator must be a function');\n    }\n\n    var receiver;\n    if (arguments.length >= 3) {\n        receiver = thisArg;\n    }\n\n    if (isArray(list)) {\n        forEachArray(list, iterator, receiver);\n    } else if (typeof list === 'string') {\n        forEachString(list, iterator, receiver);\n    } else {\n        forEachObject(list, iterator, receiver);\n    }\n};\n","'use strict';\n\n/* http://www.ecma-international.org/ecma-262/6.0/#sec-number.isnan */\n\nmodule.exports = function isNaN(value) {\n\treturn value !== value;\n};\n","'use strict';\n\nvar $isNaN = require('./isNaN');\n\n/** @type {import('./sign')} */\nmodule.exports = function sign(number) {\n\tif ($isNaN(number) || number === 0) {\n\t\treturn number;\n\t}\n\treturn number < 0 ? -1 : +1;\n};\n","'use strict';\n\nvar bind = require('function-bind');\nvar $TypeError = require('es-errors/type');\n\nvar $call = require('./functionCall');\nvar $actualApply = require('./actualApply');\n\n/** @type {(args: [Function, thisArg?: unknown, ...args: unknown[]]) => Function} TODO FIXME, find a way to use import('.') */\nmodule.exports = function callBindBasic(args) {\n\tif (args.length < 1 || typeof args[0] !== 'function') {\n\t\tthrow new $TypeError('a function is required');\n\t}\n\treturn $actualApply(bind, $call, args);\n};\n","'use strict';\n\nvar bind = require('function-bind');\n\nvar $apply = require('./functionApply');\nvar $call = require('./functionCall');\nvar $reflectApply = require('./reflectApply');\n\n/** @type {import('./actualApply')} */\nmodule.exports = $reflectApply || bind.call($call, $apply);\n","\"use strict\"\n\nvar combining = require('./combining')\n\nvar DEFAULTS = {\n  nul: 0,\n  control: 0\n}\n\nmodule.exports = function wcwidth(str) {\n  return wcswidth(str, DEFAULTS)\n}\n\n/*\n *  The following functions define the column width of an ISO 10646\n *  character as follows:\n *  - The null character (U+0000) has a column width of 0.\n *  - Other C0/C1 control characters and DEL will lead to a return value\n *    of -1.\n *  - Non-spacing and enclosing combining characters (general category\n *    code Mn or Me in the\n *    Unicode database) have a column width of 0.\n *  - SOFT HYPHEN (U+00AD) has a column width of 1.\n *  - Other format characters (general category code Cf in the Unicode\n *    database) and ZERO WIDTH\n *    SPACE (U+200B) have a column width of 0.\n *  - Hangul Jamo medial vowels and final consonants (U+1160-U+11FF)\n *    have a column width of 0.\n *  - Spacing characters in the East Asian Wide (W) or East Asian\n *    Full-width (F) category as\n *    defined in Unicode Technical Report #11 have a column width of 2.\n *  - All remaining characters (including all printable ISO 8859-1 and\n *    WGL4 characters, Unicode control characters, etc.) have a column\n *    width of 1.\n *  This implementation assumes that characters are encoded in ISO 10646.\n*/\n\nfunction wcswidth(str, opts) {\n  if (typeof str !== 'string') return wcwidth(str, opts)\n\n  var s = 0\n  for (var i = 0; i < str.length; i++) {\n    var n = wcwidth(str.charCodeAt(i), opts)\n    if (n < 0) return -1\n    s += n\n  }\n\n  return s\n}\n\nfunction wcwidth(ucs, opts) {\n  // test for 8-bit control characters\n  if (ucs === 0) return opts.nul\n  if (ucs < 32 || (ucs >= 0x7f && ucs < 0xa0)) return opts.control\n\n  // binary search in table of non-spacing characters\n  if (bisearch(ucs)) return 0\n\n  // if we arrive here, ucs is not a combining or C0/C1 control character\n  return 1 +\n      (ucs >= 0x1100 &&\n       (ucs <= 0x115f ||                       // Hangul Jamo init. consonants\n        ucs == 0x2329 || ucs == 0x232a ||\n        (ucs >= 0x2e80 && ucs <= 0xa4cf &&\n         ucs != 0x303f) ||                     // CJK ... Yi\n        (ucs >= 0xac00 && ucs <= 0xd7a3) ||    // Hangul Syllables\n        (ucs >= 0xf900 && ucs <= 0xfaff) ||    // CJK Compatibility Ideographs\n        (ucs >= 0xfe10 && ucs <= 0xfe19) ||    // Vertical forms\n        (ucs >= 0xfe30 && ucs <= 0xfe6f) ||    // CJK Compatibility Forms\n        (ucs >= 0xff00 && ucs <= 0xff60) ||    // Fullwidth Forms\n        (ucs >= 0xffe0 && ucs <= 0xffe6) ||\n        (ucs >= 0x20000 && ucs <= 0x2fffd) ||\n        (ucs >= 0x30000 && ucs <= 0x3fffd)));\n}\n\nfunction bisearch(ucs) {\n  var min = 0\n  var max = combining.length - 1\n  var mid\n\n  if (ucs < combining[0][0] || ucs > combining[max][1]) return false\n\n  while (max >= min) {\n    mid = Math.floor((min + max) / 2)\n    if (ucs > combining[mid][1]) min = mid + 1\n    else if (ucs < combining[mid][0]) max = mid - 1\n    else return true\n  }\n\n  return false\n}\n","// This file stores only functionality that is required for idle operation of Rainbow CSV i.e. autodetection only.\n// We want to avoid loading/parsing a lot of JS code in cases where we don't have any CSV files to work with.\n\nconst csv_utils = require('./rbql_core/rbql-js/csv_utils.js');\n\nclass AssertionError extends Error {}\n\nfunction assert(condition, message=null) {\n    if (!condition) {\n        if (!message) {\n            message = 'Assertion error';\n        }\n        throw new AssertionError(message);\n    }\n}\n\nclass RecordTextConsumer {\n    // The only purpose of this class is to avoid code duplication when dealing with leftover lines in line_aggregator (the second `consume` call).\n    constructor(delim, policy, stop_on_warning, collect_records, preserve_quotes_and_whitespaces, detect_trailing_spaces, min_num_fields_for_autodetection) {\n        this.delim = delim;\n        this.policy = policy;\n        this.stop_on_warning = stop_on_warning;\n        this.first_defective_line = null;\n        this.records = collect_records ? [] : null;\n        this.collect_records = collect_records;\n        this.num_records_parsed = 0;\n        this.fields_info = new Map();\n        this.first_trailing_space_line = null;\n        this.detect_trailing_spaces = detect_trailing_spaces;\n        this.preserve_quotes_and_whitespaces = preserve_quotes_and_whitespaces;\n        this.min_num_fields_for_autodetection = min_num_fields_for_autodetection;\n    }\n\n    consume(record_text, record_start_line) {\n        let [record, warning] = csv_utils.smart_split(record_text, this.delim, this.policy, this.preserve_quotes_and_whitespaces);\n        if (warning) {\n            if (this.first_defective_line === null) {\n                this.first_defective_line = record_start_line;\n            }\n            if (this.stop_on_warning)\n                return /*can_continue=*/false;\n        }\n        if (this.detect_trailing_spaces && this.first_trailing_space_line === null) {\n            for (let field of record) {\n                if (field.length && (field.charAt(0) == ' ' || field.charAt(field.length - 1) == ' ')) {\n                    this.first_trailing_space_line = record_start_line;\n                }\n            }\n        }\n        if (!this.fields_info.has(record.length)) {\n            this.fields_info.set(record.length, this.num_records_parsed);\n            if (this.min_num_fields_for_autodetection != -1) {\n                // Autodetection mode: stop on inconsistent records length and when there is not enough columns (typically less than 2 i.e. 1).\n                if (record.length < this.min_num_fields_for_autodetection)\n                    return /*can_continue=*/false;\n                if (this.fields_info.size > 1)\n                    return /*can_continue=*/false;\n            }\n        }\n        if (this.collect_records) {\n            this.records.push(record);\n        }\n        this.num_records_parsed += 1;\n        return /*can_continue=*/true;\n    }\n}\n\n\nfunction parse_document_records(document, delim, policy, comment_prefix=null, stop_on_warning=false, max_records_to_parse=-1, collect_records=true, preserve_quotes_and_whitespaces=false, detect_trailing_spaces=false, min_num_fields_for_autodetection=-1) {\n    // TODO consider switching to a single row_info array format that would have (comment, record_ranges and the record itself) - this would make it more compatible with the incremental parsing functions.\n    let num_lines = document.lineCount;\n    let record_start_line = 0;\n    let line_aggregator = new csv_utils.MultilineRecordAggregator(comment_prefix);\n    let consumer = new RecordTextConsumer(delim, policy, stop_on_warning, collect_records, preserve_quotes_and_whitespaces, detect_trailing_spaces, min_num_fields_for_autodetection);\n    let comments = []; // An ordered list of {record_no, comment_text} tuples which can be merged with the records later.\n\n    for (let lnum = 0; lnum < num_lines; ++lnum) {\n        let line_text = document.lineAt(lnum).text;\n        if (lnum + 1 >= num_lines && line_text == \"\") {\n            if (collect_records) {\n                // Treat the last empty line as a comment - this is to prevent align/shrink functions from removing it.\n                comments.push({record_num: consumer.num_records_parsed, comment_text: line_text});\n            }\n            break; // Skip the last empty line.\n        }\n        let record_text = null;\n        if (policy == 'quoted_rfc') {\n            line_aggregator.add_line(line_text);\n            if (line_aggregator.has_comment_line) {\n                record_start_line = lnum + 1;\n                line_aggregator.reset();\n                if (collect_records) {\n                    comments.push({record_num: consumer.num_records_parsed, comment_text: line_text});\n                }\n                continue;\n            } else if (line_aggregator.has_full_record) {\n                record_text = line_aggregator.get_full_line('\\n');\n                line_aggregator.reset();\n            } else {\n                continue;\n            }\n        } else {\n            if (comment_prefix && line_text.startsWith(comment_prefix)) {\n                record_start_line = lnum + 1;\n                if (collect_records) {\n                    comments.push({record_num: consumer.num_records_parsed, comment_text: line_text});\n                }\n                continue;\n            } else {\n                record_text = line_text;\n            }\n        }\n        if (!consumer.consume(record_text, record_start_line)) {\n            return [consumer.records, consumer.num_records_parsed, consumer.fields_info, consumer.first_defective_line, consumer.first_trailing_space_line, comments];\n        }\n        record_start_line = lnum + 1;\n        if (max_records_to_parse !== -1 && consumer.num_records_parsed >= max_records_to_parse) {\n            return [consumer.records, consumer.num_records_parsed, consumer.fields_info, consumer.first_defective_line, consumer.first_trailing_space_line, comments];\n        }\n    }\n\n    if (line_aggregator.is_inside_multiline_record()) {\n        assert(policy == 'quoted_rfc');\n        consumer.consume(line_aggregator.get_full_line('\\n'), record_start_line);\n    }\n    return [consumer.records, consumer.num_records_parsed, consumer.fields_info, consumer.first_defective_line, consumer.first_trailing_space_line, comments];\n}\n\n\nmodule.exports.parse_document_records = parse_document_records;\nmodule.exports.assert = assert;\n","'use strict';\n\nvar reflectGetProto = require('./Reflect.getPrototypeOf');\nvar originalGetProto = require('./Object.getPrototypeOf');\n\nvar getDunderProto = require('dunder-proto/get');\n\n/** @type {import('.')} */\nmodule.exports = reflectGetProto\n\t? function getProto(O) {\n\t\t// @ts-expect-error TS can't narrow inside a closure, for some reason\n\t\treturn reflectGetProto(O);\n\t}\n\t: originalGetProto\n\t\t? function getProto(O) {\n\t\t\tif (!O || (typeof O !== 'object' && typeof O !== 'function')) {\n\t\t\t\tthrow new TypeError('getProto: not an object');\n\t\t\t}\n\t\t\t// @ts-expect-error TS can't narrow inside a closure, for some reason\n\t\t\treturn originalGetProto(O);\n\t\t}\n\t\t: getDunderProto\n\t\t\t? function getProto(O) {\n\t\t\t\t// @ts-expect-error TS can't narrow inside a closure, for some reason\n\t\t\t\treturn getDunderProto(O);\n\t\t\t}\n\t\t\t: null;\n","// Currently in sync with Node.js lib/internal/assert/assertion_error.js\n// https://github.com/nodejs/node/commit/0817840f775032169ddd70c85ac059f18ffcc81c\n\n'use strict';\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct.bind(); } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nvar _require = require('util/'),\n  inspect = _require.inspect;\nvar _require2 = require('../errors'),\n  ERR_INVALID_ARG_TYPE = _require2.codes.ERR_INVALID_ARG_TYPE;\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith\nfunction endsWith(str, search, this_len) {\n  if (this_len === undefined || this_len > str.length) {\n    this_len = str.length;\n  }\n  return str.substring(this_len - search.length, this_len) === search;\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeat\nfunction repeat(str, count) {\n  count = Math.floor(count);\n  if (str.length == 0 || count == 0) return '';\n  var maxCount = str.length * count;\n  count = Math.floor(Math.log(count) / Math.log(2));\n  while (count) {\n    str += str;\n    count--;\n  }\n  str += str.substring(0, maxCount - str.length);\n  return str;\n}\nvar blue = '';\nvar green = '';\nvar red = '';\nvar white = '';\nvar kReadableOperator = {\n  deepStrictEqual: 'Expected values to be strictly deep-equal:',\n  strictEqual: 'Expected values to be strictly equal:',\n  strictEqualObject: 'Expected \"actual\" to be reference-equal to \"expected\":',\n  deepEqual: 'Expected values to be loosely deep-equal:',\n  equal: 'Expected values to be loosely equal:',\n  notDeepStrictEqual: 'Expected \"actual\" not to be strictly deep-equal to:',\n  notStrictEqual: 'Expected \"actual\" to be strictly unequal to:',\n  notStrictEqualObject: 'Expected \"actual\" not to be reference-equal to \"expected\":',\n  notDeepEqual: 'Expected \"actual\" not to be loosely deep-equal to:',\n  notEqual: 'Expected \"actual\" to be loosely unequal to:',\n  notIdentical: 'Values identical but not reference-equal:'\n};\n\n// Comparing short primitives should just show === / !== instead of using the\n// diff.\nvar kMaxShortLength = 10;\nfunction copyError(source) {\n  var keys = Object.keys(source);\n  var target = Object.create(Object.getPrototypeOf(source));\n  keys.forEach(function (key) {\n    target[key] = source[key];\n  });\n  Object.defineProperty(target, 'message', {\n    value: source.message\n  });\n  return target;\n}\nfunction inspectValue(val) {\n  // The util.inspect default values could be changed. This makes sure the\n  // error messages contain the necessary information nevertheless.\n  return inspect(val, {\n    compact: false,\n    customInspect: false,\n    depth: 1000,\n    maxArrayLength: Infinity,\n    // Assert compares only enumerable properties (with a few exceptions).\n    showHidden: false,\n    // Having a long line as error is better than wrapping the line for\n    // comparison for now.\n    // TODO(BridgeAR): `breakLength` should be limited as soon as soon as we\n    // have meta information about the inspected properties (i.e., know where\n    // in what line the property starts and ends).\n    breakLength: Infinity,\n    // Assert does not detect proxies currently.\n    showProxy: false,\n    sorted: true,\n    // Inspect getters as we also check them when comparing entries.\n    getters: true\n  });\n}\nfunction createErrDiff(actual, expected, operator) {\n  var other = '';\n  var res = '';\n  var lastPos = 0;\n  var end = '';\n  var skipped = false;\n  var actualInspected = inspectValue(actual);\n  var actualLines = actualInspected.split('\\n');\n  var expectedLines = inspectValue(expected).split('\\n');\n  var i = 0;\n  var indicator = '';\n\n  // In case both values are objects explicitly mark them as not reference equal\n  // for the `strictEqual` operator.\n  if (operator === 'strictEqual' && _typeof(actual) === 'object' && _typeof(expected) === 'object' && actual !== null && expected !== null) {\n    operator = 'strictEqualObject';\n  }\n\n  // If \"actual\" and \"expected\" fit on a single line and they are not strictly\n  // equal, check further special handling.\n  if (actualLines.length === 1 && expectedLines.length === 1 && actualLines[0] !== expectedLines[0]) {\n    var inputLength = actualLines[0].length + expectedLines[0].length;\n    // If the character length of \"actual\" and \"expected\" together is less than\n    // kMaxShortLength and if neither is an object and at least one of them is\n    // not `zero`, use the strict equal comparison to visualize the output.\n    if (inputLength <= kMaxShortLength) {\n      if ((_typeof(actual) !== 'object' || actual === null) && (_typeof(expected) !== 'object' || expected === null) && (actual !== 0 || expected !== 0)) {\n        // -0 === +0\n        return \"\".concat(kReadableOperator[operator], \"\\n\\n\") + \"\".concat(actualLines[0], \" !== \").concat(expectedLines[0], \"\\n\");\n      }\n    } else if (operator !== 'strictEqualObject') {\n      // If the stderr is a tty and the input length is lower than the current\n      // columns per line, add a mismatch indicator below the output. If it is\n      // not a tty, use a default value of 80 characters.\n      var maxLength = process.stderr && process.stderr.isTTY ? process.stderr.columns : 80;\n      if (inputLength < maxLength) {\n        while (actualLines[0][i] === expectedLines[0][i]) {\n          i++;\n        }\n        // Ignore the first characters.\n        if (i > 2) {\n          // Add position indicator for the first mismatch in case it is a\n          // single line and the input length is less than the column length.\n          indicator = \"\\n  \".concat(repeat(' ', i), \"^\");\n          i = 0;\n        }\n      }\n    }\n  }\n\n  // Remove all ending lines that match (this optimizes the output for\n  // readability by reducing the number of total changed lines).\n  var a = actualLines[actualLines.length - 1];\n  var b = expectedLines[expectedLines.length - 1];\n  while (a === b) {\n    if (i++ < 2) {\n      end = \"\\n  \".concat(a).concat(end);\n    } else {\n      other = a;\n    }\n    actualLines.pop();\n    expectedLines.pop();\n    if (actualLines.length === 0 || expectedLines.length === 0) break;\n    a = actualLines[actualLines.length - 1];\n    b = expectedLines[expectedLines.length - 1];\n  }\n  var maxLines = Math.max(actualLines.length, expectedLines.length);\n  // Strict equal with identical objects that are not identical by reference.\n  // E.g., assert.deepStrictEqual({ a: Symbol() }, { a: Symbol() })\n  if (maxLines === 0) {\n    // We have to get the result again. The lines were all removed before.\n    var _actualLines = actualInspected.split('\\n');\n\n    // Only remove lines in case it makes sense to collapse those.\n    // TODO: Accept env to always show the full error.\n    if (_actualLines.length > 30) {\n      _actualLines[26] = \"\".concat(blue, \"...\").concat(white);\n      while (_actualLines.length > 27) {\n        _actualLines.pop();\n      }\n    }\n    return \"\".concat(kReadableOperator.notIdentical, \"\\n\\n\").concat(_actualLines.join('\\n'), \"\\n\");\n  }\n  if (i > 3) {\n    end = \"\\n\".concat(blue, \"...\").concat(white).concat(end);\n    skipped = true;\n  }\n  if (other !== '') {\n    end = \"\\n  \".concat(other).concat(end);\n    other = '';\n  }\n  var printedLines = 0;\n  var msg = kReadableOperator[operator] + \"\\n\".concat(green, \"+ actual\").concat(white, \" \").concat(red, \"- expected\").concat(white);\n  var skippedMsg = \" \".concat(blue, \"...\").concat(white, \" Lines skipped\");\n  for (i = 0; i < maxLines; i++) {\n    // Only extra expected lines exist\n    var cur = i - lastPos;\n    if (actualLines.length < i + 1) {\n      // If the last diverging line is more than one line above and the\n      // current line is at least line three, add some of the former lines and\n      // also add dots to indicate skipped entries.\n      if (cur > 1 && i > 2) {\n        if (cur > 4) {\n          res += \"\\n\".concat(blue, \"...\").concat(white);\n          skipped = true;\n        } else if (cur > 3) {\n          res += \"\\n  \".concat(expectedLines[i - 2]);\n          printedLines++;\n        }\n        res += \"\\n  \".concat(expectedLines[i - 1]);\n        printedLines++;\n      }\n      // Mark the current line as the last diverging one.\n      lastPos = i;\n      // Add the expected line to the cache.\n      other += \"\\n\".concat(red, \"-\").concat(white, \" \").concat(expectedLines[i]);\n      printedLines++;\n      // Only extra actual lines exist\n    } else if (expectedLines.length < i + 1) {\n      // If the last diverging line is more than one line above and the\n      // current line is at least line three, add some of the former lines and\n      // also add dots to indicate skipped entries.\n      if (cur > 1 && i > 2) {\n        if (cur > 4) {\n          res += \"\\n\".concat(blue, \"...\").concat(white);\n          skipped = true;\n        } else if (cur > 3) {\n          res += \"\\n  \".concat(actualLines[i - 2]);\n          printedLines++;\n        }\n        res += \"\\n  \".concat(actualLines[i - 1]);\n        printedLines++;\n      }\n      // Mark the current line as the last diverging one.\n      lastPos = i;\n      // Add the actual line to the result.\n      res += \"\\n\".concat(green, \"+\").concat(white, \" \").concat(actualLines[i]);\n      printedLines++;\n      // Lines diverge\n    } else {\n      var expectedLine = expectedLines[i];\n      var actualLine = actualLines[i];\n      // If the lines diverge, specifically check for lines that only diverge by\n      // a trailing comma. In that case it is actually identical and we should\n      // mark it as such.\n      var divergingLines = actualLine !== expectedLine && (!endsWith(actualLine, ',') || actualLine.slice(0, -1) !== expectedLine);\n      // If the expected line has a trailing comma but is otherwise identical,\n      // add a comma at the end of the actual line. Otherwise the output could\n      // look weird as in:\n      //\n      //   [\n      //     1         // No comma at the end!\n      // +   2\n      //   ]\n      //\n      if (divergingLines && endsWith(expectedLine, ',') && expectedLine.slice(0, -1) === actualLine) {\n        divergingLines = false;\n        actualLine += ',';\n      }\n      if (divergingLines) {\n        // If the last diverging line is more than one line above and the\n        // current line is at least line three, add some of the former lines and\n        // also add dots to indicate skipped entries.\n        if (cur > 1 && i > 2) {\n          if (cur > 4) {\n            res += \"\\n\".concat(blue, \"...\").concat(white);\n            skipped = true;\n          } else if (cur > 3) {\n            res += \"\\n  \".concat(actualLines[i - 2]);\n            printedLines++;\n          }\n          res += \"\\n  \".concat(actualLines[i - 1]);\n          printedLines++;\n        }\n        // Mark the current line as the last diverging one.\n        lastPos = i;\n        // Add the actual line to the result and cache the expected diverging\n        // line so consecutive diverging lines show up as +++--- and not +-+-+-.\n        res += \"\\n\".concat(green, \"+\").concat(white, \" \").concat(actualLine);\n        other += \"\\n\".concat(red, \"-\").concat(white, \" \").concat(expectedLine);\n        printedLines += 2;\n        // Lines are identical\n      } else {\n        // Add all cached information to the result before adding other things\n        // and reset the cache.\n        res += other;\n        other = '';\n        // If the last diverging line is exactly one line above or if it is the\n        // very first line, add the line to the result.\n        if (cur === 1 || i === 0) {\n          res += \"\\n  \".concat(actualLine);\n          printedLines++;\n        }\n      }\n    }\n    // Inspected object to big (Show ~20 rows max)\n    if (printedLines > 20 && i < maxLines - 2) {\n      return \"\".concat(msg).concat(skippedMsg, \"\\n\").concat(res, \"\\n\").concat(blue, \"...\").concat(white).concat(other, \"\\n\") + \"\".concat(blue, \"...\").concat(white);\n    }\n  }\n  return \"\".concat(msg).concat(skipped ? skippedMsg : '', \"\\n\").concat(res).concat(other).concat(end).concat(indicator);\n}\nvar AssertionError = /*#__PURE__*/function (_Error, _inspect$custom) {\n  _inherits(AssertionError, _Error);\n  var _super = _createSuper(AssertionError);\n  function AssertionError(options) {\n    var _this;\n    _classCallCheck(this, AssertionError);\n    if (_typeof(options) !== 'object' || options === null) {\n      throw new ERR_INVALID_ARG_TYPE('options', 'Object', options);\n    }\n    var message = options.message,\n      operator = options.operator,\n      stackStartFn = options.stackStartFn;\n    var actual = options.actual,\n      expected = options.expected;\n    var limit = Error.stackTraceLimit;\n    Error.stackTraceLimit = 0;\n    if (message != null) {\n      _this = _super.call(this, String(message));\n    } else {\n      if (process.stderr && process.stderr.isTTY) {\n        // Reset on each call to make sure we handle dynamically set environment\n        // variables correct.\n        if (process.stderr && process.stderr.getColorDepth && process.stderr.getColorDepth() !== 1) {\n          blue = \"\\x1B[34m\";\n          green = \"\\x1B[32m\";\n          white = \"\\x1B[39m\";\n          red = \"\\x1B[31m\";\n        } else {\n          blue = '';\n          green = '';\n          white = '';\n          red = '';\n        }\n      }\n      // Prevent the error stack from being visible by duplicating the error\n      // in a very close way to the original in case both sides are actually\n      // instances of Error.\n      if (_typeof(actual) === 'object' && actual !== null && _typeof(expected) === 'object' && expected !== null && 'stack' in actual && actual instanceof Error && 'stack' in expected && expected instanceof Error) {\n        actual = copyError(actual);\n        expected = copyError(expected);\n      }\n      if (operator === 'deepStrictEqual' || operator === 'strictEqual') {\n        _this = _super.call(this, createErrDiff(actual, expected, operator));\n      } else if (operator === 'notDeepStrictEqual' || operator === 'notStrictEqual') {\n        // In case the objects are equal but the operator requires unequal, show\n        // the first object and say A equals B\n        var base = kReadableOperator[operator];\n        var res = inspectValue(actual).split('\\n');\n\n        // In case \"actual\" is an object, it should not be reference equal.\n        if (operator === 'notStrictEqual' && _typeof(actual) === 'object' && actual !== null) {\n          base = kReadableOperator.notStrictEqualObject;\n        }\n\n        // Only remove lines in case it makes sense to collapse those.\n        // TODO: Accept env to always show the full error.\n        if (res.length > 30) {\n          res[26] = \"\".concat(blue, \"...\").concat(white);\n          while (res.length > 27) {\n            res.pop();\n          }\n        }\n\n        // Only print a single input.\n        if (res.length === 1) {\n          _this = _super.call(this, \"\".concat(base, \" \").concat(res[0]));\n        } else {\n          _this = _super.call(this, \"\".concat(base, \"\\n\\n\").concat(res.join('\\n'), \"\\n\"));\n        }\n      } else {\n        var _res = inspectValue(actual);\n        var other = '';\n        var knownOperators = kReadableOperator[operator];\n        if (operator === 'notDeepEqual' || operator === 'notEqual') {\n          _res = \"\".concat(kReadableOperator[operator], \"\\n\\n\").concat(_res);\n          if (_res.length > 1024) {\n            _res = \"\".concat(_res.slice(0, 1021), \"...\");\n          }\n        } else {\n          other = \"\".concat(inspectValue(expected));\n          if (_res.length > 512) {\n            _res = \"\".concat(_res.slice(0, 509), \"...\");\n          }\n          if (other.length > 512) {\n            other = \"\".concat(other.slice(0, 509), \"...\");\n          }\n          if (operator === 'deepEqual' || operator === 'equal') {\n            _res = \"\".concat(knownOperators, \"\\n\\n\").concat(_res, \"\\n\\nshould equal\\n\\n\");\n          } else {\n            other = \" \".concat(operator, \" \").concat(other);\n          }\n        }\n        _this = _super.call(this, \"\".concat(_res).concat(other));\n      }\n    }\n    Error.stackTraceLimit = limit;\n    _this.generatedMessage = !message;\n    Object.defineProperty(_assertThisInitialized(_this), 'name', {\n      value: 'AssertionError [ERR_ASSERTION]',\n      enumerable: false,\n      writable: true,\n      configurable: true\n    });\n    _this.code = 'ERR_ASSERTION';\n    _this.actual = actual;\n    _this.expected = expected;\n    _this.operator = operator;\n    if (Error.captureStackTrace) {\n      // eslint-disable-next-line no-restricted-syntax\n      Error.captureStackTrace(_assertThisInitialized(_this), stackStartFn);\n    }\n    // Create error message including the error code in the name.\n    _this.stack;\n    // Reset the name.\n    _this.name = 'AssertionError';\n    return _possibleConstructorReturn(_this);\n  }\n  _createClass(AssertionError, [{\n    key: \"toString\",\n    value: function toString() {\n      return \"\".concat(this.name, \" [\").concat(this.code, \"]: \").concat(this.message);\n    }\n  }, {\n    key: _inspect$custom,\n    value: function value(recurseTimes, ctx) {\n      // This limits the `actual` and `expected` property default inspection to\n      // the minimum depth. Otherwise those values would be too verbose compared\n      // to the actual error message which contains a combined view of these two\n      // input values.\n      return inspect(this, _objectSpread(_objectSpread({}, ctx), {}, {\n        customInspect: false,\n        depth: 0\n      }));\n    }\n  }]);\n  return AssertionError;\n}( /*#__PURE__*/_wrapNativeSuper(Error), inspect.custom);\nmodule.exports = AssertionError;","const vscode = require('vscode');\n\nconst path = require('path');\nconst fs = require('fs');\nconst os = require('os');\nconst child_process = require('child_process');\n\nconst fast_load_utils = require('./fast_load_utils.js');\n\n// See DEV_README.md file for additional info.\n\n// TODO get rid of scratch file alignment in the next iteration.\n// TODO consider moving sample head/tail commands to the Rainbow CSV group\n\nconst csv_utils = require('./rbql_core/rbql-js/csv_utils.js');\n\nvar rbql_csv = null; // Using lazy load to improve startup performance.\nfunction ll_rbql_csv() {\n    if (rbql_csv === null)\n        rbql_csv = require('./rbql_core/rbql-js/rbql_csv.js');\n    return rbql_csv;\n}\n\n\nvar rainbow_utils = null; // Using lazy load to improve startup performance.\nfunction ll_rainbow_utils() {\n    if (rainbow_utils === null) {\n        rainbow_utils = require('./rainbow_utils.js');\n    }\n    return rainbow_utils;\n}\n\n// TODO consider checking `vscode.env.appHost == 'desktop'` instead.\nconst is_web_ext = (os.homedir === undefined); // Runs as web extension in browser.\nvar web_extension_uri = null;\nconst preview_window_size = 100;\nconst scratch_buf_marker = 'vscode_rbql_scratch';\nconst dynamic_csv_highlight_margin = 50; // TODO make configurable\n\nlet whitespace_aligned_files = new Set();\n\nlet alternate_row_background_decoration_type = null;\nlet tracked_field_decoration_types = [];\n\n// TODO consider wrapping this into a class with enable()/disable() methods. The class could also access the global virtual alignment mode.\nlet custom_virtual_alignment_modes = new Map(); // file_name -> VA_EXPLICITLY_ENABLED|VA_EXPLICITLY_DISABLED\nconst VA_EXPLICITLY_ENABLED = \"enabled\";\nconst VA_EXPLICITLY_DISABLED = \"disabled\";\nlet whole_doc_alignment_stats = new Map();\n\nvar result_set_parent_map = new Map();\nvar cached_table_parse_result = new Map(); // TODO store doc timestamp / size to invalidate the entry when the doc changes.\nvar manual_comment_prefix_stoplist = new Set();\n\n// Although these buttons are now available as context menu actions we keep them because they are part of the extension traditions.\nvar rbql_status_bar_button = null;\nvar align_shrink_button = null;\nvar copy_back_button = null;\nvar column_info_button = null;\nvar dynamic_dialect_select_button = null;\n\nvar rbql_context = null;\n\nvar debug_log_output_channel = null;\n\nvar last_rbql_queries = new Map(); // Query history does not replace this structure, it is also used to store partially entered queries for preview window switch.\n\nvar client_html_template = null;\nvar dialect_selection_html_template = null;\n\n// This `global_state` is persistent across VSCode restarts.\nvar global_state = null;\n\nvar rbql_preview_panel = null;\nvar dialect_panel = null;\n\nvar doc_first_edit_subscription = null;\nvar column_info_cursor_subscription = null;\nvar alt_background_cursor_subscription = null;\n\nvar last_closed_rainbow_doc_info = null;\n\nvar _unit_test_last_rbql_report = null; // For unit tests only.\nvar _unit_test_last_warnings = null; // For unit tests only.\n\nlet cursor_timeout_handle_for_column_info = null;\nlet cursor_timeout_handle_for_alt_row_background = null;\n\nlet rainbow_token_event = null;\nlet comment_token_event = null;\nlet row_background_decoration_event = null;\nlet column_tracking_decoration_event = null;\nlet sticky_header_disposable = null;\nlet inlay_hint_disposable = null;\n\nconst PLAINTEXT = 'plaintext';\nconst DYNAMIC_CSV = 'dynamic csv';\n\nconst QUOTED_POLICY = 'quoted';\nconst WHITESPACE_POLICY = 'whitespace';\nconst QUOTED_RFC_POLICY = 'quoted_rfc';\nconst SIMPLE_POLICY = 'simple';\n\n\nlet extension_context = {\n    lint_results: new Map(),\n    lint_status_bar_button: null,\n    dynamic_document_dialects: new Map(),\n    custom_comment_prefixes: new Map(), // TODO consider making custom comment prefixes records persistent.\n    original_language_ids: new Map(),\n    toggle_enabled_rows_backgrounds: new Map(),\n    tracked_columns: new Map(),\n    reenable_rainbow_language_infos: new Map(), // This only needed for \"Rainbow On\" functionality that reverts \"Rainbow Off\" effect.\n    autodetection_stoplist: new Set(),\n    autodetection_temporarily_disabled_for_rbql: false,\n    dynamic_dialect_for_next_request: null,\n    logging_enabled: false,\n    logging_next_context_id: 1,\n};\n\nconst dialect_map = {\n    'csv': [',', QUOTED_POLICY],\n    'tsv': ['\\t', SIMPLE_POLICY],\n    'csv (semicolon)': [';', QUOTED_POLICY],\n    'csv (pipe)': ['|', SIMPLE_POLICY],\n    'csv (whitespace)': [' ', WHITESPACE_POLICY],\n    [DYNAMIC_CSV]: [null, null]\n};\n\n\nconst COMMENT_TOKEN = 'comment';\nconst rainbow_token_types = ['rainbow1', 'rainbow2', 'rainbow3', 'rainbow4', 'rainbow5', 'rainbow6', 'rainbow7', 'rainbow8', 'rainbow9', 'rainbow10'];\nconst all_token_types = rainbow_token_types.concat([COMMENT_TOKEN]);\nconst tokens_legend = new vscode.SemanticTokensLegend(all_token_types);\n\n\nfunction is_eligible_scheme(vscode_doc)  {\n    // Make sure that the the doc has a valid scheme.\n    // We don't want to handle virtual docs and docs created by other extensions, see https://code.visualstudio.com/api/extension-guides/virtual-documents#events-and-visibility and https://github.com/mechatroner/vscode_rainbow_csv/issues/123\n    // VScode also opens pairing virtual `.git` documents for git-controlled files that we also want to skip, see https://github.com/microsoft/vscode/issues/22561.\n    // \"vscode-test-web\" scheme is used for browser unit tests.\n    return vscode_doc && vscode_doc.uri && ['file', 'untitled', 'vscode-test-web'].indexOf(vscode_doc.uri.scheme) != -1;\n}\n\n\nfunction is_eligible_doc(vscode_doc) {\n    // For new untitled scratch documents `fileName` would be \"Untitled-1\", \"Untitled-2\", etc, so we won't enter this branch.\n    return vscode_doc && vscode_doc.uri && vscode_doc.fileName && is_eligible_scheme(vscode_doc);\n}\n\n\nfunction is_rainbow_dialect_doc(vscode_doc) {\n    return is_eligible_doc(vscode_doc) && dialect_map.hasOwnProperty(vscode_doc.languageId);\n}\n\n\nfunction make_dialect_info(delim, policy) {\n    return {'delim': delim, 'policy': policy};\n}\n\n\nfunction make_dynamic_dialect_key(file_path) {\n    return 'dynamic_dialect:' + file_path;\n}\n\n\nasync function save_dynamic_info(extension_context, file_path, dialect_info) {\n    await save_to_global_state(make_dynamic_dialect_key(file_path), dialect_info);\n    extension_context.dynamic_document_dialects.set(file_path, dialect_info);\n}\n\n\nasync function remove_dynamic_info(file_path) {\n    await save_to_global_state(make_dynamic_dialect_key(file_path), undefined);\n    extension_context.dynamic_document_dialects.delete(file_path);\n}\n\n\nfunction get_dynamic_info(file_path) {\n    // Filetypes (lang modes) are not preserved across doc reopen but surprisingly preserved across VSCode restarts so we are also storing them in persistent global state.\n    // Persistent dialect info has some minor drawbacks (e.g. performance also restart not completely resetting the state is an issue by itself in some scenarios) and could be reconsidered if more serious issues are found.\n    if (extension_context.dynamic_document_dialects.has(file_path)) {\n        return extension_context.dynamic_document_dialects.get(file_path);\n    }\n    // Failed to get from the session-local dynamic_document_dialects - check if we have it persistently stored from a previous session.\n    let dialect_info = get_from_global_state(make_dynamic_dialect_key(file_path), null);\n    if (dialect_info && dialect_info.hasOwnProperty('delim') && dialect_info.hasOwnProperty('policy')) {\n        extension_context.dynamic_document_dialects.set(file_path, dialect_info);\n        return dialect_info;\n    }\n    return null;\n}\n\n\nfunction safe_lower(src_str) {\n    if (!src_str)\n        return src_str;\n    return src_str.toLowerCase();\n}\n\n\nfunction get_default_policy(separator) {\n    // This function is most likely a temporal workaround, get rid of it when possible.\n    for (let language_id in dialect_map) {\n        if (!dialect_map.hasOwnProperty(language_id))\n            continue;\n        if (dialect_map[language_id][0] == separator)\n            return dialect_map[language_id][1];\n    }\n    return SIMPLE_POLICY;\n}\n\n\nfunction map_dialect_to_language_id(separator, policy) {\n    for (let language_id in dialect_map) {\n        if (!dialect_map.hasOwnProperty(language_id))\n            continue;\n        if (dialect_map[language_id][0] == separator && dialect_map[language_id][1] == policy)\n            return language_id;\n    }\n    return DYNAMIC_CSV;\n}\n\n\n// This structure will get properly initialized during the startup.\nlet absolute_path_map = {\n    'rbql_client.js': null,\n    'contrib/textarea-caret-position/index.js': null,\n    'rbql_suggest.js': null,\n    'rbql_logo.svg': null,\n    'rbql_client.html': null,\n    'dialect_select.html': null,\n    'dialect_select.js': null,\n    'rbql mock/rbql_mock.py': null,\n    'rbql_core/vscode_rbql.py': null\n};\n\n\nfunction show_single_line_error(error_msg) {\n    var active_window = vscode.window;\n    if (!active_window)\n        return;\n    // Do not \"await\" error messages because the promise gets resolved only on error dismissal.\n    active_window.showErrorMessage(error_msg);\n}\n\n\nfunction sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\n\nasync function report_progress(progress, status_message) {\n    progress.report({message: status_message});\n    // Push the current stack to the JS callback queue to allow UI update.\n    await sleep(0);\n}\n\n\nfunction get_from_global_state(key, default_value) {\n    // Load KV pair from the \"global state\" which is persistent across VSCode restarts.\n    if (global_state) {\n        var value = global_state.get(key);\n        if (value !== null && value !== undefined)\n            return value;\n    }\n    return default_value;\n}\n\n\nasync function save_to_global_state(key, value) {\n    // Save KV pair to the \"global state\" which is persistent across VSCode restarts.\n    if (global_state && key) {\n        await global_state.update(key, value);\n        return true;\n    }\n    return false;\n}\n\n\nasync function replace_doc_content(active_editor, active_doc, new_content) {\n    let invalid_range = new vscode.Range(0, 0, active_doc.lineCount /* Intentionally missing the '-1' */, 0);\n    let full_range = active_doc.validateRange(invalid_range);\n    await active_editor.edit(edit => edit.replace(full_range, new_content));\n}\n\n\nfunction make_header_key(file_path) {\n    return 'rbql_header_info:' + file_path;\n}\n\n\nfunction make_with_headers_key(file_path) {\n    return 'rbql_with_headers:' + file_path;\n}\n\n\nfunction get_from_config(param_name, default_value, config=null) {\n    if (!config) {\n        config = vscode.workspace.getConfiguration('rainbow_csv');\n    }\n    return config ? config.get(param_name) : default_value;\n}\n\nclass TrackedColumns {\n    // TODO move to rainbow_utils.js and add unit tests\n    constructor() {\n        this.column_to_decoration_id = new Map();\n    }\n\n    is_tracked(column_num) {\n        return this.column_to_decoration_id.has(column_num);\n    }\n\n    get_tracked_columns() {\n        return Array.from(this.column_to_decoration_id.keys());\n    }\n\n    toggle_tracking(column_num) {\n        if (this.column_to_decoration_id.has(column_num)) {\n            this.column_to_decoration_id.delete(column_num);\n        } else {\n            if (this.num_tracked() >= tracked_field_decoration_types.length) {\n                return false;\n            }\n            let existing_decoration_ids = Array.from(this.column_to_decoration_id.values());\n            let new_id = 0;\n            while (existing_decoration_ids.includes(new_id)) {\n                new_id += 1;\n            }\n            this.column_to_decoration_id.set(column_num, new_id);\n        }\n        return true;\n    }\n\n    get_decoration_type(column_num) {\n        if (!this.column_to_decoration_id.has(column_num)) {\n            return null;\n        }\n        return tracked_field_decoration_types[this.column_to_decoration_id.get(column_num)];\n\n    }\n\n    num_tracked() {\n        return this.column_to_decoration_id.size;\n    }\n\n    empty() {\n        return this.column_to_decoration_id.size == 0;\n    }\n\n}\n\nclass StackContextLogWrapper {\n    // Use class instead of pure function to avoid passing context name and checking if logging is enabled in the config in each call.\n    constructor(context_name, caller_context_id=null) {\n        this.context_name = context_name;\n        this.logging_enabled = extension_context.logging_enabled;\n        this.context_id = caller_context_id === null ? extension_context.logging_next_context_id : caller_context_id;\n        extension_context.logging_next_context_id += 1;\n    }\n\n    log_doc_event(event_name, vscode_doc=null) {\n        if (!this.logging_enabled)\n            return;\n        try {\n            let full_event = `CID:${this.context_id}, ${this.context_name}:${event_name}`;\n            if (vscode_doc) {\n                full_event = `${full_event}, doc_lang:${vscode_doc.languageId}`;\n                if (vscode_doc.uri) {\n                    let str_uri = vscode_doc.uri.toString(/*skipEncoding=*/true);\n                    full_event = `${full_event}, doc_uri:${str_uri}`;\n                }\n            } else {\n                full_event = `${full_event}, no_doc:1`;\n            }\n            // Use \"info\" level because logging is flag-guarded by the extension-level setting.\n            debug_log_output_channel.info(full_event);\n        } catch (error) {\n            console.error(`Rainbow CSV: Unexpected log failure. ${this.context_name}:${this.event_name}`);\n            return;\n        }\n    }\n\n    log_simple_event(event_name) {\n        if (!this.logging_enabled)\n            return;\n        try {\n            let full_event = `CID:${this.context_id}, ${this.context_name}:${event_name}`;\n            debug_log_output_channel.info(full_event);\n        } catch (error) {\n            console.error(`Rainbow CSV: Unexpected log failure. ${this.context_name}:${this.event_name}`);\n            return;\n        }\n    }\n}\n\n\nfunction get_header_from_document(document, delim, policy, comment_prefix) {\n    let [_header_lnum, header_line] = ll_rainbow_utils().get_header_line(document, comment_prefix);\n    if (!header_line) {\n        return null;\n    }\n    return csv_utils.smart_split(header_line, delim, policy, /*preserve_quotes_and_whitespaces=*/false)[0];\n}\n\n\nfunction get_header(document, delim, policy, comment_prefix) {\n    var file_path = document.fileName;\n    if (file_path) {\n        let header_info = get_from_global_state(make_header_key(file_path), null);\n        if (header_info !== null && header_info.header !== null) {\n            return header_info.header;\n        }\n    }\n    return get_header_from_document(document, delim, policy, comment_prefix);\n}\n\n\nfunction get_dialect(document) {\n    let language_id = document.languageId;\n    let delim = null;\n    let policy = null;\n\n    let comment_prefix = '';\n    if (extension_context.custom_comment_prefixes.has(document.fileName)) {\n        comment_prefix = extension_context.custom_comment_prefixes.get(document.fileName);\n    } else {\n        comment_prefix = get_from_config('comment_prefix', '');\n    }\n    if (language_id != DYNAMIC_CSV && dialect_map.hasOwnProperty(language_id)) {\n        [delim, policy] = dialect_map[language_id];\n        return [delim, policy, comment_prefix];\n    }\n    let dialect_info = null;\n    if (language_id == DYNAMIC_CSV) {\n        dialect_info = get_dynamic_info(document.fileName);\n    }\n    if (dialect_info) {\n        return [dialect_info.delim, dialect_info.policy, comment_prefix];\n    }\n    // The language id can be `dynamic csv` here e.g. if user just now manually selected the \"Dynamic CSV\" filetype.\n    return [null, null, null];\n}\n\n\nfunction enable_rainbow_ui(active_doc) {\n    if (dynamic_dialect_select_button) {\n        dynamic_dialect_select_button.hide();\n    }\n    ll_rainbow_utils().show_lint_status_bar_button(vscode, extension_context, active_doc.fileName, active_doc.languageId);\n    show_rbql_status_bar_button();\n    show_align_shrink_button(active_doc.fileName);\n    show_rbql_copy_to_source_button(active_doc.fileName);\n    let cursor_position_info_enabled = get_from_config('enable_cursor_position_info', false);\n    if (cursor_position_info_enabled) {\n        show_column_info_button(); // This function finds active_doc internally, but the possible inconsistency is harmless.\n        column_info_cursor_subscription = vscode.window.onDidChangeTextEditorSelection(handle_cursor_movement_for_column_info);\n    }\n    if (row_background_enabled(active_doc.fileName)) {\n        alt_background_cursor_subscription = vscode.window.onDidChangeTextEditorSelection(handle_cursor_movement_for_alt_row_background);\n    }\n}\n\n\nclass StickyHeaderProvider {\n    // We don't utilize typescript `implement` interface keyword, because TS doesn't seem to be exporting interfaces to JS (unlike classes).\n    constructor() {\n    }\n    async provideDocumentSymbols(document) {\n        // This can trigger multiple times for the same doc because otherwise this won't work in case of e.g. header edit.\n        let [_delim, policy, comment_prefix] = get_dialect(document);\n        if (!policy) {\n            return null;\n        }\n        let header_lnum = null;\n        var file_path = document.fileName;\n        if (file_path) {\n            let header_info = get_from_global_state(make_header_key(file_path), null);\n            if (header_info !== null && header_info.header_line_num !== null) {\n                header_lnum = header_info.header_line_num;\n            }\n        }\n\n        if (header_lnum === null) {\n            header_lnum = ll_rainbow_utils().get_header_line(document, comment_prefix)[0];\n        }\n        if (header_lnum === null || header_lnum >= document.lineCount - 1) {\n            return null;\n        }\n        let full_range = new vscode.Range(header_lnum, 0, document.lineCount - 1, 65535);\n        full_range = document.validateRange(full_range); // Just in case, should be always NOOP.\n        let header_range = new vscode.Range(header_lnum, 0, header_lnum, 65535);\n        if (!full_range.contains(header_range)) {\n            return; // Should never happen.\n        }\n        let symbol_kind = vscode.SymbolKind.File; // It is vscode.SymbolKind.File because it shows a nice \"File\" icon in the upper navigational panel. Another nice option is \"Class\".\n        let header_symbol = new vscode.DocumentSymbol('data', '', symbol_kind, full_range, header_range);\n        return [header_symbol];\n    }\n}\n\n\nfunction get_all_rainbow_lang_selector() {\n    let document_selector = [];\n    for (let language_id in dialect_map) {\n        if (dialect_map.hasOwnProperty(language_id)) {\n            document_selector.push({language: language_id});\n        }\n    }\n    return document_selector;\n}\n\n\nfunction reconfigure_sticky_header_provider(force=false) {\n    // Sticky header is enabled in VSCode by default already.\n    // TODO consider overriding the global config option dynamically for the current language id and workspace only, but if you do this make sure that right click -> disable on the header still disables it.\n    let enable_sticky_header = get_from_config('enable_sticky_header', false);\n    if (!enable_sticky_header) {\n        if (sticky_header_disposable !== null) {\n            sticky_header_disposable.dispose();\n            sticky_header_disposable = null;\n        }\n        return;\n    }\n    if (sticky_header_disposable !== null && force) {\n        sticky_header_disposable.dispose();\n        sticky_header_disposable = null;\n    }\n    if (sticky_header_disposable !== null) {\n        // Sticky header provider already exists, nothing to do.\n        return;\n    }\n    let header_symbol_provider = new StickyHeaderProvider();\n    sticky_header_disposable = vscode.languages.registerDocumentSymbolProvider(get_all_rainbow_lang_selector(), header_symbol_provider);\n}\n\n\nfunction reenable_inlay_hints_provider() {\n    // Dispose previous provider to refresh stale hints, including enabling them when disabled or disabling when enabled.\n    if (inlay_hint_disposable !== null) {\n        inlay_hint_disposable.dispose();\n    }\n    let inlay_hints_provider = new InlayHintProvider();\n    inlay_hint_disposable = vscode.languages.registerInlayHintsProvider(get_all_rainbow_lang_selector(), inlay_hints_provider);\n}\n\n\nasync function configure_inlay_hints_alignment(language_id, log_wrapper) {\n    // We have 3 invocation contexts here:\n    // 1. VA is \"disabled\" but the function was called via the command palette command directly.\n    // 2. VA is \"manual\" and the function was called either by the command pallete or the \"Align\" button (essentially the same).\n    // 3. VA is \"always\" and the function was called on file open.\n    if (language_id == 'tsv') {\n        let active_editor = get_active_editor();\n        if (active_editor) {\n            if (active_editor.options.tabSize != 1) {\n                active_editor.options.tabSize = 1;\n                log_wrapper.log_doc_event(`Updated editor tab size to single (1) space for this doc`);\n            }\n        }\n    }\n\n    try {\n        let config = vscode.workspace.getConfiguration('editor', {languageId: language_id});\n        // Adjusting these settings as `configurationDefaults` in package.json doesn't work reliably, so we set it here dynamically.\n        // Note that there is User and Workspace-level configs options in the File->Preferences->Settings UI - this is important when you are trying to debug the limits.\n        // Adjusting these settings on the workspace level doesn't quite work because VSCode doesn't always have an active workspace, e.g. you can click [Close Workspace] from the main [File] menu to reproduce the problem. So we adjust the settings on global level instead which should always work.\n        let update_global_settings = true;\n        if (config.get('inlayHints.maximumLength') != 0) {\n            // Worklog: The first time I tried this the solution was half-working - we wouldn't see the inlay-hiding \"three dots\", but the alignment was still broken in a weird way. But the problem disappeared on \"restart\".\n            await config.update('inlayHints.maximumLength', 0, /*configurationTarget=*/update_global_settings, /*overrideInLanguage=*/true);\n            log_wrapper.log_doc_event(`Updated inlayHints.maximumLength = 0 for \"${language_id}\"`);\n        }\n        if (config.get('inlayHints.fontFamily') != '') {\n            await config.update('inlayHints.fontFamily', '', /*configurationTarget=*/update_global_settings, /*overrideInLanguage=*/true);\n            log_wrapper.log_doc_event(`Updated inlayHints.fontFamily = '' for \"${language_id}\"`);\n        }\n        if (config.get('inlayHints.fontSize') != '') {\n            await config.update('inlayHints.fontSize', '', /*configurationTarget=*/update_global_settings, /*overrideInLanguage=*/true);\n            log_wrapper.log_doc_event(`Updated inlayHints.fontSize = '' for \"${language_id}\"`);\n        }\n        if (config.get('inlayHints.padding') != '') {\n            await config.update('inlayHints.padding', '', /*configurationTarget=*/update_global_settings, /*overrideInLanguage=*/true);\n            log_wrapper.log_doc_event(`Updated inlayHints.padding = '' for \"${language_id}\"`);\n        }\n        // It would be nice to disable word wrap for the current editor only if aligned (because tables don't wrap) and then enable word wrap again, but there is no way to do this currently.\n        // Permanent disabling of wordWrap for csvs is a bad idea because in non-aligned mode it actually becomes an advantage for Rainbow non-alignment high info density paradigm.\n    } catch (e) {\n        log_wrapper.log_doc_event(\"Failed to update inlay hints user settings: \" + e);\n    }\n}\n\n\nfunction enable_dynamic_semantic_tokenization() {\n    // Some themes can disable semantic highlighting e.g. \"Tokyo Night\" https://marketplace.visualstudio.com/items?itemName=enkia.tokyo-night, so we explicitly override the default setting in \"configurationDefaults\" section of package.json.\n    // We also add all other csv dialects to \"configurationDefaults\":\"editor.semanticHighlighting.enabled\" override in order to enable comment line highlighting.\n    // Conflict with some other extensions might also cause semantic highlighting to completely fail (although this could be caused by the theme issue described above), see https://github.com/mechatroner/vscode_rainbow_csv/issues/149.\n    let token_provider = new RainbowTokenProvider();\n    if (rainbow_token_event !== null) {\n        rainbow_token_event.dispose();\n    }\n    let document_selector = { language: DYNAMIC_CSV }; // Use '*' to select all languages if needed.\n    rainbow_token_event = vscode.languages.registerDocumentRangeSemanticTokensProvider(document_selector, token_provider, tokens_legend);\n}\n\n\nfunction row_background_enabled(fileName) {\n    let default_enabled = get_from_config('highlight_rows', false);\n    return extension_context.toggle_enabled_rows_backgrounds.has(fileName) ? extension_context.toggle_enabled_rows_backgrounds.get(fileName) : default_enabled;\n}\n\n\nfunction toggle_row_background() {\n    let active_editor = get_active_editor();\n    if (!active_editor)\n        return;\n    var active_doc = get_active_doc(active_editor);\n    if (!active_doc)\n        return;\n    let [_delim, policy, _comment_prefix] = get_dialect(active_doc);\n    if (policy == QUOTED_RFC_POLICY) {\n        // FIXME use correct parsing logic to be able to handle multiline records and correctly highlight them\n        show_single_line_error(\"Alternating row background highlighting is currently unavailable for CSVs with multiline records\");\n        return;\n    }\n    let log_wrapper = new StackContextLogWrapper('toggle_row_background');\n    log_wrapper.log_doc_event('starting', active_doc);\n    let enabled_before = row_background_enabled(active_doc.fileName);\n    let highlighting_enabled = !enabled_before;\n    extension_context.toggle_enabled_rows_backgrounds.set(active_doc.fileName, highlighting_enabled);\n    if (highlighting_enabled) {\n        log_wrapper.log_doc_event('enabled', active_doc);\n    } else {\n        log_wrapper.log_doc_event('disabled', active_doc);\n        // Use empty range array to reset the decorations.\n        active_editor.setDecorations(alternate_row_background_decoration_type, []);\n    }\n\n    // Always re-register the provider to force decorations update on toggle.\n    register_row_background_decorations_provider();\n    if (alt_background_cursor_subscription == null) {\n        alt_background_cursor_subscription = vscode.window.onDidChangeTextEditorSelection(handle_cursor_movement_for_alt_row_background);\n    }\n}\n\n\nfunction register_column_tracking_decorations_provider() {\n    let decorations_provider = new ColumnTrackingDecorationsProvider();\n    if (column_tracking_decoration_event !== null) {\n        column_tracking_decoration_event.dispose();\n    }\n    // There is no way to register ranged decorations provider so we register a fake ranged semantic token provider that doesn't provide any tokens.\n    column_tracking_decoration_event = vscode.languages.registerDocumentRangeSemanticTokensProvider(get_all_rainbow_lang_selector(), decorations_provider, tokens_legend);\n}\n\n\nfunction toggle_column_tracking() {\n    let active_editor = get_active_editor();\n    if (!active_editor)\n        return;\n    var active_doc = get_active_doc(active_editor);\n    if (!active_doc || !is_rainbow_dialect_doc(active_doc))\n        return;\n    let log_wrapper = new StackContextLogWrapper('toggle_column_tracking');\n    log_wrapper.log_doc_event('starting', active_doc);\n\n    let position = ll_rainbow_utils().get_cursor_position_if_unambiguous(active_editor);\n    if (!position) {\n        return;\n    }\n    let [delim, policy, comment_prefix] = get_dialect(active_doc);\n    let cursor_position_info = ll_rainbow_utils().get_cursor_position_info(vscode, active_doc, delim, policy, comment_prefix, position);\n    if (!cursor_position_info)\n        return;\n    if (cursor_position_info.is_comment) {\n        vscode.window.showErrorMessage('Unable to track comments');\n        return;\n    }\n\n    let fileName = active_doc.fileName;\n    let trackings = extension_context.tracked_columns.has(fileName) ? extension_context.tracked_columns.get(fileName) : new TrackedColumns();\n    if (trackings.is_tracked(cursor_position_info.column_number)) {\n        let decoration_type = trackings.get_decoration_type(cursor_position_info.column_number);\n        // Use empty range array to reset the decorations.\n        active_editor.setDecorations(decoration_type, []);\n        log_wrapper.log_doc_event('disabling column tracking', active_doc);\n    } else {\n        log_wrapper.log_doc_event('enabling column tracking', active_doc);\n    }\n    if (!trackings.toggle_tracking(cursor_position_info.column_number)) {\n        vscode.window.showErrorMessage(`Unable to track more than ${trackings.num_tracked()} columns`);\n        return;\n    }\n    extension_context.tracked_columns.set(fileName, trackings);\n    // Always re-register the column tracking decorations provider to refresh the decorations so that toggle effect is immediately visible\n    register_column_tracking_decorations_provider();\n}\n\n\nfunction register_row_background_decorations_provider() {\n    let decorations_provider = new RowBackgroundDecorationsProvider();\n    if (row_background_decoration_event !== null) {\n        row_background_decoration_event.dispose();\n    }\n    // There is no way to register ranged decorations provider so we register a fake ranged semantic token provider that doesn't provide any tokens.\n    row_background_decoration_event = vscode.languages.registerDocumentRangeSemanticTokensProvider(get_all_rainbow_lang_selector(), decorations_provider, tokens_legend);\n}\n\n\nfunction register_comment_tokenization_handler() {\n    let token_provider = new CommentTokenProvider();\n    if (comment_token_event !== null) {\n        comment_token_event.dispose();\n    }\n    let document_selector = [];\n    for (let language_id in dialect_map) {\n        if (dialect_map.hasOwnProperty(language_id) && language_id != DYNAMIC_CSV) {\n            // We skip DYNAMIC_CSV here because its provider already handles comment lines.\n            document_selector.push({language: language_id});\n        }\n    }\n    comment_token_event = vscode.languages.registerDocumentRangeSemanticTokensProvider(document_selector, token_provider, tokens_legend);\n}\n\n\nfunction get_selected_separator(active_editor, active_doc) {\n    if (!active_editor || !active_doc)\n        return '';\n    let selection = active_editor.selection;\n    if (!selection) {\n        return '';\n    }\n    if (selection.start.line != selection.end.line) {\n        return '';\n    }\n    let separator = active_doc.lineAt(selection.start.line).text.substring(selection.start.character, selection.end.character);\n    return separator;\n}\n\n\nasync function choose_dynamic_separator(integration_test_options=null) {\n    let log_wrapper = new StackContextLogWrapper('choose_dynamic_separator');\n    log_wrapper.log_doc_event('starting', active_doc);\n    let active_editor = get_active_editor();\n    if (!active_editor) {\n        return;\n    }\n    var active_doc = get_active_doc(active_editor);\n    if (!is_eligible_doc(active_doc)) {\n        return;\n    }\n    let selected_separator = get_selected_separator(active_editor, active_doc);\n    if (!dialect_selection_html_template) {\n        dialect_selection_html_template = await load_resource_file_universal('dialect_select.html');\n    }\n    dialect_panel = vscode.window.createWebviewPanel('rainbow-dialect-select', 'Choose CSV Dialect', vscode.ViewColumn.Beside, {enableScripts: true});\n    dialect_panel.webview.html = adjust_webview_paths(dialect_panel, dialect_selection_html_template, ['dialect_select.js']);\n    dialect_panel.webview.onDidReceiveMessage(function(message) { handle_dialect_selection_message(active_doc, dialect_panel, message, selected_separator, log_wrapper, integration_test_options); });\n}\n\n\nfunction show_choose_dynamic_separator_button() {\n    if (!dynamic_dialect_select_button)\n        dynamic_dialect_select_button = vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Left);\n    dynamic_dialect_select_button.text = 'Choose Separator...';\n    dynamic_dialect_select_button.tooltip = 'Click to choose Dynamic CSV separator';\n    dynamic_dialect_select_button.command = 'rainbow-csv.RainbowSeparator';\n    dynamic_dialect_select_button.show();\n}\n\n\nasync function enable_rainbow_features_if_csv(active_doc, log_wrapper) {\n    log_wrapper.log_doc_event('start enable-rainbow-features-if-csv', active_doc);\n    if (!is_rainbow_dialect_doc(active_doc)) {\n        log_wrapper.log_simple_event('abort enable-rainbow-features-if-csv: non-rainbow dialect');\n        return;\n    }\n    var language_id = active_doc.languageId;\n    if (language_id == DYNAMIC_CSV && extension_context.dynamic_dialect_for_next_request != null) {\n        await save_dynamic_info(extension_context, active_doc.fileName, extension_context.dynamic_dialect_for_next_request);\n        extension_context.dynamic_dialect_for_next_request = null;\n    }\n    let [delim, policy, comment_prefix] = get_dialect(active_doc);\n    if (!delim || !policy) {\n        log_wrapper.log_simple_event('abort enable-rainbow-features-if-csv: missing delim or policy');\n        // Make sure UI elements are disabled except dynamic separator selection button.\n        disable_ui_elements();\n        show_choose_dynamic_separator_button();\n        return;\n    }\n    if (comment_prefix) {\n        // It is currently impoossible to set comment_prefix on document level, so we have to set it on language level instead.\n        // This could potentially cause minor problems in very rare situations.\n        // Applying 'setLanguageConfiguration' doesn't disable static configuration in language-configuration.json.\n        vscode.languages.setLanguageConfiguration(language_id, { comments: { lineComment: comment_prefix } });\n    }\n    if (language_id == DYNAMIC_CSV) {\n        // Re-enable tokenization to explicitly trigger the highligthing. Sometimes this doesn't happen automatically.\n        enable_dynamic_semantic_tokenization();\n    }\n    enable_rainbow_ui(active_doc);\n    if (get_from_config('virtual_alignment_mode', 'disabled') == 'always') {\n        await configure_inlay_hints_alignment(language_id, log_wrapper);\n        reenable_inlay_hints_provider();\n    }\n    await csv_lint(active_doc, /*is_manual_op=*/false);\n    log_wrapper.log_simple_event('finish enable-rainbow-features-if-csv');\n}\n\n\nfunction disable_ui_elements() {\n    let all_buttons = [extension_context.lint_status_bar_button, rbql_status_bar_button, copy_back_button, align_shrink_button, column_info_button, dynamic_dialect_select_button];\n    for (let i = 0; i < all_buttons.length; i++) {\n        if (all_buttons[i])\n            all_buttons[i].hide();\n    }\n    if (column_info_cursor_subscription) {\n        column_info_cursor_subscription.dispose();\n        column_info_cursor_subscription = null;\n    }\n    if (alt_background_cursor_subscription) {\n        alt_background_cursor_subscription.dispose();\n        alt_background_cursor_subscription = null;\n    }\n}\n\n\nfunction disable_rainbow_features_if_non_csv(active_doc, log_wrapper) {\n    log_wrapper.log_doc_event('start disable-rainbow-features-if-non-csv', active_doc);\n    if (is_rainbow_dialect_doc(active_doc)) {\n        log_wrapper.log_simple_event('abort disable-rainbow-features-if-non-csv: is rainbow dialect');\n        return;\n    }\n    log_wrapper.log_simple_event('perform disable-rainbow-features-if-non-csv');\n    disable_ui_elements();\n}\n\n\nfunction get_active_editor() {\n    var active_window = vscode.window;\n    if (!active_window)\n        return null;\n    var active_editor = active_window.activeTextEditor;\n    if (!active_editor)\n        return null;\n    return active_editor;\n}\n\n\nfunction get_active_doc(active_editor=null) {\n    if (!active_editor)\n        active_editor = get_active_editor();\n    if (!active_editor)\n        return null;\n    var active_doc = active_editor.document;\n    if (!active_doc)\n        return null;\n    return active_doc;\n}\n\n\nfunction is_active_doc(vscode_doc) {\n    let active_doc = get_active_doc();\n    return (active_doc && active_doc.uri && vscode_doc && vscode_doc.uri && active_doc.uri.toString() == vscode_doc.uri.toString());\n}\n\n\nfunction virtual_alignment_enabled(virtual_alignment_mode, custom_alignment_mode) {\n    return (custom_alignment_mode == VA_EXPLICITLY_ENABLED) || (virtual_alignment_mode == \"always\" && custom_alignment_mode != VA_EXPLICITLY_DISABLED);\n}\n\n\nfunction config_virtual_alignment_button(align_shrink_button, is_aligned) {\n    if (is_aligned) {\n        align_shrink_button.text = 'Shrink';\n        align_shrink_button.tooltip = 'Click to remove virtual alignment from this file';\n        align_shrink_button.command = 'rainbow-csv.VirtualShrink';\n    } else {\n        align_shrink_button.text = 'Align';\n        align_shrink_button.tooltip = 'Click to virtually align';\n        align_shrink_button.command = 'rainbow-csv.VirtualAlign';\n    }\n}\n\n\nfunction config_whitespace_alignment_button(align_shrink_button, is_aligned) {\n    if (is_aligned) {\n        align_shrink_button.text = 'Shrink';\n        align_shrink_button.tooltip = 'Click to shrink table - trim whitespaces from fields';\n        align_shrink_button.command = 'rainbow-csv.Shrink';\n    } else {\n        align_shrink_button.text = 'Align';\n        align_shrink_button.tooltip = 'Click to align table with extra whitespaces';\n        align_shrink_button.command = 'rainbow-csv.Align';\n    }\n}\n\n\nfunction show_align_shrink_button(file_path) {\n    if (!align_shrink_button)\n        align_shrink_button = vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Left);\n    let virtual_alignment_mode = get_from_config('virtual_alignment_mode', 'disabled');\n    if (virtual_alignment_mode == 'disabled') {\n        let is_aligned = whitespace_aligned_files.has(file_path);\n        config_whitespace_alignment_button(align_shrink_button, is_aligned);\n    } else {\n        let custom_alignment_mode = custom_virtual_alignment_modes.get(file_path);\n        let is_aligned = virtual_alignment_enabled(virtual_alignment_mode, custom_alignment_mode);\n        config_virtual_alignment_button(align_shrink_button, is_aligned);\n    }\n    align_shrink_button.show();\n}\n\n\nfunction do_show_column_info_button(full_report, short_report) {\n    if (!column_info_button)\n        column_info_button = vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Right, 1000);\n    column_info_button.text = short_report;\n    column_info_button.tooltip = full_report;\n    column_info_button.show();\n}\n\n\nfunction make_hover(document, language_id, position, cancellation_token) {\n    if (!get_from_config('enable_tooltip', false)) {\n        return;\n    }\n    let [delim, policy, comment_prefix] = get_dialect(document);\n    let cursor_position_info = ll_rainbow_utils().get_cursor_position_info(vscode, document, delim, policy, comment_prefix, position);\n    if (!cursor_position_info || cancellation_token.isCancellationRequested)\n        return null;\n    let enable_tooltip_column_names = get_from_config('enable_tooltip_column_names', false);\n    let header = get_header(document, delim, policy, comment_prefix);\n    if (!header) {\n        return null;\n    }\n    let [_full_text, short_report] = ll_rainbow_utils().format_cursor_position_info(cursor_position_info, header, enable_tooltip_column_names, /*show_comments=*/true, /*max_label_length=*/25);\n    let mds = new vscode.MarkdownString();\n    // Using a special pseudo-language grammar trick for highlighting the hover text using the same color as the column doesn't work anymore due to https://github.com/microsoft/vscode/issues/53723.\n    mds.appendText(short_report);\n    return new vscode.Hover(mds);\n}\n\n\nfunction show_column_info_button() {\n    let active_editor = get_active_editor();\n    if (!active_editor) {\n        return false;\n    }\n    let position = ll_rainbow_utils().get_cursor_position_if_unambiguous(active_editor);\n    if (!position) {\n        return false;\n    }\n    let active_doc = get_active_doc(active_editor);\n    let [delim, policy, comment_prefix] = get_dialect(active_doc);\n    let cursor_position_info = ll_rainbow_utils().get_cursor_position_info(vscode, active_doc, delim, policy, comment_prefix, position);\n    if (!cursor_position_info)\n        return false;\n    let enable_tooltip_column_names = get_from_config('enable_tooltip_column_names', false);\n    let header = get_header(active_doc, delim, policy, comment_prefix);\n    if (!header)\n        return false;\n    let [full_report, short_report] = ll_rainbow_utils().format_cursor_position_info(cursor_position_info, header, enable_tooltip_column_names, /*show_comments=*/false, /*max_label_length=*/25);\n    do_show_column_info_button(full_report, short_report);\n    return true;\n}\n\n\nfunction show_rbql_status_bar_button() {\n    if (!rbql_status_bar_button)\n        rbql_status_bar_button = vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Left);\n    rbql_status_bar_button.text = 'Query';\n    rbql_status_bar_button.tooltip = 'Click to run SQL-like RBQL query';\n    rbql_status_bar_button.command = 'rainbow-csv.RBQL';\n    rbql_status_bar_button.show();\n}\n\n\nfunction show_rbql_copy_to_source_button(file_path) {\n    let parent_table_path = result_set_parent_map.get(safe_lower(file_path));\n    if (!parent_table_path || parent_table_path.indexOf(scratch_buf_marker) != -1)\n        return;\n    let parent_basename = path.basename(parent_table_path);\n    if (!copy_back_button)\n        copy_back_button = vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Left);\n    copy_back_button.text = 'Copy Back';\n    copy_back_button.tooltip = `Copy to parent table: ${parent_basename}`;\n    copy_back_button.command = 'rainbow-csv.CopyBack';\n    copy_back_button.show();\n}\n\n\nasync function csv_lint(active_doc, is_manual_op) {\n    if (!active_doc)\n        active_doc = get_active_doc();\n    if (!is_rainbow_dialect_doc(active_doc)) {\n        return null;\n    }\n    var file_path = active_doc.fileName; // For new untitled scratch documents this would be \"Untitled-1\", \"Untitled-2\", etc...\n    var language_id = active_doc.languageId;\n    let lint_cache_key = `${file_path}.${language_id}`;\n    if (!is_manual_op) {\n        if (extension_context.lint_results.has(lint_cache_key))\n            return null;\n        if (!get_from_config('enable_auto_csv_lint', false))\n            return null;\n    }\n    let [delim, policy, comment_prefix] = get_dialect(active_doc);\n    if (policy === null)\n        return null;\n    extension_context.lint_results.set(lint_cache_key, {is_processing: true});\n    ll_rainbow_utils().show_lint_status_bar_button(vscode, extension_context, file_path, language_id); // Visual feedback.\n    let detect_trailing_spaces = get_from_config('csv_lint_detect_trailing_spaces', false);\n    let [_records, _num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, _comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/-1, /*collect_records=*/false, /*preserve_quotes_and_whitespaces=*/true, detect_trailing_spaces);\n    let is_ok = (first_defective_line === null && fields_info.size <= 1);\n    let lint_result = {'is_ok': is_ok, 'first_defective_line': first_defective_line, 'fields_info': fields_info, 'first_trailing_space_line': first_trailing_space_line};\n    extension_context.lint_results.set(lint_cache_key, lint_result);\n    if (is_manual_op) {\n        // Need timeout here to give user enough time to notice green -> yellow -> green switch, this is a sort of visual feedback.\n        await sleep(500);\n    }\n    ll_rainbow_utils().show_lint_status_bar_button(vscode, extension_context, file_path, language_id); // Visual feedback.\n    return lint_result;\n}\n\n\nasync function csv_lint_cmd() {\n    // TODO re-run on each file save with content change.\n    let lint_report_for_unit_tests = await csv_lint(null, /*is_manual_op=*/true);\n    return lint_report_for_unit_tests;\n}\n\n\nasync function run_internal_test_cmd(integration_test_options) {\n    if (integration_test_options && integration_test_options.check_initialization_state) {\n        // This mode is to ensure that the most basic operations do not cause rainbow csv to load extra (potentially heavy) code.\n        // Vim uses the same approach with its plugin/autoload folder layout design.\n        return {initialized: global_state !== null, lazy_loaded: rainbow_utils !== null};\n    }\n    if (integration_test_options && integration_test_options.check_last_rbql_report) {\n        return _unit_test_last_rbql_report;\n    }\n    if (integration_test_options && integration_test_options.check_last_rbql_warnings) {\n        return {'warnings': _unit_test_last_warnings};\n    }\n    return null;\n}\n\n\nasync function show_warnings(warnings) {\n    _unit_test_last_warnings = [];\n    if (!warnings || !warnings.length)\n        return;\n    var active_window = vscode.window;\n    if (!active_window)\n        return null;\n    for (var i = 0; i < warnings.length; i++) {\n        // Do not \"await\" warning messages because the promise gets resolved only on warning dismissal.\n        active_window.showWarningMessage('RBQL warning: ' + warnings[i]);\n    }\n    _unit_test_last_warnings = warnings;\n}\n\n\nasync function handle_rbql_result_file_node(text_doc, delim, policy, warnings) {\n    try {\n        await vscode.window.showTextDocument(text_doc);\n    } catch (error) {\n        show_single_line_error('Unable to open RBQL result document');\n        return;\n    }\n    let language_id = map_dialect_to_language_id(delim, policy);\n    if (language_id && text_doc.languageId != language_id) {\n        // In non-web version we open a new doc without preset filetype, so we need to manually set it.\n        await vscode.languages.setTextDocumentLanguage(text_doc, language_id);\n    }\n    await show_warnings(warnings);\n}\n\n\nasync function handle_rbql_result_file_web(text_doc, warnings) {\n    try {\n        await vscode.window.showTextDocument(text_doc);\n    } catch (error) {\n        show_single_line_error('Unable to open RBQL result document');\n        return;\n    }\n    await show_warnings(warnings);\n}\n\n\n\nfunction command_async_wrapper(cmd, args) {\n    return new Promise(function (resolve, reject) {\n        let stdout_data = '';\n        let stderr_data = '';\n        let process = child_process.spawn(cmd, args, {'windowsHide': true});\n        process.stdout.on('data', function(data) {\n            stdout_data += data.toString();\n        });\n        process.stderr.on('data', function(data) {\n            stderr_data += data.toString();\n        });\n        process.on('close', function (code) { // Consider replacing 'close' with 'exit'.\n            resolve({'exit_code': code, 'stdout': stdout_data, 'stderr': stderr_data});\n        });\n        process.on('error', function (err) {\n            reject(err);\n        });\n    });\n}\n\n\nfunction get_dst_table_name(input_path, output_delim) {\n    var table_name = path.basename(input_path);\n    var orig_extension = path.extname(table_name);\n    var delim_ext_map = {'\\t': '.tsv', ',': '.csv'};\n    var dst_extension = '.txt';\n    if (delim_ext_map.hasOwnProperty(output_delim)) {\n        dst_extension = delim_ext_map[output_delim];\n    } else if (orig_extension.length > 1) {\n        dst_extension = orig_extension;\n    }\n    let result_table_name = table_name + dst_extension;\n    if (result_table_name == table_name) { // Just being paranoid to avoid overwriting input table accidentally when output dir configured to be the same as input.\n        result_table_name += '.txt';\n    }\n    return result_table_name;\n}\n\n\nfunction file_path_to_query_key(file_path) {\n    return (file_path && file_path.indexOf(scratch_buf_marker) != -1) ? scratch_buf_marker : file_path;\n}\n\nfunction get_dst_table_dir(input_table_path) {\n    let rbql_output_dir = get_from_config('rbql_output_dir', 'TMP');\n    if (rbql_output_dir == 'TMP') {\n        return os.tmpdir();\n    } else if (rbql_output_dir == 'INPUT') {\n        return path.dirname(input_table_path);\n    } else {\n        // Return custom directory. If the directory does not exist or isn't writable RBQL itself will report more or less clear error.\n        return rbql_output_dir;\n    }\n}\n\n\nasync function run_command_and_parse_output(cmd, args) {\n    let execution_result = null;\n    try {\n        execution_result = await command_async_wrapper(cmd, args);\n    } catch (error) {\n        let error_details = error ? error.name + ': ' + error.message : '';\n        let error_msg = 'Something went wrong. Make sure you have python installed and added to PATH variable in your OS. Or you can use it with JavaScript instead - it should work out of the box\\nDetails:\\n' + error_details;\n        return {error_type: 'Integration', error_msg: error_msg, invocation_error: 1};\n    }\n    let json_report = execution_result.stdout;\n    if (!json_report || execution_result.stderr) {\n        let error_msg = execution_result.stderr || 'empty error';\n        return {error_type: 'Integration', error_msg: error_msg};\n    }\n    try {\n        return JSON.parse(json_report);\n    } catch (e) {\n        return {error_type: 'Integration', error_msg: 'Unable to parse JSON report'};\n    }\n}\n\n\nasync function run_first_working_interpreter_command_and_parse_output(interpreters_list, args, log_wrapper) {\n    // The main use case of this function is to try 'python3' first and then fall back to 'python' if 'python3' is unavailable for some reason.\n    let execution_result = null;\n    for (let interpreter_cmd of interpreters_list) {\n        log_wrapper.log_simple_event(`Attempting interpreter '${interpreter_cmd}' ...`);\n        execution_result = await run_command_and_parse_output(interpreter_cmd, args);\n        if (!execution_result || !execution_result.hasOwnProperty('invocation_error') || !execution_result.invocation_error) {\n            return execution_result;\n        }\n        log_wrapper.log_simple_event(`Interpreter '${interpreter_cmd}' invocation failed.`);\n    }\n    return execution_result;\n}\n\n\nasync function send_report_to_webview(webview, error_type, error_msg) {\n    let report_msg = {'msg_type': 'rbql_report'};\n    if (error_type)\n        report_msg[\"error_type\"] = error_type;\n    if (error_msg)\n        report_msg[\"error_msg\"] = error_msg;\n    _unit_test_last_rbql_report = report_msg;\n    await webview.postMessage(report_msg);\n}\n\n\nasync function run_rbql_query(webview, input_path, csv_encoding, backend_language, rbql_query, output_dialect, with_headers) {\n    // TODO refactor this function.\n    let log_wrapper = new StackContextLogWrapper('run-rbql-query');\n    log_wrapper.log_simple_event('start');\n    last_rbql_queries.set(file_path_to_query_key(input_path), rbql_query);\n    let interpreters_preference_list = ['python3', 'python'];\n    const test_marker = 'test ';\n\n    let [input_delim, input_policy, comment_prefix] = [rbql_context.delim, rbql_context.policy, rbql_context.comment_prefix];\n    let [output_delim, output_policy] = [input_delim, input_policy];\n    if (output_dialect == 'csv')\n        [output_delim, output_policy] = [',', QUOTED_POLICY];\n    if (output_dialect == 'tsv')\n        [output_delim, output_policy] = ['\\t', SIMPLE_POLICY];\n    rbql_context.output_delim = output_delim;\n    rbql_context.output_policy = output_policy;\n\n    let output_path = is_web_ext ? null : path.join(get_dst_table_dir(input_path), get_dst_table_name(input_path, output_delim));\n\n    if (rbql_query.startsWith(test_marker)) {\n        log_wrapper.log_simple_event('test mode');\n        // interpreters_preference_list = ['nopython', 'python3', 'python']; // interpreters_preference_list can be adjusted for testing\n        let args = [absolute_path_map['rbql mock/rbql_mock.py'], rbql_query];\n        let execution_result = await run_first_working_interpreter_command_and_parse_output(interpreters_preference_list, args, log_wrapper);\n        console.log(JSON.stringify(execution_result));\n        if (execution_result.hasOwnProperty('error_type') || execution_result.hasOwnProperty('error_msg')) {\n            await send_report_to_webview(webview, execution_result.error_type, execution_result.error_msg);\n            return;\n        }\n        await send_report_to_webview(webview, null, null);\n        return;\n    }\n    if (backend_language == 'js') {\n        log_wrapper.log_simple_event('using js backend');\n        let warnings = [];\n        let result_doc = null;\n        let target_language_id = map_dialect_to_language_id(output_delim, output_policy);\n        try {\n            if (is_web_ext) {\n                log_wrapper.log_simple_event('using web mode');\n                let result_lines = await ll_rainbow_utils().rbql_query_web(rbql_query, rbql_context.input_document, input_delim, input_policy, output_delim, output_policy, warnings, with_headers, comment_prefix);\n                let output_doc_cfg = {content: result_lines.join('\\n'), language: target_language_id};\n                if (target_language_id == DYNAMIC_CSV) {\n                    extension_context.dynamic_dialect_for_next_request = make_dialect_info(output_delim, output_policy);\n                }\n                extension_context.autodetection_temporarily_disabled_for_rbql = true;\n                result_doc = await vscode.workspace.openTextDocument(output_doc_cfg);\n                await send_report_to_webview(webview, null, null);\n                await handle_rbql_result_file_web(result_doc, warnings);\n                extension_context.dynamic_dialect_for_next_request = null;\n                extension_context.autodetection_temporarily_disabled_for_rbql = false;\n                log_wrapper.log_simple_event('finished OK');\n            } else {\n                log_wrapper.log_simple_event('using electron mode');\n                let csv_options = {'bulk_read': true};\n                await ll_rainbow_utils().rbql_query_node(global_state, rbql_query, input_path, input_delim, input_policy, output_path, output_delim, output_policy, csv_encoding, warnings, with_headers, comment_prefix, /*user_init_code=*/'', csv_options);\n                result_set_parent_map.set(safe_lower(output_path), input_path);\n                if (target_language_id == DYNAMIC_CSV) {\n                    extension_context.dynamic_dialect_for_next_request = make_dialect_info(output_delim, output_policy);\n                }\n                extension_context.autodetection_temporarily_disabled_for_rbql = true;\n                result_doc = await vscode.workspace.openTextDocument(output_path);\n                await send_report_to_webview(webview, null, null);\n                await handle_rbql_result_file_node(result_doc, output_delim, output_policy, warnings);\n                extension_context.dynamic_dialect_for_next_request = null;\n                extension_context.autodetection_temporarily_disabled_for_rbql = false;\n                log_wrapper.log_simple_event('finished OK');\n            }\n        } catch (e) {\n            extension_context.autodetection_temporarily_disabled_for_rbql = false;\n            let [error_type, error_msg] = ll_rbql_csv().exception_to_error_info(e);\n            log_wrapper.log_simple_event('finished with error');\n            await send_report_to_webview(webview, error_type, error_msg);\n            return;\n        }\n    } else {\n        log_wrapper.log_simple_event('using python backend');\n        if (is_web_ext) {\n            await send_report_to_webview(webview, 'Input error', 'Python backend for RBQL is not supported in web version, please use JavaScript backend.');\n            return;\n        }\n        let cmd_safe_query = Buffer.from(rbql_query, \"utf-8\").toString(\"base64\");\n        if (!comment_prefix) {\n            comment_prefix = '';\n        }\n        let args = [absolute_path_map['rbql_core/vscode_rbql.py'], cmd_safe_query, input_path, input_delim, input_policy, output_path, output_delim, output_policy, comment_prefix, csv_encoding];\n        if (with_headers)\n            args.push('--with_headers');\n        let execution_result = await run_first_working_interpreter_command_and_parse_output(interpreters_preference_list, args, log_wrapper);\n        if (execution_result.hasOwnProperty('error_type') || execution_result.hasOwnProperty('error_msg')) {\n            log_wrapper.log_simple_event('finished with error');\n            await send_report_to_webview(webview, execution_result.error_type, execution_result.error_msg);\n            return;\n        }\n        log_wrapper.log_simple_event('finished OK');\n        await send_report_to_webview(webview, null, null);\n        extension_context.autodetection_stoplist.add(output_path);\n        result_set_parent_map.set(safe_lower(output_path), input_path);\n        extension_context.autodetection_temporarily_disabled_for_rbql = true;\n        let output_doc = null;\n        try {\n            output_doc = await vscode.workspace.openTextDocument(output_path);\n        } finally {\n            extension_context.autodetection_temporarily_disabled_for_rbql = false;\n        }\n        // We need dynamic_dialect_for_next_request here because we can't open the output_doc with DYNAMIC_CSV, it will be switched on doc-ropen.\n        let target_language_id = map_dialect_to_language_id(output_delim, output_policy);\n        if (target_language_id == DYNAMIC_CSV) {\n            extension_context.dynamic_dialect_for_next_request = make_dialect_info(output_delim, output_policy);\n        }\n        await handle_rbql_result_file_node(output_doc, output_delim, output_policy, execution_result.warnings);\n        extension_context.dynamic_dialect_for_next_request = null;\n    }\n}\n\n\nasync function set_header_line() {\n    let active_editor = get_active_editor();\n    if (!active_editor)\n        return;\n    var active_doc = get_active_doc(active_editor);\n    if (!active_doc)\n        return;\n\n    let [delim, policy, _comment_prefix] = get_dialect(active_doc);\n    if (policy === null) {\n        show_single_line_error('Unable to set header line: no separator specified');\n        return;\n    }\n    let file_path = active_doc.fileName;\n    if (!file_path) {\n        show_single_line_error('Unable to set header line for non-file documents');\n        return;\n    }\n    let selection = active_editor.selection;\n    let header_line = selection.start.line;\n    let raw_header = active_doc.lineAt(header_line).text;\n    let header = csv_utils.smart_split(raw_header, delim, policy, false)[0];\n\n    // The advantage of saving the parsed list of column names is that it would stay consistent even if some lines are added/deleted before the header line (line migration).\n    // The advantage of saving the line number is that it is resilient to modifications of header line itself.\n    // It is also possible to verify consistency of header line and header column names and return null if they are inconsistent and return null.\n    // But discarding the inconsistent header line is probably not very obvious and user-friendly way of handling this.\n    // Showing the inconsistent header is probably better since these column names are only used for UI/readability and a wrong sticky line obviously hints on what happened and how to fix it, while a suddenly disappeared sticky line could be seen as a bug.\n    await save_to_global_state(make_header_key(file_path), {header_line_num: header_line, header: header});\n    // Re-register sticky header provider because otherwise it won't re-generate the symbols unless there were no edits to the file.\n    reconfigure_sticky_header_provider(/*force=*/true);\n}\n\n\nfunction preserve_original_language_id_if_needed(file_path, original_language_id, original_language_ids) {\n    if (!file_path) {\n        return;\n    }\n    if (dialect_map.hasOwnProperty(original_language_id)) {\n        // This is to prevent invalid noop \"dynamic csv\" -> \"dynamic csv\" switch without carying dialect info.\n        // And to simplify state management in general by not storing any rainbow dialects.\n        return;\n    }\n    original_language_ids.set(file_path, original_language_id);\n}\n\n\nasync function set_comment_prefix() {\n    let active_editor = get_active_editor();\n    if (!active_editor)\n        return;\n    var active_doc = get_active_doc(active_editor);\n    if (!active_doc)\n        return;\n    let selection = active_editor.selection;\n    if (!selection) {\n        show_single_line_error(\"Selection is empty\");\n        return;\n    }\n    let comment_prefix = active_doc.lineAt(selection.start.line).text.substring(selection.start.character, selection.end.character);\n    extension_context.custom_comment_prefixes.set(active_doc.fileName, comment_prefix);\n    if (!comment_prefix) {\n        manual_comment_prefix_stoplist.add(active_doc.fileName);\n    } else {\n        manual_comment_prefix_stoplist.delete(active_doc.fileName);\n    }\n    if (comment_prefix) {\n        vscode.languages.setLanguageConfiguration(active_doc.languageId, { comments: { lineComment: comment_prefix } });\n    }\n    if (active_doc.languageId == DYNAMIC_CSV) {\n        // Re-enable tokenization to explicitly trigger the highligthing. Sometimes this doesn't happen automatically.\n        enable_dynamic_semantic_tokenization();\n    } else {\n        // Re-enable comment tokenization to explicitly adjust the comment highligthing (sometimes to disable it if comment prefix is set to an empty string).\n        register_comment_tokenization_handler();\n    }\n}\n\n\nasync function restore_original_language() {\n    let log_wrapper = new StackContextLogWrapper('restore_original_language');\n    let active_doc = get_active_doc();\n    log_wrapper.log_doc_event('starting', active_doc);\n    if (!active_doc)\n        return;\n    let file_path = active_doc.fileName;\n    let original_language_id = PLAINTEXT;\n    if (extension_context.original_language_ids.has(file_path)) {\n        original_language_id = extension_context.original_language_ids.get(file_path);\n    }\n    if (dialect_map.hasOwnProperty(original_language_id) || !dialect_map.hasOwnProperty(active_doc.languageId)) {\n        show_single_line_error(\"Unable to restore original language\");\n        return;\n    }\n\n    if (file_path) {\n        // Preserve rainbow language info, so that the user can later re-enable it for this file.\n        let current_language_info = {language_id: active_doc.languageId};\n        let dynamic_dialect_info = get_dynamic_info(file_path);\n        if (dynamic_dialect_info) {\n            current_language_info.dynamic_dialect_info = dynamic_dialect_info;\n        }\n        extension_context.reenable_rainbow_language_infos.set(file_path, current_language_info);\n        extension_context.autodetection_stoplist.add(file_path);\n    }\n\n    active_doc = await vscode.languages.setTextDocumentLanguage(active_doc, original_language_id);\n    // There is no onDidChangeActiveTextEditor even for language change so we need to explicitly disable rainbow features.\n    disable_rainbow_features_if_non_csv(active_doc, log_wrapper);\n    // The only reason why we might want to clean up dynamic dialect info here is to facilitate triggering dynamic_document_dialect selection UI after manual filetype swith at the later point so that the user could choose a different dynamic dialect without manual selection by cursor / commands.\n    remove_dynamic_info(file_path);\n}\n\n\nasync function reenable_rainbow_language() {\n    var active_doc = get_active_doc();\n    if (!active_doc)\n        return;\n    let file_path = active_doc.fileName;\n    if (!extension_context.reenable_rainbow_language_infos.has(file_path)) {\n        // Make sure we have previous rainbow dialect saved.\n        show_single_line_error(\"Unable to re-enable rainbow highlighting automatically, select filetype manually or select a new separator with cursor.\");\n        return;\n    }\n    let rainbow_language_info = extension_context.reenable_rainbow_language_infos.get(file_path);\n    // Delete from the stoplist to revert \"Rainbow Off\" side-effects.\n    extension_context.autodetection_stoplist.delete(file_path);\n    if (rainbow_language_info.hasOwnProperty('dynamic_dialect_info')) {\n        await save_dynamic_info(extension_context, file_path, rainbow_language_info.dynamic_dialect_info);\n    }\n    // Preserve current (non-rainbow) language id to allow switching between \"Rainbow Off\"/\"Rainbow On\".\n    preserve_original_language_id_if_needed(file_path, active_doc.languageId, extension_context.original_language_ids);\n    extension_context.reenable_rainbow_language_infos.delete(file_path);\n    await vscode.languages.setTextDocumentLanguage(active_doc, rainbow_language_info.language_id);\n}\n\n\nasync function set_join_table_name() {\n    if (is_web_ext) {\n        show_single_line_error('This command is currently unavailable in web mode.');\n        return;\n    }\n    var active_doc = get_active_doc();\n    if (!active_doc)\n        return;\n    let file_path = active_doc.fileName;\n    if (!file_path) {\n        show_single_line_error('Unable to use this document as join table');\n        return;\n    }\n    var title = \"Input table name to use in RBQL JOIN expressions instead of table path\";\n    var input_box_props = {\"prompt\": title, \"value\": 'b'};\n    let table_name = await vscode.window.showInputBox(input_box_props);\n    if (!table_name)\n        return; // User pressed Esc and closed the input box.\n    await save_to_global_state(ll_rainbow_utils().make_table_name_key(table_name), file_path);\n}\n\n\nasync function set_virtual_header() {\n    var active_doc = get_active_doc();\n    let [delim, policy, comment_prefix] = get_dialect(active_doc);\n    if (policy === null) {\n        show_single_line_error('Unable to set virtual header: no separator specified');\n        return;\n    }\n    var file_path = active_doc.fileName;\n    if (!file_path) {\n        show_single_line_error('Unable to edit column names for non-file documents');\n        return;\n    }\n    var old_header = get_header(active_doc, delim, policy, comment_prefix);\n    var title = \"Adjust column names displayed in hover tooltips. Actual header line and file content won't be affected.\";\n    var old_header_str = old_header ? quoted_join(old_header, delim) : '';\n    var input_box_props = {\"prompt\": title, \"value\": old_header_str};\n    let raw_new_header = await vscode.window.showInputBox(input_box_props);\n    if (!raw_new_header)\n        return; // User pressed Esc and closed the input box.\n    let new_header = csv_utils.smart_split(raw_new_header, delim, policy, false)[0];\n    await save_to_global_state(make_header_key(file_path), {header_line_num: null, header: new_header});\n}\n\n\nasync function column_edit(edit_mode) {\n    let active_editor = get_active_editor();\n    if (!active_editor)\n        return;\n    let active_doc = active_editor.document;\n    if (!active_doc)\n        return;\n    let [delim, policy, comment_prefix] = get_dialect(active_doc);\n    if (policy === null) {\n        return;\n    }\n    let position = ll_rainbow_utils().get_cursor_position_if_unambiguous(active_editor);\n    if (!position) {\n        show_single_line_error('Unable to enter column edit mode: make sure that no text is selected and only one cursor is active');\n        return;\n    }\n    if (active_doc.lineCount >= 10000) {\n        show_single_line_error('Multicursor column edit works only for files smaller than 10000 lines.');\n        return;\n    }\n    let col_num = (ll_rainbow_utils().get_cursor_position_info(vscode, active_doc, delim, policy, comment_prefix, position)).column_number;\n    let [selections, error_msg, warning_msg] = ll_rainbow_utils().generate_column_edit_selections(vscode, active_doc, delim, policy, comment_prefix, edit_mode, col_num);\n    if (error_msg !== null) {\n        show_single_line_error(error_msg);\n        return;\n    }\n    if (warning_msg) {\n        vscode.window.showWarningMessage(warning_msg);\n    }\n    active_editor.selections = selections;\n    // Call showTextDocument so that the editor will gain focus and the cursors will become active and blinking. This is a critical step here!\n    await vscode.window.showTextDocument(active_doc);\n}\n\n\nasync function virtual_shrink_table() {\n    let active_doc = get_active_doc();\n    if (!active_doc) {\n        return;\n    }\n    custom_virtual_alignment_modes.set(active_doc.fileName, VA_EXPLICITLY_DISABLED);\n    // Call reenable_inlay_hints_provider to immediately get rid of existing inlay hints.\n    reenable_inlay_hints_provider();\n    show_align_shrink_button(active_doc.fileName);\n}\n\n\nasync function whitespace_shrink_table() {\n    let active_editor = get_active_editor();\n    let active_doc = get_active_doc(active_editor);\n    if (!is_rainbow_dialect_doc(active_doc)) {\n        return;\n    }\n    let [delim, policy, comment_prefix] = get_dialect(active_doc);\n    if (policy === null) {\n        return;\n    }\n    let progress_options = {location: vscode.ProgressLocation.Window, title: 'Rainbow CSV'};\n    await vscode.window.withProgress(progress_options, async (progress) => {\n        await report_progress(progress, 'Preparing');\n        let [shrinked_doc_text, first_failed_line] = ll_rainbow_utils().shrink_columns(active_doc, delim, policy, comment_prefix);\n        if (first_failed_line) {\n            show_single_line_error(`Unable to shrink: Inconsistent double quotes at line ${first_failed_line}`);\n            return;\n        }\n        whitespace_aligned_files.delete(active_doc.fileName);\n        show_align_shrink_button(active_doc.fileName);\n        if (shrinked_doc_text === null) {\n            vscode.window.showWarningMessage('No trailing whitespaces found, skipping');\n            return;\n        }\n        await report_progress(progress, 'Shrinking columns');\n        await replace_doc_content(active_editor, active_doc, shrinked_doc_text);\n    });\n}\n\n\nasync function virtual_align_table() {\n    let log_wrapper = new StackContextLogWrapper('virtual_align_table');\n    let active_doc = get_active_doc();\n    if (!is_rainbow_dialect_doc(active_doc))\n        return;\n    let [delim, policy, comment_prefix] = get_dialect(active_doc);\n    if (policy === null) {\n        return;\n    }\n    let double_width_alignment = get_from_config('double_width_alignment', true);\n    let [whole_doc_column_stats, first_failed_line, _records, _comments] = ll_rainbow_utils().calc_column_stats(active_doc, delim, policy, comment_prefix, double_width_alignment);\n    if (first_failed_line === null) {\n        log_wrapper.log_doc_event('Whole doc alignment stats were reset', active_doc);\n        whole_doc_alignment_stats.set(active_doc.fileName, whole_doc_column_stats);\n    } else {\n        log_wrapper.log_doc_event('Failed to reset whole doc alignment stats', active_doc);\n    }\n    // If there is a parsing error, just don't set whole-doc stats in that case the aligner would use local stats, still better than nothing.\n    custom_virtual_alignment_modes.set(active_doc.fileName, VA_EXPLICITLY_ENABLED);\n\n    // Make sure the alignment is enabled - this is needed if it is disabled but was just called manually from the command palette.\n    await configure_inlay_hints_alignment(active_doc.languageId, log_wrapper);\n    reenable_inlay_hints_provider();\n    show_align_shrink_button(active_doc.fileName);\n}\n\n\nasync function content_modifying_align_table() {\n    let active_editor = get_active_editor();\n    let active_doc = get_active_doc(active_editor);\n    if (!is_rainbow_dialect_doc(active_doc))\n        return;\n    let [delim, policy, comment_prefix] = get_dialect(active_doc);\n    if (policy === null) {\n        return;\n    }\n    let progress_options = {location: vscode.ProgressLocation.Window, title: 'Rainbow CSV'};\n    await vscode.window.withProgress(progress_options, async (progress) => {\n        await report_progress(progress, 'Calculating column statistics');\n        let double_width_alignment = get_from_config('double_width_alignment', true);\n        let [column_stats, first_failed_line, records, comments] = ll_rainbow_utils().calc_column_stats(active_doc, delim, policy, comment_prefix, double_width_alignment);\n        if (first_failed_line) {\n            show_single_line_error(`Unable to align: Inconsistent double quotes at line ${first_failed_line}`);\n            return;\n        }\n        await report_progress(progress, 'Preparing final alignment');\n        let aligned_doc_text = ll_rainbow_utils().align_columns(records, comments, column_stats, delim);\n\n        await report_progress(progress, 'Aligning columns');\n        let align_in_scratch_file = get_from_config('align_in_scratch_file', false);\n        let is_scratch_file = active_doc.uri && active_doc.uri.scheme == 'untitled';\n        if (align_in_scratch_file && !is_scratch_file) {\n            let aligned_doc_cfg = {content: aligned_doc_text, language: active_doc.languageId};\n            let scratch_doc = await vscode.workspace.openTextDocument(aligned_doc_cfg);\n            whitespace_aligned_files.add(scratch_doc.fileName);\n            await vscode.window.showTextDocument(scratch_doc);\n            show_align_shrink_button(scratch_doc.fileName); // This is likely redundant but won't hurt.\n        } else {\n            await replace_doc_content(active_editor, active_doc, aligned_doc_text);\n            whitespace_aligned_files.add(active_doc.fileName);\n            show_align_shrink_button(active_doc.fileName);\n        }\n    });\n}\n\n\nasync function do_copy_back(query_result_doc, active_editor) {\n    let data = query_result_doc.getText();\n    let active_doc = get_active_doc(active_editor);\n    if (!active_doc)\n        return;\n    await replace_doc_content(active_editor, active_doc, data);\n}\n\n\nasync function copy_back() {\n    if (is_web_ext) {\n        show_single_line_error('This command is currently unavailable in web mode.');\n        return;\n    }\n    let result_doc = get_active_doc();\n    if (!result_doc)\n        return;\n    let file_path = result_doc.fileName;\n    let parent_table_path = result_set_parent_map.get(safe_lower(file_path));\n    if (!parent_table_path)\n        return;\n    let parent_doc = await vscode.workspace.openTextDocument(parent_table_path);\n    let parent_editor = await vscode.window.showTextDocument(parent_doc);\n    await do_copy_back(result_doc, parent_editor);\n}\n\n\nasync function update_query_history(query) {\n    let history_list = get_from_global_state('rbql_query_history', []);\n    let old_index = history_list.indexOf(query);\n    if (old_index != -1) {\n        history_list.splice(old_index, 1);\n    } else if (history_list.length >= 20) {\n        history_list.splice(0, 1);\n    }\n    history_list.push(query);\n    await save_to_global_state('rbql_query_history', history_list);\n}\n\n\nasync function handle_dialect_selection_message(origin_doc, dialect_webview_panel, message, selected_separator, log_wrapper, integration_test_options) {\n    if (!message) {\n        return;\n    }\n    if (message.msg_type == 'dialect_handshake') {\n        let init_msg = {'msg_type': 'dialect_handshake', 'selected_separator': selected_separator};\n        if (integration_test_options && integration_test_options.integration_test) {\n            init_msg['integration_test'] = true;\n        }\n        await dialect_webview_panel.webview.postMessage(init_msg);\n    }\n\n    if (message.msg_type == 'apply_dialect') {\n        let delim = message.delim;\n        let policy = message.policy;\n        let comment_prefix = message.comment_prefix;\n        if (policy == 'whitespace' && delim != ' ') {\n            show_single_line_error(\"Selected policy can only be used with whitespace separator\");\n            return;\n        }\n        if (policy == 'double_escape' && delim == '\"') {\n            show_single_line_error(\"Double quote separator in incompatible with double quote escape policy\");\n            return;\n        }\n        if (!delim) {\n            show_single_line_error(\"Separator is empty\");\n            return;\n        }\n        if ([SIMPLE_POLICY, QUOTED_RFC_POLICY, QUOTED_POLICY, WHITESPACE_POLICY].indexOf(policy) == -1) {\n            show_single_line_error(\"Selected policy is empty or not supported\");\n            return;\n        }\n        // Dispose/close the webview so that the origin_doc becomes active and rainbow features can be applied immediately.\n        dialect_webview_panel.dispose();\n\n        await save_dynamic_info(extension_context, origin_doc.fileName, make_dialect_info(delim, policy));\n        extension_context.custom_comment_prefixes.set(origin_doc.fileName, comment_prefix);\n        if (origin_doc.languageId == DYNAMIC_CSV && is_active_doc(origin_doc)) {\n            // Filetype was already \"dynamic csv\", just re-highlight the file properly.\n            await enable_rainbow_features_if_csv(origin_doc, log_wrapper);\n        } else {\n            await vscode.languages.setTextDocumentLanguage(origin_doc, DYNAMIC_CSV);\n        }\n    }\n}\n\n\nasync function handle_rbql_client_message(webview, message, integration_test_options=null) {\n    let message_type = message['msg_type'];\n\n    if (message_type == 'handshake') {\n        var backend_language = get_from_global_state('rbql_backend_language', 'js');\n        var encoding = get_from_global_state('rbql_encoding', 'utf-8');\n        var init_msg = {'msg_type': 'handshake', 'backend_language': backend_language, 'encoding': encoding};\n        ll_rainbow_utils().sample_preview_records_from_context(rbql_context, init_msg, preview_window_size, cached_table_parse_result);\n        let path_key = file_path_to_query_key(rbql_context.input_document_path);\n        if (last_rbql_queries.has(path_key))\n            init_msg['last_query'] = last_rbql_queries.get(path_key);\n        let history_list = get_from_global_state('rbql_query_history', []);\n        init_msg['query_history'] = history_list;\n        init_msg['policy'] = rbql_context.policy;\n        init_msg['with_headers'] = rbql_context.with_headers;\n        init_msg['header_for_ui'] = rbql_context.header_for_ui;\n        init_msg['is_web_ext'] = is_web_ext;\n        if (integration_test_options) {\n            init_msg['integration_test_language'] = integration_test_options.rbql_backend;\n            init_msg['integration_test_query'] = integration_test_options.rbql_query;\n            init_msg['integration_test_with_headers'] = integration_test_options.with_headers || false;\n            init_msg['integration_test_delay'] = integration_test_options.integration_test_delay || 2000;\n        }\n        await webview.postMessage(init_msg);\n    }\n\n    if (message_type == 'fetch_table_header') {\n        try {\n            let table_id = message['table_id'];\n            let encoding = message['encoding'];\n\n            let input_table_dir = rbql_context.input_document_path ? path.dirname(rbql_context.input_document_path) : null;\n            let table_path = ll_rainbow_utils().find_table_path(global_state, input_table_dir, table_id);\n            if (!table_path)\n                return;\n            let header_line = await ll_rainbow_utils().read_header(table_path, encoding);\n            if (!header_line) {\n                return;\n            }\n            let [fields, warning] = csv_utils.smart_split(header_line, rbql_context.delim, rbql_context.policy, false);\n            if (!warning) {\n                webview.postMessage({'msg_type': 'fetch_table_header_response', 'header_for_ui': fields});\n            }\n        } catch (e) {\n            console.error('Unable to get join table header: ' + String(e));\n        }\n    }\n\n    if (message_type == 'update_query') {\n        let rbql_query = message['query'];\n        if (!rbql_query)\n            return;\n        if (rbql_context.input_document_path)\n            last_rbql_queries.set(file_path_to_query_key(rbql_context.input_document_path), rbql_query);\n    }\n\n    if (message_type == 'with_headers_change') {\n        rbql_context.with_headers = message['with_headers'];\n        if (rbql_context.input_document_path)\n            await save_to_global_state(make_with_headers_key(rbql_context.input_document_path), rbql_context.with_headers);\n    }\n\n    if (message_type == 'navigate') {\n        var navig_direction = message['direction'];\n        if (navig_direction == 'backward') {\n            rbql_context.requested_start_record -= preview_window_size;\n        } else if (navig_direction == 'forward') {\n            rbql_context.requested_start_record += preview_window_size;\n        } else if (navig_direction == 'begin') {\n            rbql_context.requested_start_record = 0;\n        } else if (navig_direction == 'end') {\n            rbql_context.requested_start_record = rbql_context.input_document.lineCount; // This is just max possible value which is incorrect and will be adjusted later.\n        }\n        let protocol_message = {'msg_type': 'navigate'};\n        ll_rainbow_utils().sample_preview_records_from_context(rbql_context, protocol_message, preview_window_size, cached_table_parse_result);\n        await webview.postMessage(protocol_message);\n    }\n\n    if (message_type == 'run') {\n        let rbql_query = message['query'];\n        let backend_language = message['backend_language'];\n        let encoding = message['encoding'];\n        let output_dialect = message['output_dialect'];\n        let with_headers = message['with_headers'];\n        await update_query_history(rbql_query);\n        await run_rbql_query(webview, rbql_context.input_document_path, encoding, backend_language, rbql_query, output_dialect, with_headers);\n    }\n\n    if (message_type == 'edit_udf') {\n        if (is_web_ext) {\n            await send_report_to_webview(webview, 'Input error', 'UDFs are currently not supported in web version');\n            return;\n        }\n        let backend_language = message['backend_language'];\n        let udf_file_path = null;\n        let default_content = '';\n        if (backend_language == 'js') {\n            udf_file_path = path.join(os.homedir(), '.rbql_init_source.js');\n            default_content = ll_rainbow_utils().get_default_js_udf_content();\n        } else {\n            udf_file_path = path.join(os.homedir(), '.rbql_init_source.py');\n            default_content = ll_rainbow_utils().get_default_python_udf_content();\n        }\n        if (!fs.existsSync(udf_file_path)) {\n            fs.writeFileSync(udf_file_path, default_content);\n        }\n        let udf_doc = await vscode.workspace.openTextDocument(udf_file_path);\n        await vscode.window.showTextDocument(udf_doc);\n    }\n\n    if (message_type == 'global_param_change') {\n        await save_to_global_state(message['key'], message['value']);\n    }\n}\n\n\nfunction adjust_webview_paths(preview_panel, client_html, paths_list) {\n    for (const local_path of paths_list) {\n        let adjusted_webview_url = null;\n        if (is_web_ext) {\n            adjusted_webview_url = absolute_path_map[local_path];\n        } else {\n            adjusted_webview_url = preview_panel.webview.asWebviewUri(vscode.Uri.file(absolute_path_map[local_path]));\n        }\n        client_html = client_html.replace(`src=\"${local_path}\"`, `src=\"${adjusted_webview_url}\"`);\n    }\n    return client_html;\n}\n\n\nasync function edit_rbql(integration_test_options=null) {\n    let active_window = vscode.window;\n    if (!active_window)\n        return;\n    let active_editor = active_window.activeTextEditor;\n    if (!active_editor)\n        return;\n    let active_doc = active_editor.document;\n    if (!active_doc)\n        return;\n    let orig_uri = active_doc.uri;\n    if (!orig_uri)\n        return;\n    // For web orig_uri.scheme can have other valid values e.g. `vscode-test-web` when testing the browser integration.\n    if (orig_uri.scheme != 'file' && orig_uri.scheme != 'untitled' && !is_web_ext)\n        return;\n    if (orig_uri.scheme == 'file' && active_doc.isDirty && !is_web_ext) {\n        show_single_line_error(\"Unable to run RBQL: file has unsaved changes\");\n        return;\n    }\n    let input_path = null;\n    if (orig_uri.scheme == 'untitled' && !is_web_ext) {\n        // Scheme 'untitled' means that the document is a scratch buffer that hasn't been saved yet, see https://code.visualstudio.com/api/references/document-selector\n        let data = active_doc.getText();\n        let rnd_suffix = String(Math.floor(Math.random() * 1000000));\n        input_path = path.join(os.tmpdir(), `${scratch_buf_marker}_${rnd_suffix}.txt`);\n        // TODO consider adding username to the input_path and using chmod 600 on it.\n        fs.writeFileSync(input_path, data);\n    } else {\n        input_path = active_doc.fileName;\n    }\n\n    if (!input_path) {\n        show_single_line_error(\"Unable to run RBQL for this file\");\n        return;\n    }\n\n    let [delim, policy, comment_prefix] = get_dialect(active_doc);\n    if (policy === null) {\n        policy = 'monocolumn';\n        delim = 'monocolumn';\n    }\n    let with_headers_by_default = get_from_config('rbql_with_headers_by_default', false);\n    let with_headers = get_from_global_state(make_with_headers_key(input_path), with_headers_by_default);\n    let header_for_ui = get_header_from_document(active_doc, delim, policy, comment_prefix);\n    rbql_context = {\n        \"input_document\": active_doc,\n        \"input_document_path\": input_path,\n        \"requested_start_record\": 0,\n        \"delim\": delim,\n        \"policy\": policy,\n        \"comment_prefix\": comment_prefix,\n        \"with_headers\": with_headers,\n        \"header_for_ui\": header_for_ui\n    };\n\n    rbql_preview_panel = vscode.window.createWebviewPanel('rbql-console', 'RBQL Console', vscode.ViewColumn.Active, {enableScripts: true});\n    if (!client_html_template) {\n        client_html_template = await load_resource_file_universal('rbql_client.html');\n    }\n    rbql_preview_panel.webview.html = adjust_webview_paths(rbql_preview_panel, client_html_template, ['contrib/textarea-caret-position/index.js', 'rbql_suggest.js', 'rbql_client.js', 'rbql_logo.svg']);\n    rbql_preview_panel.webview.onDidReceiveMessage(function(message) { handle_rbql_client_message(rbql_preview_panel.webview, message, integration_test_options); });\n}\n\n\nfunction autodetect_dialect(config, active_doc, candidate_separators, comment_prefix) {\n    let candidate_dialects = [];\n    for (let separator of candidate_separators) {\n        let policy = get_default_policy(separator);\n        let dialect_id = map_dialect_to_language_id(separator, policy);\n        if (!dialect_id || !policy)\n            continue;\n        candidate_dialects.push([dialect_id, separator, policy]);\n        if (separator == ',' || separator == ';') {\n            candidate_dialects.push([DYNAMIC_CSV, separator, QUOTED_RFC_POLICY]);\n        }\n    }\n    let detect_trailing_spaces = get_from_config('csv_lint_detect_trailing_spaces', false, config);\n    let min_num_lines = get_from_config('autodetection_min_line_count', 10, config);\n    if (active_doc.lineCount < min_num_lines)\n        return [null, null, null];\n    let [best_dialect, best_separator, best_policy, best_dialect_first_trailing_space_line] = [null, null, null, null];\n    let best_dialect_num_columns = 1;\n    for (let candidate_dialect of candidate_dialects) {\n        let [dialect_id, separator, policy] = candidate_dialect;\n        let [_records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, _comments] = fast_load_utils.parse_document_records(active_doc, separator, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/-1, /*collect_records=*/false, /*preserve_quotes_and_whitespaces=*/true, detect_trailing_spaces, /*min_num_fields_for_autodetection=*/best_dialect_num_columns + 1);\n        if (first_defective_line !== null || fields_info.size != 1)\n            continue;\n        if (num_records_parsed < min_num_lines) {\n            // Ensure that min_num_lines also applies to number of parsed records. There could be a discrepancy between number of lines and records due to comment lines and/or multiline rfc records.\n            continue;\n        }\n        let num_columns = Array.from(fields_info.keys())[0];\n        if (num_columns >= best_dialect_num_columns + 1) {\n            best_dialect_num_columns = num_columns;\n            [best_dialect, best_separator, best_policy] = [dialect_id, separator, policy];\n            best_dialect_first_trailing_space_line = first_trailing_space_line;\n        }\n    }\n    return [best_dialect, best_separator, best_policy, best_dialect_first_trailing_space_line];\n}\n\n\nfunction autodetect_dialect_frequency_based(active_doc, candidate_separators, max_num_chars_to_test) {\n    let [best_dialect, best_separator, best_policy] = ['csv', ',', QUOTED_POLICY];\n    let best_dialect_frequency = 0;\n    let data = active_doc.getText();\n    if (!data)\n        return [best_dialect, best_separator, best_policy];\n    for (let separator of candidate_separators) {\n        if (separator == ' ' || separator == '.')\n            continue; // Whitespace and dot have advantage over other separators in this algorithm, so we just skip them.\n        let frequency = 0;\n        for (let j = 0; j < max_num_chars_to_test && j < data.length; j++) {\n            if (data[j] == separator)\n                frequency += 1;\n        }\n        if (frequency > best_dialect_frequency) {\n            let policy = get_default_policy(separator);\n            let dialect_id = map_dialect_to_language_id(separator, policy);\n            [best_dialect, best_separator, best_policy] = [dialect_id, separator, policy];\n            best_dialect_frequency = frequency;\n        }\n    }\n    return [best_dialect, best_separator, best_policy];\n}\n\n\nasync function try_autodetect_and_set_rainbow_filetype(vscode, config, extension_context, active_doc, logging_context_id=null) {\n    // VSCode to some extent is capable of \"remembering\" doc id in the previous invocation, at least when used in debug mode.\n\n    // VSCode may (and will?) forget documentId of a document \"A\" if document \"B\" is opened in the tab where \"A\" was (double VS single click in file browser panel).\n    // see https://code.visualstudio.com/docs/getstarted/userinterface#_preview-mode\n    let log_wrapper = new StackContextLogWrapper('autodetection', logging_context_id);\n    log_wrapper.log_doc_event('starting...', active_doc);\n    if (extension_context.autodetection_temporarily_disabled_for_rbql) {\n        log_wrapper.log_simple_event('abort: disabled for rbql');\n        return [active_doc, false];\n    }\n    if (!is_eligible_doc(active_doc)) {\n        log_wrapper.log_simple_event('abort: ineligible doc');\n        return [active_doc, false];\n    }\n    if (!get_from_config('enable_separator_autodetection', false, config)) {\n        log_wrapper.log_simple_event('abort: disabled in config');\n        return [active_doc, false];\n    }\n    var file_path = active_doc.fileName;\n    var original_language_id = active_doc.languageId;\n    if (extension_context.autodetection_stoplist.has(file_path)) {\n        log_wrapper.log_simple_event('abort: doc path in stoplist');\n        return [active_doc, false];\n    }\n    // The check below also prevents double autodetection from handle_doc_open fork in the new_doc with adjusted language id.\n    let is_default_csv = (file_path.endsWith('.csv') || file_path.endsWith('.CSV')) && original_language_id == 'csv';\n    if (original_language_id != PLAINTEXT && !is_default_csv) {\n        log_wrapper.log_simple_event('abort: ineligible original language id');\n        return [active_doc, false];\n    }\n\n    let candidate_separators = get_from_config('autodetect_separators', [], config).map((s) => s === 'TAB' ? '\\t' : s);\n    if (!dialect_map.hasOwnProperty(original_language_id) &&\n        last_closed_rainbow_doc_info &&\n        last_closed_rainbow_doc_info.file_path === file_path &&\n        Math.abs(Date.now() - last_closed_rainbow_doc_info.timestamp) < 1000) {\n        // The same file was recently closed with rainbow dialect and re-opened as another filetype, most likely manual language switch, do not autodetect.\n        // Do not add to autodetection_stoplist because it goes against VSCode approach to discard all language mode state on reopen.\n        // Also adding to autodetection_stoplist would make \"curious doc reopening\" problem worse.\n        // Do not initialize \"Rainbow ON\" because either it was already enabled or user goes through the native UI and therefore showing Rainbow ON is not idiomatic/consistent/relevant.\n        log_wrapper.log_simple_event('abort: recent doc language switch prevention');\n        return [active_doc, false];\n    }\n\n    let comment_prefix_for_autodetection = get_from_config('comment_prefix', '', config) || '#'; // Assume '#' as a comment prefix for autodetection purposes only.\n    log_wrapper.log_simple_event('starting standard dialect autodetection...');\n    let [rainbow_csv_language_id, delim, policy, first_trailing_space_line] = autodetect_dialect(config, active_doc, candidate_separators, comment_prefix_for_autodetection);\n    if (rainbow_csv_language_id) {\n        // Add the file to lint results to avoid re-parsing it with CSV Lint later.\n        extension_context.lint_results.set(`${file_path}.${rainbow_csv_language_id}`, {'is_ok': true, 'first_trailing_space_line': first_trailing_space_line});\n    } else if (!rainbow_csv_language_id && is_default_csv) {\n        // Smart autodetection method has failed, but we need to choose a separator because this is a csv file. Let's just find the most popular one within the first N characters.\n        log_wrapper.log_simple_event('starting frequency-based dialect autodetection...');\n        [rainbow_csv_language_id, delim, policy] = autodetect_dialect_frequency_based(active_doc, candidate_separators, /*max_num_chars_to_test=*/10000);\n    }\n    if (!rainbow_csv_language_id) {\n        log_wrapper.log_simple_event('abort: content-based autodetection did not detect anything');\n        return [active_doc, false];\n    }\n    // Comment prefix used here is global/default so we don't store it in custom comment prefix list.\n    if (rainbow_csv_language_id == DYNAMIC_CSV) {\n        await save_dynamic_info(extension_context, file_path, make_dialect_info(delim, policy));\n    }\n    if (rainbow_csv_language_id == original_language_id) {\n        log_wrapper.log_simple_event('abort: autodetected dialect matches the original one');\n        return [active_doc, false];\n    }\n\n    // We can't add the doc path to autodetection_stoplist here (for autodetect-once semantic)\n    // because the doc could be in preview mode and VSCode won't remember language_id so we might need to autodetect it again later.\n\n    preserve_original_language_id_if_needed(file_path, original_language_id, extension_context.original_language_ids);\n    log_wrapper.log_simple_event(`autodetection successful - switching from ${original_language_id} to ${rainbow_csv_language_id}`);\n    let new_doc = await vscode.languages.setTextDocumentLanguage(active_doc, rainbow_csv_language_id);\n    log_wrapper.log_doc_event('after language switch', new_doc);\n    return [new_doc, true];\n}\n\n\nasync function handle_first_edit_for_an_empty_doc(change_event) {\n    if (!change_event)\n        return;\n    if (doc_first_edit_subscription) {\n        doc_first_edit_subscription.dispose();\n        doc_first_edit_subscription = null;\n    }\n    let log_wrapper = new StackContextLogWrapper('handle_first_edit_for_an_empty_doc');\n    log_wrapper.log_doc_event('starting', change_event.document);\n    await try_autodetect_and_set_rainbow_filetype(vscode, vscode.workspace.getConfiguration('rainbow_csv'), extension_context, change_event.document, log_wrapper.context_id);\n}\n\n\nasync function handle_editor_switch(editor) {\n    let log_wrapper = new StackContextLogWrapper('handle_editor_switch');\n    // This event is not triggered when language mode is changed.\n    // We need this handler to hide and show UI elements when user switches between the doc tabs.\n    // When the file is larger than 50MB, editor and active_doc are null/undefined.\n    let active_doc = get_active_doc(editor);\n    log_wrapper.log_doc_event('editor switch', active_doc);\n    // When switching between the open non-preview doc tabs the doc open/close events are (typically) not triggered for the actual files (exception is \"curious doc reopening\" problem, see DEV_README.md)\n    // but open and close events could (and will) be triggered for some virtual files e.g. paired files with .git scheme.\n    disable_rainbow_features_if_non_csv(active_doc, log_wrapper);\n    await enable_rainbow_features_if_csv(active_doc, log_wrapper); // No-op if non-csv.\n}\n\n\nfunction do_handle_cursor_movement_for_column_info() {\n    if (!show_column_info_button() && column_info_button) {\n        column_info_button.hide();\n    }\n}\n\n\nfunction handle_cursor_movement_for_column_info(_cursor_event) {\n    if (cursor_timeout_handle_for_column_info !== null) {\n        clearTimeout(cursor_timeout_handle_for_column_info);\n    }\n    // We need timeout delay here to deduplicate/debounce events from multiple consecutive movements, see https://stackoverflow.com/a/49050990/2898283.\n    cursor_timeout_handle_for_column_info = setTimeout(() => do_handle_cursor_movement_for_column_info(), 10);\n}\n\n\nfunction do_handle_cursor_movement_for_row_background() {\n    let active_editor = get_active_editor();\n    if (active_editor && active_editor.visibleRanges && active_editor.visibleRanges.length) {\n        provide_row_background_decorations(active_editor, active_editor.visibleRanges[0]);\n    }\n}\n\n\nfunction handle_cursor_movement_for_alt_row_background(_cursor_event) {\n    if (cursor_timeout_handle_for_alt_row_background !== null) {\n        clearTimeout(cursor_timeout_handle_for_alt_row_background);\n    }\n    // We need timeout delay here to deduplicate/debounce events from multiple consecutive movements, see https://stackoverflow.com/a/49050990/2898283.\n    cursor_timeout_handle_for_alt_row_background = setTimeout(() => do_handle_cursor_movement_for_row_background(), 10);\n}\n\n\nasync function handle_doc_open(new_doc) {\n    // The onDidOpenTextDocument handler will trigger for already \"opened\" docs too if they are re-opened in the same tab. Example\n    // Document \"A\" opens in tab1 -> triggers onDidOpenTextDocument\n    // Document \"B\" opens in tab1 -> triggers onDidOpenTextDocument  (this could happen if user clicks on document \"B\" in the left file browser panel)\n    // Document \"A\" opens in tab1 -> triggers onDidOpenTextDocument again! The previous languageId is reset.\n    // In other words if user opens a different document in the same tab (single click VS double click in the file browser panel) it may trigger the curent document closing and opening of a new doc.\n    // This behavior is called Preview Mode, see https://vscode.one/new-tab-vscode/ and https://code.visualstudio.com/docs/getstarted/userinterface#_preview-mode\n\n    let log_wrapper = new StackContextLogWrapper('handle_doc_open');\n    log_wrapper.log_doc_event('opening doc', new_doc);\n\n    if (!is_eligible_doc(new_doc)) {\n        log_wrapper.log_simple_event('abort: ineligible doc');\n        return;\n    }\n\n    // Register a handler for copy-pasting CSV-formated data into an empty doc. Empty docs have lineCount equal 1.\n    if (get_from_config('enable_separator_autodetection', false) && doc_first_edit_subscription === null && new_doc.isUntitled && new_doc.lineCount <= 1) {\n        doc_first_edit_subscription = vscode.workspace.onDidChangeTextDocument(handle_first_edit_for_an_empty_doc);\n        log_wrapper.log_simple_event('creating empty doc subscription');\n        return;\n    }\n    let filetype_changed = false;\n    [new_doc, filetype_changed] = await try_autodetect_and_set_rainbow_filetype(vscode, vscode.workspace.getConfiguration('rainbow_csv'), extension_context, new_doc, log_wrapper.context_id);\n\n    // If autodetection was successful we are essentially forking this handler for the new doc and the code below will be executed twice: here and in the handle_doc_open for the `new_doc`.\n    // There is still some benefit for not having and additional check to prevent this double execution: disable/enable ui calls are idempotent and the code is more robust/reliable this way.\n    log_wrapper.log_doc_event(`after autodetection. filetype changed: ${filetype_changed}`, new_doc);\n    // There might be some redundancy between this code and onDidChangeActiveTextEditor handler, but this actually desired as long as methods are idempotent.\n    // It is much better to do the same thing twice (if it is idempotent) to ensure the required behavior than rely on assumptions about external VSCode mechanisms (aka Defensive Programming).\n    if (is_active_doc(new_doc)) {\n        log_wrapper.log_simple_event('active doc - enabling features');\n        disable_rainbow_features_if_non_csv(new_doc, log_wrapper); // We need this to handle manual switch from csv to txt, this would immediately remove UI elements, that would stay otherwise.\n        await enable_rainbow_features_if_csv(new_doc, log_wrapper); // No-op if non-csv.\n    }\n    log_wrapper.log_simple_event('finishing');\n}\n\n\nasync function handle_doc_close(doc_to_close) {\n    // NOTE: Closing of doc A (csv) followed by opening of the same doc A (non-csv) can also be caused by the \"curious doc reopening\" problem, see DEV_README.md.\n\n    // This is a workaround hack to prevent repeated autodetection on csv -> txt language switch.\n    // In that case a csv file will be closed and shortly after a txt file with the same path will be opened, so we don't want to apply autodetection to it.\n    // This will also trigger when virtual docs (e.g. `.git` pairs) are closed, but it is probably fine to reset last_closed_rainbow_doc_info in that case.\n    let log_wrapper = new StackContextLogWrapper('handle_doc_close');\n    log_wrapper.log_doc_event('closing doc', doc_to_close);\n    if (!is_rainbow_dialect_doc(doc_to_close)) {\n        log_wrapper.log_simple_event('abort: non rainbow doc');\n        last_closed_rainbow_doc_info = null;\n        return;\n    }\n\n    last_closed_rainbow_doc_info = {file_path: doc_to_close.fileName, timestamp: Date.now()};\n\n    if (is_active_doc(doc_to_close)) {\n        log_wrapper.log_simple_event('disabling ui elements');\n        // In order to disable elements we need to check that the closed rainbow doc is in fact active doc to avoid removing UI when a non-focused CSV or non-csv file is being closed.\n        // Inactive CSV closing can happen in the background if user closes with \"x\" top-right corner button another inactive tab with another CSV file.\n        disable_ui_elements();\n    }\n    log_wrapper.log_simple_event('finalizing');\n}\n\n\nasync function handle_config_change(_config_change_event) {\n    // Here `_config_change_event` allows to check if a specific configuration was affected but another way to do this is just to compare before and after values.\n    let logging_enabled_before = extension_context.logging_enabled;\n    extension_context.logging_enabled = get_from_config('enable_debug_logging', false);\n    if (extension_context.logging_enabled && !logging_enabled_before) {\n        let log_wrapper = new StackContextLogWrapper('config change');\n        log_wrapper.log_simple_event('logging enabled');\n    }\n    reconfigure_sticky_header_provider();\n    if (get_from_config('highlight_rows', false)) {\n        register_row_background_decorations_provider();\n    }\n}\n\n\nfunction quote_field(field, delim) {\n    if (field.indexOf('\"') != -1 || field.indexOf(delim) != -1) {\n        return '\"' + field.replace(/\"/g, '\"\"') + '\"';\n    }\n    return field;\n}\n\n\nfunction quoted_join(fields, delim) {\n    var quoted_fields = fields.map(function(val) { return quote_field(val, delim); });\n    return quoted_fields.join(delim);\n}\n\n\nasync function make_preview(uri, preview_mode) {\n    if (is_web_ext) {\n        show_single_line_error('This command is currently unavailable in web mode.');\n        return;\n    }\n    var file_path = uri.fsPath;\n    if (!file_path || !fs.existsSync(file_path)) {\n        vscode.window.showErrorMessage('Invalid file');\n        return;\n    }\n\n    var size_limit = 1024000; // ~1MB\n    var file_size_in_bytes = fs.statSync(file_path)['size'];\n    if (file_size_in_bytes <= size_limit) {\n        vscode.window.showWarningMessage('Rainbow CSV: The file is not big enough, showing the full file instead. Use this preview for files larger than 1MB');\n        let full_orig_doc = await vscode.workspace.openTextDocument(file_path);\n        await vscode.window.showTextDocument(full_orig_doc);\n        return;\n    }\n\n    let file_basename = path.basename(file_path);\n    const out_path = path.join(os.tmpdir(), `.rb_csv_preview.${preview_mode}.${file_basename}`);\n\n    fs.open(file_path, 'r', (err, fd) => {\n        if (err) {\n            console.log(err.message);\n            vscode.window.showErrorMessage('Unable to preview file');\n            return;\n        }\n\n        var buffer = Buffer.alloc(size_limit);\n        let read_begin_pos = preview_mode == 'head' ? 0 : Math.max(file_size_in_bytes - size_limit, 0);\n        fs.read(fd, buffer, 0, size_limit, read_begin_pos, function(err, _num) {\n            if (err) {\n                console.log(err.message);\n                vscode.window.showErrorMessage('Unable to preview file');\n                return;\n            }\n\n            const buffer_str = buffer.toString();\n            // TODO handle old mac '\\r' line endings - still used by Mac version of Excel.\n            let content = null;\n            if (preview_mode == 'head') {\n                content = buffer_str.substr(0, buffer_str.lastIndexOf(buffer_str.includes('\\r\\n') ? '\\r\\n' : '\\n'));\n            } else {\n                content = buffer_str.substr(buffer_str.indexOf('\\n') + 1);\n            }\n            fs.writeFileSync(out_path, content);\n            vscode.workspace.openTextDocument(out_path).then(doc => vscode.window.showTextDocument(doc));\n        });\n    });\n}\n\n\nfunction register_csv_hover_info_provider(language_id, context) {\n    let hover_provider = vscode.languages.registerHoverProvider(language_id, {\n        provideHover(document, position, token) {\n            return make_hover(document, language_id, position, token);\n        }\n    });\n    context.subscriptions.push(hover_provider);\n}\n\n\nfunction provide_tracked_column_decorations(active_editor, range) {\n    let document = active_editor.document;\n    if (!document) {\n        return;\n    }\n    let [delim, policy, comment_prefix] = get_dialect(document);\n    if (!policy) {\n        return;\n    }\n    if (!extension_context.tracked_columns.has(document.fileName)) {\n        return;\n    }\n    let tracked_columns = extension_context.tracked_columns.get(document.fileName);\n    if (tracked_columns.empty()) {\n        return;\n    }\n    let tracked_column_ranges = new Map();\n    for (let column_num of tracked_columns.get_tracked_columns()) {\n        tracked_column_ranges.set(column_num, new Array());\n    }\n\n    let table_ranges = ll_rainbow_utils().parse_document_range(vscode, document, delim, /*include_delim_length_in_ranges=*/true, policy, comment_prefix, range);\n    for (let row_info of table_ranges) {\n        if (row_info.comment_range !== null) {\n            continue;\n        } else {\n            for (let column_num of tracked_columns.get_tracked_columns()) {\n                for (let record_range of row_info.record_ranges[column_num]) {\n                    // One logical field can map to multiple tokens if it spans multiple lines because VSCode doesn't support multiline tokens.\n                    tracked_column_ranges.get(column_num).push(record_range);\n                }\n            }\n        }\n    }\n\n    for (let column_num of tracked_columns.get_tracked_columns()) {\n        let current_column_ranges = tracked_column_ranges.get(column_num);\n        let tracked_decoration_type = tracked_columns.get_decoration_type(column_num);\n        active_editor.setDecorations(tracked_decoration_type, current_column_ranges);\n    }\n}\n\n\nfunction provide_row_background_decorations(active_editor, range) {\n    let document = active_editor.document;\n    if (!document || !is_rainbow_dialect_doc(document)) {\n        return;\n    }\n    if (!row_background_enabled(document.fileName)) {\n        return;\n    }\n    let [_delim, policy, _comment_prefix] = get_dialect(document);\n    if (policy == QUOTED_RFC_POLICY) {\n        // TODO handle rfc records here, do actuall parsing\n        // Currently this early return is needed here too because this provider can trigger for rfc dialects when background decorations are enabled by default.\n        return;\n    }\n    let selection_start_line = -1;\n    let selection_end_line = -1;\n    let selection = active_editor.selection;\n    if (selection && !selection.isEmpty) {\n        selection_start_line = selection.start.line;\n        selection_end_line = selection.end.line;\n    }\n    let decorations_margin = 10;\n    let begin_line = Math.max(0, range.start.line - decorations_margin);\n    let end_line = Math.min(document.lineCount, range.end.line + decorations_margin);\n    let alternating_row_ranges = [];\n    for (let lnum = begin_line; lnum < end_line; lnum++) {\n        if (lnum >= selection_start_line && lnum <= selection_end_line) {\n            continue;\n        }\n        if (lnum % 2 == 1) {\n            let line_text = document.lineAt(lnum).text;\n            alternating_row_ranges.push(new vscode.Range(lnum, 0, lnum, line_text.length));\n        }\n    }\n    active_editor.setDecorations(alternate_row_background_decoration_type, alternating_row_ranges);\n}\n\n\nclass RowBackgroundDecorationsProvider {\n    constructor() {\n    }\n    async provideDocumentRangeSemanticTokens(_document, range, _token) {\n        // This is a \"fake\" semantic tokens provider which actually provides decorations instead of semantic tokens.\n        // TODO Consider using onDidChangeTextEditorVisibleRanges event instead when its behavior is fixed, see: https://github.com/microsoft/vscode/issues/154977\n        let active_editor = get_active_editor();\n        if (active_editor) {\n            provide_row_background_decorations(active_editor, range);\n        }\n        return null;\n    }\n}\n\n\nclass ColumnTrackingDecorationsProvider {\n    constructor() {\n    }\n    async provideDocumentRangeSemanticTokens(_document, range, _token) {\n        // This is a \"fake\" semantic tokens provider which actually provides decorations instead of semantic tokens.\n        // TODO Consider using onDidChangeTextEditorVisibleRanges event instead when its behavior is fixed, see: https://github.com/microsoft/vscode/issues/154977\n        let active_editor = get_active_editor();\n        if (active_editor) {\n            provide_tracked_column_decorations(active_editor, range);\n        }\n        return null;\n    }\n}\n\n\nclass RainbowTokenProvider {\n    // We don't utilize typescript `implement` interface keyword, because TS doesn't seem to be exporting interfaces to JS (unlike classes).\n    constructor() {\n    }\n    async provideDocumentRangeSemanticTokens(document, range, _token) {\n        let [delim, policy, comment_prefix] = get_dialect(document);\n        if (!policy || document.languageId != DYNAMIC_CSV) {\n            return null;\n        }\n\n        let table_ranges = ll_rainbow_utils().parse_document_range(vscode, document, delim, /*include_delim_length_in_ranges=*/true, policy, comment_prefix, range);\n        // Create a new builder to clear the previous tokens.\n        const builder = new vscode.SemanticTokensBuilder(tokens_legend);\n        for (let row_info of table_ranges) {\n            if (row_info.comment_range !== null) {\n                builder.push(row_info.comment_range, COMMENT_TOKEN);\n            } else {\n                for (let col_num = 0; col_num < row_info.record_ranges.length; col_num++) {\n                    let token_id = col_num % rainbow_token_types.length;\n                    if (token_id == 0) {\n                        // Do not highlight the first `rainbow1` group altogether, since it has the default color anyway.\n                        // Dynamic highlighting with undefined syntax like `rainbow1` is a little glitchy e.g. in case when re-tokenization occurs these undefined groups may fail to override the previous defined groups.\n                        // Another benefit is that by reducing the number of groups we are speeding things up a little.\n                        continue;\n                    }\n                    for (let record_range of row_info.record_ranges[col_num]) {\n                        // One logical field can map to multiple tokens if it spans multiple lines because VSCode doesn't support multiline tokens.\n                        builder.push(record_range, rainbow_token_types[token_id]);\n                    }\n                }\n            }\n        }\n        return builder.build();\n    }\n}\n\n\nclass CommentTokenProvider {\n    constructor() {\n    }\n    async provideDocumentRangeSemanticTokens(doc, range, _token) {\n        let [_delim, policy, comment_prefix] = get_dialect(doc);\n        if (manual_comment_prefix_stoplist.has(doc.fileName) && !comment_prefix) {\n            // We can't use empty comment prefix (and early return) - in that case the previous highlighting would not go away due to a VSCode quirk, need to make an empty build instead to make sure that all previously highlighted lines were cleared. We also can't create an empty builder and early return it because in that case we won't highlight dynamic csv columns (highlighting would disappear)\n            comment_prefix = '#####COMMENT_PREFIX_THAT_CAN_NOT_OCCURE_IN_A_NORMAL_FILE_AND_EVEN_IF_IT_OCCURES_NOT_A_BIG_DEAL####';\n        }\n        if (!comment_prefix || policy === null || policy == QUOTED_RFC_POLICY) {\n            return null; // Sanity check: with QUOTED_RFC_POLICY we should be using a different tokenizer which also handles comments.\n        }\n        // Create a new builder to clear the previous tokens.\n        const builder = new vscode.SemanticTokensBuilder(tokens_legend);\n        let begin_line = Math.max(0, range.start.line - dynamic_csv_highlight_margin);\n        let end_line = Math.min(doc.lineCount, range.end.line + dynamic_csv_highlight_margin);\n        for (let lnum = begin_line; lnum < end_line; lnum++) {\n            let line_text = doc.lineAt(lnum).text;\n            if (line_text.startsWith(comment_prefix)) {\n                builder.push(new vscode.Range(lnum, 0, lnum, line_text.length), COMMENT_TOKEN);\n            }\n        }\n        return builder.build();\n    }\n}\n\n\nclass InlayHintProvider {\n    constructor() {\n    }\n    async provideInlayHints(document, range, _cancellation_token) {\n        // Inlay hints should work really fast and in sync mode so we don't need to handle `_cancellation_token`.\n        let virtual_alignment_mode = get_from_config('virtual_alignment_mode', 'disabled');\n        let custom_alignment_mode = custom_virtual_alignment_modes.get(document.fileName);\n        if (!virtual_alignment_enabled(virtual_alignment_mode, custom_alignment_mode)) {\n            return;\n        }\n        let [delim, policy, comment_prefix] = get_dialect(document);\n        if (policy === null) {\n            return [];\n        }\n        let double_width_alignment = get_from_config('double_width_alignment', true);\n        let table_ranges = ll_rainbow_utils().parse_document_range(vscode, document, delim, /*include_delim_length_in_ranges=*/false, policy, comment_prefix, range);\n\n        let all_columns_stats = ll_rainbow_utils().calc_column_stats_for_fragment(table_ranges, double_width_alignment);\n        if (whole_doc_alignment_stats.has(document.fileName)) {\n            ll_rainbow_utils().reconcile_whole_doc_and_local_column_stats(whole_doc_alignment_stats.get(document.fileName), all_columns_stats);\n            // Save updated whole-doc stats.\n            whole_doc_alignment_stats.set(document.fileName, all_columns_stats);\n        }\n        let alignment_char = get_from_config('virtual_alignment_char', 'middot') == 'middot' ? '\\u00b7' : ' ';\n        let vertical_grid_enabled = get_from_config('virtual_alignment_vertical_grid', false);\n        return ll_rainbow_utils().generate_inlay_hints(vscode, table_ranges, all_columns_stats, delim.length, alignment_char, vertical_grid_enabled);\n    }\n}\n\n\nasync function load_resource_file_for_web(extension_uri, resource_path) {\n    let resource_uri = vscode.Uri.joinPath(extension_uri, resource_path);\n    let bytes = await vscode.workspace.fs.readFile(resource_uri);\n    // Using TextDecoder because it should work fine in web extension.\n    return new TextDecoder().decode(bytes);\n}\n\n\nasync function load_resource_file_universal(resource_path) {\n    if (is_web_ext) {\n        let resource_data = await load_resource_file_for_web(web_extension_uri, resource_path);\n        return resource_data;\n    }\n    return fs.readFileSync(absolute_path_map[resource_path], \"utf8\");\n}\n\n\nfunction generate_tracked_field_decoration_types() {\n    let result = [];\n    result.push(vscode.window.createTextEditorDecorationType({borderStyle: 'solid', borderWidth: '1px', borderColor: new vscode.ThemeColor('rainbowtrack1')}));\n    result.push(vscode.window.createTextEditorDecorationType({borderStyle: 'solid', borderWidth: '1px', borderColor: new vscode.ThemeColor('rainbowtrack2')}));\n    result.push(vscode.window.createTextEditorDecorationType({borderStyle: 'solid', borderWidth: '1px', borderColor: new vscode.ThemeColor('rainbowtrack3')}));\n    return result;\n}\n\n\nasync function activate(context) {\n    // TODO consider storing `context` itself in a global variable.\n    global_state = context.globalState;\n\n    if (is_web_ext) {\n        web_extension_uri = context.extensionUri;\n    }\n\n    for (let local_path in absolute_path_map) {\n        if (absolute_path_map.hasOwnProperty(local_path)) {\n            if (is_web_ext) {\n                absolute_path_map[local_path] = vscode.Uri.joinPath(context.extensionUri, local_path);\n            } else {\n                absolute_path_map[local_path] = context.asAbsolutePath(local_path);\n            }\n        }\n    }\n\n    if (get_from_config('enable_tooltip', false)) {\n        for (let language_id in dialect_map) {\n            if (dialect_map.hasOwnProperty(language_id)) {\n                register_csv_hover_info_provider(language_id, context);\n            }\n        }\n    }\n    extension_context.logging_enabled = get_from_config('enable_debug_logging', false);\n\n    var lint_cmd = vscode.commands.registerCommand('rainbow-csv.CSVLint', csv_lint_cmd);\n    var rbql_cmd = vscode.commands.registerCommand('rainbow-csv.RBQL', edit_rbql);\n    var set_header_line_cmd = vscode.commands.registerCommand('rainbow-csv.SetHeaderLine', set_header_line);\n    var set_comment_prefix_cmd = vscode.commands.registerCommand('rainbow-csv.SetCommentPrefix', set_comment_prefix);\n    var edit_column_names_cmd = vscode.commands.registerCommand('rainbow-csv.SetVirtualHeader', set_virtual_header);\n    var set_join_table_name_cmd = vscode.commands.registerCommand('rainbow-csv.SetJoinTableName', set_join_table_name); // WEB_DISABLED\n    var column_edit_before_cmd = vscode.commands.registerCommand('rainbow-csv.ColumnEditBefore', async function() { await column_edit('ce_before'); });\n    var column_edit_after_cmd = vscode.commands.registerCommand('rainbow-csv.ColumnEditAfter', async function() { await column_edit('ce_after'); });\n    var column_edit_select_cmd = vscode.commands.registerCommand('rainbow-csv.ColumnEditSelect', async function() { await column_edit('ce_select'); });\n    var set_separator_cmd = vscode.commands.registerCommand('rainbow-csv.RainbowSeparator', choose_dynamic_separator);\n    var rainbow_off_cmd = vscode.commands.registerCommand('rainbow-csv.RainbowSeparatorOff', restore_original_language);\n    var rainbow_on_cmd = vscode.commands.registerCommand('rainbow-csv.RainbowSeparatorOn', reenable_rainbow_language);\n    var sample_head_cmd = vscode.commands.registerCommand('rainbow-csv.SampleHead', async function(uri) { await make_preview(uri, 'head'); }); // WEB_DISABLED\n    var sample_tail_cmd = vscode.commands.registerCommand('rainbow-csv.SampleTail', async function(uri) { await make_preview(uri, 'tail'); }); // WEB_DISABLED\n    var align_cmd = vscode.commands.registerCommand('rainbow-csv.Align', content_modifying_align_table);\n    var virtual_align_cmd = vscode.commands.registerCommand('rainbow-csv.VirtualAlign', virtual_align_table);\n    var shrink_cmd = vscode.commands.registerCommand('rainbow-csv.Shrink', whitespace_shrink_table);\n    var virtual_shrink_cmd = vscode.commands.registerCommand('rainbow-csv.VirtualShrink', virtual_shrink_table);\n    var copy_back_cmd = vscode.commands.registerCommand('rainbow-csv.CopyBack', copy_back); // WEB_DISABLED\n    var toggle_row_background_cmd = vscode.commands.registerCommand('rainbow-csv.ToggleRowBackground', toggle_row_background);\n    var toggle_column_tracking_cmd = vscode.commands.registerCommand('rainbow-csv.ToggleColumnTracking', toggle_column_tracking);\n    var internal_test_cmd = vscode.commands.registerCommand('rainbow-csv.InternalTest', run_internal_test_cmd);\n\n    // INFO: vscode.workspace and vscode.window lifetime are likely guaranteed to cover the extension lifetime (period between activate() and deactivate()) but I haven't found a confirmation yet.\n    var doc_open_event = vscode.workspace.onDidOpenTextDocument(handle_doc_open);\n    var doc_close_event = vscode.workspace.onDidCloseTextDocument(handle_doc_close);\n    var config_change_event = vscode.workspace.onDidChangeConfiguration(handle_config_change);\n\n    var switch_event = vscode.window.onDidChangeActiveTextEditor(handle_editor_switch);\n    try {\n        debug_log_output_channel = vscode.window.createOutputChannel('rainbow_csv_debug_channel', {log: true});\n    } catch (error) {\n        console.error('Rainbow CSV: Failed to create output log channel');\n    }\n\n    enable_dynamic_semantic_tokenization();\n    reconfigure_sticky_header_provider();\n\n    if (get_from_config('comment_prefix', null)) {\n        register_comment_tokenization_handler();\n    }\n\n    if (get_from_config('highlight_rows', false)) {\n        register_row_background_decorations_provider();\n    }\n\n    // The only purpose to add the entries to context.subscriptions is to guarantee their disposal during extension deactivation\n    context.subscriptions.push(lint_cmd);\n    context.subscriptions.push(rbql_cmd);\n    context.subscriptions.push(edit_column_names_cmd);\n    context.subscriptions.push(column_edit_before_cmd);\n    context.subscriptions.push(column_edit_after_cmd);\n    context.subscriptions.push(column_edit_select_cmd);\n    context.subscriptions.push(set_separator_cmd);\n    context.subscriptions.push(rainbow_off_cmd);\n    context.subscriptions.push(rainbow_on_cmd);\n    context.subscriptions.push(sample_head_cmd);\n    context.subscriptions.push(sample_tail_cmd);\n    context.subscriptions.push(set_join_table_name_cmd);\n    context.subscriptions.push(align_cmd);\n    context.subscriptions.push(shrink_cmd);\n    context.subscriptions.push(virtual_align_cmd);\n    context.subscriptions.push(virtual_shrink_cmd);\n    context.subscriptions.push(copy_back_cmd);\n    context.subscriptions.push(set_header_line_cmd);\n    context.subscriptions.push(set_comment_prefix_cmd);\n    context.subscriptions.push(toggle_row_background_cmd);\n    context.subscriptions.push(toggle_column_tracking_cmd);\n    context.subscriptions.push(internal_test_cmd);\n\n    context.subscriptions.push(doc_open_event);\n    context.subscriptions.push(doc_close_event);\n    context.subscriptions.push(switch_event);\n    context.subscriptions.push(config_change_event);\n\n    // TODO consider making the background color customizable in settings, use \"color\" contribution point to achieve this, although there seem to be no way to actually conveniently customize it.\n    alternate_row_background_decoration_type = vscode.window.createTextEditorDecorationType({backgroundColor: new vscode.ThemeColor('tab.inactiveBackground'), isWholeLine: true});\n    tracked_field_decoration_types = generate_tracked_field_decoration_types();\n\n    // Need this because \"onDidOpenTextDocument()\" doesn't get called for the first open document.\n    // Another issue is when dev debug logging mode is enabled, the first document would be \"Log\" because it is printing something and gets VSCode focus.\n    await sleep(1000);\n    let active_doc = get_active_doc();\n    handle_doc_open(active_doc);\n}\n\n\nfunction deactivate() {\n    // This method is called when extension is deactivated.\n}\n\n\nexports.activate = activate;\nexports.deactivate = deactivate;\n\n// Exports just for unit tests:\nexports.autodetect_dialect_frequency_based = autodetect_dialect_frequency_based;\nexports.try_autodetect_and_set_rainbow_filetype = try_autodetect_and_set_rainbow_filetype;\n","'use strict';\n\nvar callBound = require('call-bound');\nvar hasToStringTag = require('has-tostringtag/shams')();\nvar hasOwn = require('hasown');\nvar gOPD = require('gopd');\n\n/** @type {import('.')} */\nvar fn;\n\nif (hasToStringTag) {\n\t/** @type {(receiver: ThisParameterType<typeof RegExp.prototype.exec>, ...args: Parameters<typeof RegExp.prototype.exec>) => ReturnType<typeof RegExp.prototype.exec>} */\n\tvar $exec = callBound('RegExp.prototype.exec');\n\t/** @type {object} */\n\tvar isRegexMarker = {};\n\n\tvar throwRegexMarker = function () {\n\t\tthrow isRegexMarker;\n\t};\n\t/** @type {{ toString(): never, valueOf(): never, [Symbol.toPrimitive]?(): never }} */\n\tvar badStringifier = {\n\t\ttoString: throwRegexMarker,\n\t\tvalueOf: throwRegexMarker\n\t};\n\n\tif (typeof Symbol.toPrimitive === 'symbol') {\n\t\tbadStringifier[Symbol.toPrimitive] = throwRegexMarker;\n\t}\n\n\t/** @type {import('.')} */\n\t// @ts-expect-error TS can't figure out that the $exec call always throws\n\t// eslint-disable-next-line consistent-return\n\tfn = function isRegex(value) {\n\t\tif (!value || typeof value !== 'object') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// eslint-disable-next-line no-extra-parens\n\t\tvar descriptor = /** @type {NonNullable<typeof gOPD>} */ (gOPD)(/** @type {{ lastIndex?: unknown }} */ (value), 'lastIndex');\n\t\tvar hasLastIndexDataProperty = descriptor && hasOwn(descriptor, 'value');\n\t\tif (!hasLastIndexDataProperty) {\n\t\t\treturn false;\n\t\t}\n\n\t\ttry {\n\t\t\t// eslint-disable-next-line no-extra-parens\n\t\t\t$exec(value, /** @type {string} */ (/** @type {unknown} */ (badStringifier)));\n\t\t} catch (e) {\n\t\t\treturn e === isRegexMarker;\n\t\t}\n\t};\n} else {\n\t/** @type {(receiver: ThisParameterType<typeof Object.prototype.toString>, ...args: Parameters<typeof Object.prototype.toString>) => ReturnType<typeof Object.prototype.toString>} */\n\tvar $toString = callBound('Object.prototype.toString');\n\t/** @const @type {'[object RegExp]'} */\n\tvar regexClass = '[object RegExp]';\n\n\t/** @type {import('.')} */\n\tfn = function isRegex(value) {\n\t\t// In older browsers, typeof regex incorrectly returns 'function'\n\t\tif (!value || (typeof value !== 'object' && typeof value !== 'function')) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn $toString(value) === regexClass;\n\t};\n}\n\nmodule.exports = fn;\n","'use strict';\n\nvar origSymbol = typeof Symbol !== 'undefined' && Symbol;\nvar hasSymbolSham = require('./shams');\n\n/** @type {import('.')} */\nmodule.exports = function hasNativeSymbols() {\n\tif (typeof origSymbol !== 'function') { return false; }\n\tif (typeof Symbol !== 'function') { return false; }\n\tif (typeof origSymbol('foo') !== 'symbol') { return false; }\n\tif (typeof Symbol('bar') !== 'symbol') { return false; }\n\n\treturn hasSymbolSham();\n};\n","'use strict';\n\nvar callBind = require('call-bind');\nvar define = require('define-properties');\n\nvar implementation = require('./implementation');\nvar getPolyfill = require('./polyfill');\nvar shim = require('./shim');\n\nvar polyfill = callBind(getPolyfill(), Number);\n\n/* http://www.ecma-international.org/ecma-262/6.0/#sec-number.isnan */\n\ndefine(polyfill, {\n\tgetPolyfill: getPolyfill,\n\timplementation: implementation,\n\tshim: shim\n});\n\nmodule.exports = polyfill;\n","// Currently in sync with Node.js lib/assert.js\n// https://github.com/nodejs/node/commit/2a51ae424a513ec9a6aa3466baa0cc1d55dd4f3b\n\n// Originally from narwhal.js (http://narwhaljs.org)\n// Copyright (c) 2009 Thomas Robinson <280north.com>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the 'Software'), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nvar _require = require('./internal/errors'),\n  _require$codes = _require.codes,\n  ERR_AMBIGUOUS_ARGUMENT = _require$codes.ERR_AMBIGUOUS_ARGUMENT,\n  ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n  ERR_INVALID_ARG_VALUE = _require$codes.ERR_INVALID_ARG_VALUE,\n  ERR_INVALID_RETURN_VALUE = _require$codes.ERR_INVALID_RETURN_VALUE,\n  ERR_MISSING_ARGS = _require$codes.ERR_MISSING_ARGS;\nvar AssertionError = require('./internal/assert/assertion_error');\nvar _require2 = require('util/'),\n  inspect = _require2.inspect;\nvar _require$types = require('util/').types,\n  isPromise = _require$types.isPromise,\n  isRegExp = _require$types.isRegExp;\nvar objectAssign = require('object.assign/polyfill')();\nvar objectIs = require('object-is/polyfill')();\nvar RegExpPrototypeTest = require('call-bind/callBound')('RegExp.prototype.test');\nvar errorCache = new Map();\nvar isDeepEqual;\nvar isDeepStrictEqual;\nvar parseExpressionAt;\nvar findNodeAround;\nvar decoder;\nfunction lazyLoadComparison() {\n  var comparison = require('./internal/util/comparisons');\n  isDeepEqual = comparison.isDeepEqual;\n  isDeepStrictEqual = comparison.isDeepStrictEqual;\n}\n\n// Escape control characters but not \\n and \\t to keep the line breaks and\n// indentation intact.\n// eslint-disable-next-line no-control-regex\nvar escapeSequencesRegExp = /[\\x00-\\x08\\x0b\\x0c\\x0e-\\x1f]/g;\nvar meta = [\"\\\\u0000\", \"\\\\u0001\", \"\\\\u0002\", \"\\\\u0003\", \"\\\\u0004\", \"\\\\u0005\", \"\\\\u0006\", \"\\\\u0007\", '\\\\b', '', '', \"\\\\u000b\", '\\\\f', '', \"\\\\u000e\", \"\\\\u000f\", \"\\\\u0010\", \"\\\\u0011\", \"\\\\u0012\", \"\\\\u0013\", \"\\\\u0014\", \"\\\\u0015\", \"\\\\u0016\", \"\\\\u0017\", \"\\\\u0018\", \"\\\\u0019\", \"\\\\u001a\", \"\\\\u001b\", \"\\\\u001c\", \"\\\\u001d\", \"\\\\u001e\", \"\\\\u001f\"];\nvar escapeFn = function escapeFn(str) {\n  return meta[str.charCodeAt(0)];\n};\nvar warned = false;\n\n// The assert module provides functions that throw\n// AssertionError's when particular conditions are not met. The\n// assert module must conform to the following interface.\n\nvar assert = module.exports = ok;\nvar NO_EXCEPTION_SENTINEL = {};\n\n// All of the following functions must throw an AssertionError\n// when a corresponding condition is not met, with a message that\n// may be undefined if not provided. All assertion methods provide\n// both the actual and expected values to the assertion error for\n// display purposes.\n\nfunction innerFail(obj) {\n  if (obj.message instanceof Error) throw obj.message;\n  throw new AssertionError(obj);\n}\nfunction fail(actual, expected, message, operator, stackStartFn) {\n  var argsLen = arguments.length;\n  var internalMessage;\n  if (argsLen === 0) {\n    internalMessage = 'Failed';\n  } else if (argsLen === 1) {\n    message = actual;\n    actual = undefined;\n  } else {\n    if (warned === false) {\n      warned = true;\n      var warn = process.emitWarning ? process.emitWarning : console.warn.bind(console);\n      warn('assert.fail() with more than one argument is deprecated. ' + 'Please use assert.strictEqual() instead or only pass a message.', 'DeprecationWarning', 'DEP0094');\n    }\n    if (argsLen === 2) operator = '!=';\n  }\n  if (message instanceof Error) throw message;\n  var errArgs = {\n    actual: actual,\n    expected: expected,\n    operator: operator === undefined ? 'fail' : operator,\n    stackStartFn: stackStartFn || fail\n  };\n  if (message !== undefined) {\n    errArgs.message = message;\n  }\n  var err = new AssertionError(errArgs);\n  if (internalMessage) {\n    err.message = internalMessage;\n    err.generatedMessage = true;\n  }\n  throw err;\n}\nassert.fail = fail;\n\n// The AssertionError is defined in internal/error.\nassert.AssertionError = AssertionError;\nfunction innerOk(fn, argLen, value, message) {\n  if (!value) {\n    var generatedMessage = false;\n    if (argLen === 0) {\n      generatedMessage = true;\n      message = 'No value argument passed to `assert.ok()`';\n    } else if (message instanceof Error) {\n      throw message;\n    }\n    var err = new AssertionError({\n      actual: value,\n      expected: true,\n      message: message,\n      operator: '==',\n      stackStartFn: fn\n    });\n    err.generatedMessage = generatedMessage;\n    throw err;\n  }\n}\n\n// Pure assertion tests whether a value is truthy, as determined\n// by !!value.\nfunction ok() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n  innerOk.apply(void 0, [ok, args.length].concat(args));\n}\nassert.ok = ok;\n\n// The equality assertion tests shallow, coercive equality with ==.\n/* eslint-disable no-restricted-properties */\nassert.equal = function equal(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  // eslint-disable-next-line eqeqeq\n  if (actual != expected) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: '==',\n      stackStartFn: equal\n    });\n  }\n};\n\n// The non-equality assertion tests for whether two objects are not\n// equal with !=.\nassert.notEqual = function notEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  // eslint-disable-next-line eqeqeq\n  if (actual == expected) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: '!=',\n      stackStartFn: notEqual\n    });\n  }\n};\n\n// The equivalence assertion tests a deep equality relation.\nassert.deepEqual = function deepEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  if (isDeepEqual === undefined) lazyLoadComparison();\n  if (!isDeepEqual(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'deepEqual',\n      stackStartFn: deepEqual\n    });\n  }\n};\n\n// The non-equivalence assertion tests for any deep inequality.\nassert.notDeepEqual = function notDeepEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  if (isDeepEqual === undefined) lazyLoadComparison();\n  if (isDeepEqual(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'notDeepEqual',\n      stackStartFn: notDeepEqual\n    });\n  }\n};\n/* eslint-enable */\n\nassert.deepStrictEqual = function deepStrictEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  if (isDeepEqual === undefined) lazyLoadComparison();\n  if (!isDeepStrictEqual(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'deepStrictEqual',\n      stackStartFn: deepStrictEqual\n    });\n  }\n};\nassert.notDeepStrictEqual = notDeepStrictEqual;\nfunction notDeepStrictEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  if (isDeepEqual === undefined) lazyLoadComparison();\n  if (isDeepStrictEqual(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'notDeepStrictEqual',\n      stackStartFn: notDeepStrictEqual\n    });\n  }\n}\nassert.strictEqual = function strictEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  if (!objectIs(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'strictEqual',\n      stackStartFn: strictEqual\n    });\n  }\n};\nassert.notStrictEqual = function notStrictEqual(actual, expected, message) {\n  if (arguments.length < 2) {\n    throw new ERR_MISSING_ARGS('actual', 'expected');\n  }\n  if (objectIs(actual, expected)) {\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: 'notStrictEqual',\n      stackStartFn: notStrictEqual\n    });\n  }\n};\nvar Comparison = /*#__PURE__*/_createClass(function Comparison(obj, keys, actual) {\n  var _this = this;\n  _classCallCheck(this, Comparison);\n  keys.forEach(function (key) {\n    if (key in obj) {\n      if (actual !== undefined && typeof actual[key] === 'string' && isRegExp(obj[key]) && RegExpPrototypeTest(obj[key], actual[key])) {\n        _this[key] = actual[key];\n      } else {\n        _this[key] = obj[key];\n      }\n    }\n  });\n});\nfunction compareExceptionKey(actual, expected, key, message, keys, fn) {\n  if (!(key in actual) || !isDeepStrictEqual(actual[key], expected[key])) {\n    if (!message) {\n      // Create placeholder objects to create a nice output.\n      var a = new Comparison(actual, keys);\n      var b = new Comparison(expected, keys, actual);\n      var err = new AssertionError({\n        actual: a,\n        expected: b,\n        operator: 'deepStrictEqual',\n        stackStartFn: fn\n      });\n      err.actual = actual;\n      err.expected = expected;\n      err.operator = fn.name;\n      throw err;\n    }\n    innerFail({\n      actual: actual,\n      expected: expected,\n      message: message,\n      operator: fn.name,\n      stackStartFn: fn\n    });\n  }\n}\nfunction expectedException(actual, expected, msg, fn) {\n  if (typeof expected !== 'function') {\n    if (isRegExp(expected)) return RegExpPrototypeTest(expected, actual);\n    // assert.doesNotThrow does not accept objects.\n    if (arguments.length === 2) {\n      throw new ERR_INVALID_ARG_TYPE('expected', ['Function', 'RegExp'], expected);\n    }\n\n    // Handle primitives properly.\n    if (_typeof(actual) !== 'object' || actual === null) {\n      var err = new AssertionError({\n        actual: actual,\n        expected: expected,\n        message: msg,\n        operator: 'deepStrictEqual',\n        stackStartFn: fn\n      });\n      err.operator = fn.name;\n      throw err;\n    }\n    var keys = Object.keys(expected);\n    // Special handle errors to make sure the name and the message are compared\n    // as well.\n    if (expected instanceof Error) {\n      keys.push('name', 'message');\n    } else if (keys.length === 0) {\n      throw new ERR_INVALID_ARG_VALUE('error', expected, 'may not be an empty object');\n    }\n    if (isDeepEqual === undefined) lazyLoadComparison();\n    keys.forEach(function (key) {\n      if (typeof actual[key] === 'string' && isRegExp(expected[key]) && RegExpPrototypeTest(expected[key], actual[key])) {\n        return;\n      }\n      compareExceptionKey(actual, expected, key, msg, keys, fn);\n    });\n    return true;\n  }\n  // Guard instanceof against arrow functions as they don't have a prototype.\n  if (expected.prototype !== undefined && actual instanceof expected) {\n    return true;\n  }\n  if (Error.isPrototypeOf(expected)) {\n    return false;\n  }\n  return expected.call({}, actual) === true;\n}\nfunction getActual(fn) {\n  if (typeof fn !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('fn', 'Function', fn);\n  }\n  try {\n    fn();\n  } catch (e) {\n    return e;\n  }\n  return NO_EXCEPTION_SENTINEL;\n}\nfunction checkIsPromise(obj) {\n  // Accept native ES6 promises and promises that are implemented in a similar\n  // way. Do not accept thenables that use a function as `obj` and that have no\n  // `catch` handler.\n\n  // TODO: thenables are checked up until they have the correct methods,\n  // but according to documentation, the `then` method should receive\n  // the `fulfill` and `reject` arguments as well or it may be never resolved.\n\n  return isPromise(obj) || obj !== null && _typeof(obj) === 'object' && typeof obj.then === 'function' && typeof obj.catch === 'function';\n}\nfunction waitForActual(promiseFn) {\n  return Promise.resolve().then(function () {\n    var resultPromise;\n    if (typeof promiseFn === 'function') {\n      // Return a rejected promise if `promiseFn` throws synchronously.\n      resultPromise = promiseFn();\n      // Fail in case no promise is returned.\n      if (!checkIsPromise(resultPromise)) {\n        throw new ERR_INVALID_RETURN_VALUE('instance of Promise', 'promiseFn', resultPromise);\n      }\n    } else if (checkIsPromise(promiseFn)) {\n      resultPromise = promiseFn;\n    } else {\n      throw new ERR_INVALID_ARG_TYPE('promiseFn', ['Function', 'Promise'], promiseFn);\n    }\n    return Promise.resolve().then(function () {\n      return resultPromise;\n    }).then(function () {\n      return NO_EXCEPTION_SENTINEL;\n    }).catch(function (e) {\n      return e;\n    });\n  });\n}\nfunction expectsError(stackStartFn, actual, error, message) {\n  if (typeof error === 'string') {\n    if (arguments.length === 4) {\n      throw new ERR_INVALID_ARG_TYPE('error', ['Object', 'Error', 'Function', 'RegExp'], error);\n    }\n    if (_typeof(actual) === 'object' && actual !== null) {\n      if (actual.message === error) {\n        throw new ERR_AMBIGUOUS_ARGUMENT('error/message', \"The error message \\\"\".concat(actual.message, \"\\\" is identical to the message.\"));\n      }\n    } else if (actual === error) {\n      throw new ERR_AMBIGUOUS_ARGUMENT('error/message', \"The error \\\"\".concat(actual, \"\\\" is identical to the message.\"));\n    }\n    message = error;\n    error = undefined;\n  } else if (error != null && _typeof(error) !== 'object' && typeof error !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('error', ['Object', 'Error', 'Function', 'RegExp'], error);\n  }\n  if (actual === NO_EXCEPTION_SENTINEL) {\n    var details = '';\n    if (error && error.name) {\n      details += \" (\".concat(error.name, \")\");\n    }\n    details += message ? \": \".concat(message) : '.';\n    var fnType = stackStartFn.name === 'rejects' ? 'rejection' : 'exception';\n    innerFail({\n      actual: undefined,\n      expected: error,\n      operator: stackStartFn.name,\n      message: \"Missing expected \".concat(fnType).concat(details),\n      stackStartFn: stackStartFn\n    });\n  }\n  if (error && !expectedException(actual, error, message, stackStartFn)) {\n    throw actual;\n  }\n}\nfunction expectsNoError(stackStartFn, actual, error, message) {\n  if (actual === NO_EXCEPTION_SENTINEL) return;\n  if (typeof error === 'string') {\n    message = error;\n    error = undefined;\n  }\n  if (!error || expectedException(actual, error)) {\n    var details = message ? \": \".concat(message) : '.';\n    var fnType = stackStartFn.name === 'doesNotReject' ? 'rejection' : 'exception';\n    innerFail({\n      actual: actual,\n      expected: error,\n      operator: stackStartFn.name,\n      message: \"Got unwanted \".concat(fnType).concat(details, \"\\n\") + \"Actual message: \\\"\".concat(actual && actual.message, \"\\\"\"),\n      stackStartFn: stackStartFn\n    });\n  }\n  throw actual;\n}\nassert.throws = function throws(promiseFn) {\n  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n  expectsError.apply(void 0, [throws, getActual(promiseFn)].concat(args));\n};\nassert.rejects = function rejects(promiseFn) {\n  for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n    args[_key3 - 1] = arguments[_key3];\n  }\n  return waitForActual(promiseFn).then(function (result) {\n    return expectsError.apply(void 0, [rejects, result].concat(args));\n  });\n};\nassert.doesNotThrow = function doesNotThrow(fn) {\n  for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n    args[_key4 - 1] = arguments[_key4];\n  }\n  expectsNoError.apply(void 0, [doesNotThrow, getActual(fn)].concat(args));\n};\nassert.doesNotReject = function doesNotReject(fn) {\n  for (var _len5 = arguments.length, args = new Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n    args[_key5 - 1] = arguments[_key5];\n  }\n  return waitForActual(fn).then(function (result) {\n    return expectsNoError.apply(void 0, [doesNotReject, result].concat(args));\n  });\n};\nassert.ifError = function ifError(err) {\n  if (err !== null && err !== undefined) {\n    var message = 'ifError got unwanted exception: ';\n    if (_typeof(err) === 'object' && typeof err.message === 'string') {\n      if (err.message.length === 0 && err.constructor) {\n        message += err.constructor.name;\n      } else {\n        message += err.message;\n      }\n    } else {\n      message += inspect(err);\n    }\n    var newErr = new AssertionError({\n      actual: err,\n      expected: null,\n      operator: 'ifError',\n      message: message,\n      stackStartFn: ifError\n    });\n\n    // Make sure we actually have a stack trace!\n    var origStack = err.stack;\n    if (typeof origStack === 'string') {\n      // This will remove any duplicated frames from the error frames taken\n      // from within `ifError` and add the original error frames to the newly\n      // created ones.\n      var tmp2 = origStack.split('\\n');\n      tmp2.shift();\n      // Filter all frames existing in err.stack.\n      var tmp1 = newErr.stack.split('\\n');\n      for (var i = 0; i < tmp2.length; i++) {\n        // Find the first occurrence of the frame.\n        var pos = tmp1.indexOf(tmp2[i]);\n        if (pos !== -1) {\n          // Only keep new frames.\n          tmp1 = tmp1.slice(0, pos);\n          break;\n        }\n      }\n      newErr.stack = \"\".concat(tmp1.join('\\n'), \"\\n\").concat(tmp2.join('\\n'));\n    }\n    throw newErr;\n  }\n};\n\n// Currently in sync with Node.js lib/assert.js\n// https://github.com/nodejs/node/commit/2a871df3dfb8ea663ef5e1f8f62701ec51384ecb\nfunction internalMatch(string, regexp, message, fn, fnName) {\n  if (!isRegExp(regexp)) {\n    throw new ERR_INVALID_ARG_TYPE('regexp', 'RegExp', regexp);\n  }\n  var match = fnName === 'match';\n  if (typeof string !== 'string' || RegExpPrototypeTest(regexp, string) !== match) {\n    if (message instanceof Error) {\n      throw message;\n    }\n    var generatedMessage = !message;\n\n    // 'The input was expected to not match the regular expression ' +\n    message = message || (typeof string !== 'string' ? 'The \"string\" argument must be of type string. Received type ' + \"\".concat(_typeof(string), \" (\").concat(inspect(string), \")\") : (match ? 'The input did not match the regular expression ' : 'The input was expected to not match the regular expression ') + \"\".concat(inspect(regexp), \". Input:\\n\\n\").concat(inspect(string), \"\\n\"));\n    var err = new AssertionError({\n      actual: string,\n      expected: regexp,\n      message: message,\n      operator: fnName,\n      stackStartFn: fn\n    });\n    err.generatedMessage = generatedMessage;\n    throw err;\n  }\n}\nassert.match = function match(string, regexp, message) {\n  internalMatch(string, regexp, message, match, 'match');\n};\nassert.doesNotMatch = function doesNotMatch(string, regexp, message) {\n  internalMatch(string, regexp, message, doesNotMatch, 'doesNotMatch');\n};\n\n// Expose a strict only variant of assert\nfunction strict() {\n  for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n    args[_key6] = arguments[_key6];\n  }\n  innerOk.apply(void 0, [strict, args.length].concat(args));\n}\nassert.strict = objectAssign(strict, assert, {\n  equal: assert.strictEqual,\n  deepEqual: assert.deepStrictEqual,\n  notEqual: assert.notStrictEqual,\n  notDeepEqual: assert.notDeepStrictEqual\n});\nassert.strict.strict = assert.strict;","let field_regular_expression = '\"((?:[^\"]*\"\")*[^\"]*)\"';\nlet field_rgx = new RegExp('^' + field_regular_expression);\nlet field_rgx_external_whitespaces = new RegExp('^ *' + field_regular_expression + ' *');\n\n\n// TODO consider making this file (and rbql.js) both node and browser compatible: https://caolan.org/posts/writing_for_node_and_the_browser.html\n\n\nfunction split_lines(text) {\n    return text.split(/\\r\\n|\\r|\\n/);\n}\n\n\nfunction extract_next_field(src, dlm, preserve_quotes_and_whitespaces, allow_external_whitespaces, cidx, result) {\n    var warning = false;\n    let src_cur = src.substring(cidx);\n    let rgx = allow_external_whitespaces ? field_rgx_external_whitespaces : field_rgx;\n    let match_obj = rgx.exec(src_cur);\n    if (match_obj !== null) {\n        let match_end = match_obj[0].length;\n        if (cidx + match_end == src.length || src[cidx + match_end] == dlm) {\n            if (preserve_quotes_and_whitespaces) {\n                result.push(match_obj[0]);\n            } else {\n                result.push(match_obj[1].replace(/\"\"/g, '\"'));\n            }\n            return [cidx + match_end + 1, false];\n        }\n        warning = true;\n    }\n    var uidx = src.indexOf(dlm, cidx);\n    if (uidx == -1)\n        uidx = src.length;\n    var field = src.substring(cidx, uidx);\n    warning = warning || field.indexOf('\"') != -1;\n    result.push(field);\n    return [uidx + 1, warning];\n}\n\n\nfunction split_quoted_str(src, dlm, preserve_quotes_and_whitespaces=false) {\n    // This function is newline-agnostic i.e. it can also split records with multiline fields.\n    if (src.indexOf('\"') == -1) // Optimization for most common case\n        return [src.split(dlm), false];\n    var result = [];\n    var cidx = 0;\n    var warning = false;\n    let allow_external_whitespaces = dlm != ' ';\n    while (cidx < src.length) {\n        var extraction_report = extract_next_field(src, dlm, preserve_quotes_and_whitespaces, allow_external_whitespaces, cidx, result);\n        cidx = extraction_report[0];\n        warning = warning || extraction_report[1];\n    }\n    if (src.charAt(src.length - 1) == dlm)\n        result.push('');\n    return [result, warning];\n}\n\n\nfunction quote_field(src, delim) {\n    if (src.indexOf(delim) != -1 || src.indexOf('\"') != -1) {\n        var escaped = src.replace(/\"/g, '\"\"');\n        return `\"${escaped}\"`;\n    }\n    return src;\n}\n\n\nfunction rfc_quote_field(src, delim) {\n    if (src.indexOf(delim) != -1 || src.indexOf('\"') != -1 || src.indexOf('\\n') != -1 || src.indexOf('\\r') != -1) {\n        var escaped = src.replace(/\"/g, '\"\"');\n        return `\"${escaped}\"`;\n    }\n    return src;\n}\n\n\nfunction unquote_field(field) {\n    let rgx = new RegExp('^' + ' *' + field_regular_expression + ' *$');\n    let match_obj = rgx.exec(field);\n    if (match_obj !== null) {\n        return match_obj[1].replace(/\"\"/g, '\"');\n    }\n    return field;\n}\n\n\nfunction unquote_fields(fields) {\n    return fields.map(unquote_field);\n}\n\n\nfunction split_whitespace_separated_str(src, preserve_whitespaces=false) {\n    var rgxp = preserve_whitespaces ? new RegExp(' *[^ ]+ *', 'g') : new RegExp('[^ ]+', 'g');\n    let result = [];\n    let match_obj = null;\n    while((match_obj = rgxp.exec(src)) !== null) {\n        result.push(match_obj[0]);\n    }\n    if (preserve_whitespaces) {\n        for (let i = 0; i < result.length - 1; i++) {\n            result[i] = result[i].slice(0, -1);\n        }\n    }\n    return result;\n}\n\n\nfunction smart_split(src, dlm, policy, preserve_quotes_and_whitespaces) {\n    if (policy === 'simple')\n        return [src.split(dlm), false];\n    if (policy === 'whitespace')\n        return [split_whitespace_separated_str(src, preserve_quotes_and_whitespaces), false];\n    if (policy === 'monocolumn')\n        return [[src], false];\n    return split_quoted_str(src, dlm, preserve_quotes_and_whitespaces);\n}\n\n\nclass MultilineRecordAggregator {\n    constructor(comment_prefix) {\n        this.comment_prefix = comment_prefix;\n        this.reset();\n    }\n    add_line(line_text) {\n        if (this.has_full_record || this.has_comment_line) {\n            throw new Error('Invalid usage - record aggregator must be reset before adding new lines');\n        }\n        if (this.comment_prefix && this.rfc_line_buffer.length == 0 && line_text.startsWith(this.comment_prefix)) {\n            this.has_comment_line = true;\n            return false;\n        }\n        let match_list = line_text.match(/\"/g);\n        let has_unbalanced_double_quote = match_list && match_list.length % 2 == 1;\n        this.rfc_line_buffer.push(line_text);\n        this.has_full_record = (!has_unbalanced_double_quote && this.rfc_line_buffer.length == 1) || (has_unbalanced_double_quote && this.rfc_line_buffer.length > 1);\n        return this.has_full_record;\n    }\n    is_inside_multiline_record() {\n        return this.rfc_line_buffer.length && !this.has_full_record;\n    }\n    get_full_line(line_separator) {\n        return this.rfc_line_buffer.join(line_separator);\n    }\n    get_num_lines_in_record() {\n        return this.rfc_line_buffer.length;\n    }\n    reset() {\n        this.rfc_line_buffer = [];\n        this.has_full_record = false;\n        this.has_comment_line = false;\n    }\n}\n\n\nmodule.exports.split_quoted_str = split_quoted_str;\nmodule.exports.split_whitespace_separated_str = split_whitespace_separated_str;\nmodule.exports.smart_split = smart_split;\nmodule.exports.quote_field = quote_field;\nmodule.exports.rfc_quote_field = rfc_quote_field;\nmodule.exports.unquote_field = unquote_field;\nmodule.exports.unquote_fields = unquote_fields;\nmodule.exports.split_lines = split_lines;\nmodule.exports.MultilineRecordAggregator = MultilineRecordAggregator;\n","'use strict';\n\n/** @type {import('./isNaN')} */\nmodule.exports = Number.isNaN || function isNaN(a) {\n\treturn a !== a;\n};\n","'use strict';\n\n/** @type {import('./uri')} */\nmodule.exports = URIError;\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","'use strict';\n\nvar whichTypedArray = require('which-typed-array');\n\n/** @type {import('.')} */\nmodule.exports = function isTypedArray(value) {\n\treturn !!whichTypedArray(value);\n};\n","'use strict';\n\nvar forEach = require('for-each');\nvar availableTypedArrays = require('available-typed-arrays');\nvar callBind = require('call-bind');\nvar callBound = require('call-bound');\nvar gOPD = require('gopd');\n\n/** @type {(O: object) => string} */\nvar $toString = callBound('Object.prototype.toString');\nvar hasToStringTag = require('has-tostringtag/shams')();\n\nvar g = typeof globalThis === 'undefined' ? global : globalThis;\nvar typedArrays = availableTypedArrays();\n\nvar $slice = callBound('String.prototype.slice');\nvar getPrototypeOf = Object.getPrototypeOf; // require('getprototypeof');\n\n/** @type {<T = unknown>(array: readonly T[], value: unknown) => number} */\nvar $indexOf = callBound('Array.prototype.indexOf', true) || function indexOf(array, value) {\n\tfor (var i = 0; i < array.length; i += 1) {\n\t\tif (array[i] === value) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n};\n\n/** @typedef {(receiver: import('.').TypedArray) => string | typeof Uint8Array.prototype.slice.call | typeof Uint8Array.prototype.set.call} Getter */\n/** @type {{ [k in `\\$${import('.').TypedArrayName}`]?: Getter } & { __proto__: null }} */\nvar cache = { __proto__: null };\nif (hasToStringTag && gOPD && getPrototypeOf) {\n\tforEach(typedArrays, function (typedArray) {\n\t\tvar arr = new g[typedArray]();\n\t\tif (Symbol.toStringTag in arr) {\n\t\t\tvar proto = getPrototypeOf(arr);\n\t\t\t// @ts-expect-error TS won't narrow inside a closure\n\t\t\tvar descriptor = gOPD(proto, Symbol.toStringTag);\n\t\t\tif (!descriptor) {\n\t\t\t\tvar superProto = getPrototypeOf(proto);\n\t\t\t\t// @ts-expect-error TS won't narrow inside a closure\n\t\t\t\tdescriptor = gOPD(superProto, Symbol.toStringTag);\n\t\t\t}\n\t\t\t// @ts-expect-error TODO: fix\n\t\t\tcache['$' + typedArray] = callBind(descriptor.get);\n\t\t}\n\t});\n} else {\n\tforEach(typedArrays, function (typedArray) {\n\t\tvar arr = new g[typedArray]();\n\t\tvar fn = arr.slice || arr.set;\n\t\tif (fn) {\n\t\t\t// @ts-expect-error TODO: fix\n\t\t\tcache['$' + typedArray] = callBind(fn);\n\t\t}\n\t});\n}\n\n/** @type {(value: object) => false | import('.').TypedArrayName} */\nvar tryTypedArrays = function tryAllTypedArrays(value) {\n\t/** @type {ReturnType<typeof tryAllTypedArrays>} */ var found = false;\n\tforEach(\n\t\t// eslint-disable-next-line no-extra-parens\n\t\t/** @type {Record<`\\$${TypedArrayName}`, Getter>} */ /** @type {any} */ (cache),\n\t\t/** @type {(getter: Getter, name: `\\$${import('.').TypedArrayName}`) => void} */\n\t\tfunction (getter, typedArray) {\n\t\t\tif (!found) {\n\t\t\t\ttry {\n\t\t\t\t// @ts-expect-error TODO: fix\n\t\t\t\t\tif ('$' + getter(value) === typedArray) {\n\t\t\t\t\t\tfound = $slice(typedArray, 1);\n\t\t\t\t\t}\n\t\t\t\t} catch (e) { /**/ }\n\t\t\t}\n\t\t}\n\t);\n\treturn found;\n};\n\n/** @type {(value: object) => false | import('.').TypedArrayName} */\nvar trySlices = function tryAllSlices(value) {\n\t/** @type {ReturnType<typeof tryAllSlices>} */ var found = false;\n\tforEach(\n\t\t// eslint-disable-next-line no-extra-parens\n\t\t/** @type {Record<`\\$${TypedArrayName}`, Getter>} */ /** @type {any} */ (cache),\n\t\t/** @type {(getter: typeof cache, name: `\\$${import('.').TypedArrayName}`) => void} */ function (getter, name) {\n\t\t\tif (!found) {\n\t\t\t\ttry {\n\t\t\t\t\t// @ts-expect-error TODO: fix\n\t\t\t\t\tgetter(value);\n\t\t\t\t\tfound = $slice(name, 1);\n\t\t\t\t} catch (e) { /**/ }\n\t\t\t}\n\t\t}\n\t);\n\treturn found;\n};\n\n/** @type {import('.')} */\nmodule.exports = function whichTypedArray(value) {\n\tif (!value || typeof value !== 'object') { return false; }\n\tif (!hasToStringTag) {\n\t\t/** @type {string} */\n\t\tvar tag = $slice($toString(value), 8, -1);\n\t\tif ($indexOf(typedArrays, tag) > -1) {\n\t\t\treturn tag;\n\t\t}\n\t\tif (tag !== 'Object') {\n\t\t\treturn false;\n\t\t}\n\t\t// node < 0.6 hits here on real Typed Arrays\n\t\treturn trySlices(value);\n\t}\n\tif (!gOPD) { return null; } // unknown engine\n\treturn tryTypedArrays(value);\n};\n","'use strict';\n\n/** @type {import('.')} */\nvar $gOPD = require('./gOPD');\n\nif ($gOPD) {\n\ttry {\n\t\t$gOPD([], 'length');\n\t} catch (e) {\n\t\t// IE 8 has a broken gOPD\n\t\t$gOPD = null;\n\t}\n}\n\nmodule.exports = $gOPD;\n","'use strict';\n\n/** @type {import('./pow')} */\nmodule.exports = Math.pow;\n","'use strict';\n\n/** @type {import('./max')} */\nmodule.exports = Math.max;\n","'use strict';\n\n/** @type {import('./gOPD')} */\nmodule.exports = Object.getOwnPropertyDescriptor;\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar callBindBasic = require('call-bind-apply-helpers');\n\n/** @type {(thisArg: string, searchString: string, position?: number) => number} */\nvar $indexOf = callBindBasic([GetIntrinsic('%String.prototype.indexOf%')]);\n\n/** @type {import('.')} */\nmodule.exports = function callBoundIntrinsic(name, allowMissing) {\n\t/* eslint no-extra-parens: 0 */\n\n\tvar intrinsic = /** @type {(this: unknown, ...args: unknown[]) => unknown} */ (GetIntrinsic(name, !!allowMissing));\n\tif (typeof intrinsic === 'function' && $indexOf(name, '.prototype.') > -1) {\n\t\treturn callBindBasic(/** @type {const} */ ([intrinsic]));\n\t}\n\treturn intrinsic;\n};\n","'use strict';\n\nvar getPolyfill = require('./polyfill');\nvar define = require('define-properties');\n\nmodule.exports = function shimObjectIs() {\n\tvar polyfill = getPolyfill();\n\tdefine(Object, { is: polyfill }, {\n\t\tis: function testObjectIs() {\n\t\t\treturn Object.is !== polyfill;\n\t\t}\n\t});\n\treturn polyfill;\n};\n","'use strict';\n\n/** @type {import('.')} */\nmodule.exports = [\n\t'Float16Array',\n\t'Float32Array',\n\t'Float64Array',\n\t'Int8Array',\n\t'Int16Array',\n\t'Int32Array',\n\t'Uint8Array',\n\t'Uint8ClampedArray',\n\t'Uint16Array',\n\t'Uint32Array',\n\t'BigInt64Array',\n\t'BigUint64Array'\n];\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = function getPolyfill() {\n\tif (Number.isNaN && Number.isNaN(NaN) && !Number.isNaN('a')) {\n\t\treturn Number.isNaN;\n\t}\n\treturn implementation;\n};\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = Function.prototype.bind || implementation;\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\nvar define = require('define-data-property');\nvar hasDescriptors = require('has-property-descriptors')();\nvar gOPD = require('gopd');\n\nvar $TypeError = require('es-errors/type');\nvar $floor = GetIntrinsic('%Math.floor%');\n\n/** @type {import('.')} */\nmodule.exports = function setFunctionLength(fn, length) {\n\tif (typeof fn !== 'function') {\n\t\tthrow new $TypeError('`fn` is not a function');\n\t}\n\tif (typeof length !== 'number' || length < 0 || length > 0xFFFFFFFF || $floor(length) !== length) {\n\t\tthrow new $TypeError('`length` must be a positive 32-bit integer');\n\t}\n\n\tvar loose = arguments.length > 2 && !!arguments[2];\n\n\tvar functionLengthIsConfigurable = true;\n\tvar functionLengthIsWritable = true;\n\tif ('length' in fn && gOPD) {\n\t\tvar desc = gOPD(fn, 'length');\n\t\tif (desc && !desc.configurable) {\n\t\t\tfunctionLengthIsConfigurable = false;\n\t\t}\n\t\tif (desc && !desc.writable) {\n\t\t\tfunctionLengthIsWritable = false;\n\t\t}\n\t}\n\n\tif (functionLengthIsConfigurable || functionLengthIsWritable || !loose) {\n\t\tif (hasDescriptors) {\n\t\t\tdefine(/** @type {Parameters<define>[0]} */ (fn), 'length', length, true, true);\n\t\t} else {\n\t\t\tdefine(/** @type {Parameters<define>[0]} */ (fn), 'length', length);\n\t\t}\n\t}\n\treturn fn;\n};\n","const fs = require('fs');\nconst os = require('os');\nconst path = require('path');\nconst util = require('util');\n\nconst rbql = require('./rbql.js');\nconst csv_utils = require('./csv_utils.js');\n\n\nconst utf_decoding_error = 'Unable to decode input table as UTF-8. Use binary (latin-1) encoding instead';\n\n\nclass RbqlIOHandlingError extends Error {}\nclass AssertionError extends Error {}\n\n\n// TODO performance improvement: replace smart_split() with polymorphic_split()\n\n\nfunction assert(condition, message=null) {\n    if (!condition) {\n        if (!message) {\n            message = 'Assertion error';\n        }\n        throw new AssertionError(message);\n    }\n}\n\n\nfunction interpret_named_csv_format(format_name) {\n    format_name = format_name.toLowerCase();\n    if (format_name == 'monocolumn')\n        return ['', 'monocolumn'];\n    if (format_name == 'csv')\n        return [',', 'quoted'];\n    if (format_name == 'tsv')\n        return ['\\t', 'simple'];\n    throw new RbqlIOHandlingError(`Unknown format name: \"${format_name}\"`);\n}\n\n\n\nfunction is_ascii(str) {\n    return /^[\\x00-\\x7F]*$/.test(str);\n}\n\n\nfunction read_user_init_code(rbql_init_source_path) {\n    return fs.readFileSync(rbql_init_source_path, 'utf-8');\n}\n\n\nfunction remove_utf8_bom(line, assumed_source_encoding) {\n    if (assumed_source_encoding == 'binary' && line.length >= 3 && line.charCodeAt(0) === 0xEF && line.charCodeAt(1) === 0xBB && line.charCodeAt(2) === 0xBF) {\n        return line.substring(3);\n    }\n    if (assumed_source_encoding == 'utf-8' && line.length >= 1 && line.charCodeAt(0) === 0xFEFF) {\n        return line.substring(1);\n    }\n    return line;\n}\n\n\nfunction make_inconsistent_num_fields_warning(table_name, inconsistent_records_info) {\n    let [record_num_1, num_fields_1, record_num_2, num_fields_2] = rbql.sample_first_two_inconsistent_records(inconsistent_records_info);\n    let warn_msg = `Number of fields in \"${table_name}\" table is not consistent: `;\n    warn_msg += `e.g. record ${record_num_1} -> ${num_fields_1} fields, record ${record_num_2} -> ${num_fields_2} fields`;\n    return warn_msg;\n}\n\n\nfunction expanduser(filepath) {\n    if (filepath.charAt(0) === '~') {\n        return path.join(os.homedir(), filepath.slice(1));\n    }\n    return filepath;\n}\n\n\nfunction try_read_index(index_path) {\n    var content = null;\n    try {\n        content = fs.readFileSync(index_path, 'utf-8');\n    } catch (e) {\n        return [];\n    }\n    var lines = content.split('\\n');\n    var records = [];\n    for (var i = 0; i < lines.length; i++) {\n        if (!lines[i])\n            continue;\n        var record = lines[i].split('\\t');\n        records.push(record);\n    }\n    return records;\n}\n\n\nfunction get_index_record(index_path, key) {\n    var records = try_read_index(index_path);\n    for (var i = 0; i < records.length; i++) {\n        if (records[i].length && records[i][0] == key) {\n            return records[i];\n        }\n    }\n    return null;\n}\n\n\nfunction find_table_path(main_table_dir, table_id) {\n    // If table_id is a relative path it could be relative either to the current directory or to the main table dir.\n    var candidate_path = expanduser(table_id);\n    if (fs.existsSync(candidate_path)) {\n        return candidate_path;\n    }\n    if (main_table_dir && !path.isAbsolute(candidate_path)) {\n        candidate_path = path.join(main_table_dir, candidate_path);\n        if (fs.existsSync(candidate_path)) {\n            return candidate_path;\n        }\n    }\n    let table_names_settings_path = path.join(os.homedir(), '.rbql_table_names');\n    var name_record = get_index_record(table_names_settings_path, table_id);\n    if (name_record && name_record.length > 1 && fs.existsSync(name_record[1])) {\n        return name_record[1];\n    }\n    return null;\n}\n\n\nclass RecordQueue {\n    // TODO compare performance with a linked list\n    constructor() {\n        this.push_stack = [];\n        this.pull_stack = [];\n    }\n\n    enqueue(record) {\n        this.push_stack.push(record);\n    }\n\n    dequeue() {\n        if (!this.pull_stack.length) {\n            if (!this.push_stack.length)\n                return null;\n            this.pull_stack = this.push_stack;\n            this.pull_stack.reverse();\n            this.push_stack = [];\n        }\n        return this.pull_stack.pop();\n    }\n}\n\n\nclass CSVRecordIterator extends rbql.RBQLInputIterator {\n    // CSVRecordIterator implements a typical async producer-consumer model with an internal buffer:\n    // get_record() - consumer\n    // stream.on('data') - producer\n    constructor(stream, csv_path, encoding, delim, policy, has_header=false, comment_prefix=null, table_name='input', variable_prefix='a') {\n        super();\n        this.stream = stream;\n        this.csv_path = csv_path;\n        assert((this.stream === null) != (this.csv_path === null));\n        this.encoding = encoding;\n        this.delim = delim;\n        this.policy = policy;\n\n        this.has_header = has_header;\n        this.first_record = null;\n        this.first_record_should_be_emitted = !has_header;\n        this.header_preread_complete = false;\n\n        this.table_name = table_name;\n        this.variable_prefix = variable_prefix;\n        this.comment_prefix = comment_prefix;\n\n        this.decoder = null;\n        if (encoding == 'utf-8' && this.csv_path === null) {\n            // Unfortunately util.TextDecoder has serious flaws:\n            // 1. It doesn't work in Node without ICU: https://nodejs.org/api/util.html#util_new_textdecoder_encoding_options\n            // 2. It is broken in Electron: https://github.com/electron/electron/issues/18733\n\n            // Technically we can implement our own custom streaming text decoder, using the 3 following technologies:\n            // 1. decode-encode validation method from https://stackoverflow.com/a/32279283/2898283\n            // 2. Scanning buffer chunks for non-continuation utf-8 bytes from the end of the buffer:\n            //    src_buffer -> (buffer_before, buffer_after) where buffer_after is very small(a couple of bytes) and buffer_before is large and ends with a non-continuation bytes\n            // 3. Internal buffer to store small tail part from the previous buffer\n            this.decoder = new util.TextDecoder(encoding, {fatal: true, stream: true});\n        }\n\n        this.input_exhausted = false;\n        this.started = false;\n\n        this.utf8_bom_removed = false; // BOM doesn't get automatically removed by the decoder when utf-8 file is treated as latin-1\n        this.first_defective_line = null;\n\n        this.fields_info = new Map();\n        this.NR = 0; // Record number\n        this.NL = 0; // Line number (NL != NR when the CSV file has comments or multiline fields)\n\n        this.line_aggregator = new csv_utils.MultilineRecordAggregator(comment_prefix);\n\n        this.partially_decoded_line = '';\n        this.partially_decoded_line_ends_with_cr = false;\n\n        // Holds an external \"resolve\" function which is called when everything is fine.\n        this.resolve_current_record = null;\n        // Holds an external \"reject\" function which is called when error has occured.\n        this.reject_current_record = null;\n        // Holds last exception if we don't have any reject callbacks from clients yet.\n        this.current_exception = null;\n\n        this.produced_records_queue = new RecordQueue();\n\n        this.process_line_polymorphic = policy == 'quoted_rfc' ? this.process_partial_rfc_record_line : this.process_record_line_simple;\n    }\n\n\n    handle_query_modifier(modifier) {\n        // For `... WITH (header) ...` syntax\n        if (['header', 'headers'].indexOf(modifier) != -1) {\n            this.has_header = true;\n            this.first_record_should_be_emitted = false;\n        }\n        if (['noheader', 'noheaders'].indexOf(modifier) != -1) {\n            this.has_header = false;\n            this.first_record_should_be_emitted = true;\n        }\n    }\n\n\n    reset_external_callbacks() {\n        // Drop external callbacks simultaneously since promises can only resolve once, see: https://stackoverflow.com/a/18218542/2898283\n        this.reject_current_record = null;\n        this.resolve_current_record = null;\n    }\n\n    try_propagate_exception() {\n        if (this.current_exception && this.reject_current_record) {\n            let reject = this.reject_current_record;\n            let exception = this.current_exception;\n            this.reset_external_callbacks();\n            this.current_exception = null;\n            reject(exception);\n        }\n    }\n\n\n    store_or_propagate_exception(exception) {\n        if (this.current_exception === null)\n            // Ignore subsequent exceptions if we already have an unreported error. This way we prioritize earlier errors over the more recent ones.\n            this.current_exception = exception;\n        this.try_propagate_exception();\n    }\n\n\n    async preread_first_record() {\n        if (this.header_preread_complete)\n            return;\n        this.first_record = await this.get_record();\n        this.header_preread_complete = true; // We must set header_preread_complete to true after calling get_record(), because get_record() uses it internally.\n        if (this.first_record === null) {\n            return;\n        }\n        if (this.stream)\n            this.stream.pause();\n        this.first_record = this.first_record.slice();\n    };\n\n\n    async get_variables_map(query_text) {\n        let variable_map = new Object();\n        rbql.parse_basic_variables(query_text, this.variable_prefix, variable_map);\n        rbql.parse_array_variables(query_text, this.variable_prefix, variable_map);\n\n        await this.preread_first_record();\n        if (this.has_header && this.first_record) {\n            rbql.parse_attribute_variables(query_text, this.variable_prefix, this.first_record, 'CSV header line', variable_map);\n            rbql.parse_dictionary_variables(query_text, this.variable_prefix, this.first_record, variable_map);\n        }\n        return variable_map;\n    };\n\n    async get_header() {\n        await this.preread_first_record();\n        return this.has_header ? this.first_record : null;\n    }\n\n\n    try_resolve_next_record() {\n        this.try_propagate_exception();\n        if (this.resolve_current_record === null)\n            return;\n\n        let record = null;\n        if (this.first_record_should_be_emitted && this.header_preread_complete) {\n            this.first_record_should_be_emitted = false;\n            record = this.first_record;\n        } else {\n            record = this.produced_records_queue.dequeue();\n        }\n\n        if (record === null && !this.input_exhausted)\n            return;\n        let resolve = this.resolve_current_record;\n        this.reset_external_callbacks();\n        resolve(record);\n    };\n\n\n    async get_record() {\n        if (!this.started)\n            await this.start();\n        if (this.stream && this.stream.isPaused())\n            this.stream.resume();\n\n        let parent_iterator = this;\n        let current_record_promise = new Promise(function(resolve, reject) {\n            parent_iterator.resolve_current_record = resolve;\n            parent_iterator.reject_current_record = reject;\n        });\n        this.try_resolve_next_record();\n        return current_record_promise;\n    };\n\n\n    async get_all_records(num_records=null) {\n        let records = [];\n        while (true) {\n            let record = await this.get_record();\n            if (record === null)\n                break;\n            records.push(record);\n            if (num_records && records.length >= num_records) {\n                this.stop();\n                break;\n            }\n        }\n        return records;\n    };\n\n\n    process_record_line_simple(line) {\n        if (this.comment_prefix && line.startsWith(this.comment_prefix))\n            return; // Just skip the line\n        this.process_record_line(line);\n    }\n\n\n    process_record_line(line) {\n        this.NR += 1;\n        var [record, warning] = csv_utils.smart_split(line, this.delim, this.policy, false);\n        if (warning) {\n            if (this.first_defective_line === null) {\n                this.first_defective_line = this.NL;\n                if (this.policy == 'quoted_rfc')\n                    this.store_or_propagate_exception(new RbqlIOHandlingError(`Inconsistent double quote escaping in ${this.table_name} table at record ${this.NR}, line ${this.NL}`));\n            }\n        }\n        let num_fields = record.length;\n        if (!this.fields_info.has(num_fields))\n            this.fields_info.set(num_fields, this.NR);\n        this.produced_records_queue.enqueue(record);\n        this.try_resolve_next_record();\n    };\n\n\n    process_partial_rfc_record_line(line) {\n        this.line_aggregator.add_line(line);\n        if (this.line_aggregator.has_comment_line) {\n            this.line_aggregator.reset();\n        } else if (this.line_aggregator.has_full_record) {\n            this.process_record_line(this.line_aggregator.get_full_line('\\n'));\n            this.line_aggregator.reset();\n        }\n    };\n\n\n    process_line(line) {\n        this.NL += 1;\n        if (this.NL === 1) {\n            var clean_line = remove_utf8_bom(line, this.encoding);\n            if (clean_line != line) {\n                line = clean_line;\n                this.utf8_bom_removed = true;\n            }\n        }\n        this.process_line_polymorphic(line);\n    };\n\n\n    process_data_stream_chunk(data_chunk) {\n        let decoded_string = null;\n        if (this.decoder) {\n            try {\n                decoded_string = this.decoder.decode(data_chunk);\n            } catch (e) {\n                if (e instanceof TypeError) {\n                    this.store_or_propagate_exception(new RbqlIOHandlingError(utf_decoding_error));\n                } else {\n                    this.store_or_propagate_exception(e);\n                }\n                return;\n            }\n        } else {\n            decoded_string = data_chunk.toString(this.encoding);\n        }\n        let line_starts_with_lf = decoded_string.length && decoded_string[0] == '\\n';\n        let first_line_index = line_starts_with_lf && this.partially_decoded_line_ends_with_cr ? 1 : 0;\n        this.partially_decoded_line_ends_with_cr = decoded_string.length && decoded_string[decoded_string.length - 1] == '\\r';\n        let lines = csv_utils.split_lines(decoded_string);\n        lines[0] = this.partially_decoded_line + lines[0];\n        assert(first_line_index == 0 || lines[0].length == 0);\n        this.partially_decoded_line = lines.pop();\n        for (let i = first_line_index; i < lines.length; i++) {\n            this.process_line(lines[i]);\n        }\n    };\n\n\n    process_data_bulk(data_blob) {\n        let decoded_string = data_blob.toString(this.encoding);\n        if (this.encoding == 'utf-8') {\n            // Using hacky comparison method from here: https://stackoverflow.com/a/32279283/2898283\n            // TODO get rid of this once TextDecoder is really fixed or when alternative method of reliable decoding appears\n            let control_buffer = Buffer.from(decoded_string, 'utf-8');\n            if (Buffer.compare(data_blob, control_buffer) != 0) {\n                this.store_or_propagate_exception(new RbqlIOHandlingError(utf_decoding_error));\n                return;\n            }\n        }\n        let lines = csv_utils.split_lines(decoded_string);\n        if (lines.length && lines[lines.length - 1].length == 0)\n            lines.pop();\n        for (let i = 0; i < lines.length; i++) {\n            this.process_line(lines[i]);\n        }\n        if (this.line_aggregator.is_inside_multiline_record()) {\n            this.process_record_line(this.line_aggregator.get_full_line('\\n'));\n        }\n        this.input_exhausted = true;\n        this.try_resolve_next_record(); // Should be a NOOP here?\n    }\n\n\n    process_data_stream_end() {\n        this.input_exhausted = true;\n        if (this.partially_decoded_line.length) {\n            let last_line = this.partially_decoded_line;\n            this.partially_decoded_line = '';\n            this.process_line(last_line);\n        }\n        if (this.line_aggregator.is_inside_multiline_record()) {\n            this.process_record_line(this.line_aggregator.get_full_line('\\n'));\n        }\n        this.try_resolve_next_record();\n    };\n\n\n    stop() {\n        if (this.stream)\n            this.stream.destroy(); // TODO consider using pause() instead\n    };\n\n\n    async start() {\n        if (this.started)\n            return;\n        this.started = true;\n        if (this.stream) {\n            this.stream.on('data', (data_chunk) => { this.process_data_stream_chunk(data_chunk); });\n            this.stream.on('end', () => { this.process_data_stream_end(); });\n        } else {\n            let parent_iterator = this;\n            return new Promise(function(resolve, reject) {\n                fs.readFile(parent_iterator.csv_path, (err, data_blob) => {\n                    if (err) {\n                        reject(err);\n                    } else {\n                        parent_iterator.process_data_bulk(data_blob);\n                        resolve();\n                    }\n                });\n            });\n        }\n    };\n\n\n    get_warnings() {\n        let result = [];\n        if (this.first_defective_line !== null)\n            result.push(`Inconsistent double quote escaping in ${this.table_name} table. E.g. at line ${this.first_defective_line}`);\n        if (this.utf8_bom_removed)\n            result.push(`UTF-8 Byte Order Mark (BOM) was found and skipped in ${this.table_name} table`);\n        if (this.fields_info.size > 1)\n            result.push(make_inconsistent_num_fields_warning(this.table_name, this.fields_info));\n        return result;\n    };\n}\n\n\nclass CSVWriter extends rbql.RBQLOutputWriter {\n    constructor(stream, close_stream_on_finish, encoding, delim, policy, line_separator='\\n') {\n        super();\n        this.stream = stream;\n        this.encoding = encoding;\n        if (encoding)\n            this.stream.setDefaultEncoding(encoding);\n        this.stream.on('error', (error_obj) => { this.store_first_error(error_obj); })\n        this.delim = delim;\n        this.policy = policy;\n        this.line_separator = line_separator;\n        this.sub_array_delim = delim == '|' ? ';' : '|';\n\n        this.close_stream_on_finish = close_stream_on_finish;\n\n        this.null_in_output = false;\n        this.delim_in_simple_output = false;\n        this.header_len = null;\n        this.first_error = null;\n\n        if (policy == 'simple') {\n            this.polymorphic_join = this.simple_join;\n        } else if (policy == 'quoted') {\n            this.polymorphic_join = this.quoted_join;\n        } else if (policy == 'quoted_rfc') {\n            this.polymorphic_join = this.quoted_join_rfc;\n        } else if (policy == 'monocolumn') {\n            this.polymorphic_join = this.mono_join;\n        } else if (policy == 'whitespace') {\n            this.polymorphic_join = this.simple_join;\n        } else {\n            throw new RbqlIOHandlingError('Unknown output csv policy');\n        }\n    }\n\n\n    store_first_error(error_obj) {\n        // Store only first error because it is typically more important than the subsequent ones.\n        if (this.first_error === null)\n            this.first_error = error_obj;\n    }\n\n    set_header(header) {\n        if (header !== null) {\n            this.header_len = header.length;\n            this.write(header);\n        }\n    }\n\n\n    quoted_join(fields) {\n        let delim = this.delim;\n        var quoted_fields = fields.map(function(v) { return csv_utils.quote_field(String(v), delim); });\n        return quoted_fields.join(this.delim);\n    };\n\n\n    quoted_join_rfc(fields) {\n        let delim = this.delim;\n        var quoted_fields = fields.map(function(v) { return csv_utils.rfc_quote_field(String(v), delim); });\n        return quoted_fields.join(this.delim);\n    };\n\n\n    mono_join(fields) {\n        if (fields.length > 1) {\n            throw new RbqlIOHandlingError('Unable to use \"Monocolumn\" output format: some records have more than one field');\n        }\n        return fields[0];\n    };\n\n\n    simple_join(fields) {\n        var res = fields.join(this.delim);\n        if (fields.join('').indexOf(this.delim) != -1) {\n            this.delim_in_simple_output = true;\n        }\n        return res;\n    };\n\n\n    normalize_fields(out_fields) {\n        for (var i = 0; i < out_fields.length; i++) {\n            if (out_fields[i] == null) {\n                this.null_in_output = true;\n                out_fields[i] = '';\n            } else if (Array.isArray(out_fields[i])) {\n                this.normalize_fields(out_fields[i]);\n                out_fields[i] = out_fields[i].join(this.sub_array_delim);\n            }\n        }\n    };\n\n\n    async write(fields) {\n        if (this.header_len !== null && fields.length != this.header_len)\n            throw new RbqlIOHandlingError(`Inconsistent number of columns in output header and the current record: ${this.header_len} != ${fields.length}`);\n        this.normalize_fields(fields);\n        this.stream.write(this.polymorphic_join(fields));\n        this.stream.write(this.line_separator);\n        let writer_error = this.first_error;\n        return new Promise(function(resolve, reject) {\n            if (writer_error !== null) {\n                reject(writer_error);\n            } else {\n                resolve(true);\n            }\n        });\n    };\n\n\n    _write_all(table) {\n        for (let i = 0; i < table.length; i++) {\n            this.write(table[i]);\n        }\n    };\n\n\n    async finish() {\n        let close_stream_on_finish = this.close_stream_on_finish;\n        let output_stream = this.stream;\n        let output_encoding = this.encoding;\n        let writer_error = this.first_error;\n        let finish_promise = new Promise(function(resolve, reject) {\n            if (writer_error !== null) {\n                reject(writer_error);\n            }\n            if (close_stream_on_finish) {\n                output_stream.end('', output_encoding, () => { resolve(); });\n            } else {\n                setTimeout(() => { resolve(); }, 0);\n            }\n        });\n        return finish_promise;\n    };\n\n\n    get_warnings() {\n        let result = [];\n        if (this.null_in_output)\n            result.push('null values in output were replaced by empty strings');\n        if (this.delim_in_simple_output)\n            result.push('Some output fields contain separator');\n        return result;\n    };\n\n}\n\n\nclass FileSystemCSVRegistry extends rbql.RBQLTableRegistry {\n    constructor(input_file_dir, delim, policy, encoding, has_header=false, comment_prefix=null, options=null) {\n        super();\n        this.input_file_dir = input_file_dir;\n        this.delim = delim;\n        this.policy = policy;\n        this.encoding = encoding;\n        this.has_header = has_header;\n        this.comment_prefix = comment_prefix;\n        this.stream = null;\n        this.record_iterator = null;\n\n        this.options = options;\n        this.bulk_input_path = null;\n        this.table_path = null;\n    }\n\n    get_iterator_by_table_id(table_id) {\n        this.table_path = find_table_path(this.input_file_dir, table_id);\n        if (this.table_path === null) {\n            throw new RbqlIOHandlingError(`Unable to find join table \"${table_id}\"`);\n        }\n        if (this.options && this.options['bulk_read']) {\n            this.bulk_input_path = this.table_path;\n        } else {\n            this.stream = fs.createReadStream(this.table_path);\n        }\n        this.record_iterator = new CSVRecordIterator(this.stream, this.bulk_input_path, this.encoding, this.delim, this.policy, this.has_header, this.comment_prefix, table_id, 'b');\n        return this.record_iterator;\n    };\n\n    get_warnings(output_warnings) {\n        if (this.record_iterator && this.has_header) {\n            output_warnings.push(`The first record in JOIN file ${path.basename(this.table_path)} was also treated as header (and skipped)`);\n        }\n    }\n}\n\n\nasync function query_csv(query_text, input_path, input_delim, input_policy, output_path, output_delim, output_policy, csv_encoding, output_warnings, with_headers=false, comment_prefix=null, user_init_code='', options=null) {\n    let input_stream = null;\n    let bulk_input_path = null;\n    if (options && options['bulk_read'] && input_path) {\n        bulk_input_path = input_path;\n    } else {\n        input_stream = input_path === null ? process.stdin : fs.createReadStream(input_path);\n    }\n    let [output_stream, close_output_on_finish] = output_path === null ? [process.stdout, false] : [fs.createWriteStream(output_path), true];\n    if (input_delim == '\"' && input_policy == 'quoted')\n        throw new RbqlIOHandlingError('Double quote delimiter is incompatible with \"quoted\" policy');\n    if (csv_encoding == 'latin-1')\n        csv_encoding = 'binary';\n    if (!is_ascii(query_text) && csv_encoding == 'binary')\n        throw new RbqlIOHandlingError('To use non-ascii characters in query enable UTF-8 encoding instead of latin-1/binary');\n    if ((!is_ascii(input_delim) || !is_ascii(output_delim)) && csv_encoding == 'binary')\n        throw new RbqlIOHandlingError('To use non-ascii characters in query enable UTF-8 encoding instead of latin-1/binary');\n\n    let default_init_source_path = path.join(os.homedir(), '.rbql_init_source.js');\n    if (user_init_code == '' && fs.existsSync(default_init_source_path)) {\n        user_init_code = read_user_init_code(default_init_source_path);\n    }\n    let input_file_dir = input_path ? path.dirname(input_path) : null;\n    let join_tables_registry = new FileSystemCSVRegistry(input_file_dir, input_delim, input_policy, csv_encoding, with_headers, comment_prefix, options);\n    let input_iterator = new CSVRecordIterator(input_stream, bulk_input_path, csv_encoding, input_delim, input_policy, with_headers, comment_prefix);\n    let output_writer = new CSVWriter(output_stream, close_output_on_finish, csv_encoding, output_delim, output_policy);\n\n    await rbql.query(query_text, input_iterator, output_writer, output_warnings, join_tables_registry, user_init_code);\n    join_tables_registry.get_warnings(output_warnings);\n}\n\n\nmodule.exports.is_ascii = is_ascii;\nmodule.exports.CSVRecordIterator = CSVRecordIterator;\nmodule.exports.CSVWriter = CSVWriter;\nmodule.exports.FileSystemCSVRegistry = FileSystemCSVRegistry;\nmodule.exports.interpret_named_csv_format = interpret_named_csv_format;\nmodule.exports.read_user_init_code = read_user_init_code;\nmodule.exports.query_csv = query_csv;\nmodule.exports.RecordQueue = RecordQueue;\nmodule.exports.exception_to_error_info = rbql.exception_to_error_info;\n","'use strict';\n\n/** @type {import('./reflectApply')} */\nmodule.exports = typeof Reflect !== 'undefined' && Reflect && Reflect.apply;\n","'use strict';\n\nvar callBind = require('call-bind-apply-helpers');\nvar gOPD = require('gopd');\n\nvar hasProtoAccessor;\ntry {\n\t// eslint-disable-next-line no-extra-parens, no-proto\n\thasProtoAccessor = /** @type {{ __proto__?: typeof Array.prototype }} */ ([]).__proto__ === Array.prototype;\n} catch (e) {\n\tif (!e || typeof e !== 'object' || !('code' in e) || e.code !== 'ERR_PROTO_ACCESS') {\n\t\tthrow e;\n\t}\n}\n\n// eslint-disable-next-line no-extra-parens\nvar desc = !!hasProtoAccessor && gOPD && gOPD(Object.prototype, /** @type {keyof typeof Object.prototype} */ ('__proto__'));\n\nvar $Object = Object;\nvar $getPrototypeOf = $Object.getPrototypeOf;\n\n/** @type {import('./get')} */\nmodule.exports = desc && typeof desc.get === 'function'\n\t? callBind([desc.get])\n\t: typeof $getPrototypeOf === 'function'\n\t\t? /** @type {import('./get')} */ function getDunder(value) {\n\t\t\t// eslint-disable-next-line eqeqeq\n\t\t\treturn $getPrototypeOf(value == null ? value : $Object(value));\n\t\t}\n\t\t: false;\n","const assert = require('assert');\nconst rainbow_utils = require('../../rainbow_utils.js');\nconst fast_load_utils = require('../../fast_load_utils.js');\n\n\nclass VscodePositionTestDouble {\n    constructor(line, character) {\n        this.line = line;\n        this.character = character;\n    }\n}\n\nclass VscodeSelectionTestDouble {\n    constructor(anchor, active) {\n        this.anchor = anchor;\n        this.active = active;\n    }\n}\n\nclass VscodeRangeTestDouble {\n    constructor(l1, c1, l2, c2) {\n        this.start = new VscodePositionTestDouble(l1, c1);\n        this.end = new VscodePositionTestDouble(l2, c2);\n    }\n    contains(position) {\n        let after_start = position.line > this.start.line || (position.line === this.start.line && position.character >= this.start.character);\n        let before_end = position.line < this.end.line || (position.line == this.end.line && position.character <= this.end.character);\n        return after_start && before_end;\n    }\n}\n\nclass UriTestDouble {\n    constructor(scheme) {\n        this.scheme = scheme;\n    }\n}\n\nclass VscodeDocumentTestDouble {\n    constructor(lines_buffer, fileName='TestDouble.txt', language_id='plaintext', scheme='file') {\n        this.lines_buffer = lines_buffer;\n        this.lineCount = lines_buffer.length;\n        this.fileName = fileName;\n        this.version = 1;\n        this.languageId = language_id;\n        this.uri = new UriTestDouble(scheme);\n    }\n    lineAt(lnum) {\n        return {text: this.lines_buffer[lnum]};\n    }\n    getText() {\n        return this.lines_buffer.join('\\n');\n    }\n}\n\n\nclass VscodeStatusBarItemTestDouble {\n    constructor() {\n        this.text = null;\n        this.color = null;\n        this.tooltip = null;\n        this.command = null;\n        this.is_visible = false;\n    }\n    show() {\n        this.is_visible = true;\n    }\n}\n\n\nclass InlayHintTestDouble {\n    constructor(position, label) {\n        this.position = position;\n        this.label = label;\n    }\n}\n\n\nfunction create_status_bar_item_test_double(_alignment) {\n    return new VscodeStatusBarItemTestDouble();\n}\n\n\nfunction set_text_document_language_test_double(target_document, language_id) {\n    target_document.languageId = language_id;\n    return target_document;\n}\n\n\nlet vscode_test_double = {\n    Range: VscodeRangeTestDouble, \n    'window': {'createStatusBarItem': create_status_bar_item_test_double}, \n    StatusBarAlignment: {'Left': null}, \n    languages: {'setTextDocumentLanguage': set_text_document_language_test_double}, \n    Position: VscodePositionTestDouble, \n    InlayHint: InlayHintTestDouble,\n    Selection: VscodeSelectionTestDouble\n};\n\n\n// Helper testing function to adjust column stats.\nfunction raw_column_stats_to_typed(raw_stat) {\n    let enable_double_width_alignment = raw_stat.hasOwnProperty('enable_double_width_alignment') ? raw_stat.enable_double_width_alignment : true;\n    let typed_stat = new rainbow_utils.ColumnStat(enable_double_width_alignment);\n    if (raw_stat.max_int_length >= 0) {\n        typed_stat.max_int_length = raw_stat.max_int_length;\n        typed_stat.max_fractional_length = raw_stat.max_fractional_length;\n    } else {\n        typed_stat.mark_non_numeric();\n    }\n    typed_stat.max_total_length = raw_stat.max_total_length;\n    if (raw_stat.hasOwnProperty('has_wide_chars')) {\n        typed_stat.has_wide_chars = raw_stat.has_wide_chars;\n        // TODO consider adding a test where only_ascii is false and has_wide_chars is true.\n        typed_stat.only_ascii = !raw_stat.has_wide_chars;\n    }\n    if (raw_stat.hasOwnProperty('only_ascii')) {\n        typed_stat.only_ascii = raw_stat.only_ascii;\n    }\n    return typed_stat;\n}\n\n\n// Helper testing function to adjust column stats.\nfunction column_stats_helper(column_stats_raw_objects) {\n    let result = [];\n    for (let raw_stat of column_stats_raw_objects) {\n        result.push(raw_column_stats_to_typed(raw_stat));\n    }\n    return result;\n}\n\n\nfunction test_calc_column_stats_for_fragment() {\n    let [doc_lines, active_doc, comment_prefix, delim, policy, range, double_width_alignment] = [null, null, null, null, null, null, null];\n    let [table_ranges, all_columns_stats] = [null, null];\n\n    // Simple test case with comments.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        '#foo,bar',\n        'c1,c2', \n        'd1,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'simple';\n    double_width_alignment = true;\n    range = new vscode_test_double.Range(1, 0, 3, 0);\n    table_ranges = rainbow_utils.parse_document_range_single_line(vscode_test_double, active_doc, delim, /*include_delim_length_in_ranges=*/true, policy, comment_prefix, range, /*custom_parsing_margin=*/0);\n    all_columns_stats = rainbow_utils.calc_column_stats_for_fragment(table_ranges, double_width_alignment);\n    expected_column_stats = column_stats_helper([\n        {max_total_length: 2, max_int_length: -1, max_fractional_length: -1},\n        {max_total_length: 2, max_int_length: -1, max_fractional_length: -1}]);\n    assert.deepEqual(expected_column_stats, all_columns_stats);\n}\n\n\nfunction test_generate_inlay_hints() {\n    let [doc_lines, active_doc, comment_prefix, delim, policy, range, double_width_alignment] = [null, null, null, null, null, null, null];\n    let [table_ranges, all_columns_stats, inlay_hints, expected_inlay_hints] = [null, null, null, null];\n    let alignment_char = null;\n    let enable_vertical_grid = false; // TODO add a test with true\n\n    // Simple test case.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        'c11,c2', \n        'd1,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    policy = 'simple';\n    alignment_char = '·';\n    double_width_alignment = true;\n    enable_vertical_grid = false;\n    range = new vscode_test_double.Range(1, 0, 3, 0);\n    table_ranges = rainbow_utils.parse_document_range_single_line(vscode_test_double, active_doc, delim, /*include_delim_length_in_ranges=*/false, policy, comment_prefix, range, /*custom_parsing_margin=*/0);\n    all_columns_stats = rainbow_utils.calc_column_stats_for_fragment(table_ranges, double_width_alignment);\n    inlay_hints = rainbow_utils.generate_inlay_hints(vscode_test_double, table_ranges, all_columns_stats, delim.length, alignment_char, enable_vertical_grid);\n    expected_inlay_hints = [\n        new InlayHintTestDouble(new VscodePositionTestDouble(1, 2), /*label=*/'·'),\n        new InlayHintTestDouble(new VscodePositionTestDouble(1, 3), /*label=*/'·'),\n        new InlayHintTestDouble(new VscodePositionTestDouble(2, 4), /*label=*/'·')];\n    assert.deepEqual(expected_inlay_hints, inlay_hints);\n\n    // Skip all comments - empty result.\n    doc_lines = [\n        'a1,a2', \n        '#b1,b2', \n        '#c11,c2', \n        'd1,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = \"#\";\n    delim = ',';\n    policy = 'simple';\n    alignment_char = ' ';\n    double_width_alignment = true;\n    enable_vertical_grid = false;\n    range = new vscode_test_double.Range(1, 0, 3, 0);\n    table_ranges = rainbow_utils.parse_document_range_single_line(vscode_test_double, active_doc, delim, /*include_delim_length_in_ranges=*/false, policy, comment_prefix, range, /*custom_parsing_margin=*/0);\n    all_columns_stats = rainbow_utils.calc_column_stats_for_fragment(table_ranges, double_width_alignment);\n    inlay_hints = rainbow_utils.generate_inlay_hints(vscode_test_double, table_ranges, all_columns_stats, delim.length, alignment_char, enable_vertical_grid);\n    expected_inlay_hints = [];\n    assert.deepEqual(expected_inlay_hints, inlay_hints);\n\n    // Spaces both before and after.\n    doc_lines = [\n        '10,a2', \n        '5,b2', \n        '5.12,c2', \n        '200,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    policy = 'simple';\n    alignment_char = ' ';\n    double_width_alignment = true;\n    enable_vertical_grid = false;\n    range = new vscode_test_double.Range(0, 0, 10, 0);\n    table_ranges = rainbow_utils.parse_document_range_single_line(vscode_test_double, active_doc, delim, /*include_delim_length_in_ranges=*/false, policy, comment_prefix, range, /*custom_parsing_margin=*/0);\n    all_columns_stats = rainbow_utils.calc_column_stats_for_fragment(table_ranges, double_width_alignment);\n    inlay_hints = rainbow_utils.generate_inlay_hints(vscode_test_double, table_ranges, all_columns_stats, delim.length, alignment_char, enable_vertical_grid);\n    expected_inlay_hints = [\n        /*before:*/new InlayHintTestDouble(new VscodePositionTestDouble(0, 0), /*label=*/' '), /*after:*/new InlayHintTestDouble(new VscodePositionTestDouble(0, 2), /*label=*/'   '), /*second_col:*/new InlayHintTestDouble(new VscodePositionTestDouble(0, 3), /*label=*/' '),\n        /*before:*/new InlayHintTestDouble(new VscodePositionTestDouble(1, 0), /*label=*/'  '), /*after:*/new InlayHintTestDouble(new VscodePositionTestDouble(1, 1), /*label=*/'   '), /*second_col:*/new InlayHintTestDouble(new VscodePositionTestDouble(1, 2), /*label=*/' '),\n        /*before:*/new InlayHintTestDouble(new VscodePositionTestDouble(2, 0), /*label=*/'  '), /*second_col:*/new InlayHintTestDouble(new VscodePositionTestDouble(2, 5), /*label=*/' '),\n        /*empty allignment before, so we only have after:*/new InlayHintTestDouble(new VscodePositionTestDouble(3, 3), /*label=*/'   '), /*second_col:*/new InlayHintTestDouble(new VscodePositionTestDouble(3, 4), /*label=*/' ')];\n    assert.deepEqual(inlay_hints, expected_inlay_hints);\n}\n\nfunction test_align_stats() {\n    let field = null;\n    let field_segments = null;\n    let is_first_line = null;\n    let column_stats = null;\n    let expected_column_stats = null;\n\n    // Previous fields are numbers but the current one is not - mark the column as non-numeric.\n    field = 'foobar';\n    field_segments = [field];\n    is_first_line = 0;\n    column_stats = raw_column_stats_to_typed({max_total_length: 5, max_int_length: 2, max_fractional_length: 3, has_wide_chars: false});\n    column_stats.update_from_field(field_segments, is_first_line);\n    expected_column_stats = raw_column_stats_to_typed({max_total_length: 6, max_int_length: -1, max_fractional_length: -1, has_wide_chars: false});\n    assert.deepEqual(expected_column_stats, column_stats);\n\n    // The field is non-numeric but it is at the first line so could be a header - do not mark the column as non-numeric just yet.\n    field = 'foobar';\n    field_segments = [field];\n    is_first_line = 1;\n    column_stats = raw_column_stats_to_typed({max_total_length: 0, max_int_length: 0, max_fractional_length: 0});\n    column_stats.update_from_field(field_segments, is_first_line);\n    expected_column_stats = raw_column_stats_to_typed({max_total_length: 6, max_int_length: 0, max_fractional_length: 0, has_wide_chars: false});\n    assert.deepEqual(expected_column_stats, column_stats);\n\n    // The field is a number but the column is already marked as non-numeric so we just update the max string width.\n    field = '100000';\n    field_segments = [field];\n    is_first_line = 0;\n    column_stats = raw_column_stats_to_typed({max_total_length: 2, max_int_length: -1, max_fractional_length: -1});\n    column_stats.update_from_field(field_segments, is_first_line);\n    expected_column_stats = raw_column_stats_to_typed({max_total_length: 6, max_int_length: -1, max_fractional_length: -1, has_wide_chars: false});\n    assert.deepEqual(expected_column_stats, column_stats);\n\n    // Empty field should not mark a potentially numeric column as non-numeric.\n    field = '';\n    field_segments = [field];\n    is_first_line = 0;\n    column_stats = raw_column_stats_to_typed({max_total_length: 5, max_int_length: 2, max_fractional_length: 3});\n    column_stats.update_from_field(field_segments, is_first_line);\n    expected_column_stats = raw_column_stats_to_typed({max_total_length: 5, max_int_length: 2, max_fractional_length: 3, has_wide_chars: false});\n    assert.deepEqual(expected_column_stats, column_stats);\n\n    // The field doesn't change stats because all of 3 components are smaller than the current maximums.\n    field = '100.3';\n    field_segments = [field];\n    is_first_line = 0;\n    column_stats = raw_column_stats_to_typed({max_total_length: 7, max_int_length: 4, max_fractional_length: 3, has_wide_chars: false});\n    column_stats.update_from_field(field_segments, is_first_line);\n    expected_column_stats = raw_column_stats_to_typed({max_total_length: 7, max_int_length: 4, max_fractional_length: 3, has_wide_chars: false});\n    assert.deepEqual(expected_column_stats, column_stats);\n\n    // Integer update example.\n    field = '100000';\n    field_segments = [field];\n    is_first_line = 0;\n    column_stats = raw_column_stats_to_typed({max_total_length: 5, max_int_length: 2, max_fractional_length: 3});\n    column_stats.update_from_field(field_segments, is_first_line);\n    expected_column_stats = raw_column_stats_to_typed({max_total_length: 6, max_int_length: 6, max_fractional_length: 3, has_wide_chars: false});\n    assert.deepEqual(expected_column_stats, column_stats);\n\n    // Float update example.\n    field = '1000.23';\n    field_segments = [field];\n    is_first_line = 0;\n    column_stats = raw_column_stats_to_typed({max_total_length: 3, max_int_length: 3, max_fractional_length: 0});\n    column_stats.update_from_field(field_segments, is_first_line);\n    expected_column_stats = raw_column_stats_to_typed({max_total_length: 7, max_int_length: 4, max_fractional_length: 3, has_wide_chars: false});\n    assert.deepEqual(expected_column_stats, column_stats);\n\n    // Double-width chars and enable_double_width_alignment set to \"true\"\n    field = '编号';\n    field_segments = [field];\n    is_first_line = 0;\n    column_stats = raw_column_stats_to_typed({max_total_length: 1, max_int_length: -1, max_fractional_length: -1});\n    column_stats.update_from_field(field_segments, is_first_line);\n    expected_column_stats = raw_column_stats_to_typed({max_total_length: 4, max_int_length: -1, max_fractional_length: -1, has_wide_chars: true});\n    assert.deepEqual(expected_column_stats, column_stats);\n\n    // Double-width chars and enable_double_width_alignment set to \"true\", has_wide_chars doesn't change i.e. remains 'true' even though field doesn't contain wide chars.\n    field = 'foobar';\n    field_segments = [field];\n    is_first_line = 0;\n    column_stats = raw_column_stats_to_typed({max_total_length: 1, max_int_length: -1, max_fractional_length: -1, has_wide_chars: true});\n    column_stats.update_from_field(field_segments, is_first_line);\n    expected_column_stats = raw_column_stats_to_typed({max_total_length: 6, max_int_length: -1, max_fractional_length: -1, has_wide_chars: true});\n    assert.deepEqual(expected_column_stats, column_stats);\n\n    // Double-width chars and enable_double_width_alignment set to \"false\"\n    field = '编号';\n    field_segments = [field];\n    is_first_line = 0;\n    column_stats = raw_column_stats_to_typed({max_total_length: 1, max_int_length: -1, max_fractional_length: -1, enable_double_width_alignment: false});\n    column_stats.update_from_field(field_segments, is_first_line);\n    expected_column_stats = raw_column_stats_to_typed({max_total_length: 2, max_int_length: -1, max_fractional_length: -1, enable_double_width_alignment: false});\n    assert.deepEqual(expected_column_stats, column_stats);\n}\n\n\nfunction test_calc_column_stats() {\n    let [doc_lines, active_doc, delim, policy, comment_prefix] = [null, null, null, null, null];\n    let [column_stats, expected_column_stats, first_failed_line, records, comments] = [null, null, null, null, null];\n\n    // A basic rfc test.\n    doc_lines = [\n        '# commment line', \n        '1a,\"1b', \n        '1b,\"\"1b\"\",1b', \n        '1b\",1c',\n        '2a,2bbb,2cc', \n        ''\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted_rfc';\n    [column_stats, first_failed_line, records, comments] = rainbow_utils.calc_column_stats(active_doc, delim, policy, comment_prefix, /*enable_double_width_alignment=*/true);\n    assert.deepEqual([{record_num: 0, comment_text: '# commment line'}, {record_num: 2, comment_text: ''}], comments);\n    assert.deepEqual(null, first_failed_line);\n    expected_column_stats = column_stats_helper([\n        {max_total_length: 2, max_int_length: -1, max_fractional_length: -1},\n        {max_total_length: 12, max_int_length: -1, max_fractional_length: -1},\n        {max_total_length: 3, max_int_length: -1, max_fractional_length: -1}]);\n    assert.deepEqual(expected_column_stats, column_stats);\n\n    // Inconsistent num fields.\n    doc_lines = [\n        '1a,1b', \n        '2aa', \n        '3a,3b,3c'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted_rfc';\n    [column_stats, first_failed_line, records, comments] = rainbow_utils.calc_column_stats(active_doc, delim, policy, comment_prefix, /*enable_double_width_alignment=*/true);\n    assert.deepEqual([], comments);\n    assert.deepEqual(null, first_failed_line);\n    expected_column_stats = column_stats_helper([\n        {max_total_length: 3, max_int_length: -1, max_fractional_length: -1, has_wide_chars: false},\n        {max_total_length: 2, max_int_length: -1, max_fractional_length: -1, has_wide_chars: false},\n        {max_total_length: 2, max_int_length: -1, max_fractional_length: -1, has_wide_chars: false}])\n    assert.deepEqual(expected_column_stats, column_stats);\n\n    // Defective line.\n    doc_lines = [\n        '1a,1b', \n        '2a\"a', \n        '3a,3b,3c'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted_rfc';\n    [column_stats, first_failed_line, records, comments] = rainbow_utils.calc_column_stats(active_doc, delim, policy, comment_prefix, /*enable_double_width_alignment=*/true);\n    assert.deepEqual(2, first_failed_line);\n    assert.deepEqual(null, column_stats);\n    assert.deepEqual(null, records);\n\n    // First line non-numeric.\n    doc_lines = [\n        'type,weight', \n        'car,100', \n        'ship,  20000'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted_rfc';\n    [column_stats, first_failed_line, records, comments] = rainbow_utils.calc_column_stats(active_doc, delim, policy, comment_prefix, /*enable_double_width_alignment=*/true);\n    assert.deepEqual([], comments);\n    assert.deepEqual(null, first_failed_line);\n    expected_column_stats = column_stats_helper([\n        {max_total_length: 4, max_int_length: -1, max_fractional_length: -1, has_wide_chars: false},\n        {max_total_length: 6, max_int_length: 5, max_fractional_length: 0, has_wide_chars: false}])\n    assert.deepEqual(expected_column_stats, column_stats);\n\n    // Numbers on different lines.\n    // Currently in this case we don't report second column as numeric, but this is more-or-less an arbitrary decission.\n    doc_lines = [\n        'car,100', \n        'ship,\"20000', \n        '300\"'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted_rfc';\n    [column_stats, first_failed_line, records, comments] = rainbow_utils.calc_column_stats(active_doc, delim, policy, comment_prefix, /*enable_double_width_alignment=*/true);\n    assert.deepEqual([], comments);\n    assert.deepEqual(null, first_failed_line);\n    expected_column_stats = column_stats_helper([\n        {max_total_length: 4, max_int_length: -1, max_fractional_length: -1, has_wide_chars: false}, \n        {max_total_length: 6, max_int_length: -1, max_fractional_length: -1, has_wide_chars: false}]);\n    assert.deepEqual(expected_column_stats, column_stats);\n}\n\n\nfunction test_rfc_field_align() {\n    let [field, is_first_line, column_stats, aligned_field, is_field_segment] = [null, null, null, null, null, null];\n    let column_offsets = null;\n\n    // Align non-field segment in non-numeric non-last column.\n    field = 'foobar';\n    is_first_line = 0;\n    is_field_segment = false;\n    column_stats = [{max_total_length: 5, max_int_length: -1, max_fractional_length: -1}, {max_total_length: 10, max_int_length: -1, max_fractional_length: -1}];\n    column_stats = column_stats_helper(column_stats)\n    column_offsets = rainbow_utils.calculate_column_offsets(column_stats, /*delim_length=*/1);\n    aligned_field = rainbow_utils.rfc_align_field(field, is_first_line, column_stats[1], column_offsets[1], is_field_segment, /*is_first_in_line=*/false, /*is_last_in_line=*/false);\n    assert.deepEqual(' foobar    ', aligned_field);\n\n    field = 'foobar';\n    is_first_line = 0;\n    is_field_segment = false;\n    column_stats = [{max_total_length: 5, max_int_length: -1, max_fractional_length: -1}, {max_total_length: 10, max_int_length: -1, max_fractional_length: -1}];\n    column_stats = column_stats_helper(column_stats)\n    column_offsets = rainbow_utils.calculate_column_offsets(column_stats, /*delim_length=*/1);\n    aligned_field = rainbow_utils.rfc_align_field(field, is_first_line, column_stats[1], column_offsets[1], is_field_segment, /*is_first_in_line=*/true, /*is_last_in_line=*/false);\n    assert.deepEqual('foobar    ', aligned_field);\n\n    // Align field segment in non-numeric non-last column.\n    field = 'foobar';\n    is_first_line = 0;\n    is_field_segment = true;\n    column_stats = [{max_total_length: 5, max_int_length: -1, max_fractional_length: -1}, {max_total_length: 10, max_int_length: -1, max_fractional_length: -1}];\n    column_stats = column_stats_helper(column_stats)\n    column_offsets = rainbow_utils.calculate_column_offsets(column_stats, /*delim_length=*/1);\n    aligned_field = rainbow_utils.rfc_align_field(field, is_first_line, column_stats[1], column_offsets[1], is_field_segment, /*is_first_in_line=*/false, /*is_last_in_line=*/false);\n    assert.deepEqual('        foobar    ', aligned_field);\n\n    // Align non-field segment in non-numeric last column.\n    field = 'foobar';\n    is_first_line = 0;\n    is_field_segment = false;\n    column_stats = [{max_total_length: 5, max_int_length: -1, max_fractional_length: -1}, {max_total_length: 10, max_int_length: -1, max_fractional_length: -1}];\n    column_stats = column_stats_helper(column_stats)\n    column_offsets = rainbow_utils.calculate_column_offsets(column_stats, /*delim_length=*/1);\n    aligned_field = rainbow_utils.rfc_align_field(field, is_first_line, column_stats[1], column_offsets[1], is_field_segment, /*is_first_in_line=*/false, /*is_last_in_line=*/true);\n    assert.deepEqual(' foobar', aligned_field);\n\n    // Align field segment in non-numeric last column.\n    field = 'foobar';\n    is_first_line = 0;\n    is_field_segment = true;\n    column_stats = [{max_total_length: 5, max_int_length: -1, max_fractional_length: -1}, {max_total_length: 10, max_int_length: -1, max_fractional_length: -1}];\n    column_stats = column_stats_helper(column_stats)\n    column_offsets = rainbow_utils.calculate_column_offsets(column_stats, /*delim_length=*/1);\n    aligned_field = rainbow_utils.rfc_align_field(field, is_first_line, column_stats[1], column_offsets[1], is_field_segment, /*is_first_in_line=*/false, /*is_last_in_line=*/true);\n    assert.deepEqual('        foobar', aligned_field);\n}\n\n\nfunction align_field(field, is_first_record, column_stat, is_first_in_line, is_last_in_line) {\n    let [num_before, num_after] = column_stat.evaluate_align_field(field, is_first_record, is_first_in_line, is_last_in_line);\n    return ' '.repeat(num_before) + field + ' '.repeat(num_after);\n}\n\n\nfunction test_reconcile_single() {\n    let [column_stats_local, column_stats_global] = [null, null];\n\n    column_stats_local = raw_column_stats_to_typed({max_total_length: 5, max_int_length: -1, max_fractional_length: -1});\n    column_stats_global = raw_column_stats_to_typed({max_total_length: 10, max_int_length: -1, max_fractional_length: -1});\n    column_stats_local.reconcile(column_stats_global);\n    assert.deepEqual(raw_column_stats_to_typed({max_total_length: 10, max_int_length: -1, max_fractional_length: -1}), column_stats_local);\n\n    column_stats_local = raw_column_stats_to_typed({max_total_length: 5, max_int_length: -1, max_fractional_length: -1});\n    column_stats_global = raw_column_stats_to_typed({max_total_length: 10, max_int_length: 3, max_fractional_length: 4});\n    column_stats_local.reconcile(column_stats_global);\n    assert.deepEqual(raw_column_stats_to_typed({max_total_length: 10, max_int_length: -1, max_fractional_length: -1}), column_stats_local);\n\n    column_stats_local= raw_column_stats_to_typed({max_total_length: 10, max_int_length: 3, max_fractional_length: 4});\n    column_stats_global = raw_column_stats_to_typed({max_total_length: 5, max_int_length: -1, max_fractional_length: -1});\n    column_stats_local.reconcile(column_stats_global);\n    assert.deepEqual(raw_column_stats_to_typed({max_total_length: 10, max_int_length: -1, max_fractional_length: -1}), column_stats_local);\n\n    column_stats_local= raw_column_stats_to_typed({max_total_length: 10, max_int_length: 3, max_fractional_length: 4});\n    column_stats_global = raw_column_stats_to_typed({max_total_length: 12, max_int_length: 5, max_fractional_length: 6});\n    column_stats_local.reconcile(column_stats_global);\n    assert.deepEqual(raw_column_stats_to_typed({max_total_length: 12, max_int_length: 5, max_fractional_length: 6}), column_stats_local);\n\n    column_stats_local= raw_column_stats_to_typed({max_total_length: 10, max_int_length: 3, max_fractional_length: 4, only_ascii: true, has_wide_chars: false});\n    column_stats_global = raw_column_stats_to_typed({max_total_length: 12, max_int_length: 5, max_fractional_length: 6, only_ascii: false, has_wide_chars: true});\n    column_stats_local.reconcile(column_stats_global);\n    assert.deepEqual(raw_column_stats_to_typed({max_total_length: 12, max_int_length: 5, max_fractional_length: 6, only_ascii: false, has_wide_chars: true}), column_stats_local);\n}\n\n\nfunction test_offsets_calculation() {\n    let column_stats = null;\n    let offsets = null;\n    let expected_offsets = null;\n\n    column_stats = [];\n    expected_offsets = [];\n    offsets = rainbow_utils.calculate_column_offsets(column_stats, /*delim_length=*/1);\n    assert.deepEqual(expected_offsets, offsets);\n\n    column_stats = [\n        {max_total_length: 10, max_int_length: -1, max_fractional_length: -1}\n    ];\n    expected_offsets = [0];\n    column_stats = column_stats_helper(column_stats);\n    offsets = rainbow_utils.calculate_column_offsets(column_stats, /*delim_length=*/1);\n    assert.deepEqual(expected_offsets, offsets);\n\n    column_stats = [\n        {max_total_length: 5, max_int_length: -1, max_fractional_length: -1},\n        {max_total_length: 10, max_int_length: -1, max_fractional_length: -1},\n        {max_total_length: 20, max_int_length: -1, max_fractional_length: -1}\n    ];\n    expected_offsets = [0, 8, 21];\n    column_stats = column_stats_helper(column_stats);\n    offsets = rainbow_utils.calculate_column_offsets(column_stats, /*delim_length=*/2);\n    assert.deepEqual(expected_offsets, offsets);\n}\n\n\nfunction test_adjusted_length() {\n    let column_stats = null;\n\n    column_stats = raw_column_stats_to_typed({max_total_length: 7, max_int_length: 4, max_fractional_length: 4});\n    assert.deepEqual(8, column_stats.get_adjusted_total_length());\n    assert.deepEqual(4, column_stats.get_adjusted_int_length());\n\n    column_stats = raw_column_stats_to_typed({max_total_length: 8, max_int_length: 3, max_fractional_length: 4});\n    assert.deepEqual(8, column_stats.get_adjusted_total_length());\n    assert.deepEqual(4, column_stats.get_adjusted_int_length());\n}\n\n\nfunction test_reconcile_multiple() {\n    let [column_stats_local, column_stats_global, expected_reconciled_column_stats] = [null, null, null];\n\n    column_stats_local = [\n        {max_total_length: 5, max_int_length: -1, max_fractional_length: -1},\n        {max_total_length: 10, max_int_length: -1, max_fractional_length: -1}\n    ];\n    column_stats_global = [\n        {max_total_length: 10, max_int_length: -1, max_fractional_length: -1},\n        {max_total_length: 5, max_int_length: -1, max_fractional_length: -1}\n    ];\n    expected_reconciled_column_stats = [\n        {max_total_length: 10, max_int_length: -1, max_fractional_length: -1},\n        {max_total_length: 10, max_int_length: -1, max_fractional_length: -1}\n    ];\n    column_stats_local = column_stats_helper(column_stats_local)\n    column_stats_global = column_stats_helper(column_stats_global)\n    expected_reconciled_column_stats = column_stats_helper(expected_reconciled_column_stats);\n    rainbow_utils.reconcile_whole_doc_and_local_column_stats(column_stats_global, column_stats_local);\n    assert.deepEqual(expected_reconciled_column_stats, column_stats_local);\n\n    column_stats_local = [\n        {max_total_length: 5, max_int_length: -1, max_fractional_length: -1},\n        {max_total_length: 5, max_int_length: -1, max_fractional_length: -1}\n    ];\n    column_stats_global = [\n        {max_total_length: 10, max_int_length: -1, max_fractional_length: -1},\n    ];\n    expected_reconciled_column_stats = [\n        {max_total_length: 10, max_int_length: -1, max_fractional_length: -1},\n        {max_total_length: 5, max_int_length: -1, max_fractional_length: -1}\n    ];\n    column_stats_local = column_stats_helper(column_stats_local)\n    column_stats_global = column_stats_helper(column_stats_global)\n    expected_reconciled_column_stats = column_stats_helper(expected_reconciled_column_stats);\n    rainbow_utils.reconcile_whole_doc_and_local_column_stats(column_stats_global, column_stats_local);\n    assert.deepEqual(expected_reconciled_column_stats, column_stats_local);\n\n    column_stats_local = [\n        {max_total_length: 10, max_int_length: -1, max_fractional_length: -1},\n    ];\n    column_stats_global = [\n        {max_total_length: 5, max_int_length: -1, max_fractional_length: -1},\n        {max_total_length: 5, max_int_length: -1, max_fractional_length: -1}\n    ];\n    expected_reconciled_column_stats = [\n        {max_total_length: 10, max_int_length: -1, max_fractional_length: -1},\n        {max_total_length: 5, max_int_length: -1, max_fractional_length: -1}\n    ];\n    column_stats_local = column_stats_helper(column_stats_local)\n    column_stats_global = column_stats_helper(column_stats_global)\n    expected_reconciled_column_stats = column_stats_helper(expected_reconciled_column_stats);\n    rainbow_utils.reconcile_whole_doc_and_local_column_stats(column_stats_global, column_stats_local);\n    assert.deepEqual(expected_reconciled_column_stats, column_stats_local);\n}\n\n\nfunction test_field_align() {\n    let field = null;\n    let is_first_record = null;\n    let column_stats = null;\n    let aligned_field = null;\n\n    // Align field in non-numeric non-last column.\n    field = 'foobar';\n    is_first_record = 0;\n    column_stats = raw_column_stats_to_typed({max_total_length: 10, max_int_length: -1, max_fractional_length: -1});\n    aligned_field = align_field(field, is_first_record, column_stats, /*is_first_in_line=*/false, /*is_last_in_line=*/false);\n    assert.deepEqual(' foobar    ', aligned_field);\n\n    field = 'foobar';\n    is_first_record = 0;\n    column_stats = raw_column_stats_to_typed({max_total_length: 10, max_int_length: -1, max_fractional_length: -1});\n    aligned_field = align_field(field, is_first_record, column_stats, /*is_first_in_line=*/true, /*is_last_in_line=*/false);\n    assert.deepEqual('foobar    ', aligned_field);\n\n    // Align field in non-numeric last column.\n    field = 'foobar';\n    is_first_record = 0;\n    column_stats = raw_column_stats_to_typed({max_total_length: 10, max_int_length: -1, max_fractional_length: -1});\n    aligned_field = align_field(field, is_first_record, column_stats, /*is_first_in_line=*/false, /*is_last_in_line=*/true);\n    assert.deepEqual(' foobar', aligned_field);\n\n    // Align non-numeric first line (potentially header) field in numeric column.\n    field = 'foobar';\n    is_first_record = 1;\n    column_stats = raw_column_stats_to_typed({max_total_length: 10, max_int_length: 4, max_fractional_length: 6});\n    aligned_field = align_field(field, is_first_record, column_stats, /*is_first_in_line=*/false, /*is_last_in_line=*/false);\n    assert.deepEqual(' foobar    ', aligned_field);\n\n    // Align numeric first line (potentially header) field in numeric column.\n    field = '10.1';\n    is_first_record = 1;\n    column_stats = raw_column_stats_to_typed({max_total_length: 10, max_int_length: 4, max_fractional_length: 6});\n    aligned_field = align_field(field, is_first_record, column_stats, /*is_first_in_line=*/false, /*is_last_in_line=*/false);\n    assert.deepEqual('   10.1    ', aligned_field);\n\n    // Align numeric field in non-numeric column (first line).\n    field = '10.1';\n    is_first_record = 1;\n    column_stats = raw_column_stats_to_typed({max_total_length: 10, max_int_length: -1, max_fractional_length: -1});\n    aligned_field = align_field(field, is_first_record, column_stats, /*is_first_in_line=*/false, /*is_last_in_line=*/false);\n    assert.deepEqual(' 10.1      ', aligned_field);\n\n    // Align numeric field in non-numeric column (not first line).\n    field = '10.1';\n    is_first_record = 0;\n    column_stats = raw_column_stats_to_typed({max_total_length: 10, max_int_length: -1, max_fractional_length: -1});\n    aligned_field = align_field(field, is_first_record, column_stats, /*is_first_in_line=*/false, /*is_last_in_line=*/false);\n    assert.deepEqual(' 10.1      ', aligned_field);\n\n    // Align numeric float in numeric non-last column.\n    field = '10.1';\n    is_first_record = 0;\n    column_stats = raw_column_stats_to_typed({max_total_length: 10, max_int_length: 4, max_fractional_length: 6});\n    aligned_field = align_field(field, is_first_record, column_stats, /*is_first_in_line=*/false, /*is_last_in_line=*/false);\n    assert.deepEqual('   10.1    ', aligned_field);\n\n    // Align numeric integer in numeric non-last column.\n    field = '1000';\n    is_first_record = 0;\n    column_stats = raw_column_stats_to_typed({max_total_length: 10, max_int_length: 4, max_fractional_length: 6});\n    aligned_field = align_field(field, is_first_record, column_stats, /*is_first_in_line=*/false, /*is_last_in_line=*/false);\n    assert.deepEqual(' 1000      ', aligned_field);\n\n    // Align numeric integer in numeric (integer) column.\n    field = '1000';\n    is_first_record = 0;\n    column_stats = raw_column_stats_to_typed({max_total_length: 4, max_int_length: 4, max_fractional_length: 0});\n    aligned_field = align_field(field, is_first_record, column_stats, /*is_first_in_line=*/false, /*is_last_in_line=*/false);\n    assert.deepEqual(' 1000', aligned_field);\n\n    // Align numeric integer in numeric (integer) column dominated by header width.\n    field = '1000';\n    is_first_record = 0;\n    column_stats = raw_column_stats_to_typed({max_total_length: 6, max_int_length: 4, max_fractional_length: 0});\n    aligned_field = align_field(field, is_first_record, column_stats, /*is_first_in_line=*/false, /*is_last_in_line=*/false);\n    assert.deepEqual('   1000', aligned_field);\n\n    // Align numeric float in numeric column dominated by header width.\n    field = '10.1';\n    is_first_record = 0;\n    column_stats = raw_column_stats_to_typed({max_total_length: 12, max_int_length: 4, max_fractional_length: 6});\n    aligned_field = align_field(field, is_first_record, column_stats, /*is_first_in_line=*/false, /*is_last_in_line=*/false);\n    assert.deepEqual('     10.1    ', aligned_field);\n}\n\n\nfunction test_parse_document_records() {\n    let [doc_lines, active_doc, comment_prefix, delim, policy] = [null, null, null, null, null];\n    let [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = [null, null, null, null, null, null];\n\n    // Simple test with single-field records and max_records_to_parse set to a very big number.\n    doc_lines = [\n        'aaa', \n        'bbb', \n        'ccc'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    policy = 'simple';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/1000, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/false, /*detect_trailing_spaces=*/false);\n    assert.deepEqual([['aaa'], ['bbb'], ['ccc']], records);\n    assert.deepEqual([[1, 0]], Array.from(fields_info.entries()));\n    assert.deepEqual([], comments);\n    assert.equal(first_defective_line, null);\n    assert.equal(first_trailing_space_line, null);\n    assert.equal(num_records_parsed, records.length);\n\n    // Simple test with two-field records and a comment and a trailing space line.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        '#comment', \n        'c1 ,c2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'simple';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/-1, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/false, /*detect_trailing_spaces=*/true);\n    assert.deepEqual([['a1', 'a2'], ['b1', 'b2'], ['c1 ', 'c2']], records);\n    assert.deepEqual([[2, 0]], Array.from(fields_info.entries()));\n    assert.deepEqual([{record_num: 2, comment_text: '#comment'}], comments);\n    assert.equal(first_defective_line, null);\n    // The first trailing space line is line 3 (0-based) because the comment line also counts for a document line.\n    assert.equal(first_trailing_space_line, 3);\n\n    // Simple test with inconsistent records and trailing space.\n    doc_lines = [\n        'a1,a2 ', \n        'b1,b2', \n        '', \n        'c1', \n        'd3,d4,d5'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'simple';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/-1, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/false, /*detect_trailing_spaces=*/true);\n    assert.deepEqual([['a1', 'a2 '], ['b1', 'b2'], [''], ['c1'], ['d3', 'd4', 'd5']], records);\n    assert.deepEqual([[2, 0], [1, 2], [3, 4]], Array.from(fields_info.entries()));\n    assert.equal(first_defective_line, null);\n    assert.equal(first_trailing_space_line, 0);\n\n    // Quoted policy, defective line 3, do not stop on warning.\n    doc_lines = [\n        'a1,a2', \n        '#\"b1,b2', \n        '\"b1,b2', \n        'c1', \n        'd3,d4,d5'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/false, /*max_records_to_parse=*/-1, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/false, /*detect_trailing_spaces=*/true);\n    assert.deepEqual([['a1', 'a2'], ['\"b1', 'b2'], ['c1'], ['d3', 'd4', 'd5']], records);\n    assert.deepEqual([{record_num: 1, comment_text: '#\"b1,b2'}], comments);\n    assert.equal(first_defective_line, 2);\n    assert.equal(first_trailing_space_line, null);\n\n    // Quoted policy, defective line 3, stop on warning.\n    doc_lines = [\n        'a1,a2', \n        '#\"b1,b2', \n        '\"b1,b2', \n        'c1', \n        'd3,d4,d5'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/-1, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/false, /*detect_trailing_spaces=*/true);\n    assert.deepEqual([['a1', 'a2']], records);\n    assert.deepEqual([{record_num: 1, comment_text: '#\"b1,b2'}], comments);\n    assert.equal(first_defective_line, 2);\n    assert.equal(first_trailing_space_line, null);\n\n    // Quoted rfc policy - no issues.\n    doc_lines = [\n        'a1,\"a2', \n        'b1\"\",b2 ', \n        'c1,c2\",c3', \n        '#d1,\"', \n        '\"e1,\"\"e2,e3\"', \n        'f1 ,f2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted_rfc';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/-1, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/false, /*detect_trailing_spaces=*/true);\n    assert.deepEqual([['a1', 'a2\\nb1\",b2 \\nc1,c2', 'c3'], ['e1,\"e2,e3'], ['f1 ', 'f2']], records);\n    assert.deepEqual([{record_num: 1, comment_text: '#d1,\"'}], comments);\n    assert.equal(first_defective_line, null);\n    // Trailing spaces inside the fields do not count, so the first trailing space will be at line 5.\n    assert.equal(first_trailing_space_line, 5);\n\n    // Quoted rfc policy - stop on warning.\n    doc_lines = [\n        'a1,\"a2', \n        'b1\"\",b2 ', \n        'c1,\"c2,c3', \n        '#d1,\"', \n        '\"e1,\"\"e2,e3\"', \n        'f1 ,f2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted_rfc';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/-1, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/false, /*detect_trailing_spaces=*/true);\n    assert.deepEqual([], records);\n    assert.deepEqual([], comments);\n    assert.equal(first_defective_line, 0);\n\n    // too few columns for autodetection\n    doc_lines = [\n        'a1', \n        'b1', \n        'c1'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    policy = 'simple';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/false, /*max_records_to_parse=*/-1, /*collect_records=*/false, /*preserve_quotes_and_whitespaces=*/true, /*detect_trailing_spaces=*/false, /*min_num_fields_for_autodetection=*/2);\n    assert.equal(null, records);\n    assert.deepEqual([], comments);\n    // Only one entry in fields_info because of the early stop because of min_num_fields_for_autodetection check.\n    assert.deepEqual([[1, 0]], Array.from(fields_info.entries()));\n    assert.equal(first_defective_line, null);\n    assert.equal(first_trailing_space_line, null);\n\n    // Autodetection - enough columns.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        'c1,c2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    policy = 'quoted';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/false, /*max_records_to_parse=*/-1, /*collect_records=*/false, /*preserve_quotes_and_whitespaces=*/true, /*detect_trailing_spaces=*/false, /*min_num_fields_for_autodetection=*/2);\n    assert.equal(null, records);\n    assert.deepEqual([[2, 0]], Array.from(fields_info.entries()));\n    assert.equal(first_defective_line, null);\n    assert.equal(first_trailing_space_line, null);\n\n    // Autodetection - different number of columns - early stop.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        'c1,c2,c3', \n        'd1,d3'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    policy = 'quoted';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/false, /*max_records_to_parse=*/-1, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/false, /*detect_trailing_spaces=*/false, /*min_num_fields_for_autodetection=*/2);\n    // Because of the early stop we don't parse the last 2 lines.\n    assert.deepEqual([['a1', 'a2'], ['b1', 'b2']], records);\n    // Make sure that we have two entries in fields_info - callers check fields_info to find out if we have autodetection failure.\n    assert.deepEqual([[2, 0], [3, 2]], Array.from(fields_info.entries()));\n\n    // Max record to parse - no defective line.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        '\"c1,c2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    policy = 'quoted_rfc';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/2, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/false, /*detect_trailing_spaces=*/false);\n    assert.deepEqual([['a1', 'a2'], ['b1', 'b2']], records);\n    // Although the third line is defective we don't detect it because of max_records_to_parse limitation.\n    assert.equal(first_defective_line, null);\n\n    // Max record to parse - defective line.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        '\"c1,c2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    policy = 'quoted_rfc';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/5, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/false, /*detect_trailing_spaces=*/false);\n    assert.deepEqual([['a1', 'a2'], ['b1', 'b2']], records);\n    // Although the third line is defective we don't detect it because of max_records_to_parse limitation.\n    assert.equal(first_defective_line, 2);\n\n    // Simple multichar separator, max_records_to_parse equals total number of records.\n    doc_lines = [\n        'a1#~#a2#~#a3', \n        'b1#~#b2#~#b3', \n        'c1#~#c2#~#c3'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = '#~#';\n    policy = 'simple';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/3, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/false, /*detect_trailing_spaces=*/false);\n    assert.deepEqual([['a1', 'a2', 'a3'], ['b1', 'b2', 'b3'], ['c1', 'c2', 'c3']], records);\n    assert.equal(first_defective_line, null);\n\n    // Whitespace policy, trailing spaces are impossible for this policy.\n    doc_lines = [\n        '  a1 a2    a3', \n        'b1     b2 b3  ', \n        '  c1    c2       c3  '\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ' ';\n    policy = 'whitespace';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/3, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/false, /*detect_trailing_spaces=*/true);\n    assert.deepEqual([['a1', 'a2', 'a3'], ['b1', 'b2', 'b3'], ['c1', 'c2', 'c3']], records);\n    assert.equal(first_defective_line, null);\n    // Although we have a lot of internal spaces, the first_trailing_space_line should be null because we use whitespace policy\n    assert.equal(first_trailing_space_line, null);\n\n    // Quoted rfc policy, preserve quotes.\n    doc_lines = [\n        'a1,\"a2', 'b1\"\",b2 ', \n        'c1,c2\",c3', '#d1,\"', \n        '\"e1,\"\"e2,e3\"', \n        'f1 ,f2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted_rfc';\n    [records, num_records_parsed, fields_info, first_defective_line, first_trailing_space_line, comments] = fast_load_utils.parse_document_records(active_doc, delim, policy, comment_prefix, /*stop_on_warning=*/true, /*max_records_to_parse=*/-1, /*collect_records=*/true, /*preserve_quotes_and_whitespaces=*/true, /*detect_trailing_spaces=*/true);\n    assert.deepEqual([['a1', '\"a2\\nb1\"\",b2 \\nc1,c2\"', 'c3'], ['\"e1,\"\"e2,e3\"'], ['f1 ', 'f2']], records);\n    assert.deepEqual([{record_num: 1, comment_text: '#d1,\"'}], comments);\n    assert.equal(first_defective_line, null);\n    // Trailing spaces inside the fields do not count, so the first trailing space will be at line 5.\n    assert.equal(first_trailing_space_line, 5);\n}\n\n\nfunction line_range_to_triple(vscode_range) {\n    assert.equal(vscode_range.start.line, vscode_range.end.line);\n    return [vscode_range.start.line, vscode_range.start.character, vscode_range.end.character];\n}\n\nfunction convert_ranges_to_triples(table_ranges) {\n    let table_comment_ranges = [];\n    let table_record_ranges = [];\n    for (let row_info of table_ranges) {\n        if (row_info.comment_range !== null) {\n            assert(row_info.record_ranges === null);\n            table_comment_ranges.push(line_range_to_triple(row_info.comment_range));\n        } else {\n            assert(row_info.record_ranges !== null);\n            let row_triple_groups = [];\n            for (let field_ranges of row_info.record_ranges) {\n                let field_triples = [];\n                for (let field_range of field_ranges) {\n                    field_triples.push(line_range_to_triple(field_range));\n                }\n                row_triple_groups.push(field_triples);\n            }\n            table_record_ranges.push(row_triple_groups);\n        }\n    }\n    return [table_comment_ranges, table_record_ranges];\n}\n\nfunction vr(l1, c1, l2, c2) {\n    return new VscodeRangeTestDouble(l1, c1, l2, c2);\n}\n\n// Flat Vscode Record. Use function for readability.\nfunction fvr(l, c1, c2) {\n    return [l, c1, c2];\n}\n\n\nfunction test_parse_document_range_single_line() {\n    let [doc_lines, active_doc, comment_prefix, delim, policy, range] = [null, null, null, null, null, null];\n    let [table_ranges, table_comment_ranges, table_record_ranges] = [null, null, null];\n    let [record_ranges_0, record_ranges_1, record_ranges_2, record_ranges_3] = [null, null, null, null];\n\n    // Simple test case.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        'c1,c2', \n        'd1,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    policy = 'simple';\n    range = new vscode_test_double.Range(1, 0, 3, 0);\n    table_ranges = rainbow_utils.parse_document_range_single_line(vscode_test_double, active_doc, delim, /*include_delim_length_in_ranges=*/true, policy, comment_prefix, range, /*custom_parsing_margin=*/0);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_1 = [[fvr(1, 0, 3)], [fvr(1, 3, 5)]];\n    record_ranges_2 = [[fvr(2, 0, 3)], [fvr(2, 3, 5)]];\n    assert.deepEqual([record_ranges_1, record_ranges_2], table_record_ranges);\n    assert.deepEqual([], table_comment_ranges);\n\n    // Simple test case without delim inclusion.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        'c1,c2', \n        'd1,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    policy = 'simple';\n    range = new vscode_test_double.Range(1, 0, 3, 0);\n    table_ranges = rainbow_utils.parse_document_range_single_line(vscode_test_double, active_doc, delim, /*include_delim_length_in_ranges=*/false, policy, comment_prefix, range, /*custom_parsing_margin=*/0);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_1 = [[fvr(1, 0, 2)], [fvr(1, 3, 5)]];\n    record_ranges_2 = [[fvr(2, 0, 2)], [fvr(2, 3, 5)]];\n    assert.deepEqual([record_ranges_1, record_ranges_2], table_record_ranges);\n    assert.deepEqual([], table_comment_ranges);\n\n    // Test last line parsing.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        'c1,c2', \n        'd1,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    policy = 'simple';\n    range = new vscode_test_double.Range(1, 0, 4, 0);\n    table_ranges = rainbow_utils.parse_document_range_single_line(vscode_test_double, active_doc, delim, /*include_delim_length_in_ranges=*/true, policy, comment_prefix, range, /*custom_parsing_margin=*/0);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_1 = [[fvr(1, 0, 3)], [fvr(1, 3, 5)]];\n    record_ranges_2 = [[fvr(2, 0, 3)], [fvr(2, 3, 5)]];\n    record_ranges_3 = [[fvr(3, 0, 3)], [fvr(3, 3, 5)]];\n    assert.deepEqual([record_ranges_1, record_ranges_2, record_ranges_3], table_record_ranges);\n    assert.deepEqual([], table_comment_ranges);\n\n    // Test a broken rfc line - should just skip over it.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        'c1,\"c2', \n        'd1,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    policy = 'quoted';\n    range = new vscode_test_double.Range(1, 0, 4, 0);\n    table_ranges = rainbow_utils.parse_document_range_single_line(vscode_test_double, active_doc, delim, /*include_delim_length_in_ranges=*/true, policy, comment_prefix, range, /*custom_parsing_margin=*/0);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_1 = [[fvr(1, 0, 3)], [fvr(1, 3, 5)]];\n    record_ranges_3 = [[fvr(3, 0, 3)], [fvr(3, 3, 5)]];\n    assert.deepEqual([record_ranges_1, record_ranges_3], table_record_ranges);\n    assert.deepEqual([], table_comment_ranges);\n\n    // Test last empty line parsing - no effect.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        'c1,c2', \n        'd1,d2',\n        ''\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    policy = 'simple';\n    range = new vscode_test_double.Range(1, 0, 10, 0);\n    table_ranges = rainbow_utils.parse_document_range_single_line(vscode_test_double, active_doc, delim, /*include_delim_length_in_ranges=*/true, policy, comment_prefix, range, /*custom_parsing_margin=*/0);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_1 = [[fvr(1, 0, 3)], [fvr(1, 3, 5)]];\n    record_ranges_2 = [[fvr(2, 0, 3)], [fvr(2, 3, 5)]];\n    record_ranges_3 = [[fvr(3, 0, 3)], [fvr(3, 3, 5)]];\n    assert.deepEqual([record_ranges_1, record_ranges_2, record_ranges_3], table_record_ranges);\n    assert.deepEqual([], table_comment_ranges);\n\n    // Test behind last line and before first line parsing with large margin.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        'c1,c2', \n        '#comment', \n        'd1,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'simple';\n    range = new vscode_test_double.Range(0, 0, 5, 0);\n    table_ranges = rainbow_utils.parse_document_range_single_line(vscode_test_double, active_doc, delim, /*include_delim_length_in_ranges=*/true, policy, comment_prefix, range, /*custom_parsing_margin=*/100);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_0 = [[fvr(0, 0, 3)], [fvr(0, 3, 5)]];\n    record_ranges_1 = [[fvr(1, 0, 3)], [fvr(1, 3, 5)]];\n    record_ranges_2 = [[fvr(2, 0, 3)], [fvr(2, 3, 5)]];\n    record_ranges_3 = [[fvr(4, 0, 3)], [fvr(4, 3, 5)]];\n    assert.deepEqual([record_ranges_0, record_ranges_1, record_ranges_2, record_ranges_3], table_record_ranges);\n    assert.deepEqual([fvr(3, 0, 8)], table_comment_ranges);\n\n    // Test extension with the default margin.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        'c1,c2', \n        '#comment', \n        'd1,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'simple';\n    // The range covers only one line, but the default margin=50 should extend it to cover everything.\n    range = new vscode_test_double.Range(2, 0, 2, 0);\n    table_ranges = rainbow_utils.parse_document_range_single_line(vscode_test_double, active_doc, delim, /*include_delim_length_in_ranges=*/true, policy, comment_prefix, range);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_0 = [[fvr(0, 0, 3)], [fvr(0, 3, 5)]];\n    record_ranges_1 = [[fvr(1, 0, 3)], [fvr(1, 3, 5)]];\n    record_ranges_2 = [[fvr(2, 0, 3)], [fvr(2, 3, 5)]];\n    record_ranges_3 = [[fvr(4, 0, 3)], [fvr(4, 3, 5)]];\n    assert.deepEqual([record_ranges_0, record_ranges_1, record_ranges_2, record_ranges_3], table_record_ranges);\n    assert.deepEqual([fvr(3, 0, 8)], table_comment_ranges);\n}\n\n\nfunction test_parse_document_range_rfc() {\n    let [doc_lines, active_doc, comment_prefix, delim, range] = [null, null, null, null, null];\n    let [table_ranges, table_comment_ranges, table_record_ranges] = [null, null, null];\n    let [record_ranges_0, record_ranges_1, record_ranges_2, record_ranges_3] = [null, null, null, null];\n\n    // Simple test case.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        'c1,c2', \n        'd1,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    range = new vscode_test_double.Range(1, 0, 3, 0);\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, /*include_delim_length_in_ranges=*/true, comment_prefix, range, /*custom_parsing_margin=*/0);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_1 = [[fvr(1, 0, 3)], [fvr(1, 3, 5)]];\n    record_ranges_2 = [[fvr(2, 0, 3)], [fvr(2, 3, 5)]];\n    assert.deepEqual([record_ranges_1, record_ranges_2], table_record_ranges);\n    assert.deepEqual([], table_comment_ranges);\n\n    // Simple test case without delim inclusion.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        'c1,c2', \n        'd1,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    range = new vscode_test_double.Range(1, 0, 3, 0);\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, /*include_delim_length_in_ranges=*/false, comment_prefix, range, /*custom_parsing_margin=*/0);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_1 = [[fvr(1, 0, 2)], [fvr(1, 3, 5)]];\n    record_ranges_2 = [[fvr(2, 0, 2)], [fvr(2, 3, 5)]];\n    assert.deepEqual([record_ranges_1, record_ranges_2], table_record_ranges);\n    assert.deepEqual([], table_comment_ranges);\n\n    // Test last line parsing.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        'c1,c2', \n        'd1,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    range = new vscode_test_double.Range(1, 0, 4, 0);\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, /*include_delim_length_in_ranges=*/true, comment_prefix, range, /*custom_parsing_margin=*/0);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_1 = [[fvr(1, 0, 3)], [fvr(1, 3, 5)]];\n    record_ranges_2 = [[fvr(2, 0, 3)], [fvr(2, 3, 5)]];\n    record_ranges_3 = [[fvr(3, 0, 3)], [fvr(3, 3, 5)]];\n    assert.deepEqual([record_ranges_1, record_ranges_2, record_ranges_3], table_record_ranges);\n    assert.deepEqual([], table_comment_ranges);\n\n    // Test behind last line and before first line parsing with large margin.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        'c1,c2', \n        '#comment', \n        'd1,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    range = new vscode_test_double.Range(0, 0, 5, 0);\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, /*include_delim_length_in_ranges=*/true, comment_prefix, range, /*custom_parsing_margin=*/100);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_0 = [[fvr(0, 0, 3)], [fvr(0, 3, 5)]];\n    record_ranges_1 = [[fvr(1, 0, 3)], [fvr(1, 3, 5)]];\n    record_ranges_2 = [[fvr(2, 0, 3)], [fvr(2, 3, 5)]];\n    record_ranges_3 = [[fvr(4, 0, 3)], [fvr(4, 3, 5)]];\n    assert.deepEqual([record_ranges_0, record_ranges_1, record_ranges_2, record_ranges_3], table_record_ranges);\n    assert.deepEqual([fvr(3, 0, 8)], table_comment_ranges);\n\n    // Test extension with the default margin.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        'c1,c2', \n        '#comment', \n        'd1,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    // The range covers only one line, but the default margin=50 should extend it to cover everything.\n    range = new vscode_test_double.Range(2, 0, 2, 0);\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, /*include_delim_length_in_ranges=*/true, comment_prefix, range);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_0 = [[fvr(0, 0, 3)], [fvr(0, 3, 5)]];\n    record_ranges_1 = [[fvr(1, 0, 3)], [fvr(1, 3, 5)]];\n    record_ranges_2 = [[fvr(2, 0, 3)], [fvr(2, 3, 5)]];\n    record_ranges_3 = [[fvr(4, 0, 3)], [fvr(4, 3, 5)]];\n    assert.deepEqual([record_ranges_0, record_ranges_1, record_ranges_2, record_ranges_3], table_record_ranges);\n    assert.deepEqual([fvr(3, 0, 8)], table_comment_ranges);\n\n\n    // Single record, 3 fields.\n    doc_lines = [\n        'a1,\"a2', \n        'b1,b2', \n        'c1,c2', \n        'd1\",d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = null;\n    delim = ',';\n    range = new vscode_test_double.Range(0, 0, 4, 0);\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, /*include_delim_length_in_ranges=*/true, comment_prefix, range, /*custom_parsing_margin=*/100);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_0 = [[fvr(0, 0, 3)], [fvr(0, 3, 6), fvr(1, 0, 5), fvr(2, 0, 5), fvr(3, 0, 4)], [fvr(3, 4, 6)]];\n    assert.deepEqual([record_ranges_0], table_record_ranges);\n    assert.deepEqual([], table_comment_ranges);\n\n    // Mixture of single line and multiline fields in a single record. Also a comment prefix in the middle of the field which should not count.\n    doc_lines = [\n        'a1,a2,\"a3', \n        '#b1\",\"b2\"\",b3\",b4,\"b5', \n        'c1,c2\"'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    range = new vscode_test_double.Range(0, 0, 4, 0);\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, /*include_delim_length_in_ranges=*/true, comment_prefix, range, /*custom_parsing_margin=*/100);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_0 = [[fvr(0, 0, 3)], [fvr(0, 3, 6)], [fvr(0, 6, 9), fvr(1, 0, 5)], [fvr(1, 5, 15)], [fvr(1, 15, 18)], [fvr(1, 18, 21), fvr(2, 0, 6)]];\n    assert.deepEqual([record_ranges_0], table_record_ranges);\n    assert.deepEqual([], table_comment_ranges);\n\n    // Discard some parsed lines which belongs to a record starting outside the parsing range\n    doc_lines = [\n        'a1,\"a2', \n        'b1,b2', \n        'c1,c2', \n        'd1,d2\"', \n        'e1,e2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    range = new vscode_test_double.Range(1, 0, 20, 0); // doesn't include first line with the openning double quote.\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, /*include_delim_length_in_ranges=*/true, comment_prefix, range, /*custom_parsing_margin=*/0);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_0 = [[fvr(4, 0, 3)], [fvr(4, 3, 5)]];\n    assert.deepEqual([record_ranges_0], table_record_ranges);\n    assert.deepEqual([], table_comment_ranges);\n\n    // Now shift window one back - it should include all lines now.\n    doc_lines = [\n        'a1,\"a2', \n        'b1,b2', \n        'c1,c2', \n        'd1,d2\"', \n        'e1,e2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    range = new vscode_test_double.Range(0, 0, 20, 0);\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, /*include_delim_length_in_ranges=*/true, comment_prefix, range, /*custom_parsing_margin=*/0);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_0 = [[fvr(0, 0, 3)], [fvr(0, 3, 6), fvr(1, 0, 5), fvr(2, 0, 5), fvr(3, 0, 6)]];\n    record_ranges_1 = [[fvr(4, 0, 3)], [fvr(4, 3, 5)]];\n    assert.deepEqual([record_ranges_0, record_ranges_1], table_record_ranges);\n    assert.deepEqual([], table_comment_ranges);\n\n    // Include only the first 2 records because end of the record is outside the parsing window.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        'c1,\"c2', \n        'd1,d2', \n        'e1,e2', \n        'f1,f2\"'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    range = new vscode_test_double.Range(0, 0, 5, 0); // doesn't include the last line with the closing double quote.\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, /*include_delim_length_in_ranges=*/true, comment_prefix, range, /*custom_parsing_margin=*/0);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_0 = [[fvr(0, 0, 3)], [fvr(0, 3, 5)]];\n    record_ranges_1 = [[fvr(1, 0, 3)], [fvr(1, 3, 5)]];\n    assert.deepEqual([record_ranges_0, record_ranges_1], table_record_ranges);\n    assert.deepEqual([], table_comment_ranges);\n\n    // Now include everything because the end record got inside the parsing window\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        'c1,\"c2', \n        'd1,d2', \n        'e1,e2', \n        'f1,f2\"'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    range = new vscode_test_double.Range(0, 0, 6, 0); // doesn't include the last line with the closing double quote.\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, /*include_delim_length_in_ranges=*/true, comment_prefix, range, /*custom_parsing_margin=*/0);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_0 = [[fvr(0, 0, 3)], [fvr(0, 3, 5)]];\n    record_ranges_1 = [[fvr(1, 0, 3)], [fvr(1, 3, 5)]];\n    record_ranges_2 = [[fvr(2, 0, 3)], [fvr(2, 3, 6), fvr(3, 0, 5), fvr(4, 0, 5), fvr(5, 0, 6)]];\n    assert.deepEqual([record_ranges_0, record_ranges_1, record_ranges_2], table_record_ranges);\n    assert.deepEqual([], table_comment_ranges);\n\n    // ===================================================================================\n    // Beginning of 4 related test on the same data but with the different parsing windows\n\n    // Nothing is parsed because the window started at the record which end didn't fit into the parsing range.\n    doc_lines = [\n        'a1,\"a2', \n        'b1,b2', \n        'c1\",\"c2', \n        'd1,d2', \n        '#hello world', \n        'e1,e2', \n        'f1\",f2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    range = new vscode_test_double.Range(0, 0, 6, 0); // doesn't include the last line with the closing double quote.\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, /*include_delim_length_in_ranges=*/true, comment_prefix, range, /*custom_parsing_margin=*/0);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    assert.deepEqual([], table_record_ranges);\n    assert.deepEqual([], table_comment_ranges);\n\n    // Same as before but the window is shifted slightly so we (wrongly) assume that the internal field lines are independent records.\n    doc_lines = [\n        'a1,\"a2', \n        'b1,b2', \n        'c1\",\"c2', \n        'd1,d2', \n        '#hello world', \n        'e1,e2', \n        'f1\",f2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    range = new vscode_test_double.Range(1, 0, 6, 0); // doesn't include the last line with the closing double quote.\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, /*include_delim_length_in_ranges=*/true, comment_prefix, range, /*custom_parsing_margin=*/0);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_0 = [[fvr(1, 0, 3)], [fvr(1, 3, 5)]];\n    // Note that the third line `c1\",\"c2` is not parsed because since parser assumes it to be an independent record it contains syntax errors.\n    record_ranges_1 = [[fvr(3, 0, 3)], [fvr(3, 3, 5)]];\n    record_ranges_2 = [[fvr(5, 0, 3)], [fvr(5, 3, 5)]];\n    assert.deepEqual([record_ranges_0, record_ranges_1, record_ranges_2], table_record_ranges);\n    // Although `#hello world` is actually part of the multiline field we wrongly assume it to be a comment since our parsing window don't cover neither begin nor end of the record.\n    assert.deepEqual([fvr(4, 0, 12)], table_comment_ranges);\n\n    // Nothing is parsed again because the window ends right at the closing line and the beginning didn't fit.\n    doc_lines = [\n        'a1,\"a2', \n        'b1,b2', \n        'c1\",\"c2', \n        'd1,d2', \n        '#hello world', \n        'e1,e2', \n        'f1\",f2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    range = new vscode_test_double.Range(1, 0, 7, 0);\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, /*include_delim_length_in_ranges=*/true, comment_prefix, range, /*custom_parsing_margin=*/0);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    assert.deepEqual([], table_record_ranges);\n    assert.deepEqual([], table_comment_ranges);\n\n\n    // All lines now fit in the range and they are being properly parsed as a single record.\n    doc_lines = [\n        'a1,\"a2', \n        'b1,b2', \n        'c1\",\"c2', \n        'd1,d2', \n        '#hello world', \n        'e1,e2', \n        'f1\",f2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    range = new vscode_test_double.Range(0, 0, 7, 0);\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, /*include_delim_length_in_ranges=*/true, comment_prefix, range, /*custom_parsing_margin=*/0);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_0 = [[fvr(0, 0, 3)], [fvr(0, 3, 6), fvr(1, 0, 5), fvr(2, 0, 4)], [fvr(2, 4, 7), fvr(3, 0, 5), fvr(4, 0, 12), fvr(5, 0, 5), fvr(6, 0, 4)], [fvr(6, 4, 6)]];\n    assert.deepEqual([record_ranges_0], table_record_ranges);\n    assert.deepEqual([], table_comment_ranges);\n\n\n    // End of 4 related test on the same data but with the different parsing windows\n    // ===================================================================================\n\n\n    // Discard some at the beginning and some at the end where the record didn't fit into the parsing window\n    doc_lines = [\n        'a1;\"a2', \n        'b1;b2', \n        'c1\";c2', \n        'd1;d2', \n        '#hello world', \n        'e1;e2', \n        'f1;\"f2', \n        'g1;g2', \n        'h1\";h2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ';';\n    range = new vscode_test_double.Range(1, 0, 8, 0);\n    table_ranges = rainbow_utils.parse_document_range_rfc(vscode_test_double, active_doc, delim, /*include_delim_length_in_ranges=*/true, comment_prefix, range, /*custom_parsing_margin=*/0);\n    [table_comment_ranges, table_record_ranges] = convert_ranges_to_triples(table_ranges);\n    record_ranges_1 = [[fvr(3, 0, 3)], [fvr(3, 3, 5)]];\n    record_ranges_2 = [[fvr(5, 0, 3)], [fvr(5, 3, 5)]];\n    assert.deepEqual([record_ranges_1, record_ranges_2], table_record_ranges);\n    assert.deepEqual([fvr(4, 0, 12)], table_comment_ranges);\n\n}\n\n\nfunction test_is_opening_rfc_line() {\n    assert(rainbow_utils.is_opening_rfc_line('a1,\"a2', ','));\n    assert(rainbow_utils.is_opening_rfc_line('a1;\"a2', ';'));\n    assert(rainbow_utils.is_opening_rfc_line('a1,  \" a2', ','));\n    assert(rainbow_utils.is_opening_rfc_line('a1  ,  \" a2', ','));\n    assert(rainbow_utils.is_opening_rfc_line('a1,a1,a1  ,  \" a2', ','));\n    assert(rainbow_utils.is_opening_rfc_line('a1,\"a1,a1  \",  \" a2', ','));\n    assert(rainbow_utils.is_opening_rfc_line('a1,\"a1,a1  \" ,  \" a2', ','));\n    assert(!rainbow_utils.is_opening_rfc_line('a1,a2', ','));\n    assert(!rainbow_utils.is_opening_rfc_line('a1\",a2', ','));\n    assert(!rainbow_utils.is_opening_rfc_line('a1;a2', ';'));\n    assert(!rainbow_utils.is_opening_rfc_line('a1\";a2', ';'));\n\n    // Some lines can be both closing and opening, e.g. this one:\n    assert(rainbow_utils.is_opening_rfc_line('\",a2,a3', ','));\n\n    assert(!rainbow_utils.is_opening_rfc_line('abcd\"', ','));\n    assert(!rainbow_utils.is_opening_rfc_line('abcd\",ab', ','));\n    assert(!rainbow_utils.is_opening_rfc_line('ab,cd\",ab', ','));\n    assert(!rainbow_utils.is_opening_rfc_line('ab\"\"x\"\"cd\",ab', ','));\n    assert(!rainbow_utils.is_opening_rfc_line('a1,\"a2,a3\"\"a4,a5\"\"\",a6,a7', ','));\n    assert(rainbow_utils.is_opening_rfc_line('\"', ','));\n    assert(rainbow_utils.is_opening_rfc_line('\",', ','));\n    assert(rainbow_utils.is_opening_rfc_line(',\"', ','));\n    assert(rainbow_utils.is_opening_rfc_line('a,\"', ','));\n    assert(!rainbow_utils.is_opening_rfc_line('a,a\"', ','));\n}\n\n\nfunction test_sample_preview_records_from_context() {\n    let [doc_lines, active_doc, comment_prefix, delim, rbql_context, preview_window_size, cached_table_parse_result, dst_message, policy] = [null, null, null, null, null, null, null, null, null];\n    let doc_file_name = 'fake_doc.txt';\n\n    // Simple test with a comment and negative start record.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        '#comment', \n        'c1,c2', \n        'd1,d2'\n    ];\n    delim = ',';\n    comment_prefix = '#';\n    preview_window_size = 10;\n    active_doc = new VscodeDocumentTestDouble(doc_lines, doc_file_name);\n    requested_start_record = -100;\n    cached_table_parse_result = new Map();\n    dst_message = new Object();\n    policy = 'simple';\n    rbql_context = {input_document: active_doc, delim: delim, policy: policy, comment_prefix: comment_prefix, requested_start_record: requested_start_record};\n    rainbow_utils.sample_preview_records_from_context(rbql_context, dst_message, preview_window_size, cached_table_parse_result);\n    assert.equal(dst_message.actual_start_record, 0);\n    assert.deepEqual([['a1', 'a2'], ['b1', 'b2'], ['c1', 'c2'], ['d1', 'd2']], dst_message.preview_records);\n    assert(!cached_table_parse_result.has(doc_file_name));\n\n    // Invalid quoting.\n    doc_lines = [\n        'a1,\"a2', \n        'b1\",b2', \n        '#comment', \n        'c1,\"c2', \n        'd1,d2'\n    ];\n    delim = ',';\n    comment_prefix = '#';\n    preview_window_size = 10;\n    active_doc = new VscodeDocumentTestDouble(doc_lines, doc_file_name);\n    requested_start_record = 0;\n    cached_table_parse_result = new Map();\n    dst_message = new Object();\n    policy = 'quoted_rfc';\n    rbql_context = {input_document: active_doc, delim: delim, policy: policy, comment_prefix: comment_prefix, requested_start_record: requested_start_record};\n    rainbow_utils.sample_preview_records_from_context(rbql_context, dst_message, preview_window_size, cached_table_parse_result);\n    assert(!dst_message.actual_start_record);\n    assert(!dst_message.preview_records);\n    assert.equal(dst_message.preview_sampling_error, 'Double quotes are not consistent in record 2 which starts at line 4');\n    assert(!cached_table_parse_result.has(doc_file_name));\n\n    // Test window shift back to 0.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        '#comment', \n        'c1,c2', \n        'd1,d2', \n        'e1,e2'\n    ];\n    delim = ',';\n    comment_prefix = '#';\n    preview_window_size = 10;\n    active_doc = new VscodeDocumentTestDouble(doc_lines, doc_file_name);\n    requested_start_record = 3;\n    cached_table_parse_result = new Map();\n    dst_message = new Object();\n    policy = 'simple';\n    rbql_context = {input_document: active_doc, delim: delim, policy: policy, comment_prefix: comment_prefix, requested_start_record: requested_start_record};\n    rainbow_utils.sample_preview_records_from_context(rbql_context, dst_message, preview_window_size, cached_table_parse_result);\n    // The start record is shifted to record 1 from requested record 3 to show the maximum number of the requested 10 entries.\n    assert.equal(dst_message.actual_start_record, 0);\n    assert.deepEqual([['a1', 'a2'], ['b1', 'b2'], ['c1', 'c2'], ['d1', 'd2'], ['e1', 'e2']], dst_message.preview_records);\n    assert(!cached_table_parse_result.has(doc_file_name));\n\n    // Test window shift back exact.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        '#comment', \n        'c1,c2', \n        'd1,d2', \n        'e1,e2'\n    ];\n    delim = ',';\n    comment_prefix = '#';\n    preview_window_size = 4;\n    active_doc = new VscodeDocumentTestDouble(doc_lines, doc_file_name);\n    requested_start_record = 3;\n    cached_table_parse_result = new Map();\n    dst_message = new Object();\n    policy = 'simple';\n    rbql_context = {input_document: active_doc, delim: delim, policy: policy, comment_prefix: comment_prefix, requested_start_record: requested_start_record};\n    rainbow_utils.sample_preview_records_from_context(rbql_context, dst_message, preview_window_size, cached_table_parse_result);\n    // The start record is shifted to record 1 from requested record 3 to show the requested 4 entries.\n    assert.equal(dst_message.actual_start_record, 1);\n    assert.deepEqual([['b1', 'b2'], ['c1', 'c2'], ['d1', 'd2'], ['e1', 'e2']], dst_message.preview_records);\n    assert(!cached_table_parse_result.has(doc_file_name));\n\n    // Test UI_STRING_TRIM_MARKER behavior.\n    doc_lines = [\n        '1'.repeat(251) + ',' + '2'.repeat(251)\n    ];\n    delim = ',';\n    comment_prefix = '#';\n    preview_window_size = 4;\n    active_doc = new VscodeDocumentTestDouble(doc_lines, doc_file_name);\n    requested_start_record = 3;\n    cached_table_parse_result = new Map();\n    dst_message = new Object();\n    policy = 'simple';\n    rbql_context = {input_document: active_doc, delim: delim, policy: policy, comment_prefix: comment_prefix, requested_start_record: requested_start_record};\n    rainbow_utils.sample_preview_records_from_context(rbql_context, dst_message, preview_window_size, cached_table_parse_result);\n    assert.equal(dst_message.actual_start_record, 0);\n    assert.deepEqual([['1'.repeat(250) + '###UI_STRING_TRIM_MARKER###', '2'.repeat(250) + '###UI_STRING_TRIM_MARKER###']], dst_message.preview_records);\n    assert(!cached_table_parse_result.has(doc_file_name));\n\n    // Test that comment lines do not prevent to sample requested number of entries.\n    doc_lines = [\n        '#info', \n        '#info', \n        '#info', \n        '#info', \n        '#info', \n        '#info', \n        '#info', \n        '#info', \n        '#info', \n        '#info', \n        'a1,a2', \n        'b1,b2', \n        '#comment', \n        'c1,c2', \n        'd1,d2'\n    ];\n    delim = ',';\n    comment_prefix = '#';\n    preview_window_size = 3;\n    active_doc = new VscodeDocumentTestDouble(doc_lines, doc_file_name);\n    requested_start_record = 0;\n    cached_table_parse_result = new Map();\n    dst_message = new Object();\n    policy = 'simple';\n    rbql_context = {input_document: active_doc, delim: delim, policy: policy, comment_prefix: comment_prefix, requested_start_record: requested_start_record};\n    rainbow_utils.sample_preview_records_from_context(rbql_context, dst_message, preview_window_size, cached_table_parse_result);\n    assert.equal(dst_message.actual_start_record, 0);\n    assert.deepEqual([['a1', 'a2'], ['b1', 'b2'], ['c1', 'c2']], dst_message.preview_records);\n    assert(!cached_table_parse_result.has(doc_file_name));\n\n    // Check caching logic.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        'c1,c2', \n        '#comment', \n        'd1,d2', \n        'e1,e2', \n        'f1,f2', \n        'g1,g2', \n        'h1,h2', \n        'i1,i2', \n        'j1,j2', \n        'k1,k2', \n        'l1,l2', \n        'm1,m2', \n        'n1,n2', \n        'o1\"\",o2'\n    ];\n    delim = ',';\n    comment_prefix = '#';\n    preview_window_size = 2;\n    active_doc = new VscodeDocumentTestDouble(doc_lines, doc_file_name);\n    requested_start_record = 11;\n    cached_table_parse_result = new Map();\n    dst_message = new Object();\n    policy = 'quoted_rfc';\n    rbql_context = {input_document: active_doc, delim: delim, policy: policy, comment_prefix: comment_prefix, requested_start_record: requested_start_record};\n    rainbow_utils.sample_preview_records_from_context(rbql_context, dst_message, preview_window_size, cached_table_parse_result);\n    assert.equal(dst_message.preview_sampling_error, 'Double quotes are not consistent in record 15 which starts at line 16');\n    assert(cached_table_parse_result.has(doc_file_name));\n    assert.deepEqual([['a1', 'a2'], ['b1', 'b2'], ['c1', 'c2'], ['d1', 'd2'], ['e1', 'e2'], ['f1', 'f2'], ['g1', 'g2'], ['h1', 'h2'], ['i1', 'i2'], ['j1', 'j2'], ['k1', 'k2'], ['l1', 'l2'], ['m1', 'm2'], ['n1', 'n2']], cached_table_parse_result.get(doc_file_name)[0]);\n    assert.equal(15, cached_table_parse_result.get(doc_file_name)[1]); // First failed line.\n    assert.equal(1, cached_table_parse_result.get(doc_file_name)[2]); // Doc verion.\n\n    // Check that even with the updated doc the old version is returned because we haven't adjusted the version.\n    dst_message = new Object();\n    active_doc.lines_buffer[active_doc.lines_buffer.length - 1] = 'o1,o2';\n    rainbow_utils.sample_preview_records_from_context(rbql_context, dst_message, preview_window_size, cached_table_parse_result);\n    assert.equal(dst_message.preview_sampling_error, 'Double quotes are not consistent in record 15 which starts at line 16');\n    assert.deepEqual([['a1', 'a2'], ['b1', 'b2'], ['c1', 'c2'], ['d1', 'd2'], ['e1', 'e2'], ['f1', 'f2'], ['g1', 'g2'], ['h1', 'h2'], ['i1', 'i2'], ['j1', 'j2'], ['k1', 'k2'], ['l1', 'l2'], ['m1', 'm2'], ['n1', 'n2']], cached_table_parse_result.get(doc_file_name)[0]);\n    assert.equal(15, cached_table_parse_result.get(doc_file_name)[1]); // First failed line.\n    assert.equal(1, cached_table_parse_result.get(doc_file_name)[2]); // Doc verion.\n\n    // Check that updating doc version triggers reparsing which now returns the correct sample because the doc was fixed earlier..\n    dst_message = new Object();\n    active_doc.version = 2;\n    rainbow_utils.sample_preview_records_from_context(rbql_context, dst_message, preview_window_size, cached_table_parse_result);\n    assert.equal(dst_message.actual_start_record, 11);\n    assert.deepEqual([['l1', 'l2'], ['m1', 'm2']], dst_message.preview_records);\n    assert.equal(dst_message.preview_sampling_error, undefined);\n    assert.deepEqual([['a1', 'a2'], ['b1', 'b2'], ['c1', 'c2'], ['d1', 'd2'], ['e1', 'e2'], ['f1', 'f2'], ['g1', 'g2'], ['h1', 'h2'], ['i1', 'i2'], ['j1', 'j2'], ['k1', 'k2'], ['l1', 'l2'], ['m1', 'm2'], ['n1', 'n2'], ['o1', 'o2']], cached_table_parse_result.get(doc_file_name)[0]);\n    assert.equal(undefined, cached_table_parse_result.get(doc_file_name)[1]); // First failed line.\n    assert.equal(2, cached_table_parse_result.get(doc_file_name)[2]); // Doc verion.\n}\n\n\nfunction test_show_lint_status_bar_button() {\n    let [extension_context, file_path, language_id, fields_info, first_defective_line, first_trailing_space_line] = [null, null, null, null, null, null];\n\n    // Test \"is processing\" display status.\n    extension_context = {lint_results: new Map()};\n    file_path = 'fake_path.txt';\n    language_id = 'fake_csv_language_id';\n    lint_cache_key = `${file_path}.${language_id}`;\n    extension_context.lint_results.set(lint_cache_key, {is_processing: true, is_ok: true}); // Adding `is_ok` to test that it has no affect.\n    rainbow_utils.show_lint_status_bar_button(vscode_test_double, extension_context, file_path, language_id);\n    assert.equal(extension_context.lint_status_bar_button.is_visible, true);\n    assert.equal(extension_context.lint_status_bar_button.tooltip, 'Processing\\nClick to recheck');\n\n    // Test that missing cache key entry doesn't create a new item.\n    extension_context = {lint_results: new Map()};\n    file_path = 'fake_path.txt';\n    language_id = 'fake_csv_language_id';\n    lint_cache_key = `${file_path}.${language_id}.bad`;\n    extension_context.lint_results.set(lint_cache_key, {is_processing: true});\n    rainbow_utils.show_lint_status_bar_button(vscode_test_double, extension_context, file_path, language_id);\n    assert.equal(extension_context.lint_status_bar_button, undefined);\n\n    // First defective line test. First trailing space line and inconsistent fields info should have no effect on the result.\n    extension_context = {lint_results: new Map()};\n    first_defective_line = 10;\n    first_trailing_space_line = 5;\n    fields_info = new Map([[2, 0], [3, 2]]);\n    file_path = 'fake_path.txt';\n    language_id = 'fake_csv_language_id';\n    lint_cache_key = `${file_path}.${language_id}`;\n    extension_context.lint_results.set(lint_cache_key, {first_defective_line: first_defective_line, fields_info: fields_info, first_trailing_space_line: first_trailing_space_line});\n    rainbow_utils.show_lint_status_bar_button(vscode_test_double, extension_context, file_path, language_id);\n    assert.equal(extension_context.lint_status_bar_button.is_visible, true);\n    assert.equal(extension_context.lint_status_bar_button.tooltip, 'Error. Line 10 has formatting error: double quote chars are not consistent\\nClick to recheck');\n\n    // Inconsistent fields info test. First trailing space line should have no effect on the result.\n    extension_context = {lint_results: new Map()};\n    first_trailing_space_line = 5;\n    fields_info = new Map([[2, 0], [1, 10], [4, 15], [3, 2]]);\n    file_path = 'fake_path.txt';\n    language_id = 'fake_csv_language_id';\n    lint_cache_key = `${file_path}.${language_id}`;\n    extension_context.lint_results.set(lint_cache_key, {fields_info: fields_info, first_trailing_space_line: first_trailing_space_line});\n    rainbow_utils.show_lint_status_bar_button(vscode_test_double, extension_context, file_path, language_id);\n    assert.equal(extension_context.lint_status_bar_button.is_visible, true);\n    assert.equal(extension_context.lint_status_bar_button.tooltip, 'Error. Number of fields is not consistent: e.g. record 1 has 2 fields, and record 3 has 3 fields\\nClick to recheck');\n\n    // Test first trailing space line.\n    extension_context = {lint_results: new Map()};\n    first_trailing_space_line = 0; // Even zero line should trigger the warning - test against dumb `!first_trailing_space_line` check.\n    file_path = 'fake_path.txt';\n    language_id = 'fake_csv_language_id';\n    lint_cache_key = `${file_path}.${language_id}`;\n    extension_context.lint_results.set(lint_cache_key, {first_trailing_space_line: first_trailing_space_line, is_ok: true});\n    rainbow_utils.show_lint_status_bar_button(vscode_test_double, extension_context, file_path, language_id);\n    assert.equal(extension_context.lint_status_bar_button.is_visible, true);\n    assert.equal(extension_context.lint_status_bar_button.tooltip, 'Leading/Trailing spaces detected: e.g. at line 1. Run \"Shrink\" command to remove them\\nClick to recheck');\n\n    // Test OK lint status - no errors/warnings.\n    extension_context = {lint_results: new Map()};\n    file_path = 'fake_path.txt';\n    language_id = 'fake_csv_language_id';\n    lint_cache_key = `${file_path}.${language_id}`;\n    extension_context.lint_results.set(lint_cache_key, {is_ok: true});\n    rainbow_utils.show_lint_status_bar_button(vscode_test_double, extension_context, file_path, language_id);\n    assert.equal(extension_context.lint_status_bar_button.is_visible, true);\n    assert.equal(extension_context.lint_status_bar_button.tooltip, 'OK\\nClick to recheck');\n}\n\n\nfunction test_get_cursor_position_info() {\n    let [doc_lines, active_doc, delim, policy, comment_prefix, position, position_info] = [null, null, null, null, null, null, null];\n\n    // Basic test.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        '#comment', \n        'c1,c2', \n        'd1,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    delim = ',';\n    policy = 'simple';\n    comment_prefix = '#';\n    position = new VscodePositionTestDouble(/*line=*/3, /*character=*/3);\n    position_info = rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, position);\n    assert.deepEqual({column_number: 1, total_columns: 2, split_warning: false}, position_info);\n\n    // Delim character maps to preceeding field.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        '#comment', \n        'c1,c2', \n        'd1,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    delim = ',';\n    policy = 'simple';\n    comment_prefix = '#';\n    position = new VscodePositionTestDouble(/*line=*/3, /*character=*/2);\n    position_info = rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, position);\n    assert.deepEqual({column_number: 0, total_columns: 2, split_warning: false}, position_info);\n\n    // Basic test, comment\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        '#comment', \n        'c1,c2', \n        'd1,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    delim = ',';\n    policy = 'simple';\n    comment_prefix = '#';\n    position = new VscodePositionTestDouble(/*line=*/2, /*character=*/5);\n    position_info = rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, position);\n    assert.deepEqual({is_comment: true}, position_info);\n\n    // Column info for the last character in line.\n    doc_lines = [\n        'a1,a2', \n        'b1,b2', \n        '#comment', \n        'c1,c2', \n        'd1,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    delim = ',';\n    policy = 'simple';\n    comment_prefix = '#';\n    position = new VscodePositionTestDouble(/*line=*/3, /*character=*/4);\n    position_info = rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, position);\n    assert.deepEqual({column_number: 1, total_columns: 2, split_warning: false}, position_info);\n\n    // Multicharacter separator test - critical locations across field boundaries.\n    doc_lines = [\n        'a1@@@a2@@@a3', \n        'b1@@@b2@@@b3', \n        '#comment', \n        'c1@@@c2@@@c3', \n        'd1@@@d2@@@d3'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    delim = '@@@';\n    policy = 'simple';\n    comment_prefix = '#';\n    assert.deepEqual({column_number: 0, total_columns: 3, split_warning: false}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/3, /*character=*/4)));\n    assert.deepEqual({column_number: 1, total_columns: 3, split_warning: false}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/3, /*character=*/5)));\n    assert.deepEqual({column_number: 1, total_columns: 3, split_warning: false}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/3, /*character=*/9)));\n    assert.deepEqual({column_number: 2, total_columns: 3, split_warning: false}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/3, /*character=*/10)));\n\n    // Column info for whitespace policy.\n    doc_lines = [\n        'a1  a2 ', \n        'b1    b2', \n        '$$comment', \n        '$c1  c2  ', \n        'd1   d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    delim = ' ';\n    policy = 'whitespace';\n    comment_prefix = '$$';\n    assert.deepEqual({column_number: 0, total_columns: 2, split_warning: false}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/3, /*character=*/0)));\n    assert.deepEqual({column_number: 0, total_columns: 2, split_warning: false}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/3, /*character=*/4)));\n    assert.deepEqual({column_number: 1, total_columns: 2, split_warning: false}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/3, /*character=*/5)));\n    assert.deepEqual({is_comment: true}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/2, /*character=*/6)));\n\n    // Test with quoted policy and split warning.\n    doc_lines = [\n        'a1,a2', \n        '$b1,\"b2', \n        '$$comment', \n        '\"c1,\"\"c1\"\"\",c2', \n        'd1,d2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    delim = ',';\n    policy = 'quoted';\n    comment_prefix = '$$';\n    assert.deepEqual({column_number: 0, total_columns: 2, split_warning: false}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/3, /*character=*/11)));\n    assert.deepEqual({column_number: 1, total_columns: 2, split_warning: false}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/3, /*character=*/12)));\n    assert.deepEqual({column_number: 1, total_columns: 2, split_warning: true}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/1, /*character=*/4)));\n    assert.deepEqual({is_comment: true}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/2, /*character=*/6)));\n\n    // Quoted RFC policy test.\n    doc_lines = [\n        'a1,a2', \n        '#comment', \n        'b1,\"b2', \n        '#not a \"\"comment\"\", inside multiline field!', \n        'd1,d2\"', \n        'e1,\"e2,e2\"', \n        'f1,\"f2'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    delim = ',';\n    policy = 'quoted_rfc';\n    comment_prefix = '#';\n    assert.deepEqual({is_comment: true}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/1, /*character=*/6)));\n    assert.deepEqual({column_number: 1, total_columns: 2, split_warning: false}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/3, /*character=*/6)));\n    assert.deepEqual({column_number: 1, total_columns: 2, split_warning: false}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/4, /*character=*/5)));\n    assert.deepEqual({column_number: 1, total_columns: 2, split_warning: false}, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/5, /*character=*/3)));\n    assert.equal(null, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/6, /*character=*/1)));\n    assert.equal(null, rainbow_utils.get_cursor_position_info(vscode_test_double, active_doc, delim, policy, comment_prefix, new VscodePositionTestDouble(/*line=*/6, /*character=*/3)));\n}\n\n\nfunction test_align_columns() {\n    let [unaligned_doc_lines, active_doc, delim, policy, comment_prefix] = [null, null, null, null, null];\n    let [column_stats, first_failed_line, records, comments] = [null, null, null, null];\n    let [aligned_doc_text, aligned_doc_lines, expected_doc_lines] = [null, null]\n\n    // Basic test with numeric column.\n    unaligned_doc_lines = [\n        'type,weight',\n        'car,100',\n        'ship,20000'\n    ];\n    active_doc = new VscodeDocumentTestDouble(unaligned_doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    [column_stats, first_failed_line, records, comments] = rainbow_utils.calc_column_stats(active_doc, delim, policy, comment_prefix, /*enable_double_width_alignment=*/true);\n    aligned_doc_text = rainbow_utils.align_columns(records, comments, column_stats, delim);\n    aligned_doc_lines = aligned_doc_text.split('\\n');\n    expected_doc_lines = [\n        'type, weight',\n        'car ,    100',\n        'ship,  20000'\n    ];\n    assert.deepEqual(expected_doc_lines, aligned_doc_lines);\n\n    // Basic test with string-only columns.\n    unaligned_doc_lines = [\n        'type,color',\n        'car,red',\n        'ship,orange'\n    ];\n    active_doc = new VscodeDocumentTestDouble(unaligned_doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    [column_stats, first_failed_line, records, comments] = rainbow_utils.calc_column_stats(active_doc, delim, policy, comment_prefix, /*enable_double_width_alignment=*/true);\n    aligned_doc_text = rainbow_utils.align_columns(records, comments, column_stats, delim);\n    aligned_doc_lines = aligned_doc_text.split('\\n');\n    expected_doc_lines = [\n        'type, color',\n        'car , red',\n        'ship, orange'\n    ];\n    assert.deepEqual(expected_doc_lines, aligned_doc_lines);\n\n    // Basic test with float column and random spaces.\n    unaligned_doc_lines = [\n        '  type, wght,  color ',\n        '  car  ,   1.008  ,   red',\n        '   ship ,  200.5  ,  yellow'\n    ];\n    active_doc = new VscodeDocumentTestDouble(unaligned_doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    [column_stats, first_failed_line, records, comments] = rainbow_utils.calc_column_stats(active_doc, delim, policy, comment_prefix, /*enable_double_width_alignment=*/true);\n    aligned_doc_text = rainbow_utils.align_columns(records, comments, column_stats, delim);\n    aligned_doc_lines = aligned_doc_text.split('\\n');\n    expected_doc_lines = [\n        'type, wght   , color',\n        'car ,   1.008, red',\n        'ship, 200.5  , yellow'\n    ];\n    assert.deepEqual(expected_doc_lines, aligned_doc_lines);\n\n    // Basic test with comment lines and last empty line which should not diappear after alignment.\n    unaligned_doc_lines = [\n        '#info',\n        'type,weight',\n        '#foo,foo',\n        '#m',\n        'car,100',\n        'ship,20000',\n        '#bar', '#bar', ''\n    ];\n    active_doc = new VscodeDocumentTestDouble(unaligned_doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted_rfc';\n    [column_stats, first_failed_line, records, comments] = rainbow_utils.calc_column_stats(active_doc, delim, policy, comment_prefix, /*enable_double_width_alignment=*/true);\n    aligned_doc_text = rainbow_utils.align_columns(records, comments, column_stats, delim);\n    aligned_doc_lines = aligned_doc_text.split('\\n');\n    expected_doc_lines = [\n        '#info',\n        'type, weight',\n        '#foo,foo',\n        '#m',\n        'car ,    100',\n        'ship,  20000',\n        '#bar',\n        '#bar',\n        ''\n    ];\n    assert.deepEqual(expected_doc_lines, aligned_doc_lines);\n\n    // RFC multiline fields test.\n    unaligned_doc_lines = [\n        'type,info,max_speed',\n        'car,\"A nice red car.',\n        'Can get you \"\"anywhere\"\" you want.',\n        'GPS included\",100',\n        'ship,\"Big heavy superfreighter \"\"Yamaha-2000\"\".',\n        'Comes with a crew of 10\",25'\n    ];\n    active_doc = new VscodeDocumentTestDouble(unaligned_doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted_rfc';\n    [column_stats, first_failed_line, records, comments] = rainbow_utils.calc_column_stats(active_doc, delim, policy, comment_prefix, /*enable_double_width_alignment=*/true);\n    aligned_doc_text = rainbow_utils.align_columns(records, comments, column_stats, delim);\n    aligned_doc_lines = aligned_doc_text.split('\\n');\n    expected_doc_lines = [\n        'type, info                                      , max_speed',\n        'car , \"A nice red car.',\n        '      Can get you \"\"anywhere\"\" you want.',\n        '      GPS included\"                             ,       100',\n        'ship, \"Big heavy superfreighter \"\"Yamaha-2000\"\".',\n        '      Comes with a crew of 10\"                  ,        25'\n    ];\n    assert.deepEqual(expected_doc_lines, aligned_doc_lines);\n\n    // Test with syntax error.\n    unaligned_doc_lines = [\n        'type,color',\n        'car,red',\n        'ship\",orange'\n    ];\n    active_doc = new VscodeDocumentTestDouble(unaligned_doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    [column_stats, first_failed_line, records, comments] = rainbow_utils.calc_column_stats(active_doc, delim, policy, comment_prefix, /*enable_double_width_alignment=*/true);\n    assert.equal(null, column_stats);\n    assert.equal(3, first_failed_line);\n    assert.equal(null, records);\n}\n\nfunction test_shrink_columns() {\n    let [original_doc_lines, active_doc, delim, policy, comment_prefix] = [null, null, null, null, null];\n    let [first_failed_line, shrinked_doc_text, shrinked_doc_lines, expected_doc_lines] = [null, null, null, null];\n\n    // Basic test.\n    original_doc_lines = [\n        '  type  , weight, color',\n        ' car,100  , yellow   ',\n        'ship,20000,red'\n    ];\n    active_doc = new VscodeDocumentTestDouble(original_doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    [shrinked_doc_text, first_failed_line] = rainbow_utils.shrink_columns(active_doc, delim, policy, comment_prefix);\n    shrinked_doc_lines = shrinked_doc_text.split('\\n');\n    expected_doc_lines = [\n        'type,weight,color',\n        'car,100,yellow',\n        'ship,20000,red'\n    ];\n    assert.deepEqual(expected_doc_lines, shrinked_doc_lines);\n\n    // No edits (already shrinked) should be reported as null.\n    original_doc_lines = [\n        'type,weight,color',\n        'car,100,yellow',\n        'ship,20000,red'\n    ];\n    active_doc = new VscodeDocumentTestDouble(original_doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    [shrinked_doc_text, first_failed_line] = rainbow_utils.shrink_columns(active_doc, delim, policy, comment_prefix);\n    assert.equal(null, first_failed_line);\n    assert.equal(null, shrinked_doc_text);\n\n    // Test with comments and last trailing line.\n    original_doc_lines = [\n        '#hello',\n        '  type  , weight, color',\n        '#foo',\n        '#bar',\n        ' car,100  , yellow   ',\n        'ship,20000,red',\n        '# foo , bar',\n        ''\n    ];\n    active_doc = new VscodeDocumentTestDouble(original_doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    [shrinked_doc_text, first_failed_line] = rainbow_utils.shrink_columns(active_doc, delim, policy, comment_prefix);\n    shrinked_doc_lines = shrinked_doc_text.split('\\n');\n    expected_doc_lines = [\n        '#hello',\n        'type,weight,color',\n        '#foo',\n        '#bar',\n        'car,100,yellow',\n        'ship,20000,red',\n        '# foo , bar',\n        ''\n    ];\n    assert.deepEqual(expected_doc_lines, shrinked_doc_lines);\n\n    // Test with syntax error.\n    original_doc_lines = [\n        '  type  , weight, color',\n        ' car,100  , yellow   ',\n        'ship,20000\",red'\n    ];\n    active_doc = new VscodeDocumentTestDouble(original_doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    [shrinked_doc_text, first_failed_line] = rainbow_utils.shrink_columns(active_doc, delim, policy, comment_prefix);\n    assert.equal(first_failed_line, 3);\n    assert.equal(shrinked_doc_text, null);\n\n    // RFC multiline fields test.\n    original_doc_lines = [\n        'type ,info                                       ,max_speed',\n        'car  ,\"A nice red car.',\n        '      Can get you \"\"anywhere\"\" you want.',\n        '      GPS included\"                              ,      100',\n        'ship ,\"Big heavy superfreighter \"\"Yamaha-2000\"\".',\n        '      Comes with a crew of 10\"                   ,       25'\n    ];\n    active_doc = new VscodeDocumentTestDouble(original_doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted_rfc';\n    [shrinked_doc_text, first_failed_line] = rainbow_utils.shrink_columns(active_doc, delim, policy, comment_prefix);\n    shrinked_doc_lines = shrinked_doc_text.split('\\n');\n    expected_doc_lines = [\n        'type,info,max_speed',\n        'car,\"A nice red car.',\n        'Can get you \"\"anywhere\"\" you want.',\n        'GPS included\",100',\n        'ship,\"Big heavy superfreighter \"\"Yamaha-2000\"\".',\n        'Comes with a crew of 10\",25'\n    ];\n    assert.deepEqual(expected_doc_lines, shrinked_doc_lines);\n\n    // RFC multiline fields test with no edits.\n    original_doc_lines = [\n        'type,info,max_speed',\n        'car,\"A nice red car.',\n        'Can get you \"\"anywhere\"\" you want.',\n        'GPS included\",100',\n        'ship,\"Big heavy superfreighter \"\"Yamaha-2000\"\".',\n        'Comes with a crew of 10\",25'\n    ];\n    active_doc = new VscodeDocumentTestDouble(original_doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted_rfc';\n    [shrinked_doc_text, first_failed_line] = rainbow_utils.shrink_columns(active_doc, delim, policy, comment_prefix);\n    assert.equal(null, first_failed_line);\n    assert.equal(null, shrinked_doc_text);\n}\n\n\nfunction get_all_entries(record_comment_merger) {\n    let result = [];\n    while (record_comment_merger.has_entries_left()) {\n        result.push(record_comment_merger.get_next());\n    }\n    return result;\n}\n\n\nfunction test_record_comment_merger() {\n    let [records, comments] = [null, null];\n    let record_comment_merger = null;\n    let [entries, expected_entries] = [null, null];\n\n    // Basic test.\n    records = [\n        'hello', \n        'world'\n    ];\n    comments = [\n        {record_num: 0, comment_text: '#foo'},\n        {record_num: 2, comment_text: '#bar1'},\n        {record_num: 2, comment_text: '#bar2'}\n    ];\n    record_comment_merger = new rainbow_utils.RecordCommentMerger(records, comments);\n    entries = get_all_entries(record_comment_merger);\n    expected_entries = [\n        [null, '#foo'], \n        ['hello', null], \n        ['world', null],\n        [null, '#bar1'], \n        [null, '#bar2'], \n    ];\n    assert.deepEqual(expected_entries, entries);\n\n    // No records.\n    records = [\n    ];\n    comments = [\n        {record_num: 0, comment_text: '#foo'},\n        {record_num: 2, comment_text: '#bar1'},\n        {record_num: 2, comment_text: '#bar2'}\n    ];\n    record_comment_merger = new rainbow_utils.RecordCommentMerger(records, comments);\n    entries = get_all_entries(record_comment_merger);\n    expected_entries = [\n        [null, '#foo'], \n        [null, '#bar1'], \n        [null, '#bar2'], \n    ];\n    assert.deepEqual(expected_entries, entries);\n\n    // No comments.\n    records = [\n        'hello', \n        'world'\n    ];\n    comments = [\n    ];\n    record_comment_merger = new rainbow_utils.RecordCommentMerger(records, comments);\n    entries = get_all_entries(record_comment_merger);\n    expected_entries = [\n        ['hello', null], \n        ['world', null],\n    ];\n    assert.deepEqual(expected_entries, entries);\n\n    // No records and no comments.\n    records = [\n    ];\n    comments = [\n    ];\n    record_comment_merger = new rainbow_utils.RecordCommentMerger(records, comments);\n    entries = get_all_entries(record_comment_merger);\n    expected_entries = [\n    ];\n    assert.deepEqual(expected_entries, entries);\n}\n\n\nfunction test_generate_column_edit_selections() {\n    let [doc_lines, active_doc, delim, policy, comment_prefix, edit_mode, col_num] = [null, null, null, null, null, null, null];\n    let [selections, error_msg, warning_msg] = [null, null, null];\n    let [expected_selections, expected_error_msg, expected_warning_msg] = [null, null, null];\n\n    // Basic test.\n    doc_lines = [\n        'type,weight,color',\n        'car,100,yellow',\n        'ship,20000,red'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    edit_mode = 'ce_before';\n    col_num = 1; // 0-based.\n    [selections, error_msg, warning_msg] = rainbow_utils.generate_column_edit_selections(vscode_test_double, active_doc, delim, policy, comment_prefix, edit_mode, col_num);\n    assert.equal(null, error_msg);\n    assert.equal(null, warning_msg);\n    expected_selections = [\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(0, 5), new VscodePositionTestDouble(0, 5)),\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(1, 4), new VscodePositionTestDouble(1, 4)),\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(2, 5), new VscodePositionTestDouble(2, 5)),\n    ];\n    assert.deepEqual(expected_selections, selections);\n\n    // Basic test with quoted_rfc.\n    doc_lines = [\n        'type,weight,color',\n        'car,100,yellow',\n        'ship,20000,red'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted_rfc';\n    edit_mode = 'ce_before';\n    col_num = 1; // 0-based.\n    [selections, error_msg, warning_msg] = rainbow_utils.generate_column_edit_selections(vscode_test_double, active_doc, delim, policy, comment_prefix, edit_mode, col_num);\n    assert.equal(null, error_msg);\n    assert.equal(null, warning_msg);\n    expected_selections = [\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(0, 5), new VscodePositionTestDouble(0, 5)),\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(1, 4), new VscodePositionTestDouble(1, 4)),\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(2, 5), new VscodePositionTestDouble(2, 5)),\n    ];\n    assert.deepEqual(expected_selections, selections);\n\n    // Test with multiline fields.\n    doc_lines = [\n        'type,weight,color',\n        'car,100,\"yellow',\n        ' and black\"',\n        'ship,20000,red'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted_rfc';\n    edit_mode = 'ce_before';\n    col_num = 1; // 0-based.\n    [selections, error_msg, warning_msg] = rainbow_utils.generate_column_edit_selections(vscode_test_double, active_doc, delim, policy, comment_prefix, edit_mode, col_num);\n    assert.equal('Column edit mode is not supported for files with multiline fields', error_msg);\n\n    // Basic test with comments.\n    doc_lines = [\n        'type,weight,color',\n        'car,100,yellow',\n        '#hello world',\n        'ship,20000,red'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    edit_mode = 'ce_before';\n    col_num = 1; // 0-based.\n    [selections, error_msg, warning_msg] = rainbow_utils.generate_column_edit_selections(vscode_test_double, active_doc, delim, policy, comment_prefix, edit_mode, col_num);\n    assert.equal(null, error_msg);\n    assert.equal(null, warning_msg);\n    expected_selections = [\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(0, 5), new VscodePositionTestDouble(0, 5)),\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(1, 4), new VscodePositionTestDouble(1, 4)),\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(3, 5), new VscodePositionTestDouble(3, 5)),\n    ];\n    assert.deepEqual(expected_selections, selections);\n\n    // Test with quoting error.\n    doc_lines = [\n        'type,weight,color',\n        'car,100,yellow \" red',\n        'ship,20000,red'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    edit_mode = 'ce_before';\n    col_num = 1; // 0-based.\n    [selections, error_msg, warning_msg] = rainbow_utils.generate_column_edit_selections(vscode_test_double, active_doc, delim, policy, comment_prefix, edit_mode, col_num);\n    assert.equal('Unable to enter column edit mode: quoting error at line 2', error_msg);\n    assert.equal(null, warning_msg);\n    assert.deepEqual(null, selections);\n\n    // Test with inconsistent fields length.\n    doc_lines = [\n        'type,weight,color',\n        'car,100,yellow',\n        'rocket,1000',\n        'ship,20000,red'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    edit_mode = 'ce_before';\n    col_num = 2; // 0-based.\n    [selections, error_msg, warning_msg] = rainbow_utils.generate_column_edit_selections(vscode_test_double, active_doc, delim, policy, comment_prefix, edit_mode, col_num);\n    assert.equal('Line 3 doesn\\'t have field number 3', error_msg);\n    assert.equal(null, warning_msg);\n    assert.deepEqual(null, selections);\n\n    // Test with \"ce_before\" and a double quote in proximity.\n    doc_lines = [\n        'type,weight,color',\n        'car,\"100\",yellow',\n        'ship,20000,red'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    edit_mode = 'ce_before';\n    col_num = 1; // 0-based.\n    [selections, error_msg, warning_msg] = rainbow_utils.generate_column_edit_selections(vscode_test_double, active_doc, delim, policy, comment_prefix, edit_mode, col_num);\n    assert.equal(null, error_msg);\n    assert.equal(\"Be careful, cursor at line 2 has a double quote is in proximity.\", warning_msg);\n    expected_selections = [\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(0, 5), new VscodePositionTestDouble(0, 5)),\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(1, 4), new VscodePositionTestDouble(1, 4)),\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(2, 5), new VscodePositionTestDouble(2, 5)),\n    ];\n    assert.deepEqual(expected_selections, selections);\n\n    // Test with \"ce_after\" and a double quote in proximity.\n    doc_lines = [\n        'type,weight,color',\n        'car,\"100\",yellow',\n        'ship,20000,red'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = ',';\n    policy = 'quoted';\n    edit_mode = 'ce_after';\n    col_num = 1; // 0-based.\n    [selections, error_msg, warning_msg] = rainbow_utils.generate_column_edit_selections(vscode_test_double, active_doc, delim, policy, comment_prefix, edit_mode, col_num);\n    assert.equal(null, error_msg);\n    assert.equal(\"Be careful, cursor at line 2 has a double quote is in proximity.\", warning_msg);\n    expected_selections = [\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(0, 11), new VscodePositionTestDouble(0, 11)),\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(1, 9), new VscodePositionTestDouble(1, 9)),\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(2, 10), new VscodePositionTestDouble(2, 10)),\n    ];\n    assert.deepEqual(expected_selections, selections);\n\n    // Test with \"ce_select\" and an empty field.\n    doc_lines = [\n        'type\\tweight\\tcolor',\n        'car\\t\\tyellow',\n        'ship\\t20000\\tred'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = '\\t';\n    policy = 'simple';\n    edit_mode = 'ce_select';\n    col_num = 1; // 0-based.\n    [selections, error_msg, warning_msg] = rainbow_utils.generate_column_edit_selections(vscode_test_double, active_doc, delim, policy, comment_prefix, edit_mode, col_num);\n    assert.equal(null, error_msg);\n    assert.equal(\"Be careful, Field 2 at line 2 is empty.\", warning_msg);\n    expected_selections = [\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(0, 5), new VscodePositionTestDouble(0, 11)),\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(1, 4), new VscodePositionTestDouble(1, 4)),\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(2, 5), new VscodePositionTestDouble(2, 10)),\n    ];\n    assert.deepEqual(expected_selections, selections);\n\n    // Test with \"ce_after\", double quote in proximity and simple policy.\n    doc_lines = [\n        'type|weight|color',\n        'car|\"100\"|yellow',\n        'ship|20000|red'\n    ];\n    active_doc = new VscodeDocumentTestDouble(doc_lines);\n    comment_prefix = '#';\n    delim = '|';\n    policy = 'simple';\n    edit_mode = 'ce_after';\n    col_num = 1; // 0-based.\n    [selections, error_msg, warning_msg] = rainbow_utils.generate_column_edit_selections(vscode_test_double, active_doc, delim, policy, comment_prefix, edit_mode, col_num);\n    assert.equal(null, error_msg);\n    assert.equal(null, warning_msg);\n    expected_selections = [\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(0, 11), new VscodePositionTestDouble(0, 11)),\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(1, 9), new VscodePositionTestDouble(1, 9)),\n        new VscodeSelectionTestDouble(new VscodePositionTestDouble(2, 10), new VscodePositionTestDouble(2, 10)),\n    ];\n    assert.deepEqual(expected_selections, selections);\n}\n\n\nfunction test_all() {\n    test_offsets_calculation();\n    test_adjusted_length();\n    test_reconcile_single();\n    test_reconcile_multiple();\n    test_generate_inlay_hints();\n    test_calc_column_stats_for_fragment();\n    test_align_stats();\n    test_field_align();\n    test_rfc_field_align();\n    test_align_columns();\n    test_shrink_columns();\n    test_calc_column_stats();\n    test_parse_document_records();\n    test_parse_document_range_rfc();\n    test_parse_document_range_single_line();\n    test_is_opening_rfc_line();\n    test_sample_preview_records_from_context();\n    test_show_lint_status_bar_button();\n    test_get_cursor_position_info();\n    test_record_comment_merger();\n    test_generate_column_edit_selections();\n}\n\nexports.test_all = test_all;\nexports.VscodePositionTestDouble = VscodePositionTestDouble;\nexports.VscodeRangeTestDouble = VscodeRangeTestDouble;\nexports.VscodeDocumentTestDouble = VscodeDocumentTestDouble;\nexports.vscode_test_double = vscode_test_double;\n","'use strict';\n\nvar hasToStringTag = require('has-tostringtag/shams')();\nvar callBound = require('call-bound');\n\nvar $toString = callBound('Object.prototype.toString');\n\n/** @type {import('.')} */\nvar isStandardArguments = function isArguments(value) {\n\tif (\n\t\thasToStringTag\n\t\t&& value\n\t\t&& typeof value === 'object'\n\t\t&& Symbol.toStringTag in value\n\t) {\n\t\treturn false;\n\t}\n\treturn $toString(value) === '[object Arguments]';\n};\n\n/** @type {import('.')} */\nvar isLegacyArguments = function isArguments(value) {\n\tif (isStandardArguments(value)) {\n\t\treturn true;\n\t}\n\treturn value !== null\n\t\t&& typeof value === 'object'\n\t\t&& 'length' in value\n\t\t&& typeof value.length === 'number'\n\t\t&& value.length >= 0\n\t\t&& $toString(value) !== '[object Array]'\n\t\t&& 'callee' in value\n\t\t&& $toString(value.callee) === '[object Function]';\n};\n\nvar supportsStandardArguments = (function () {\n\treturn isStandardArguments(arguments);\n}());\n\n// @ts-expect-error TODO make this not error\nisStandardArguments.isLegacyArguments = isLegacyArguments; // for tests\n\n/** @type {import('.')} */\nmodule.exports = supportsStandardArguments ? isStandardArguments : isLegacyArguments;\n","'use strict';\n\nvar define = require('define-properties');\nvar callBind = require('call-bind');\n\nvar implementation = require('./implementation');\nvar getPolyfill = require('./polyfill');\nvar shim = require('./shim');\n\nvar polyfill = callBind(getPolyfill(), Object);\n\ndefine(polyfill, {\n\tgetPolyfill: getPolyfill,\n\timplementation: implementation,\n\tshim: shim\n});\n\nmodule.exports = polyfill;\n","'use strict';\n\n/** @type {import('./min')} */\nmodule.exports = Math.min;\n","'use strict';\n\n/** @type {import('./syntax')} */\nmodule.exports = SyntaxError;\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar callBind = require('./');\n\nvar $indexOf = callBind(GetIntrinsic('String.prototype.indexOf'));\n\nmodule.exports = function callBoundIntrinsic(name, allowMissing) {\n\tvar intrinsic = GetIntrinsic(name, !!allowMissing);\n\tif (typeof intrinsic === 'function' && $indexOf(name, '.prototype.') > -1) {\n\t\treturn callBind(intrinsic);\n\t}\n\treturn intrinsic;\n};\n","'use strict';\n\nvar callBound = require('call-bound');\nvar safeRegexTest = require('safe-regex-test');\nvar isFnRegex = safeRegexTest(/^\\s*(?:function)?\\*/);\nvar hasToStringTag = require('has-tostringtag/shams')();\nvar getProto = require('get-proto');\n\nvar toStr = callBound('Object.prototype.toString');\nvar fnToStr = callBound('Function.prototype.toString');\n\nvar getGeneratorFunc = function () { // eslint-disable-line consistent-return\n\tif (!hasToStringTag) {\n\t\treturn false;\n\t}\n\ttry {\n\t\treturn Function('return function*() {}')();\n\t} catch (e) {\n\t}\n};\n/** @type {undefined | false | null | GeneratorFunctionConstructor} */\nvar GeneratorFunction;\n\n/** @type {import('.')} */\nmodule.exports = function isGeneratorFunction(fn) {\n\tif (typeof fn !== 'function') {\n\t\treturn false;\n\t}\n\tif (isFnRegex(fnToStr(fn))) {\n\t\treturn true;\n\t}\n\tif (!hasToStringTag) {\n\t\tvar str = toStr(fn);\n\t\treturn str === '[object GeneratorFunction]';\n\t}\n\tif (!getProto) {\n\t\treturn false;\n\t}\n\tif (typeof GeneratorFunction === 'undefined') {\n\t\tvar generatorFunc = getGeneratorFunc();\n\t\tGeneratorFunction = generatorFunc\n\t\t\t// eslint-disable-next-line no-extra-parens\n\t\t\t? /** @type {GeneratorFunctionConstructor} */ (getProto(generatorFunc))\n\t\t\t: false;\n\t}\n\treturn getProto(fn) === GeneratorFunction;\n};\n","'use strict';\n\n// modified from https://github.com/es-shims/es6-shim\nvar objectKeys = require('object-keys');\nvar hasSymbols = require('has-symbols/shams')();\nvar callBound = require('call-bound');\nvar $Object = require('es-object-atoms');\nvar $push = callBound('Array.prototype.push');\nvar $propIsEnumerable = callBound('Object.prototype.propertyIsEnumerable');\nvar originalGetSymbols = hasSymbols ? $Object.getOwnPropertySymbols : null;\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function assign(target, source1) {\n\tif (target == null) { throw new TypeError('target must be an object'); }\n\tvar to = $Object(target); // step 1\n\tif (arguments.length === 1) {\n\t\treturn to; // step 2\n\t}\n\tfor (var s = 1; s < arguments.length; ++s) {\n\t\tvar from = $Object(arguments[s]); // step 3.a.i\n\n\t\t// step 3.a.ii:\n\t\tvar keys = objectKeys(from);\n\t\tvar getSymbols = hasSymbols && ($Object.getOwnPropertySymbols || originalGetSymbols);\n\t\tif (getSymbols) {\n\t\t\tvar syms = getSymbols(from);\n\t\t\tfor (var j = 0; j < syms.length; ++j) {\n\t\t\t\tvar key = syms[j];\n\t\t\t\tif ($propIsEnumerable(from, key)) {\n\t\t\t\t\t$push(keys, key);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// step 3.a.iii:\n\t\tfor (var i = 0; i < keys.length; ++i) {\n\t\t\tvar nextKey = keys[i];\n\t\t\tif ($propIsEnumerable(from, nextKey)) { // step 3.a.iii.2\n\t\t\t\tvar propValue = from[nextKey]; // step 3.a.iii.2.a\n\t\t\t\tto[nextKey] = propValue; // step 3.a.iii.2.b\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to; // step 4\n};\n","'use strict';\n\nvar keys = require('object-keys');\nvar hasSymbols = typeof Symbol === 'function' && typeof Symbol('foo') === 'symbol';\n\nvar toStr = Object.prototype.toString;\nvar concat = Array.prototype.concat;\nvar defineDataProperty = require('define-data-property');\n\nvar isFunction = function (fn) {\n\treturn typeof fn === 'function' && toStr.call(fn) === '[object Function]';\n};\n\nvar supportsDescriptors = require('has-property-descriptors')();\n\nvar defineProperty = function (object, name, value, predicate) {\n\tif (name in object) {\n\t\tif (predicate === true) {\n\t\t\tif (object[name] === value) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else if (!isFunction(predicate) || !predicate()) {\n\t\t\treturn;\n\t\t}\n\t}\n\n\tif (supportsDescriptors) {\n\t\tdefineDataProperty(object, name, value, true);\n\t} else {\n\t\tdefineDataProperty(object, name, value);\n\t}\n};\n\nvar defineProperties = function (object, map) {\n\tvar predicates = arguments.length > 2 ? arguments[2] : {};\n\tvar props = keys(map);\n\tif (hasSymbols) {\n\t\tprops = concat.call(props, Object.getOwnPropertySymbols(map));\n\t}\n\tfor (var i = 0; i < props.length; i += 1) {\n\t\tdefineProperty(object, props[i], map[props[i]], predicates[props[i]]);\n\t}\n};\n\ndefineProperties.supportsDescriptors = !!supportsDescriptors;\n\nmodule.exports = defineProperties;\n","'use strict';\n\n/** @type {import('./Reflect.getPrototypeOf')} */\nmodule.exports = (typeof Reflect !== 'undefined' && Reflect.getPrototypeOf) || null;\n","'use strict';\n\nvar keysShim;\nif (!Object.keys) {\n\t// modified from https://github.com/es-shims/es5-shim\n\tvar has = Object.prototype.hasOwnProperty;\n\tvar toStr = Object.prototype.toString;\n\tvar isArgs = require('./isArguments'); // eslint-disable-line global-require\n\tvar isEnumerable = Object.prototype.propertyIsEnumerable;\n\tvar hasDontEnumBug = !isEnumerable.call({ toString: null }, 'toString');\n\tvar hasProtoEnumBug = isEnumerable.call(function () {}, 'prototype');\n\tvar dontEnums = [\n\t\t'toString',\n\t\t'toLocaleString',\n\t\t'valueOf',\n\t\t'hasOwnProperty',\n\t\t'isPrototypeOf',\n\t\t'propertyIsEnumerable',\n\t\t'constructor'\n\t];\n\tvar equalsConstructorPrototype = function (o) {\n\t\tvar ctor = o.constructor;\n\t\treturn ctor && ctor.prototype === o;\n\t};\n\tvar excludedKeys = {\n\t\t$applicationCache: true,\n\t\t$console: true,\n\t\t$external: true,\n\t\t$frame: true,\n\t\t$frameElement: true,\n\t\t$frames: true,\n\t\t$innerHeight: true,\n\t\t$innerWidth: true,\n\t\t$onmozfullscreenchange: true,\n\t\t$onmozfullscreenerror: true,\n\t\t$outerHeight: true,\n\t\t$outerWidth: true,\n\t\t$pageXOffset: true,\n\t\t$pageYOffset: true,\n\t\t$parent: true,\n\t\t$scrollLeft: true,\n\t\t$scrollTop: true,\n\t\t$scrollX: true,\n\t\t$scrollY: true,\n\t\t$self: true,\n\t\t$webkitIndexedDB: true,\n\t\t$webkitStorageInfo: true,\n\t\t$window: true\n\t};\n\tvar hasAutomationEqualityBug = (function () {\n\t\t/* global window */\n\t\tif (typeof window === 'undefined') { return false; }\n\t\tfor (var k in window) {\n\t\t\ttry {\n\t\t\t\tif (!excludedKeys['$' + k] && has.call(window, k) && window[k] !== null && typeof window[k] === 'object') {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tequalsConstructorPrototype(window[k]);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}());\n\tvar equalsConstructorPrototypeIfNotBuggy = function (o) {\n\t\t/* global window */\n\t\tif (typeof window === 'undefined' || !hasAutomationEqualityBug) {\n\t\t\treturn equalsConstructorPrototype(o);\n\t\t}\n\t\ttry {\n\t\t\treturn equalsConstructorPrototype(o);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tkeysShim = function keys(object) {\n\t\tvar isObject = object !== null && typeof object === 'object';\n\t\tvar isFunction = toStr.call(object) === '[object Function]';\n\t\tvar isArguments = isArgs(object);\n\t\tvar isString = isObject && toStr.call(object) === '[object String]';\n\t\tvar theKeys = [];\n\n\t\tif (!isObject && !isFunction && !isArguments) {\n\t\t\tthrow new TypeError('Object.keys called on a non-object');\n\t\t}\n\n\t\tvar skipProto = hasProtoEnumBug && isFunction;\n\t\tif (isString && object.length > 0 && !has.call(object, 0)) {\n\t\t\tfor (var i = 0; i < object.length; ++i) {\n\t\t\t\ttheKeys.push(String(i));\n\t\t\t}\n\t\t}\n\n\t\tif (isArguments && object.length > 0) {\n\t\t\tfor (var j = 0; j < object.length; ++j) {\n\t\t\t\ttheKeys.push(String(j));\n\t\t\t}\n\t\t} else {\n\t\t\tfor (var name in object) {\n\t\t\t\tif (!(skipProto && name === 'prototype') && has.call(object, name)) {\n\t\t\t\t\ttheKeys.push(String(name));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (hasDontEnumBug) {\n\t\t\tvar skipConstructor = equalsConstructorPrototypeIfNotBuggy(object);\n\n\t\t\tfor (var k = 0; k < dontEnums.length; ++k) {\n\t\t\t\tif (!(skipConstructor && dontEnums[k] === 'constructor') && has.call(object, dontEnums[k])) {\n\t\t\t\t\ttheKeys.push(dontEnums[k]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn theKeys;\n\t};\n}\nmodule.exports = keysShim;\n","'use strict';\n\n/** @type {import('./floor')} */\nmodule.exports = Math.floor;\n","(function(exports){\n// The magic line above is to make the module both browser and Node compatible, see https://stackoverflow.com/questions/3225251/how-can-i-share-code-between-node-js-and-the-browser\n\n// This module works with records only. It is CSV-agnostic.\n// Do not add CSV-related logic or variables/functions/objects like \"delim\", \"separator\" etc\n\n\nclass RbqlParsingError extends Error {}\nclass RbqlRuntimeError extends Error {}\nclass AssertionError extends Error {}\nclass RbqlIOHandlingError extends Error {}\n\n\nclass InternalBadFieldError extends Error {\n    constructor(bad_idx, ...params) {\n        super(...params);\n        this.bad_idx = bad_idx;\n    }\n}\n\n\nfunction assert(condition, message=null) {\n    if (!condition) {\n        if (!message) {\n            message = 'Assertion error';\n        }\n        throw new AssertionError(message);\n    }\n}\n\n\nfunction replace_all(src, search, replacement) {\n    return src.split(search).join(replacement);\n}\n\n\nclass RBQLContext {\n    constructor(query_text, input_iterator, output_writer, user_init_code) {\n        this.query_text = query_text;\n        this.input_iterator = input_iterator;\n        this.writer = output_writer;\n        this.user_init_code = user_init_code;\n\n        this.unnest_list = null;\n        this.top_count = null;\n\n        this.like_regex_cache = new Map();\n\n        this.sort_key_expression = null;\n\n        this.aggregation_stage = 0;\n        this.aggregation_key_expression = null;\n        this.functional_aggregators = [];\n\n        this.join_map_impl = null;\n        this.join_map = null;\n        this.lhs_join_var_expression = null;\n\n        this.where_expression = null;\n\n        this.select_expression = null;\n\n        this.update_expressions = null;\n\n        this.variables_init_code = null;\n    }\n}\n\nvar query_context = null; // Needs to be global for MIN(), MAX(), etc functions. TODO find a way to make it local.\n\n\nconst wrong_aggregation_usage_error = 'Usage of RBQL aggregation functions inside JavaScript expressions is not allowed, see the docs';\nconst RBQL_VERSION = '0.27.0';\n\n\nfunction check_if_brackets_match(opening_bracket, closing_bracket) {\n    return (opening_bracket == '[' && closing_bracket == ']') || (opening_bracket == '(' && closing_bracket == ')') || (opening_bracket == '{' && closing_bracket == '}');\n}\n\n\nfunction parse_root_bracket_level_text_spans(select_expression) {\n    let text_spans = []; // parts of text separated by commas at the root parenthesis level\n    let last_pos = 0;\n    let bracket_stack = [];\n    for (let i = 0; i < select_expression.length; i++) {\n        let cur_char = select_expression[i];\n        if (cur_char == ',' && bracket_stack.length == 0) {\n            text_spans.push(select_expression.substring(last_pos, i));\n            last_pos = i + 1;\n        } else if (['[', '{', '('].indexOf(cur_char) != -1) {\n            bracket_stack.push(cur_char);\n        } else if ([']', '}', ')'].indexOf(cur_char) != -1) {\n            if (bracket_stack.length && check_if_brackets_match(bracket_stack[bracket_stack.length - 1], cur_char)) {\n                bracket_stack.pop();\n            } else {\n                throw new RbqlParsingError(`Unable to parse column headers in SELECT expression: No matching opening bracket for closing \"${cur_char}\"`);\n            }\n        }\n    }\n    if (bracket_stack.length) {\n        throw new RbqlParsingError(`Unable to parse column headers in SELECT expression: No matching closing bracket for opening \"${bracket_stack[0]}\"`);\n    }\n    text_spans.push(select_expression.substring(last_pos, select_expression.length));\n    text_spans = text_spans.map(span => span.trim());\n    return text_spans;\n}\n\n\nfunction unquote_string(quoted_str) {\n    // It's possible to use eval here to unqoute the quoted_column_name, but it would be a little barbaric, let's do it manually instead\n    if (!quoted_str || quoted_str.length < 2)\n        return null;\n    if (quoted_str[0] == \"'\" && quoted_str[quoted_str.length - 1] == \"'\") {\n        return quoted_str.substring(1, quoted_str.length - 1).replace(/\\\\'/g, \"'\").replace(/\\\\\\\\/g, \"\\\\\");\n    } else if (quoted_str[0] == '\"' && quoted_str[quoted_str.length - 1] == '\"') {\n        return quoted_str.substring(1, quoted_str.length - 1).replace(/\\\\\"/g, '\"').replace(/\\\\\\\\/g, \"\\\\\");\n    } else {\n        return null;\n    }\n}\n\n\nfunction column_info_from_text_span(text_span, string_literals) {\n    // This function is a rough equivalent of \"column_info_from_node()\" function in python version of RBQL\n    text_span = text_span.trim();\n    let rbql_star_marker = '__RBQL_INTERNAL_STAR';\n    let simple_var_match = /^[_a-zA-Z][_a-zA-Z0-9]*$/.exec(text_span);\n    let attribute_match = /^([ab])\\.([_a-zA-Z][_a-zA-Z0-9]*)$/.exec(text_span);\n    let subscript_int_match = /^([ab])\\[([0-9]+)\\]$/.exec(text_span);\n    let subscript_str_match = /^([ab])\\[___RBQL_STRING_LITERAL([0-9]+)___\\]$/.exec(text_span);\n    let as_alias_match = /^(.*) (as|AS) +([a-zA-Z][a-zA-Z0-9_]*) *$/.exec(text_span);\n    if (as_alias_match !== null) {\n        return {table_name: null, column_index: null, column_name: null, is_star: false, alias_name: as_alias_match[3]};\n    }\n    if (simple_var_match !== null) {\n        if (text_span == rbql_star_marker)\n            return {table_name: null, column_index: null, column_name: null, is_star: true, alias_name: null};\n        if (text_span.startsWith('___RBQL_STRING_LITERAL'))\n            return null;\n        let match = /^([ab])([0-9]+)$/.exec(text_span);\n        if (match !== null) {\n            return {table_name: match[1], column_index: parseInt(match[2]) - 1, column_name: null, is_star: false, alias_name: null};\n        }\n        // Some examples for this branch: NR, NF\n        return {table_name: null, column_index: null, column_name: text_span, is_star: false, alias_name: null};\n    } else if (attribute_match !== null) {\n        let table_name = attribute_match[1];\n        let column_name = attribute_match[2];\n        if (column_name == rbql_star_marker) {\n            return {table_name: table_name, column_index: null, column_name: null, is_star: true, alias_name: null};\n        }\n        return {table_name: null, column_index: null, column_name: column_name, is_star: false, alias_name: null};\n    } else if (subscript_int_match != null) {\n        let table_name = subscript_int_match[1];\n        let column_index = parseInt(subscript_int_match[2]) - 1;\n        return {table_name: table_name, column_index: column_index, column_name: null, is_star: false, alias_name: null};\n    } else if (subscript_str_match != null) {\n        let table_name = subscript_str_match[1];\n        let replaced_string_literal_id = subscript_str_match[2];\n        if (replaced_string_literal_id < string_literals.length) {\n            let quoted_column_name = string_literals[replaced_string_literal_id];\n            let unquoted_column_name = unquote_string(quoted_column_name);\n            if (unquoted_column_name !== null && unquoted_column_name !== undefined) {\n                return {table_name: null, column_index: null, column_name: unquoted_column_name, is_star: false, alias_name: null};\n            }\n        }\n    }\n    return null;\n}\n\n\nfunction adhoc_parse_select_expression_to_column_infos(select_expression, string_literals) {\n    // It is acceptable for the algorithm to provide null column name when it could be theorethically possible to deduce the name.\n    // I.e. this algorithm guarantees precision but doesn't guarantee completeness in all theorethically possible queries.\n    // Although the algorithm should be complete in all practical scenarios, i.e. it should be hard to come up with the query that doesn't produce complete set of column names.\n    // The null column name just means that the output column will be named as col{i}, so the failure to detect the proper column name can be tolerated.\n    // Specifically this function guarantees the following:\n    // 1. The number of column_infos is correct and will match the number of fields in each record in the output - otherwise the exception should be thrown\n    // 2. If column_info at pos j is not null, it is guaranteed to correctly represent that column name in the output\n    let text_spans = parse_root_bracket_level_text_spans(select_expression);\n    let column_infos = text_spans.map(ts => column_info_from_text_span(ts, string_literals));\n    return column_infos;\n}\n\n\nfunction stable_compare(a, b) {\n    for (var i = 0; i < a.length; i++) {\n        if (a[i] !== b[i])\n            return a[i] < b[i] ? -1 : 1;\n    }\n}\n\n\nfunction safe_get(record, idx) {\n    return idx < record.length ? record[idx] : null;\n}\n\n\nfunction safe_join_get(record, idx) {\n    if (idx < record.length) {\n        return record[idx];\n    }\n    throw new InternalBadFieldError(idx);\n}\n\n\nfunction safe_set(record, idx, value) {\n    if (idx < record.length) {\n        record[idx] = value;\n    } else {\n        throw new InternalBadFieldError(idx);\n    }\n}\n\n\nfunction regexp_escape(text) {\n    // From here: https://stackoverflow.com/a/6969486/2898283\n    return text.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');  // $& means the whole matched text\n}\n\n\nfunction like_to_regex(pattern) {\n    let p = 0;\n    let i = 0;\n    let converted = '';\n    while (i < pattern.length) {\n        if (pattern.charAt(i) == '_' || pattern.charAt(i) == '%') {\n            converted += regexp_escape(pattern.substring(p, i));\n            p = i + 1;\n            if (pattern.charAt(i) == '_') {\n                converted += '.';\n            } else {\n                converted += '.*';\n            }\n        }\n        i += 1;\n    }\n    converted += regexp_escape(pattern.substring(p, i));\n    return '^' + converted + '$';\n}\n\n\nfunction like(text, pattern) {\n    let matcher = query_context.like_regex_cache.get(pattern);\n    if (matcher === undefined) {\n        matcher = new RegExp(like_to_regex(pattern));\n        query_context.like_regex_cache.set(pattern, matcher);\n    }\n    return matcher.test(text);\n}\nconst LIKE = like;\n\n\nclass RBQLAggregationToken {\n    constructor(marker_id, value) {\n        this.marker_id = marker_id;\n        this.value = value;\n    }\n\n    toString() {\n        throw new RbqlParsingError(wrong_aggregation_usage_error);\n    }\n}\n\n\nclass UnnestMarker {}\n\n\nfunction UNNEST(vals) {\n    if (query_context.unnest_list !== null) {\n        // Technically we can support multiple UNNEST's but the implementation/algorithm is more complex and just doesn't worth it\n        throw new RbqlParsingError('Only one UNNEST is allowed per query');\n    }\n    query_context.unnest_list = vals;\n    return new UnnestMarker();\n}\nconst unnest = UNNEST;\nconst Unnest = UNNEST;\nconst UNFOLD = UNNEST; // \"UNFOLD\" is deprecated, just for backward compatibility\n\n\nfunction parse_number(val) {\n    // We can do a more pedantic number test like `/^ *-{0,1}[0-9]+\\.{0,1}[0-9]* *$/.test(val)`, but  user will probably use just Number(val) or parseInt/parseFloat\n    let result = Number(val);\n    if (isNaN(result)) {\n        throw new RbqlRuntimeError(`Unable to convert value \"${val}\" to a number. MIN, MAX, SUM, AVG, MEDIAN and VARIANCE aggregate functions convert their string arguments to numeric values`);\n    }\n    return result;\n}\n\n\nclass AnyValueAggregator {\n    constructor() {\n        this.stats = new Map();\n    }\n\n    increment(key, val) {\n        var cur_aggr = this.stats.get(key);\n        if (cur_aggr === undefined) {\n            this.stats.set(key, val);\n        }\n    }\n\n    get_final(key) {\n        return this.stats.get(key);\n    }\n}\n\n\nclass MinAggregator {\n    constructor() {\n        this.stats = new Map();\n    }\n\n    increment(key, val) {\n        val = parse_number(val);\n        var cur_aggr = this.stats.get(key);\n        if (cur_aggr === undefined) {\n            this.stats.set(key, val);\n        } else {\n            this.stats.set(key, Math.min(cur_aggr, val));\n        }\n    }\n\n    get_final(key) {\n        return this.stats.get(key);\n    }\n}\n\n\nclass MaxAggregator {\n    constructor() {\n        this.stats = new Map();\n    }\n\n    increment(key, val) {\n        val = parse_number(val);\n        var cur_aggr = this.stats.get(key);\n        if (cur_aggr === undefined) {\n            this.stats.set(key, val);\n        } else {\n            this.stats.set(key, Math.max(cur_aggr, val));\n        }\n    }\n\n    get_final(key) {\n        return this.stats.get(key);\n    }\n}\n\n\nclass SumAggregator {\n    constructor() {\n        this.stats = new Map();\n    }\n\n    increment(key, val) {\n        val = parse_number(val);\n        var cur_aggr = this.stats.get(key);\n        if (cur_aggr === undefined) {\n            this.stats.set(key, val);\n        } else {\n            this.stats.set(key, cur_aggr + val);\n        }\n    }\n\n    get_final(key) {\n        return this.stats.get(key);\n    }\n}\n\n\nclass AvgAggregator {\n    constructor() {\n        this.stats = new Map();\n    }\n\n    increment(key, val) {\n        val = parse_number(val);\n        var cur_aggr = this.stats.get(key);\n        if (cur_aggr === undefined) {\n            this.stats.set(key, [val, 1]);\n        } else {\n            var cur_sum = cur_aggr[0];\n            var cur_cnt = cur_aggr[1];\n            this.stats.set(key, [cur_sum + val, cur_cnt + 1]);\n        }\n    }\n\n    get_final(key) {\n        var cur_aggr = this.stats.get(key);\n        var cur_sum = cur_aggr[0];\n        var cur_cnt = cur_aggr[1];\n        var avg = cur_sum / cur_cnt;\n        return avg;\n    }\n}\n\n\nclass VarianceAggregator {\n    constructor() {\n        this.stats = new Map();\n    }\n\n    increment(key, val) {\n        val = parse_number(val);\n        var cur_aggr = this.stats.get(key);\n        if (cur_aggr === undefined) {\n            this.stats.set(key, [val, val * val, 1]);\n        } else {\n            var cur_sum = cur_aggr[0];\n            var cur_sum_sq = cur_aggr[1];\n            var cur_cnt = cur_aggr[2];\n            this.stats.set(key, [cur_sum + val, cur_sum_sq + val * val, cur_cnt + 1]);\n        }\n    }\n\n    get_final(key) {\n        var cur_aggr = this.stats.get(key);\n        var cur_sum = cur_aggr[0];\n        var cur_sum_sq = cur_aggr[1];\n        var cur_cnt = cur_aggr[2];\n        var avg_val = cur_sum / cur_cnt;\n        var variance = cur_sum_sq / cur_cnt - avg_val * avg_val;\n        return variance;\n    }\n}\n\n\nclass MedianAggregator {\n    constructor() {\n        this.stats = new Map();\n    }\n\n    increment(key, val) {\n        val = parse_number(val);\n        var cur_aggr = this.stats.get(key);\n        if (cur_aggr === undefined) {\n            this.stats.set(key, [val]);\n        } else {\n            cur_aggr.push(val);\n        }\n    }\n\n    get_final(key) {\n        var cur_aggr = this.stats.get(key);\n        cur_aggr.sort(function(a, b) { return a - b; });\n        var m = Math.floor(cur_aggr.length / 2);\n        if (cur_aggr.length % 2) {\n            return cur_aggr[m];\n        } else {\n            return (cur_aggr[m - 1] + cur_aggr[m]) / 2.0;\n        }\n    }\n}\n\n\nclass CountAggregator {\n    constructor() {\n        this.stats = new Map();\n    }\n\n    increment(key, val) {\n        var cur_aggr = this.stats.get(key);\n        if (cur_aggr === undefined) {\n            this.stats.set(key, 1);\n        } else {\n            this.stats.set(key, cur_aggr + 1);\n        }\n    }\n\n    get_final(key) {\n        return this.stats.get(key);\n    }\n}\n\n\nclass ArrayAggAggregator {\n    constructor(post_proc=null) {\n        this.post_proc = post_proc;\n        this.stats = new Map();\n    }\n\n    increment(key, val) {\n        let cur_aggr = this.stats.get(key);\n        if (cur_aggr === undefined) {\n            this.stats.set(key, [val]);\n        } else {\n            cur_aggr.push(val);\n        }\n    }\n\n    get_final(key) {\n        let cur_aggr = this.stats.get(key);\n        if (this.post_proc === null)\n            return cur_aggr;\n        return this.post_proc(cur_aggr);\n    }\n}\n\n\nclass ConstGroupVerifier {\n    constructor(output_index) {\n        this.output_index = output_index;\n        this.const_values = new Map();\n    }\n\n    increment(key, value) {\n        var old_value = this.const_values.get(key);\n        if (old_value === undefined) {\n            this.const_values.set(key, value);\n        } else if (old_value != value) {\n            throw new RbqlRuntimeError(`Invalid aggregate expression: non-constant values in output column ${this.output_index + 1}. E.g. \"${old_value}\" and \"${value}\"`);\n        }\n    }\n\n    get_final(key) {\n        return this.const_values.get(key);\n    }\n}\n\n\nfunction init_aggregator(generator_name, val, post_proc=null) {\n    query_context.aggregation_stage = 1;\n    var res = new RBQLAggregationToken(query_context.functional_aggregators.length, val);\n    if (post_proc === null) {\n        query_context.functional_aggregators.push(new generator_name());\n    } else {\n        query_context.functional_aggregators.push(new generator_name(post_proc));\n    }\n    return res;\n}\n\nfunction ANY_VALUE(val) {\n    return query_context.aggregation_stage < 2 ? init_aggregator(AnyValueAggregator, val) : val;\n}\nconst any_value = ANY_VALUE;\nconst Any_value = ANY_VALUE;\n\nfunction MIN(val) {\n    return query_context.aggregation_stage < 2 ? init_aggregator(MinAggregator, val) : val;\n}\nconst min = MIN;\nconst Min = MIN;\n\nfunction MAX(val) {\n    return query_context.aggregation_stage < 2 ? init_aggregator(MaxAggregator, val) : val;\n}\nconst max = MAX;\nconst Max = MAX;\n\nfunction COUNT(val) {\n    return query_context.aggregation_stage < 2 ? init_aggregator(CountAggregator, 1) : 1;\n}\nconst count = COUNT;\nconst Count = COUNT;\n\nfunction SUM(val) {\n    return query_context.aggregation_stage < 2 ? init_aggregator(SumAggregator, val) : val;\n}\nconst sum = SUM;\nconst Sum = SUM;\n\nfunction AVG(val) {\n    return query_context.aggregation_stage < 2 ? init_aggregator(AvgAggregator, val) : val;\n}\nconst avg = AVG;\nconst Avg = AVG;\n\nfunction VARIANCE(val) {\n    return query_context.aggregation_stage < 2 ? init_aggregator(VarianceAggregator, val) : val;\n}\nconst variance = VARIANCE;\nconst Variance = VARIANCE;\n\nfunction MEDIAN(val) {\n    return query_context.aggregation_stage < 2 ? init_aggregator(MedianAggregator, val) : val;\n}\nconst median = MEDIAN;\nconst Median = MEDIAN;\n\nfunction ARRAY_AGG(val, post_proc=null) {\n    return query_context.aggregation_stage < 2 ? init_aggregator(ArrayAggAggregator, val, post_proc) : val;\n}\nconst array_agg = ARRAY_AGG;\nconst FOLD = ARRAY_AGG; // \"FOLD\" is deprecated, just for backward compatibility\n\n\nfunction add_to_set(dst_set, value) {\n    var len_before = dst_set.size;\n    dst_set.add(value);\n    return len_before != dst_set.size;\n}\n\n\nclass TopWriter {\n    constructor(subwriter, top_count) {\n        this.subwriter = subwriter;\n        this.NW = 0;\n        this.top_count = top_count;\n    }\n\n    async write(record) {\n        if (this.top_count !== null && this.NW >= this.top_count)\n            return false;\n        await this.subwriter.write(record);\n        this.NW += 1;\n        return true;\n    }\n\n    async finish() {\n        await this.subwriter.finish();\n    }\n}\n\n\nclass UniqWriter {\n    constructor(subwriter) {\n        this.subwriter = subwriter;\n        this.seen = new Set();\n    }\n\n    async write(record) {\n        if (!add_to_set(this.seen, JSON.stringify(record)))\n            return true;\n        if (!await this.subwriter.write(record))\n            return false;\n        return true;\n    }\n\n    async finish() {\n        await this.subwriter.finish();\n    }\n}\n\n\nclass UniqCountWriter {\n    constructor(subwriter) {\n        this.subwriter = subwriter;\n        this.records = new Map();\n    }\n\n    async write(record) {\n        var key = JSON.stringify(record);\n        var old_val = this.records.get(key);\n        if (old_val) {\n            old_val[0] += 1;\n        } else {\n            this.records.set(key, [1, record]);\n        }\n        return true;\n    }\n\n    async finish() {\n        for (var [key, value] of this.records) {\n            let [count, record] = value;\n            record.unshift(count);\n            if (!await this.subwriter.write(record))\n                break;\n        }\n        await this.subwriter.finish();\n    }\n}\n\n\nclass SortedWriter {\n    constructor(subwriter, reverse_sort) {\n        this.subwriter = subwriter;\n        this.reverse_sort = reverse_sort;\n        this.unsorted_entries = [];\n    }\n\n    async write(stable_entry) {\n        this.unsorted_entries.push(stable_entry);\n        return true;\n    }\n\n    async finish() {\n        var unsorted_entries = this.unsorted_entries;\n        unsorted_entries.sort(stable_compare);\n        if (this.reverse_sort)\n            unsorted_entries.reverse();\n        for (var i = 0; i < unsorted_entries.length; i++) {\n            var entry = unsorted_entries[i];\n            if (!await this.subwriter.write(entry[entry.length - 1]))\n                break;\n        }\n        await this.subwriter.finish();\n    }\n}\n\n\nclass AggregateWriter {\n    constructor(subwriter) {\n        this.subwriter = subwriter;\n        this.aggregators = [];\n        this.aggregation_keys = new Set();\n    }\n\n    async finish() {\n        var all_keys = Array.from(this.aggregation_keys);\n        all_keys.sort();\n        for (var i = 0; i < all_keys.length; i++) {\n            var key = all_keys[i];\n            var out_fields = [];\n            for (var ag of this.aggregators) {\n                out_fields.push(ag.get_final(key));\n            }\n            if (!await this.subwriter.write(out_fields))\n                break;\n        }\n        await this.subwriter.finish();\n    }\n}\n\n\nclass InnerJoiner {\n    constructor(join_map) {\n        this.join_map = join_map;\n    }\n\n    get_rhs(lhs_key) {\n        return this.join_map.get_join_records(lhs_key);\n    }\n}\n\n\nclass LeftJoiner {\n    constructor(join_map) {\n        this.join_map = join_map;\n        this.null_record = [[null, join_map.max_record_len, Array(join_map.max_record_len).fill(null)]];\n    }\n\n    get_rhs(lhs_key) {\n        let result = this.join_map.get_join_records(lhs_key);\n        if (result.length == 0) {\n            return this.null_record;\n        }\n        return result;\n    }\n}\n\n\nclass StrictLeftJoiner {\n    constructor(join_map) {\n        this.join_map = join_map;\n    }\n\n    get_rhs(lhs_key) {\n        let result = this.join_map.get_join_records(lhs_key);\n        if (result.length != 1) {\n            throw new RbqlRuntimeError('In \"STRICT LEFT JOIN\" each key in A must have exactly one match in B. Bad A key: \"' + lhs_key + '\"');\n        }\n        return result;\n    }\n}\n\n\nfunction select_except(src, except_fields) {\n    let result = [];\n    for (let i = 0; i < src.length; i++) {\n        if (except_fields.indexOf(i) == -1)\n            result.push(src[i]);\n    }\n    return result;\n}\n\n\nasync function select_simple(sort_key, NR, out_fields) {\n    if (query_context.sort_key_expression !== null) {\n        var sort_entry = sort_key.concat([NR, out_fields]);\n        if (!await query_context.writer.write(sort_entry))\n            return false;\n    } else {\n        if (!await query_context.writer.write(out_fields))\n            return false;\n    }\n    return true;\n}\n\n\nfunction select_aggregated(key, transparent_values) {\n    if (key !== null) {\n        key = JSON.stringify(key);\n    }\n    if (query_context.aggregation_stage === 1) {\n        if (!(query_context.writer instanceof TopWriter)) {\n            throw new RbqlParsingError('\"ORDER BY\", \"UPDATE\" and \"DISTINCT\" keywords are not allowed in aggregate queries');\n        }\n        query_context.writer = new AggregateWriter(query_context.writer);\n        let num_aggregators_found = 0;\n        for (var i = 0; i < transparent_values.length; i++) {\n            var trans_value = transparent_values[i];\n            if (trans_value instanceof RBQLAggregationToken) {\n                query_context.writer.aggregators.push(query_context.functional_aggregators[trans_value.marker_id]);\n                query_context.writer.aggregators[query_context.writer.aggregators.length - 1].increment(key, trans_value.value);\n                num_aggregators_found += 1;\n            } else {\n                query_context.writer.aggregators.push(new ConstGroupVerifier(query_context.writer.aggregators.length));\n                query_context.writer.aggregators[query_context.writer.aggregators.length - 1].increment(key, trans_value);\n            }\n        }\n        if (num_aggregators_found != query_context.functional_aggregators.length) {\n            throw new RbqlParsingError(wrong_aggregation_usage_error);\n        }\n        query_context.aggregation_stage = 2;\n    } else {\n        for (var i = 0; i < transparent_values.length; i++) {\n            var trans_value = transparent_values[i];\n            query_context.writer.aggregators[i].increment(key, trans_value);\n        }\n    }\n    query_context.writer.aggregation_keys.add(key);\n}\n\n\nasync function select_unnested(sort_key, NR, folded_fields) {\n    let out_fields = folded_fields.slice();\n    let unnest_pos = folded_fields.findIndex(val => val instanceof UnnestMarker);\n    for (var i = 0; i < query_context.unnest_list.length; i++) {\n        out_fields[unnest_pos] = query_context.unnest_list[i];\n        if (!await select_simple(sort_key, NR, out_fields.slice()))\n            return false;\n    }\n    return true;\n}\n\n\nconst PROCESS_SELECT_COMMON = `\n__RBQLMP__variables_init_code\nif (__RBQLMP__where_expression) {\n    let out_fields = __RBQLMP__select_expression;\n    if (query_context.aggregation_stage > 0) {\n        let key = __RBQLMP__aggregation_key_expression;\n        select_aggregated(key, out_fields);\n    } else {\n        let sort_key = [__RBQLMP__sort_key_expression];\n        if (query_context.unnest_list !== null) {\n            if (!await select_unnested(sort_key, NR, out_fields))\n                stop_flag = true;\n        } else {\n            if (!await select_simple(sort_key, NR, out_fields))\n                stop_flag = true;\n        }\n    }\n}\n`;\n\n\nconst PROCESS_SELECT_SIMPLE = `\nlet star_fields = record_a;\n__CODE__\n`;\n\n\nconst PROCESS_SELECT_JOIN = `\nlet join_matches = query_context.join_map.get_rhs(__RBQLMP__lhs_join_var_expression);\nfor (let join_match of join_matches) {\n    let [bNR, bNF, record_b] = join_match;\n    let star_fields = record_a.concat(record_b);\n    __CODE__\n    if (stop_flag)\n        break;\n}\n`;\n\n\nconst PROCESS_UPDATE_JOIN = `\nlet join_matches = query_context.join_map.get_rhs(__RBQLMP__lhs_join_var_expression);\nif (join_matches.length > 1)\n    throw new RbqlRuntimeError('More than one record in UPDATE query matched a key from the input table in the join table');\nlet record_b = null;\nlet bNR = null;\nlet bNF = null;\nif (join_matches.length == 1)\n    [bNR, bNF, record_b] = join_matches[0];\nlet up_fields = record_a;\n__RBQLMP__variables_init_code\nif (join_matches.length == 1 && (__RBQLMP__where_expression)) {\n    NU += 1;\n    __RBQLMP__update_expressions\n}\nif (!await query_context.writer.write(up_fields))\n    stop_flag = true;\n`;\n\n\nconst PROCESS_UPDATE_SIMPLE = `\nlet up_fields = record_a;\n__RBQLMP__variables_init_code\nif (__RBQLMP__where_expression) {\n    NU += 1;\n    __RBQLMP__update_expressions\n}\nif (!await query_context.writer.write(up_fields))\n    stop_flag = true;\n`;\n\n\nconst MAIN_LOOP_BODY = `\n__USER_INIT_CODE__\n\nlet NU = 0;\nlet NR = 0;\n\nlet stop_flag = false;\nwhile (!stop_flag) {\n    let record_a = await query_context.input_iterator.get_record();\n    if (record_a === null)\n        break;\n    NR += 1;\n    let NF = record_a.length;\n    query_context.unnest_list = null; // TODO optimize, don't need to set this every iteration\n    try {\n        __CODE__\n    } catch (e) {\n        if (e.constructor.name === 'InternalBadFieldError') {\n            throw new RbqlRuntimeError(\\`No \"a\\${e.bad_idx + 1}\" field at record \\${NR}\\`);\n        } else if (e.constructor.name === 'RbqlParsingError') {\n            throw(e);\n        } else {\n            throw new RbqlRuntimeError(\\`At record \\${NR}, Details: \\${e.message}\\`);\n        }\n    }\n}\n`;\n\n\nfunction embed_expression(parent_code, child_placeholder, child_expression) {\n    return replace_all(parent_code, child_placeholder, child_expression);\n}\n\n\nfunction embed_code(parent_code, child_placeholder, child_code) {\n    let parent_lines = parent_code.split('\\n');\n    let child_lines = child_code.split('\\n');\n    for (let i = 0; i < parent_lines.length; i++) {\n        let pos = parent_lines[i].indexOf(child_placeholder);\n        if (pos == -1)\n            continue;\n        assert(pos % 4 == 0);\n        let placeholder_indentation = parent_lines[i].substring(0, pos);\n        child_lines = child_lines.map(l => placeholder_indentation + l);\n        let result_lines = parent_lines.slice(0, i).concat(child_lines).concat(parent_lines.slice(i + 1));\n        return result_lines.join('\\n') + '\\n';\n    }\n    assert(false);\n}\n\n\nfunction generate_main_loop_code(query_context) {\n    let is_select_query = query_context.select_expression !== null;\n    let is_join_query = query_context.join_map !== null;\n    let where_expression = query_context.where_expression === null ? 'true' : query_context.where_expression;\n    let aggregation_key_expression = query_context.aggregation_key_expression === null ? 'null' : query_context.aggregation_key_expression;\n    let sort_key_expression = query_context.sort_key_expression === null ? 'null' : query_context.sort_key_expression;\n    let js_code = embed_code(MAIN_LOOP_BODY, '__USER_INIT_CODE__', query_context.user_init_code);\n    if (is_select_query) {\n        if (is_join_query) {\n            js_code = embed_code(embed_code(js_code, '__CODE__', PROCESS_SELECT_JOIN), '__CODE__', PROCESS_SELECT_COMMON);\n            js_code = embed_expression(js_code, '__RBQLMP__lhs_join_var_expression', query_context.lhs_join_var_expression);\n        } else {\n            js_code = embed_code(embed_code(js_code, '__CODE__', PROCESS_SELECT_SIMPLE), '__CODE__', PROCESS_SELECT_COMMON);\n        }\n        js_code = embed_code(js_code, '__RBQLMP__variables_init_code', query_context.variables_init_code);\n        js_code = embed_expression(js_code, '__RBQLMP__select_expression', query_context.select_expression);\n        js_code = embed_expression(js_code, '__RBQLMP__where_expression', where_expression);\n        js_code = embed_expression(js_code, '__RBQLMP__aggregation_key_expression', aggregation_key_expression);\n        js_code = embed_expression(js_code, '__RBQLMP__sort_key_expression', sort_key_expression);\n    } else {\n        if (is_join_query) {\n            js_code = embed_code(js_code, '__CODE__', PROCESS_UPDATE_JOIN);\n            js_code = embed_expression(js_code, '__RBQLMP__lhs_join_var_expression', query_context.lhs_join_var_expression);\n        } else {\n            js_code = embed_code(js_code, '__CODE__', PROCESS_UPDATE_SIMPLE);\n        }\n        js_code = embed_code(js_code, '__RBQLMP__variables_init_code', query_context.variables_init_code);\n        js_code = embed_code(js_code, '__RBQLMP__update_expressions', query_context.update_expressions);\n        js_code = embed_expression(js_code, '__RBQLMP__where_expression', where_expression);\n    }\n    return \"(async () => {\" + js_code + \"})()\";\n}\n\n\nasync function compile_and_run(query_context) {\n    let main_loop_body = generate_main_loop_code(query_context);\n    try {\n        let main_loop_promise = eval(main_loop_body);\n        await main_loop_promise;\n    } catch (e) {\n        if (e instanceof SyntaxError) {\n            // SyntaxError's from eval() function do not contain detailed explanation of what has caused the syntax error, so to guess what was wrong we can only use the original query\n            // v8 issue to fix eval: https://bugs.chromium.org/p/v8/issues/detail?id=2589\n            let lower_case_query = query_context.query_text.toLowerCase();\n            if (lower_case_query.indexOf(' having ') != -1)\n                throw new SyntaxError(e.message + \"\\nRBQL doesn't support \\\"HAVING\\\" keyword\");\n            if (lower_case_query.indexOf(' like ') != -1)\n                throw new SyntaxError(e.message + \"\\nRBQL doesn't support \\\"LIKE\\\" operator, use like() function instead e.g. ... WHERE like(a1, 'foo%bar') ... \"); // UT JSON\n            if (lower_case_query.indexOf(' from ') != -1)\n                throw new SyntaxError(e.message + \"\\nTip: If input table is defined by the environment, RBQL query should not have \\\"FROM\\\" keyword\"); // UT JSON\n            if (e && e.message && String(e.message).toLowerCase().indexOf('unexpected identifier') != -1) {\n                if (lower_case_query.indexOf(' and ') != -1)\n                    throw new SyntaxError(e.message + \"\\nDid you use 'and' keyword in your query?\\nJavaScript backend doesn't support 'and' keyword, use '&&' operator instead!\");\n                if (lower_case_query.indexOf(' or ') != -1)\n                    throw new SyntaxError(e.message + \"\\nDid you use 'or' keyword in your query?\\nJavaScript backend doesn't support 'or' keyword, use '||' operator instead!\");\n            }\n        }\n        if (e && e.message && e.message.indexOf('Received an instance of RBQLAggregationToken') != -1)\n            throw new RbqlParsingError(wrong_aggregation_usage_error);\n        throw e;\n    }\n}\n\n\nconst GROUP_BY = 'GROUP BY';\nconst UPDATE = 'UPDATE';\nconst SELECT = 'SELECT';\nconst JOIN = 'JOIN';\nconst INNER_JOIN = 'INNER JOIN';\nconst LEFT_JOIN = 'LEFT JOIN';\nconst LEFT_OUTER_JOIN = 'LEFT OUTER JOIN';\nconst STRICT_LEFT_JOIN = 'STRICT LEFT JOIN';\nconst ORDER_BY = 'ORDER BY';\nconst WHERE = 'WHERE';\nconst LIMIT = 'LIMIT';\nconst EXCEPT = 'EXCEPT';\nconst WITH = 'WITH';\n\n\nfunction get_ambiguous_error_msg(variable_name) {\n    return `Ambiguous variable name: \"${variable_name}\" is present both in input and in join tables`;\n}\n\n\nfunction get_all_matches(regexp, text) {\n    var result = [];\n    let match_obj = null;\n    while((match_obj = regexp.exec(text)) !== null) {\n        result.push(match_obj);\n    }\n    return result;\n}\n\n\nfunction str_strip(src) {\n    return src.replace(/^ +| +$/g, '');\n}\n\n\nfunction strip_comments(cline) {\n    cline = cline.trim();\n    if (cline.startsWith('//'))\n        return '';\n    return cline;\n}\n\n\nfunction combine_string_literals(backend_expression, string_literals) {\n    for (var i = 0; i < string_literals.length; i++) {\n        backend_expression = replace_all(backend_expression, `___RBQL_STRING_LITERAL${i}___`, string_literals[i]);\n    }\n    return backend_expression;\n}\n\n\nfunction parse_basic_variables(query_text, prefix, dst_variables_map) {\n    assert(prefix == 'a' || prefix == 'b');\n    let rgx = new RegExp(`(?:^|[^_a-zA-Z0-9])${prefix}([1-9][0-9]*)(?:$|(?=[^_a-zA-Z0-9]))`, 'g');\n    let matches = get_all_matches(rgx, query_text);\n    for (let i = 0; i < matches.length; i++) {\n        let field_num = parseInt(matches[i][1]);\n        dst_variables_map[prefix + String(field_num)] = {initialize: true, index: field_num - 1};\n    }\n}\n\n\nfunction parse_array_variables(query_text, prefix, dst_variables_map) {\n    assert(prefix == 'a' || prefix == 'b');\n    let rgx = new RegExp(`(?:^|[^_a-zA-Z0-9])${prefix}\\\\[([1-9][0-9]*)\\\\]`, 'g');\n    let matches = get_all_matches(rgx, query_text);\n    for (let i = 0; i < matches.length; i++) {\n        let field_num = parseInt(matches[i][1]);\n        dst_variables_map[`${prefix}[${field_num}]`] = {initialize: true, index: field_num - 1};\n    }\n}\n\n\nfunction js_string_escape_column_name(column_name, quote_char) {\n    column_name = column_name.replace(/\\\\/g, '\\\\\\\\');\n    column_name = column_name.replace(/\\n/g, '\\\\n');\n    column_name = column_name.replace(/\\r/g, '\\\\r');\n    column_name = column_name.replace(/\\t/g, '\\\\t');\n    if (quote_char === \"'\")\n        return column_name.replace(/'/g, \"\\\\'\");\n    if (quote_char === '\"')\n        return column_name.replace(/\"/g, '\\\\\"');\n    assert(quote_char === \"`\");\n    return column_name.replace(/`/g, \"\\\\`\");\n}\n\n\nfunction query_probably_has_dictionary_variable(query_text, column_name) {\n    let rgx = new RegExp('[-a-zA-Z0-9_:;+=!.,()%^#@&* ]+', 'g');\n    let continuous_name_segments = get_all_matches(rgx, column_name);\n    for (let continuous_segment of continuous_name_segments) {\n        if (query_text.indexOf(continuous_segment) == -1)\n            return false;\n    }\n    return true;\n}\n\n\nfunction parse_dictionary_variables(query_text, prefix, column_names, dst_variables_map) {\n    // The purpose of this algorithm is to minimize number of variables in varibale_map to improve performance, ideally it should be only variables from the query\n\n    // FIXME to prevent typos in attribute names either use query-based variable parsing which can properly handle back-tick strings or wrap \"a\" and \"b\" variables with ES6 Proxies https://stackoverflow.com/a/25658975/2898283\n    assert(prefix === 'a' || prefix === 'b');\n    let dict_test_rgx = new RegExp(`(?:^|[^_a-zA-Z0-9])${prefix}\\\\[`);\n    if (query_text.search(dict_test_rgx) == -1)\n        return;\n    for (let i = 0; i < column_names.length; i++) {\n        let column_name = column_names[i];\n        if (query_probably_has_dictionary_variable(query_text, column_name)) {\n            let escaped_column_name = js_string_escape_column_name(column_name, '\"');\n            dst_variables_map[`${prefix}[\"${escaped_column_name}\"]`] = {initialize: true, index: i};\n            escaped_column_name = js_string_escape_column_name(column_name, \"'\");\n            dst_variables_map[`${prefix}['${escaped_column_name}']`] = {initialize: false, index: i};\n            escaped_column_name = js_string_escape_column_name(column_name, \"`\");\n            dst_variables_map[`${prefix}[\\`${escaped_column_name}\\`]`] = {initialize: false, index: i};\n        }\n    }\n}\n\n\nfunction parse_attribute_variables(query_text, prefix, column_names, column_names_source, dst_variables_map) {\n    // The purpose of this algorithm is to minimize number of variables in varibale_map to improve performance, ideally it should be only variables from the query\n\n    assert(prefix === 'a' || prefix === 'b');\n    let rgx = new RegExp(`(?:^|[^_a-zA-Z0-9])${prefix}\\\\.([_a-zA-Z][_a-zA-Z0-9]*)`, 'g');\n    let matches = get_all_matches(rgx, query_text);\n    let column_names_from_query = matches.map(v => v[1]);\n    for (let column_name of column_names_from_query) {\n        let zero_based_idx = column_names.indexOf(column_name);\n        if (zero_based_idx != -1) {\n            dst_variables_map[`${prefix}.${column_name}`] = {initialize: true, index: zero_based_idx};\n        } else {\n            throw new RbqlParsingError(`Unable to find column \"${column_name}\" in ${prefix == 'a' ? 'input' : 'join'} ${column_names_source}`);\n        }\n    }\n}\n\n\nfunction map_variables_directly(query_text, column_names, dst_variables_map) {\n    for (let i = 0; i < column_names.length; i++) {\n        let column_name = column_names[i];\n        if ( /^[_a-zA-Z][_a-zA-Z0-9]*$/.exec(column_name) === null)\n            throw new RbqlIOHandlingError(`Unable to use column name \"${column_name}\" as RBQL/JS variable`);\n        if (query_text.indexOf(column_name) != -1)\n            dst_variables_map[column_name] = {initialize: true, index: i};\n    }\n}\n\n\nfunction ensure_no_ambiguous_variables(query_text, input_column_names, join_column_names) {\n    let join_column_names_set = new Set(join_column_names);\n    for (let column_name of input_column_names) {\n        if (join_column_names_set.has(column_name) && query_text.indexOf(column_name) != -1) // False positive is tolerable here\n            throw new RbqlParsingError(get_ambiguous_error_msg(column_name));\n    }\n}\n\n\nfunction parse_join_expression(src) {\n    src = str_strip(src);\n    const invalid_join_syntax_error = 'Invalid join syntax. Valid syntax: <JOIN> /path/to/B/table on a... == b... [and a... == b... [and ... ]]';\n    let rgx = /^ *([^ ]+) +on +/i;\n    let match = rgx.exec(src);\n    if (match === null)\n        throw new RbqlParsingError(invalid_join_syntax_error);\n    let table_id = match[1];\n    src = src.substr(match[0].length);\n\n    let variable_pairs = [];\n    var pair_rgx = /^([^ =]+) *==? *([^ =]+)/;\n    var and_rgx = /^ +(and|&&) +/i;\n    while (true) {\n        match = pair_rgx.exec(src);\n        if (match === null)\n            throw new RbqlParsingError(invalid_join_syntax_error);\n        variable_pairs.push([match[1], match[2]]);\n        src = src.substr(match[0].length);\n        if (!src.length)\n            break;\n        match = and_rgx.exec(src);\n        if (match === null)\n            throw new RbqlParsingError(invalid_join_syntax_error);\n        src = src.substr(match[0].length);\n    }\n    return [table_id, variable_pairs];\n}\n\n\nfunction resolve_join_variables(input_variables_map, join_variables_map, variable_pairs, string_literals) {\n    let lhs_variables = [];\n    let rhs_indices = [];\n    const valid_join_syntax_msg = 'Valid JOIN syntax: <JOIN> /path/to/B/table on a... == b... [and a... == b... [and ... ]]';\n    for (let variable_pair of variable_pairs) {\n        let [join_var_1, join_var_2] = variable_pair;\n        join_var_1 = combine_string_literals(join_var_1, string_literals);\n        join_var_2 = combine_string_literals(join_var_2, string_literals);\n        if (input_variables_map.hasOwnProperty(join_var_1) && join_variables_map.hasOwnProperty(join_var_1))\n            throw new RbqlParsingError(get_ambiguous_error_msg(join_var_1));\n        if (input_variables_map.hasOwnProperty(join_var_2) && join_variables_map.hasOwnProperty(join_var_2))\n            throw new RbqlParsingError(get_ambiguous_error_msg(join_var_2));\n        if (input_variables_map.hasOwnProperty(join_var_2))\n            [join_var_1, join_var_2] = [join_var_2, join_var_1];\n\n        let [lhs_key_index, rhs_key_index] = [null, null];\n        if (['NR', 'a.NR', 'aNR'].indexOf(join_var_1) != -1) {\n            lhs_key_index = -1;\n        } else if (input_variables_map.hasOwnProperty(join_var_1)) {\n            lhs_key_index = input_variables_map[join_var_1].index;\n        } else {\n            throw new RbqlParsingError(`Unable to parse JOIN expression: Input table does not have field \"${join_var_1}\"\\n${valid_join_syntax_msg}`);\n        }\n\n        if (['b.NR', 'bNR'].indexOf(join_var_2) != -1) {\n            rhs_key_index = -1;\n        } else if (join_variables_map.hasOwnProperty(join_var_2)) {\n            rhs_key_index = join_variables_map[join_var_2].index;\n        } else {\n            throw new RbqlParsingError(`Unable to parse JOIN expression: Join table does not have field \"${join_var_2}\"\\n${valid_join_syntax_msg}`);\n        }\n\n        let lhs_join_var_expression = lhs_key_index == -1 ? 'NR' : `safe_join_get(record_a, ${lhs_key_index})`;\n        rhs_indices.push(rhs_key_index);\n        lhs_variables.push(lhs_join_var_expression);\n    }\n    return [lhs_variables, rhs_indices];\n}\n\n\nfunction generate_common_init_code(query_text, variable_prefix) {\n    assert(variable_prefix == 'a' || variable_prefix == 'b');\n    let result = [];\n    result.push(`${variable_prefix} = new Object();`);\n    let base_var = variable_prefix == 'a' ? 'NR' : 'bNR';\n    let attr_var = `${variable_prefix}.NR`;\n    if (query_text.indexOf(attr_var) != -1)\n        result.push(`${attr_var} = ${base_var};`);\n    if (variable_prefix == 'a' && query_text.indexOf('aNR') != -1)\n        result.push('aNR = NR;');\n    return result;\n}\n\n\nfunction generate_init_statements(query_text, variables_map, join_variables_map, indent) {\n    let code_lines = generate_common_init_code(query_text, 'a');\n    let simple_var_name_rgx = /^[_0-9a-zA-Z]+$/;\n    for (const [variable_name, var_info] of Object.entries(variables_map)) {\n        if (var_info.initialize) {\n            let variable_declaration_keyword = simple_var_name_rgx.exec(variable_name) ? 'var ' : '';\n            code_lines.push(`${variable_declaration_keyword}${variable_name} = safe_get(record_a, ${var_info.index});`);\n        }\n    }\n    if (join_variables_map) {\n        code_lines = code_lines.concat(generate_common_init_code(query_text, 'b'));\n        for (const [variable_name, var_info] of Object.entries(join_variables_map)) {\n            if (var_info.initialize) {\n                let variable_declaration_keyword = simple_var_name_rgx.exec(variable_name) ? 'var ' : '';\n                code_lines.push(`${variable_declaration_keyword}${variable_name} = record_b === null ? null : safe_get(record_b, ${var_info.index});`);\n            }\n        }\n    }\n    for (let i = 1; i < code_lines.length; i++) {\n        code_lines[i] = indent + code_lines[i];\n    }\n    return code_lines.join('\\n');\n}\n\n\nfunction replace_star_count(aggregate_expression) {\n    var rgx = /(?:(?<=^)|(?<=,)) *COUNT\\( *\\* *\\)/ig;\n    var result = aggregate_expression.replace(rgx, ' COUNT(1)');\n    return str_strip(result);\n}\n\n\nfunction replace_star_vars(rbql_expression) {\n    let star_rgx = /(?:^|,) *(\\*|a\\.\\*|b\\.\\*) *(?=$|,)/g;\n    let matches = get_all_matches(star_rgx, rbql_expression);\n    let last_pos = 0;\n    let result = '';\n    for (let match of matches) {\n        let star_expression = match[1];\n        let replacement_expression = ']).concat(' + {'*': 'star_fields', 'a.*': 'record_a', 'b.*': 'record_b'}[star_expression] + ').concat([';\n        if (last_pos < match.index)\n            result += rbql_expression.substring(last_pos, match.index);\n        result += replacement_expression;\n        last_pos = match.index + match[0].length + 1; // Adding one to skip the lookahead comma\n    }\n    result += rbql_expression.substring(last_pos);\n    return result;\n}\n\n\nfunction replace_star_vars_for_header_parsing(rbql_expression) {\n    let star_rgx = /(?:(?<=^)|(?<=,)) *(\\*|a\\.\\*|b\\.\\*) *(?=$|,)/g;\n    let matches = get_all_matches(star_rgx, rbql_expression);\n    let last_pos = 0;\n    let result = '';\n    for (let match of matches) {\n        let star_expression = match[1];\n        let replacement_expression = {'*': '__RBQL_INTERNAL_STAR', 'a.*': 'a.__RBQL_INTERNAL_STAR', 'b.*': 'b.__RBQL_INTERNAL_STAR'}[star_expression];\n        if (last_pos < match.index)\n            result += rbql_expression.substring(last_pos, match.index);\n        result += replacement_expression;\n        last_pos = match.index + match[0].length;\n    }\n    result += rbql_expression.substring(last_pos);\n    return result;\n}\n\n\nfunction translate_update_expression(update_expression, input_variables_map, string_literals, indent) {\n    let first_assignment = str_strip(update_expression.split('=')[0]);\n    let first_assignment_error = `Unable to parse \"UPDATE\" expression: the expression must start with assignment, but \"${first_assignment}\" does not look like an assignable field name`;\n\n    let assignment_looking_rgx = /(?:^|,) *(a[.#a-zA-Z0-9\\[\\]_]*) *=(?=[^=])/g;\n    let update_expressions = [];\n    let pos = 0;\n    while (true) {\n        let match = assignment_looking_rgx.exec(update_expression);\n        if (update_expressions.length == 0 && (match === null || match.index != 0)) {\n            throw new RbqlParsingError(first_assignment_error);\n        }\n        if (match === null) {\n            update_expressions[update_expressions.length - 1] += str_strip(update_expression.substr(pos)) + ');';\n            break;\n        }\n        if (update_expressions.length)\n            update_expressions[update_expressions.length - 1] += str_strip(update_expression.substring(pos, match.index)) + ');';\n        let dst_var_name = combine_string_literals(str_strip(match[1]), string_literals);\n        if (!input_variables_map.hasOwnProperty(dst_var_name))\n            throw new RbqlParsingError(`Unable to parse \"UPDATE\" expression: Unknown field name: \"${dst_var_name}\"`);\n        let var_index = input_variables_map[dst_var_name].index;\n        let current_indent = update_expressions.length ? indent : '';\n        update_expressions.push(`${current_indent}safe_set(up_fields, ${var_index}, `);\n        pos = match.index + match[0].length;\n    }\n    return combine_string_literals(update_expressions.join('\\n'), string_literals);\n}\n\n\nfunction translate_select_expression(select_expression) {\n    let as_alias_replacement_regexp = / +(AS|as) +([a-zA-Z][a-zA-Z0-9_]*) *(?=$|,)/g;\n    let expression_without_counting_stars = replace_star_count(select_expression);\n    let expression_without_as_column_alias = expression_without_counting_stars.replace(as_alias_replacement_regexp, '');\n    let translated = str_strip(replace_star_vars(expression_without_as_column_alias));\n    let translated_for_header = str_strip(replace_star_vars_for_header_parsing(expression_without_counting_stars));\n    if (!translated.length)\n        throw new RbqlParsingError('\"SELECT\" expression is empty');\n    return [`[].concat([${translated}])`, translated_for_header];\n}\n\n\nfunction separate_string_literals(rbql_expression) {\n    // The regex consists of 3 almost identicall parts, the only difference is quote type\n    var rgx = /('(\\\\(\\\\\\\\)*'|[^'])*')|(\"(\\\\(\\\\\\\\)*\"|[^\"])*\")|(`(\\\\(\\\\\\\\)*`|[^`])*`)/g;\n    var match_obj = null;\n    var format_parts = [];\n    var string_literals = [];\n    var idx_before = 0;\n    while((match_obj = rgx.exec(rbql_expression)) !== null) {\n        var literal_id = string_literals.length;\n        var string_literal = match_obj[0];\n        string_literals.push(string_literal);\n        var start_index = match_obj.index;\n        format_parts.push(rbql_expression.substring(idx_before, start_index));\n        format_parts.push(`___RBQL_STRING_LITERAL${literal_id}___`);\n        idx_before = rgx.lastIndex;\n    }\n    format_parts.push(rbql_expression.substring(idx_before));\n    var format_expression = format_parts.join('');\n    format_expression = format_expression.replace(/\\t/g, ' ');\n    return [format_expression, string_literals];\n}\n\n\nfunction locate_statements(rbql_expression) {\n    let statement_groups = [];\n    statement_groups.push([STRICT_LEFT_JOIN, LEFT_OUTER_JOIN, LEFT_JOIN, INNER_JOIN, JOIN]);\n    statement_groups.push([SELECT]);\n    statement_groups.push([ORDER_BY]);\n    statement_groups.push([WHERE]);\n    statement_groups.push([UPDATE]);\n    statement_groups.push([GROUP_BY]);\n    statement_groups.push([LIMIT]);\n    statement_groups.push([EXCEPT]);\n    var result = [];\n    for (var ig = 0; ig < statement_groups.length; ig++) {\n        for (var is = 0; is < statement_groups[ig].length; is++) {\n            var statement = statement_groups[ig][is];\n            var rgxp = new RegExp('(?:^| )' + replace_all(statement, ' ', ' *') + '(?= )', 'ig');\n            var matches = get_all_matches(rgxp, rbql_expression);\n            if (!matches.length)\n                continue;\n            if (matches.length > 1)\n                throw new RbqlParsingError(`More than one \"${statement}\" statements found`);\n            assert(matches.length == 1);\n            var match = matches[0];\n            var match_str = match[0];\n            result.push([match.index, match.index + match_str.length, statement]);\n            break; // Break to avoid matching a sub-statement from the same group e.g. \"INNER JOIN\" -> \"JOIN\"\n        }\n    }\n    result.sort(function(a, b) { return a[0] - b[0]; });\n    return result;\n}\n\n\nfunction separate_actions(rbql_expression) {\n    rbql_expression = str_strip(rbql_expression);\n    var result = {};\n    let with_match = /^(.*)  *[Ww][Ii][Tt][Hh] *\\(([a-z]{4,20})\\) *$/.exec(rbql_expression);\n    if (with_match !== null) {\n        rbql_expression = with_match[1];\n        result[WITH] = with_match[2];\n    }\n    var ordered_statements = locate_statements(rbql_expression);\n    for (var i = 0; i < ordered_statements.length; i++) {\n        var statement_start = ordered_statements[i][0];\n        var span_start = ordered_statements[i][1];\n        var statement = ordered_statements[i][2];\n        var span_end = i + 1 < ordered_statements.length ? ordered_statements[i + 1][0] : rbql_expression.length;\n        assert(statement_start < span_start);\n        assert(span_start <= span_end);\n        var span = rbql_expression.substring(span_start, span_end);\n        var statement_params = {};\n        if ([STRICT_LEFT_JOIN, LEFT_OUTER_JOIN, LEFT_JOIN, INNER_JOIN, JOIN].indexOf(statement) != -1) {\n            statement_params['join_subtype'] = statement;\n            statement = JOIN;\n        }\n\n        if (statement == UPDATE) {\n            if (statement_start != 0)\n                throw new RbqlParsingError('UPDATE keyword must be at the beginning of the query');\n            span = span.replace(/^ *SET/i, '');\n        }\n\n        if (statement == ORDER_BY) {\n            span = span.replace(/ ASC *$/i, '');\n            var new_span = span.replace(/ DESC *$/i, '');\n            if (new_span != span) {\n                span = new_span;\n                statement_params['reverse'] = true;\n            } else {\n                statement_params['reverse'] = false;\n            }\n        }\n\n        if (statement == SELECT) {\n            if (statement_start != 0)\n                throw new RbqlParsingError('SELECT keyword must be at the beginning of the query');\n            let match = /^ *TOP *([0-9]+) /i.exec(span);\n            if (match !== null) {\n                statement_params['top'] = parseInt(match[1]);\n                span = span.substr(match.index + match[0].length);\n            }\n            match = /^ *DISTINCT *(COUNT)? /i.exec(span);\n            if (match !== null) {\n                statement_params['distinct'] = true;\n                if (match[1]) {\n                    statement_params['distinct_count'] = true;\n                }\n                span = span.substr(match.index + match[0].length);\n            }\n        }\n        statement_params['text'] = str_strip(span);\n        result[statement] = statement_params;\n    }\n    if (!result.hasOwnProperty(SELECT) && !result.hasOwnProperty(UPDATE)) {\n        throw new RbqlParsingError('Query must contain either SELECT or UPDATE statement');\n    }\n    assert(result.hasOwnProperty(SELECT) != result.hasOwnProperty(UPDATE));\n    return result;\n}\n\n\nfunction find_top(rb_actions) {\n    if (rb_actions.hasOwnProperty(LIMIT)) {\n        var rgx = /^[0-9]+$/;\n        if (rgx.exec(rb_actions[LIMIT]['text']) === null) {\n            throw new RbqlParsingError('LIMIT keyword must be followed by an integer');\n        }\n        var result = parseInt(rb_actions[LIMIT]['text']);\n        return result;\n    }\n    var select_action = rb_actions[SELECT];\n    if (select_action && select_action.hasOwnProperty('top')) {\n        return select_action['top'];\n    }\n    return null;\n}\n\n\nfunction translate_except_expression(except_expression, input_variables_map, string_literals, input_header) {\n    let skip_vars = except_expression.split(',');\n    skip_vars = skip_vars.map(str_strip);\n    let skip_indices = [];\n    for (let var_name of skip_vars) {\n        var_name = combine_string_literals(var_name, string_literals);\n        if (!input_variables_map.hasOwnProperty(var_name))\n            throw new RbqlParsingError(`Unknown field in EXCEPT expression: \"${var_name}\"`);\n        skip_indices.push(input_variables_map[var_name].index);\n    }\n    skip_indices = skip_indices.sort((a, b) => a - b);\n    let output_header = input_header === null ? null : select_except(input_header, skip_indices);\n    let indices_str = skip_indices.join(',');\n    return [output_header, `select_except(record_a, [${indices_str}])`];\n}\n\n\nclass HashJoinMap {\n    constructor(record_iterator, key_indices) {\n        this.max_record_len = 0;\n        this.hash_map = new Map();\n        this.record_iterator = record_iterator;\n        this.nr = 0;\n        if (key_indices.length == 1) {\n            this.key_index = key_indices[0];\n            this.key_indices = null;\n            this.polymorphic_get_key = this.get_single_key;\n        } else {\n            this.key_index = null;\n            this.key_indices = key_indices;\n            this.polymorphic_get_key = this.get_multi_key;\n        }\n    }\n\n    get_single_key(nr, fields) {\n        if (this.key_index >= fields.length)\n            throw new RbqlRuntimeError(`No field with index ${this.key_index + 1} at record ${this.nr} in \"B\" table`);\n        return this.key_index === -1 ? this.nr : fields[this.key_index];\n    };\n\n    get_multi_key(nr, fields) {\n        let result = [];\n        for (let ki of this.key_indices) {\n            if (ki >= fields.length)\n                throw new RbqlRuntimeError(`No field with index ${ki + 1} at record ${this.nr} in \"B\" table`);\n            result.push(ki === -1 ? this.nr : fields[ki]);\n        }\n        return JSON.stringify(result);\n    };\n\n    async build() {\n        while (true) {\n            let fields = await this.record_iterator.get_record();\n            if (fields === null)\n                break;\n            this.nr += 1;\n            let nf = fields.length;\n            this.max_record_len = Math.max(this.max_record_len, nf);\n            let key = this.polymorphic_get_key(this.nr, fields);\n            let key_records = this.hash_map.get(key);\n            if (key_records === undefined) {\n                this.hash_map.set(key, [[this.nr, nf, fields]]);\n            } else {\n                key_records.push([this.nr, nf, fields]);\n            }\n        }\n    };\n\n    get_join_records(key) {\n        let result = this.hash_map.get(key);\n        if (result === undefined)\n            return [];\n        return result;\n    };\n\n    get_warnings() {\n        return this.record_iterator.get_warnings();\n    };\n}\n\n\nfunction cleanup_query(query_text) {\n    return query_text.split('\\n').map(strip_comments).filter(line => line.length).join(' ').replace(/;+$/g, '');\n}\n\n\nfunction remove_redundant_table_name(query_text) {\n    query_text = str_strip(query_text.replace(/ +from +a(?: +|$)/gi, ' '));\n    query_text = str_strip(query_text.replace(/^ *update +a +set /gi, 'update '));\n    return query_text;\n}\n\n\nfunction select_output_header(input_header, join_header, query_column_infos) {\n    if (input_header === null) {\n        assert(join_header === null);\n    }\n    let query_has_star = false;\n    let query_has_column_alias = false;\n    for (let qci of query_column_infos) {\n        query_has_star = query_has_star || (qci !== null && qci.is_star);\n        query_has_column_alias = query_has_column_alias || (qci !== null && qci.alias_name !== null);\n    }\n    if (input_header === null) {\n        if (query_has_star && query_has_column_alias) {\n            throw new RbqlParsingError('Using both * (star) and AS alias in the same query is not allowed for input tables without header');\n        }\n        if (!query_has_column_alias) {\n            // Input table has no header and query has no aliases therefore the output table will be without header.\n            return null;\n        }\n        input_header = [];\n        join_header = [];\n    }\n    if (join_header === null) {\n        // This means there is no JOIN table.\n        join_header = [];\n    }\n    let output_header = [];\n    for (let qci of query_column_infos) {\n        // TODO refactor this and python version: extract this code into a function instead to always return something\n        if (qci === null) {\n            output_header.push('col' + (output_header.length + 1));\n        } else if (qci.is_star) {\n            if (qci.table_name === null) {\n                output_header = output_header.concat(input_header).concat(join_header);\n            } else if (qci.table_name === 'a') {\n                output_header = output_header.concat(input_header);\n            } else if (qci.table_name === 'b') {\n                output_header = output_header.concat(join_header);\n            }\n        } else if (qci.column_name !== null) {\n            output_header.push(qci.column_name);\n        } else if (qci.alias_name !== null) {\n            output_header.push(qci.alias_name);\n        } else if (qci.column_index !== null) {\n            if (qci.table_name == 'a' && qci.column_index < input_header.length) {\n                output_header.push(input_header[qci.column_index]);\n            } else if (qci.table_name == 'b' && qci.column_index < join_header.length) {\n                output_header.push(join_header[qci.column_index]);\n            } else {\n                output_header.push('col' + (output_header.length + 1));\n            }\n        } else { // Should never happen\n            output_header.push('col' + (output_header.length + 1));\n        }\n    }\n    return output_header;\n}\n\n\nfunction sample_first_two_inconsistent_records(inconsistent_records_info) {\n    let entries = Array.from(inconsistent_records_info.entries());\n    entries.sort(function(a, b) { return a[1] - b[1]; });\n    assert(entries.length > 1);\n    let [num_fields_1, record_num_1] = entries[0];\n    let [num_fields_2, record_num_2] = entries[1];\n    return [record_num_1, num_fields_1, record_num_2, num_fields_2];\n}\n\n\nfunction make_inconsistent_num_fields_warning(table_name, inconsistent_records_info) {\n    let [record_num_1, num_fields_1, record_num_2, num_fields_2] = sample_first_two_inconsistent_records(inconsistent_records_info);\n    let warn_msg = `Number of fields in \"${table_name}\" table is not consistent: `;\n    warn_msg += `e.g. record ${record_num_1} -> ${num_fields_1} fields, record ${record_num_2} -> ${num_fields_2} fields`;\n    return warn_msg;\n}\n\n\nclass RBQLInputIterator {\n    constructor(){}\n    stop() {\n        throw new Error(\"Unable to call the interface method\");\n    }\n    async get_variables_map(query_text) {\n        throw new Error(\"Unable to call the interface method\");\n    }\n    async get_record() {\n        throw new Error(\"Unable to call the interface method\");\n    }\n    handle_query_modifier() {\n        return; // Reimplement if you need to handle a boolean query modifier that can be used like this: `SELECT * WITH (modifiername)`\n    }\n    get_warnings() {\n        return []; // Reimplement if your class can produce warnings\n    }\n    async get_header() {\n        return null; // Reimplement if your class can provide input header\n    }\n}\n\n\nclass RBQLOutputWriter {\n    constructor(){}\n\n    async write(fields) {\n        throw new Error(\"Unable to call the interface method\");\n    }\n\n    async finish() {\n        // Reimplement if your class needs to do something on finish e.g. cleanup\n    };\n\n    get_warnings() {\n        return []; // Reimplement if your class can produce warnings\n    };\n\n    set_header() {\n        return; // Reimplement if your class can handle output headers in a meaningful way\n    }\n}\n\n\nclass RBQLTableRegistry {\n    constructor(){}\n\n    get_iterator_by_table_id(table_id) {\n        throw new Error(\"Unable to call the interface method\");\n    }\n\n    get_warnings() {\n        return []; // Reimplement if your class can produce warnings\n    };\n}\n\n\nclass TableIterator extends RBQLInputIterator {\n    constructor(table, column_names=null, normalize_column_names=true, variable_prefix='a') {\n        super();\n        this.table = table;\n        this.column_names = column_names;\n        this.normalize_column_names = normalize_column_names;\n        this.variable_prefix = variable_prefix;\n        this.nr = 0;\n        this.fields_info = new Map();\n        this.stopped = false;\n    }\n\n\n    stop() {\n        this.stopped = true;\n    };\n\n\n    async get_variables_map(query_text) {\n        let variable_map = new Object();\n        parse_basic_variables(query_text, this.variable_prefix, variable_map);\n        parse_array_variables(query_text, this.variable_prefix, variable_map);\n        if (this.column_names !== null) {\n            if (this.table.length && this.column_names.length != this.table[0].length)\n                throw new RbqlIOHandlingError('List of column names and table records have different lengths');\n            if (this.normalize_column_names) {\n                parse_dictionary_variables(query_text, this.variable_prefix, this.column_names, variable_map);\n                parse_attribute_variables(query_text, this.variable_prefix, this.column_names, 'column names list', variable_map);\n            } else {\n                map_variables_directly(query_text, this.column_names, variable_map);\n            }\n        }\n        return variable_map;\n    };\n\n\n    async get_record() {\n        if (this.stopped)\n            return null;\n        if (this.nr >= this.table.length)\n            return null;\n        let record = this.table[this.nr];\n        this.nr += 1;\n        let num_fields = record.length;\n        if (!this.fields_info.has(num_fields))\n            this.fields_info.set(num_fields, this.nr);\n        return record;\n    };\n\n    get_warnings() {\n        if (this.fields_info.size > 1)\n            return [make_inconsistent_num_fields_warning('input', this.fields_info)];\n        return [];\n    };\n\n    async get_header() {\n        return this.column_names;\n    }\n}\n\n\nclass TableWriter extends RBQLOutputWriter {\n    constructor(external_table) {\n        super();\n        this.table = external_table;\n        this.header = null;\n    }\n\n    async write(fields) {\n        this.table.push(fields);\n        return true;\n    };\n\n    set_header(header) {\n        this.header = header;\n    }\n}\n\n\nclass SingleTableRegistry extends RBQLTableRegistry {\n    constructor(table, column_names=null, normalize_column_names=true, table_id='b') {\n        super();\n        this.table = table;\n        this.table_id = table_id;\n        this.column_names = column_names;\n        this.normalize_column_names = normalize_column_names;\n    }\n\n    get_iterator_by_table_id(table_id) {\n        if (table_id.toLowerCase() !== this.table_id)\n            throw new RbqlIOHandlingError(`Unable to find join table: \"${table_id}\"`);\n        return new TableIterator(this.table, this.column_names, this.normalize_column_names, 'b');\n    };\n}\n\n\nasync function shallow_parse_input_query(query_text, input_iterator, join_tables_registry, query_context) {\n    query_text = cleanup_query(query_text);\n    var [format_expression, string_literals] = separate_string_literals(query_text);\n    format_expression = remove_redundant_table_name(format_expression);\n\n    var rb_actions = separate_actions(format_expression);\n    if (rb_actions.hasOwnProperty(WITH)) {\n        input_iterator.handle_query_modifier(rb_actions[WITH]);\n    }\n    var input_variables_map = await input_iterator.get_variables_map(query_text);\n\n    if (rb_actions.hasOwnProperty(ORDER_BY) && rb_actions.hasOwnProperty(UPDATE))\n        throw new RbqlParsingError('\"ORDER BY\" is not allowed in \"UPDATE\" queries');\n\n    if (rb_actions.hasOwnProperty(GROUP_BY)) {\n        if (rb_actions.hasOwnProperty(ORDER_BY) || rb_actions.hasOwnProperty(UPDATE))\n            throw new RbqlParsingError('\"ORDER BY\", \"UPDATE\" and \"DISTINCT\" keywords are not allowed in aggregate queries');\n        query_context.aggregation_key_expression = '[' + combine_string_literals(rb_actions[GROUP_BY]['text'], string_literals) + ']';\n        query_context.aggregation_stage = 1;\n    }\n\n\n    let input_header = await input_iterator.get_header();\n    let join_variables_map = null;\n    let join_header = null;\n    if (rb_actions.hasOwnProperty(JOIN)) {\n        var [rhs_table_id, variable_pairs] = parse_join_expression(rb_actions[JOIN]['text']);\n        if (join_tables_registry === null)\n            throw new RbqlParsingError('JOIN operations are not supported by the application');\n        let join_record_iterator = join_tables_registry.get_iterator_by_table_id(rhs_table_id);\n        if (!join_record_iterator)\n            throw new RbqlParsingError(`Unable to find join table: \"${rhs_table_id}\"`);\n        if (rb_actions.hasOwnProperty(WITH)) {\n            join_record_iterator.handle_query_modifier(rb_actions[WITH]);\n        }\n        join_variables_map = await join_record_iterator.get_variables_map(query_text);\n        join_header = await join_record_iterator.get_header();\n        if (input_header === null && join_header !== null) {\n            throw new RbqlIOHandlingError('Inconsistent modes: Input table doesn\\'t have a header while the Join table has a header');\n        }\n        if (input_header !== null && join_header === null) {\n            throw new RbqlIOHandlingError('Inconsistent modes: Input table has a header while the Join table doesn\\'t have a header');\n        }\n        let [lhs_variables, rhs_indices] = resolve_join_variables(input_variables_map, join_variables_map, variable_pairs, string_literals);\n        let sql_join_type = {'JOIN': InnerJoiner, 'INNER JOIN': InnerJoiner, 'LEFT JOIN': LeftJoiner, 'LEFT OUTER JOIN': LeftJoiner, 'STRICT LEFT JOIN': StrictLeftJoiner}[rb_actions[JOIN]['join_subtype']];\n        query_context.lhs_join_var_expression = lhs_variables.length == 1 ? lhs_variables[0] : 'JSON.stringify([' + lhs_variables.join(',') + '])';\n        query_context.join_map_impl = new HashJoinMap(join_record_iterator, rhs_indices);\n        await query_context.join_map_impl.build();\n        query_context.join_map = new sql_join_type(query_context.join_map_impl);\n    }\n\n    query_context.variables_init_code = combine_string_literals(generate_init_statements(format_expression, input_variables_map, join_variables_map, ' '.repeat(4)), string_literals);\n\n    if (rb_actions.hasOwnProperty(WHERE)) {\n        var where_expression = rb_actions[WHERE]['text'];\n        if (/[^><!=]=[^=]/.exec(where_expression))\n            throw new RbqlParsingError('Assignments \"=\" are not allowed in \"WHERE\" expressions. For equality test use \"==\" or \"===\"');\n        query_context.where_expression = combine_string_literals(where_expression, string_literals);\n    }\n\n    if (rb_actions.hasOwnProperty(UPDATE)) {\n        var update_expression = translate_update_expression(rb_actions[UPDATE]['text'], input_variables_map, string_literals, ' '.repeat(8));\n        query_context.update_expressions = combine_string_literals(update_expression, string_literals);\n        query_context.writer.set_header(input_header);\n    }\n\n    if (rb_actions.hasOwnProperty(SELECT)) {\n        query_context.top_count = find_top(rb_actions);\n        if (rb_actions.hasOwnProperty(EXCEPT)) {\n            if (rb_actions.hasOwnProperty(JOIN)) {\n                throw new RbqlParsingError('EXCEPT and JOIN are not allowed in the same query');\n            }\n            let [output_header, select_expression] = translate_except_expression(rb_actions[EXCEPT]['text'], input_variables_map, string_literals, input_header);\n            query_context.select_expression = select_expression;\n            query_context.writer.set_header(output_header);\n        } else {\n            let [select_expression, select_expression_for_header] = translate_select_expression(rb_actions[SELECT]['text']);\n            query_context.select_expression = combine_string_literals(select_expression, string_literals);\n            let column_infos = adhoc_parse_select_expression_to_column_infos(select_expression_for_header, string_literals);\n            let output_header = select_output_header(input_header, join_header, column_infos);\n            query_context.writer.set_header(output_header);\n        }\n\n        query_context.writer = new TopWriter(query_context.writer, query_context.top_count);\n        if (rb_actions[SELECT].hasOwnProperty('distinct_count')) {\n            query_context.writer = new UniqCountWriter(query_context.writer);\n        } else if (rb_actions[SELECT].hasOwnProperty('distinct')) {\n            query_context.writer = new UniqWriter(query_context.writer);\n        }\n    }\n\n    if (rb_actions.hasOwnProperty(ORDER_BY)) {\n        query_context.sort_key_expression = combine_string_literals(rb_actions[ORDER_BY]['text'], string_literals);\n        let reverse_sort = rb_actions[ORDER_BY]['reverse'];\n        query_context.writer = new SortedWriter(query_context.writer, reverse_sort);\n    }\n}\n\n\nasync function query(query_text, input_iterator, output_writer, output_warnings, join_tables_registry=null, user_init_code='') {\n    query_context = new RBQLContext(query_text, input_iterator, output_writer, user_init_code);\n    await shallow_parse_input_query(query_text, input_iterator, join_tables_registry, query_context);\n    await compile_and_run(query_context);\n    await query_context.writer.finish();\n    output_warnings.push(...input_iterator.get_warnings());\n    if (query_context.join_map_impl)\n        output_warnings.push(...query_context.join_map_impl.get_warnings());\n    output_warnings.push(...output_writer.get_warnings());\n}\n\n\nasync function query_table(query_text, input_table, output_table, output_warnings, join_table=null, input_column_names=null, join_column_names=null, output_column_names=null, normalize_column_names=true, user_init_code='') {\n    if (!normalize_column_names && input_column_names !== null && join_column_names !== null)\n        ensure_no_ambiguous_variables(query_text, input_column_names, join_column_names);\n    let input_iterator = new TableIterator(input_table, input_column_names, normalize_column_names);\n    let output_writer = new TableWriter(output_table);\n    let join_tables_registry = join_table === null ? null : new SingleTableRegistry(join_table, join_column_names, normalize_column_names);\n    await query(query_text, input_iterator, output_writer, output_warnings, join_tables_registry, user_init_code);\n    if (output_column_names !== null) {\n        assert(output_column_names.length == 0, '`output_column_names` param must be an empty list or null');\n        if (output_writer.header !== null) {\n            for (let column_name of output_writer.header) {\n                output_column_names.push(column_name);\n            }\n        }\n    }\n}\n\n\nfunction exception_to_error_info(e) {\n    let exceptions_type_map = {\n        'RbqlRuntimeError': 'query execution',\n        'RbqlParsingError': 'query parsing',\n        'SyntaxError': 'JS syntax error',\n        'RbqlIOHandlingError': 'IO handling'\n    };\n    let error_type = 'unexpected';\n    if (e.constructor && e.constructor.name && exceptions_type_map.hasOwnProperty(e.constructor.name)) {\n        error_type = exceptions_type_map[e.constructor.name];\n    }\n    let error_msg = e.hasOwnProperty('message') ? e.message : String(e);\n    return [error_type, error_msg];\n}\n\n\nexports.query = query;\nexports.query_table = query_table;\nexports.RBQLInputIterator = RBQLInputIterator;\nexports.RBQLOutputWriter = RBQLOutputWriter;\nexports.RBQLTableRegistry = RBQLTableRegistry;\n\nexports.version = RBQL_VERSION;\nexports.TableIterator = TableIterator;\nexports.TableWriter = TableWriter;\nexports.SingleTableRegistry = SingleTableRegistry;\nexports.exception_to_error_info = exception_to_error_info;\n\n\n// The functions below are exported just for unit tests, they are not part of the rbql API\n// TODO exports through the special unit_test proxy e.g. exports.unit_test.parse_basic_variables = parse_basic_variables;\nexports.parse_basic_variables = parse_basic_variables;\nexports.parse_array_variables = parse_array_variables;\nexports.parse_dictionary_variables = parse_dictionary_variables;\nexports.parse_attribute_variables = parse_attribute_variables;\nexports.get_all_matches = get_all_matches;\nexports.strip_comments = strip_comments;\nexports.separate_actions = separate_actions;\nexports.separate_string_literals = separate_string_literals;\nexports.combine_string_literals = combine_string_literals;\nexports.parse_join_expression = parse_join_expression;\nexports.resolve_join_variables = resolve_join_variables;\nexports.translate_update_expression = translate_update_expression;\nexports.translate_select_expression = translate_select_expression;\nexports.translate_except_expression = translate_except_expression;\nexports.like_to_regex = like_to_regex;\nexports.adhoc_parse_select_expression_to_column_infos = adhoc_parse_select_expression_to_column_infos;\nexports.replace_star_count = replace_star_count;\nexports.replace_star_vars_for_header_parsing = replace_star_vars_for_header_parsing;\nexports.select_output_header = select_output_header;\nexports.sample_first_two_inconsistent_records = sample_first_two_inconsistent_records;\n\n}(typeof exports === 'undefined' ? this.rbql = {} : exports));\n","// Currently in sync with Node.js lib/internal/util/types.js\n// https://github.com/nodejs/node/commit/112cc7c27551254aa2b17098fb774867f05ed0d9\n\n'use strict';\n\nvar isArgumentsObject = require('is-arguments');\nvar isGeneratorFunction = require('is-generator-function');\nvar whichTypedArray = require('which-typed-array');\nvar isTypedArray = require('is-typed-array');\n\nfunction uncurryThis(f) {\n  return f.call.bind(f);\n}\n\nvar BigIntSupported = typeof BigInt !== 'undefined';\nvar SymbolSupported = typeof Symbol !== 'undefined';\n\nvar ObjectToString = uncurryThis(Object.prototype.toString);\n\nvar numberValue = uncurryThis(Number.prototype.valueOf);\nvar stringValue = uncurryThis(String.prototype.valueOf);\nvar booleanValue = uncurryThis(Boolean.prototype.valueOf);\n\nif (BigIntSupported) {\n  var bigIntValue = uncurryThis(BigInt.prototype.valueOf);\n}\n\nif (SymbolSupported) {\n  var symbolValue = uncurryThis(Symbol.prototype.valueOf);\n}\n\nfunction checkBoxedPrimitive(value, prototypeValueOf) {\n  if (typeof value !== 'object') {\n    return false;\n  }\n  try {\n    prototypeValueOf(value);\n    return true;\n  } catch(e) {\n    return false;\n  }\n}\n\nexports.isArgumentsObject = isArgumentsObject;\nexports.isGeneratorFunction = isGeneratorFunction;\nexports.isTypedArray = isTypedArray;\n\n// Taken from here and modified for better browser support\n// https://github.com/sindresorhus/p-is-promise/blob/cda35a513bda03f977ad5cde3a079d237e82d7ef/index.js\nfunction isPromise(input) {\n\treturn (\n\t\t(\n\t\t\ttypeof Promise !== 'undefined' &&\n\t\t\tinput instanceof Promise\n\t\t) ||\n\t\t(\n\t\t\tinput !== null &&\n\t\t\ttypeof input === 'object' &&\n\t\t\ttypeof input.then === 'function' &&\n\t\t\ttypeof input.catch === 'function'\n\t\t)\n\t);\n}\nexports.isPromise = isPromise;\n\nfunction isArrayBufferView(value) {\n  if (typeof ArrayBuffer !== 'undefined' && ArrayBuffer.isView) {\n    return ArrayBuffer.isView(value);\n  }\n\n  return (\n    isTypedArray(value) ||\n    isDataView(value)\n  );\n}\nexports.isArrayBufferView = isArrayBufferView;\n\n\nfunction isUint8Array(value) {\n  return whichTypedArray(value) === 'Uint8Array';\n}\nexports.isUint8Array = isUint8Array;\n\nfunction isUint8ClampedArray(value) {\n  return whichTypedArray(value) === 'Uint8ClampedArray';\n}\nexports.isUint8ClampedArray = isUint8ClampedArray;\n\nfunction isUint16Array(value) {\n  return whichTypedArray(value) === 'Uint16Array';\n}\nexports.isUint16Array = isUint16Array;\n\nfunction isUint32Array(value) {\n  return whichTypedArray(value) === 'Uint32Array';\n}\nexports.isUint32Array = isUint32Array;\n\nfunction isInt8Array(value) {\n  return whichTypedArray(value) === 'Int8Array';\n}\nexports.isInt8Array = isInt8Array;\n\nfunction isInt16Array(value) {\n  return whichTypedArray(value) === 'Int16Array';\n}\nexports.isInt16Array = isInt16Array;\n\nfunction isInt32Array(value) {\n  return whichTypedArray(value) === 'Int32Array';\n}\nexports.isInt32Array = isInt32Array;\n\nfunction isFloat32Array(value) {\n  return whichTypedArray(value) === 'Float32Array';\n}\nexports.isFloat32Array = isFloat32Array;\n\nfunction isFloat64Array(value) {\n  return whichTypedArray(value) === 'Float64Array';\n}\nexports.isFloat64Array = isFloat64Array;\n\nfunction isBigInt64Array(value) {\n  return whichTypedArray(value) === 'BigInt64Array';\n}\nexports.isBigInt64Array = isBigInt64Array;\n\nfunction isBigUint64Array(value) {\n  return whichTypedArray(value) === 'BigUint64Array';\n}\nexports.isBigUint64Array = isBigUint64Array;\n\nfunction isMapToString(value) {\n  return ObjectToString(value) === '[object Map]';\n}\nisMapToString.working = (\n  typeof Map !== 'undefined' &&\n  isMapToString(new Map())\n);\n\nfunction isMap(value) {\n  if (typeof Map === 'undefined') {\n    return false;\n  }\n\n  return isMapToString.working\n    ? isMapToString(value)\n    : value instanceof Map;\n}\nexports.isMap = isMap;\n\nfunction isSetToString(value) {\n  return ObjectToString(value) === '[object Set]';\n}\nisSetToString.working = (\n  typeof Set !== 'undefined' &&\n  isSetToString(new Set())\n);\nfunction isSet(value) {\n  if (typeof Set === 'undefined') {\n    return false;\n  }\n\n  return isSetToString.working\n    ? isSetToString(value)\n    : value instanceof Set;\n}\nexports.isSet = isSet;\n\nfunction isWeakMapToString(value) {\n  return ObjectToString(value) === '[object WeakMap]';\n}\nisWeakMapToString.working = (\n  typeof WeakMap !== 'undefined' &&\n  isWeakMapToString(new WeakMap())\n);\nfunction isWeakMap(value) {\n  if (typeof WeakMap === 'undefined') {\n    return false;\n  }\n\n  return isWeakMapToString.working\n    ? isWeakMapToString(value)\n    : value instanceof WeakMap;\n}\nexports.isWeakMap = isWeakMap;\n\nfunction isWeakSetToString(value) {\n  return ObjectToString(value) === '[object WeakSet]';\n}\nisWeakSetToString.working = (\n  typeof WeakSet !== 'undefined' &&\n  isWeakSetToString(new WeakSet())\n);\nfunction isWeakSet(value) {\n  return isWeakSetToString(value);\n}\nexports.isWeakSet = isWeakSet;\n\nfunction isArrayBufferToString(value) {\n  return ObjectToString(value) === '[object ArrayBuffer]';\n}\nisArrayBufferToString.working = (\n  typeof ArrayBuffer !== 'undefined' &&\n  isArrayBufferToString(new ArrayBuffer())\n);\nfunction isArrayBuffer(value) {\n  if (typeof ArrayBuffer === 'undefined') {\n    return false;\n  }\n\n  return isArrayBufferToString.working\n    ? isArrayBufferToString(value)\n    : value instanceof ArrayBuffer;\n}\nexports.isArrayBuffer = isArrayBuffer;\n\nfunction isDataViewToString(value) {\n  return ObjectToString(value) === '[object DataView]';\n}\nisDataViewToString.working = (\n  typeof ArrayBuffer !== 'undefined' &&\n  typeof DataView !== 'undefined' &&\n  isDataViewToString(new DataView(new ArrayBuffer(1), 0, 1))\n);\nfunction isDataView(value) {\n  if (typeof DataView === 'undefined') {\n    return false;\n  }\n\n  return isDataViewToString.working\n    ? isDataViewToString(value)\n    : value instanceof DataView;\n}\nexports.isDataView = isDataView;\n\n// Store a copy of SharedArrayBuffer in case it's deleted elsewhere\nvar SharedArrayBufferCopy = typeof SharedArrayBuffer !== 'undefined' ? SharedArrayBuffer : undefined;\nfunction isSharedArrayBufferToString(value) {\n  return ObjectToString(value) === '[object SharedArrayBuffer]';\n}\nfunction isSharedArrayBuffer(value) {\n  if (typeof SharedArrayBufferCopy === 'undefined') {\n    return false;\n  }\n\n  if (typeof isSharedArrayBufferToString.working === 'undefined') {\n    isSharedArrayBufferToString.working = isSharedArrayBufferToString(new SharedArrayBufferCopy());\n  }\n\n  return isSharedArrayBufferToString.working\n    ? isSharedArrayBufferToString(value)\n    : value instanceof SharedArrayBufferCopy;\n}\nexports.isSharedArrayBuffer = isSharedArrayBuffer;\n\nfunction isAsyncFunction(value) {\n  return ObjectToString(value) === '[object AsyncFunction]';\n}\nexports.isAsyncFunction = isAsyncFunction;\n\nfunction isMapIterator(value) {\n  return ObjectToString(value) === '[object Map Iterator]';\n}\nexports.isMapIterator = isMapIterator;\n\nfunction isSetIterator(value) {\n  return ObjectToString(value) === '[object Set Iterator]';\n}\nexports.isSetIterator = isSetIterator;\n\nfunction isGeneratorObject(value) {\n  return ObjectToString(value) === '[object Generator]';\n}\nexports.isGeneratorObject = isGeneratorObject;\n\nfunction isWebAssemblyCompiledModule(value) {\n  return ObjectToString(value) === '[object WebAssembly.Module]';\n}\nexports.isWebAssemblyCompiledModule = isWebAssemblyCompiledModule;\n\nfunction isNumberObject(value) {\n  return checkBoxedPrimitive(value, numberValue);\n}\nexports.isNumberObject = isNumberObject;\n\nfunction isStringObject(value) {\n  return checkBoxedPrimitive(value, stringValue);\n}\nexports.isStringObject = isStringObject;\n\nfunction isBooleanObject(value) {\n  return checkBoxedPrimitive(value, booleanValue);\n}\nexports.isBooleanObject = isBooleanObject;\n\nfunction isBigIntObject(value) {\n  return BigIntSupported && checkBoxedPrimitive(value, bigIntValue);\n}\nexports.isBigIntObject = isBigIntObject;\n\nfunction isSymbolObject(value) {\n  return SymbolSupported && checkBoxedPrimitive(value, symbolValue);\n}\nexports.isSymbolObject = isSymbolObject;\n\nfunction isBoxedPrimitive(value) {\n  return (\n    isNumberObject(value) ||\n    isStringObject(value) ||\n    isBooleanObject(value) ||\n    isBigIntObject(value) ||\n    isSymbolObject(value)\n  );\n}\nexports.isBoxedPrimitive = isBoxedPrimitive;\n\nfunction isAnyArrayBuffer(value) {\n  return typeof Uint8Array !== 'undefined' && (\n    isArrayBuffer(value) ||\n    isSharedArrayBuffer(value)\n  );\n}\nexports.isAnyArrayBuffer = isAnyArrayBuffer;\n\n['isProxy', 'isExternal', 'isModuleNamespaceObject'].forEach(function(method) {\n  Object.defineProperty(exports, method, {\n    enumerable: false,\n    value: function() {\n      throw new Error(method + ' is not supported in userland');\n    }\n  });\n});\n","'use strict';\n\nvar hasSymbols = require('has-symbols/shams');\n\n/** @type {import('.')} */\nmodule.exports = function hasToStringTagShams() {\n\treturn hasSymbols() && !!Symbol.toStringTag;\n};\n","'use strict';\n\nvar implementation = require('./implementation');\n\nvar lacksProperEnumerationOrder = function () {\n\tif (!Object.assign) {\n\t\treturn false;\n\t}\n\t/*\n\t * v8, specifically in node 4.x, has a bug with incorrect property enumeration order\n\t * note: this does not detect the bug unless there's 20 characters\n\t */\n\tvar str = 'abcdefghijklmnopqrst';\n\tvar letters = str.split('');\n\tvar map = {};\n\tfor (var i = 0; i < letters.length; ++i) {\n\t\tmap[letters[i]] = letters[i];\n\t}\n\tvar obj = Object.assign({}, map);\n\tvar actual = '';\n\tfor (var k in obj) {\n\t\tactual += k;\n\t}\n\treturn str !== actual;\n};\n\nvar assignHasPendingExceptions = function () {\n\tif (!Object.assign || !Object.preventExtensions) {\n\t\treturn false;\n\t}\n\t/*\n\t * Firefox 37 still has \"pending exception\" logic in its Object.assign implementation,\n\t * which is 72% slower than our shim, and Firefox 40's native implementation.\n\t */\n\tvar thrower = Object.preventExtensions({ 1: 2 });\n\ttry {\n\t\tObject.assign(thrower, 'xy');\n\t} catch (e) {\n\t\treturn thrower[1] === 'y';\n\t}\n\treturn false;\n};\n\nmodule.exports = function getPolyfill() {\n\tif (!Object.assign) {\n\t\treturn implementation;\n\t}\n\tif (lacksProperEnumerationOrder()) {\n\t\treturn implementation;\n\t}\n\tif (assignHasPendingExceptions()) {\n\t\treturn implementation;\n\t}\n\treturn Object.assign;\n};\n","'use strict';\n\nvar possibleNames = require('possible-typed-array-names');\n\nvar g = typeof globalThis === 'undefined' ? global : globalThis;\n\n/** @type {import('.')} */\nmodule.exports = function availableTypedArrays() {\n\tvar /** @type {ReturnType<typeof availableTypedArrays>} */ out = [];\n\tfor (var i = 0; i < possibleNames.length; i++) {\n\t\tif (typeof g[possibleNames[i]] === 'function') {\n\t\t\t// @ts-expect-error\n\t\t\tout[out.length] = possibleNames[i];\n\t\t}\n\t}\n\treturn out;\n};\n","'use strict';\n\nvar numberIsNaN = function (value) {\n\treturn value !== value;\n};\n\nmodule.exports = function is(a, b) {\n\tif (a === 0 && b === 0) {\n\t\treturn 1 / a === 1 / b;\n\t}\n\tif (a === b) {\n\t\treturn true;\n\t}\n\tif (numberIsNaN(a) && numberIsNaN(b)) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\n","'use strict';\n\n/** @type {import('./range')} */\nmodule.exports = RangeError;\n","'use strict';\n\n/* eslint no-invalid-this: 1 */\n\nvar ERROR_MESSAGE = 'Function.prototype.bind called on incompatible ';\nvar toStr = Object.prototype.toString;\nvar max = Math.max;\nvar funcType = '[object Function]';\n\nvar concatty = function concatty(a, b) {\n    var arr = [];\n\n    for (var i = 0; i < a.length; i += 1) {\n        arr[i] = a[i];\n    }\n    for (var j = 0; j < b.length; j += 1) {\n        arr[j + a.length] = b[j];\n    }\n\n    return arr;\n};\n\nvar slicy = function slicy(arrLike, offset) {\n    var arr = [];\n    for (var i = offset || 0, j = 0; i < arrLike.length; i += 1, j += 1) {\n        arr[j] = arrLike[i];\n    }\n    return arr;\n};\n\nvar joiny = function (arr, joiner) {\n    var str = '';\n    for (var i = 0; i < arr.length; i += 1) {\n        str += arr[i];\n        if (i + 1 < arr.length) {\n            str += joiner;\n        }\n    }\n    return str;\n};\n\nmodule.exports = function bind(that) {\n    var target = this;\n    if (typeof target !== 'function' || toStr.apply(target) !== funcType) {\n        throw new TypeError(ERROR_MESSAGE + target);\n    }\n    var args = slicy(arguments, 1);\n\n    var bound;\n    var binder = function () {\n        if (this instanceof bound) {\n            var result = target.apply(\n                this,\n                concatty(args, arguments)\n            );\n            if (Object(result) === result) {\n                return result;\n            }\n            return this;\n        }\n        return target.apply(\n            that,\n            concatty(args, arguments)\n        );\n\n    };\n\n    var boundLength = max(0, target.length - args.length);\n    var boundArgs = [];\n    for (var i = 0; i < boundLength; i++) {\n        boundArgs[i] = '$' + i;\n    }\n\n    bound = Function('binder', 'return function (' + joiny(boundArgs, ',') + '){ return binder.apply(this,arguments); }')(binder);\n\n    if (target.prototype) {\n        var Empty = function Empty() {};\n        Empty.prototype = target.prototype;\n        bound.prototype = new Empty();\n        Empty.prototype = null;\n    }\n\n    return bound;\n};\n","'use strict';\n\n/** @type {import('.')} */\nmodule.exports = Error;\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = function getPolyfill() {\n\treturn typeof Object.is === 'function' ? Object.is : implementation;\n};\n","'use strict';\n\n/** @type {import('./ref')} */\nmodule.exports = ReferenceError;\n","// Currently in sync with Node.js lib/internal/errors.js\n// https://github.com/nodejs/node/commit/3b044962c48fe313905877a96b5d0894a5404f6f\n\n/* eslint node-core/documented-errors: \"error\" */\n/* eslint node-core/alphabetize-errors: \"error\" */\n/* eslint node-core/prefer-util-format-errors: \"error\" */\n\n'use strict';\n\n// The whole point behind this internal module is to allow Node.js to no\n// longer be forced to treat every error message change as a semver-major\n// change. The NodeError classes here all expose a `code` property whose\n// value statically and permanently identifies the error. While the error\n// message may change, the code should not.\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nvar codes = {};\n\n// Lazy loaded\nvar assert;\nvar util;\nfunction createErrorType(code, message, Base) {\n  if (!Base) {\n    Base = Error;\n  }\n  function getMessage(arg1, arg2, arg3) {\n    if (typeof message === 'string') {\n      return message;\n    } else {\n      return message(arg1, arg2, arg3);\n    }\n  }\n  var NodeError = /*#__PURE__*/function (_Base) {\n    _inherits(NodeError, _Base);\n    var _super = _createSuper(NodeError);\n    function NodeError(arg1, arg2, arg3) {\n      var _this;\n      _classCallCheck(this, NodeError);\n      _this = _super.call(this, getMessage(arg1, arg2, arg3));\n      _this.code = code;\n      return _this;\n    }\n    return _createClass(NodeError);\n  }(Base);\n  codes[code] = NodeError;\n}\n\n// https://github.com/nodejs/node/blob/v10.8.0/lib/internal/errors.js\nfunction oneOf(expected, thing) {\n  if (Array.isArray(expected)) {\n    var len = expected.length;\n    expected = expected.map(function (i) {\n      return String(i);\n    });\n    if (len > 2) {\n      return \"one of \".concat(thing, \" \").concat(expected.slice(0, len - 1).join(', '), \", or \") + expected[len - 1];\n    } else if (len === 2) {\n      return \"one of \".concat(thing, \" \").concat(expected[0], \" or \").concat(expected[1]);\n    } else {\n      return \"of \".concat(thing, \" \").concat(expected[0]);\n    }\n  } else {\n    return \"of \".concat(thing, \" \").concat(String(expected));\n  }\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith\nfunction startsWith(str, search, pos) {\n  return str.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith\nfunction endsWith(str, search, this_len) {\n  if (this_len === undefined || this_len > str.length) {\n    this_len = str.length;\n  }\n  return str.substring(this_len - search.length, this_len) === search;\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes\nfunction includes(str, search, start) {\n  if (typeof start !== 'number') {\n    start = 0;\n  }\n  if (start + search.length > str.length) {\n    return false;\n  } else {\n    return str.indexOf(search, start) !== -1;\n  }\n}\ncreateErrorType('ERR_AMBIGUOUS_ARGUMENT', 'The \"%s\" argument is ambiguous. %s', TypeError);\ncreateErrorType('ERR_INVALID_ARG_TYPE', function (name, expected, actual) {\n  if (assert === undefined) assert = require('../assert');\n  assert(typeof name === 'string', \"'name' must be a string\");\n\n  // determiner: 'must be' or 'must not be'\n  var determiner;\n  if (typeof expected === 'string' && startsWith(expected, 'not ')) {\n    determiner = 'must not be';\n    expected = expected.replace(/^not /, '');\n  } else {\n    determiner = 'must be';\n  }\n  var msg;\n  if (endsWith(name, ' argument')) {\n    // For cases like 'first argument'\n    msg = \"The \".concat(name, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  } else {\n    var type = includes(name, '.') ? 'property' : 'argument';\n    msg = \"The \\\"\".concat(name, \"\\\" \").concat(type, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  }\n\n  // TODO(BridgeAR): Improve the output by showing `null` and similar.\n  msg += \". Received type \".concat(_typeof(actual));\n  return msg;\n}, TypeError);\ncreateErrorType('ERR_INVALID_ARG_VALUE', function (name, value) {\n  var reason = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'is invalid';\n  if (util === undefined) util = require('util/');\n  var inspected = util.inspect(value);\n  if (inspected.length > 128) {\n    inspected = \"\".concat(inspected.slice(0, 128), \"...\");\n  }\n  return \"The argument '\".concat(name, \"' \").concat(reason, \". Received \").concat(inspected);\n}, TypeError, RangeError);\ncreateErrorType('ERR_INVALID_RETURN_VALUE', function (input, name, value) {\n  var type;\n  if (value && value.constructor && value.constructor.name) {\n    type = \"instance of \".concat(value.constructor.name);\n  } else {\n    type = \"type \".concat(_typeof(value));\n  }\n  return \"Expected \".concat(input, \" to be returned from the \\\"\").concat(name, \"\\\"\") + \" function but got \".concat(type, \".\");\n}, TypeError);\ncreateErrorType('ERR_MISSING_ARGS', function () {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n  if (assert === undefined) assert = require('../assert');\n  assert(args.length > 0, 'At least one arg needs to be specified');\n  var msg = 'The ';\n  var len = args.length;\n  args = args.map(function (a) {\n    return \"\\\"\".concat(a, \"\\\"\");\n  });\n  switch (len) {\n    case 1:\n      msg += \"\".concat(args[0], \" argument\");\n      break;\n    case 2:\n      msg += \"\".concat(args[0], \" and \").concat(args[1], \" arguments\");\n      break;\n    default:\n      msg += args.slice(0, len - 1).join(', ');\n      msg += \", and \".concat(args[len - 1], \" arguments\");\n      break;\n  }\n  return \"\".concat(msg, \" must be specified\");\n}, TypeError);\nmodule.exports.codes = codes;","'use strict';\n\nvar fnToStr = Function.prototype.toString;\nvar reflectApply = typeof Reflect === 'object' && Reflect !== null && Reflect.apply;\nvar badArrayLike;\nvar isCallableMarker;\nif (typeof reflectApply === 'function' && typeof Object.defineProperty === 'function') {\n\ttry {\n\t\tbadArrayLike = Object.defineProperty({}, 'length', {\n\t\t\tget: function () {\n\t\t\t\tthrow isCallableMarker;\n\t\t\t}\n\t\t});\n\t\tisCallableMarker = {};\n\t\t// eslint-disable-next-line no-throw-literal\n\t\treflectApply(function () { throw 42; }, null, badArrayLike);\n\t} catch (_) {\n\t\tif (_ !== isCallableMarker) {\n\t\t\treflectApply = null;\n\t\t}\n\t}\n} else {\n\treflectApply = null;\n}\n\nvar constructorRegex = /^\\s*class\\b/;\nvar isES6ClassFn = function isES6ClassFunction(value) {\n\ttry {\n\t\tvar fnStr = fnToStr.call(value);\n\t\treturn constructorRegex.test(fnStr);\n\t} catch (e) {\n\t\treturn false; // not a function\n\t}\n};\n\nvar tryFunctionObject = function tryFunctionToStr(value) {\n\ttry {\n\t\tif (isES6ClassFn(value)) { return false; }\n\t\tfnToStr.call(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\nvar toStr = Object.prototype.toString;\nvar objectClass = '[object Object]';\nvar fnClass = '[object Function]';\nvar genClass = '[object GeneratorFunction]';\nvar ddaClass = '[object HTMLAllCollection]'; // IE 11\nvar ddaClass2 = '[object HTML document.all class]';\nvar ddaClass3 = '[object HTMLCollection]'; // IE 9-10\nvar hasToStringTag = typeof Symbol === 'function' && !!Symbol.toStringTag; // better: use `has-tostringtag`\n\nvar isIE68 = !(0 in [,]); // eslint-disable-line no-sparse-arrays, comma-spacing\n\nvar isDDA = function isDocumentDotAll() { return false; };\nif (typeof document === 'object') {\n\t// Firefox 3 canonicalizes DDA to undefined when it's not accessed directly\n\tvar all = document.all;\n\tif (toStr.call(all) === toStr.call(document.all)) {\n\t\tisDDA = function isDocumentDotAll(value) {\n\t\t\t/* globals document: false */\n\t\t\t// in IE 6-8, typeof document.all is \"object\" and it's truthy\n\t\t\tif ((isIE68 || !value) && (typeof value === 'undefined' || typeof value === 'object')) {\n\t\t\t\ttry {\n\t\t\t\t\tvar str = toStr.call(value);\n\t\t\t\t\treturn (\n\t\t\t\t\t\tstr === ddaClass\n\t\t\t\t\t\t|| str === ddaClass2\n\t\t\t\t\t\t|| str === ddaClass3 // opera 12.16\n\t\t\t\t\t\t|| str === objectClass // IE 6-8\n\t\t\t\t\t) && value('') == null; // eslint-disable-line eqeqeq\n\t\t\t\t} catch (e) { /**/ }\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t}\n}\n\nmodule.exports = reflectApply\n\t? function isCallable(value) {\n\t\tif (isDDA(value)) { return true; }\n\t\tif (!value) { return false; }\n\t\tif (typeof value !== 'function' && typeof value !== 'object') { return false; }\n\t\ttry {\n\t\t\treflectApply(value, null, badArrayLike);\n\t\t} catch (e) {\n\t\t\tif (e !== isCallableMarker) { return false; }\n\t\t}\n\t\treturn !isES6ClassFn(value) && tryFunctionObject(value);\n\t}\n\t: function isCallable(value) {\n\t\tif (isDDA(value)) { return true; }\n\t\tif (!value) { return false; }\n\t\tif (typeof value !== 'function' && typeof value !== 'object') { return false; }\n\t\tif (hasToStringTag) { return tryFunctionObject(value); }\n\t\tif (isES6ClassFn(value)) { return false; }\n\t\tvar strClass = toStr.call(value);\n\t\tif (strClass !== fnClass && strClass !== genClass && !(/^\\[object HTML/).test(strClass)) { return false; }\n\t\treturn tryFunctionObject(value);\n\t};\n","'use strict';\n\n/** @type {import('.')} */\nmodule.exports = Object;\n","'use strict';\n\n/** @type {import('./type')} */\nmodule.exports = TypeError;\n","'use strict';\n\nvar callBound = require('call-bound');\nvar isRegex = require('is-regex');\n\nvar $exec = callBound('RegExp.prototype.exec');\nvar $TypeError = require('es-errors/type');\n\n/** @type {import('.')} */\nmodule.exports = function regexTester(regex) {\n\tif (!isRegex(regex)) {\n\t\tthrow new $TypeError('`regex` must be a RegExp');\n\t}\n\treturn function test(s) {\n\t\treturn $exec(regex, s) !== null;\n\t};\n};\n","'use strict';\n\nvar call = Function.prototype.call;\nvar $hasOwn = Object.prototype.hasOwnProperty;\nvar bind = require('function-bind');\n\n/** @type {import('.')} */\nmodule.exports = bind.call(call, $hasOwn);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","const assert = require('assert');\nconst os = require('os');\n\nconst vscode = require('vscode');\n\nconst rainbow_utils = require('../../rainbow_utils.js');\nconst unit_tests = require('./unit_tests.js');\n\n\n// The only reason why we are importing extension as a module here is to run some small unit tests like autodetect_dialect_frequency_based.\n// All other functionality such as commands and highlighting would work without this import/require line, since the extension is activated using VSCode internal mechanisms.\n// So the require/import extension line below can be deleted and all of the main integration tests would still pass.\nconst extension = require('../../extension.js');\n\n\nconst is_web_ext = (os.homedir === undefined); // Runs as web extension in browser.\n\n// TODO make RBQL command wait for the result to reduce the timeout.\nconst poor_rbql_async_design_workaround_timeout = 6000;\n\n\nfunction sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\n\nasync function SetCursorToTheTopAtStartWorkaround() {\n    await sleep(200);\n    // Calling \"cursorTop\" is a workaround for in-UI testing mode - the file can be reopened with the cursor at some random position.\n    // It is not clear how to properly fix this.\n    await vscode.commands.executeCommand(\"cursorTop\");\n}\n\n\nfunction log_message(msg) {\n    console.log('###RAINBOW_CSV_UNIT_TEST_MESSAGE### ' + msg);\n}\n\n\nasync function test_comment_prefix_js(test_folder_uri) {\n    let [uri, active_doc, editor, lint_report] = [null, null, null, null];\n    uri = vscode.Uri.joinPath(test_folder_uri, 'csv_files', 'countries_with_comments.csv');\n    active_doc = await vscode.workspace.openTextDocument(uri);\n    editor = await vscode.window.showTextDocument(active_doc);\n    await sleep(1000);\n\n    lint_report = await vscode.commands.executeCommand('rainbow-csv.CSVLint');\n    assert(!lint_report.is_ok); // Lint is failing because we mistakenly treat comment lines as records.\n\n    await SetCursorToTheTopAtStartWorkaround();\n    await vscode.commands.executeCommand(\"cursorRightSelect\");\n    await vscode.commands.executeCommand(\"cursorRightSelect\");\n    await sleep(1000);\n    await vscode.commands.executeCommand('rainbow-csv.SetCommentPrefix');\n    await sleep(1500);\n\n    lint_report = await vscode.commands.executeCommand('rainbow-csv.CSVLint');\n    assert(lint_report.is_ok); // Lint is OK because we marked comment lines as comments.\n    await sleep(1000);\n\n    // Now lets toggle the comment.\n    await vscode.commands.executeCommand(\"cursorTop\");\n    await vscode.commands.executeCommand(\"cursorRight\");\n    await vscode.commands.executeCommand(\"cursorRight\");\n    await sleep(500);\n    await vscode.commands.executeCommand(\"editor.action.commentLine\");\n    lint_report = await vscode.commands.executeCommand('rainbow-csv.CSVLint');\n    assert(!lint_report.is_ok); // Lint is failing again because we toggled the first comment line.\n    await sleep(1000);\n    await vscode.commands.executeCommand(\"editor.action.commentLine\");\n    lint_report = await vscode.commands.executeCommand('rainbow-csv.CSVLint');\n    assert(lint_report.is_ok); // Lint is OK now because we toggled the first line again back to its comment state.\n    await sleep(1000);\n    // Undo twice to avoid unsaved changes for RBQL.\n    await vscode.commands.executeCommand(\"undo\");\n    await vscode.commands.executeCommand(\"undo\");\n    await sleep(1000);\n\n    let test_task = {rbql_backend: \"js\", rbql_query: \"SELECT a.Country, a.Population\", with_headers: true, integration_test_delay: 1500};\n    await vscode.commands.executeCommand('rainbow-csv.RBQL', test_task);\n    await sleep(poor_rbql_async_design_workaround_timeout);\n    active_doc = vscode.window.activeTextEditor.document;\n    let num_lines_after_query = active_doc.lineCount;\n    log_message(`Length after js query: ${num_lines_after_query}`);\n    let expected_num_lines = 11; // 10 records + header.\n    if (!is_web_ext) {\n        expected_num_lines += 1; // Standard non-web CSV writer adds a newline at the end.\n    }\n    assert.equal(expected_num_lines, num_lines_after_query);\n}\n\nasync function test_comment_prefix_python_rbql(test_folder_uri) {\n    let [uri, active_doc, editor, lint_report] = [null, null, null, null];\n    uri = vscode.Uri.joinPath(test_folder_uri, 'csv_files', 'countries_with_comments.csv');\n    active_doc = await vscode.workspace.openTextDocument(uri);\n    editor = await vscode.window.showTextDocument(active_doc);\n    await sleep(1000);\n    // Don't need to select comment prefix again since we already did it for this file in the previous test.\n    // Using Python native expressions to make sure that we are running python query.\n    let test_task = {rbql_backend: \"python\", rbql_query: \"SELECT '[{}]'.format(a.Country), int(a.Population) / 10\", with_headers: true, integration_test_delay: 1500};\n    await vscode.commands.executeCommand('rainbow-csv.RBQL', test_task);\n    await sleep(poor_rbql_async_design_workaround_timeout);\n    active_doc = vscode.window.activeTextEditor.document;\n    let num_lines_after_query = active_doc.lineCount;\n    log_message(`Length after python query: ${num_lines_after_query}`);\n    assert.equal(12, num_lines_after_query); // Ten records + header + trailing empty line = 12\n}\n\n\nasync function test_rbql_node(test_folder_uri) {\n    let [uri, active_doc, editor] = [null, null, null];\n\n    // Test comment prefix and js query with it.\n    await test_comment_prefix_js(test_folder_uri);\n    // Test comment prefix with python query.\n    await test_comment_prefix_python_rbql(test_folder_uri);\n\n    // Test Python query.\n    uri = vscode.Uri.joinPath(test_folder_uri, 'csv_files', 'university_ranking.csv');\n    active_doc = await vscode.workspace.openTextDocument(uri);\n    editor = await vscode.window.showTextDocument(active_doc);\n    await sleep(1000);\n    let test_task = {rbql_backend: \"python\", with_headers: true, rbql_query: \"select top 20 a1, math.ceil(float(a.total_score) * 100), a['university_name'], None, 'foo bar' order by a2\"};\n    await vscode.commands.executeCommand('rainbow-csv.RBQL', test_task);\n    await sleep(poor_rbql_async_design_workaround_timeout);\n    // Indirectly check reported warnings.\n    let state_report = await vscode.commands.executeCommand('rainbow-csv.InternalTest', {check_last_rbql_warnings: true});\n    assert.equal('[\"None values in output were replaced by empty strings\"]', JSON.stringify(state_report.warnings));\n    active_doc = vscode.window.activeTextEditor.document;\n    let length_after_query = active_doc.getText().length;\n    log_message(`Length after python query: ${length_after_query}`);\n    assert.equal(868, length_after_query); // wc -c gives smaller value. Probably VSCode uses '\\r\\n' as line ends.\n\n    // Test JS query.\n    test_task = {rbql_backend: \"js\", with_headers: false, rbql_query: \"select a2 * 10, a3, a3.length where NR > 1 order by a3.length limit 10\"};\n    await vscode.commands.executeCommand('rainbow-csv.RBQL', test_task);\n    await sleep(poor_rbql_async_design_workaround_timeout);\n    active_doc = vscode.window.activeTextEditor.document;\n    length_after_query = active_doc.getText().length;\n    log_message(`Length after js query: ${length_after_query}`);\n    assert.equal(268, length_after_query);\n\n    // Test RBQL query error reporting.\n    test_task = {rbql_backend: \"python\", rbql_query: \"select nonexistent_function(a1)\"};\n    await vscode.commands.executeCommand('rainbow-csv.RBQL', test_task);\n    await sleep(poor_rbql_async_design_workaround_timeout);\n    state_report = await vscode.commands.executeCommand('rainbow-csv.InternalTest', {check_last_rbql_report: true});\n    assert.equal('query execution', state_report.error_type);\n    assert.equal(\"At record 1, Details: name 'nonexistent_function' is not defined\", state_report.error_msg);\n\n    // Test with multiline records.\n    uri = vscode.Uri.joinPath(test_folder_uri, 'csv_files', 'synthetic_rfc_newline_data.csv');\n    active_doc = await vscode.workspace.openTextDocument(uri);\n    editor = await vscode.window.showTextDocument(active_doc);\n    await sleep(1000);\n    assert.equal(active_doc.languageId, 'dynamic csv');\n    test_task = {rbql_backend: \"js\", rbql_query: \"select '<<<<<', a3, a2, a1, '>>>>> NR: ' + NR\"};\n    await vscode.commands.executeCommand('rainbow-csv.RBQL', test_task);\n    await sleep(poor_rbql_async_design_workaround_timeout);\n    active_doc = vscode.window.activeTextEditor.document;\n    length_after_query = active_doc.getText().length;\n    log_message(`Length after js multiline-record query: ${length_after_query}`);\n    assert.equal(645, length_after_query);\n\n    // Test RBQL JOIN query.\n    uri = vscode.Uri.joinPath(test_folder_uri, 'csv_files', 'university_ranking.csv');\n    active_doc = await vscode.workspace.openTextDocument(uri);\n    editor = await vscode.window.showTextDocument(active_doc);\n    await sleep(1000);\n    test_task = {rbql_backend: \"python\", with_headers: true, rbql_query: \"select a.university_name, b.Country, b.Population, b['GDP per capita'] JOIN countries.csv on a.country == b.Country order by int(b.Population) desc\"};\n    await vscode.commands.executeCommand('rainbow-csv.RBQL', test_task);\n    await sleep(poor_rbql_async_design_workaround_timeout);\n    state_report = await vscode.commands.executeCommand('rainbow-csv.InternalTest', {check_last_rbql_warnings: true});\n    assert.equal('[\"The first record in JOIN file countries.csv was also treated as header (and skipped)\"]', JSON.stringify(state_report.warnings));\n    active_doc = vscode.window.activeTextEditor.document;\n    length_after_query = active_doc.getText().length;\n    log_message(`Length after join query: ${length_after_query}`);\n    // Not sure why it is 11592 and not 11610, when saving the file `wc -c` gives 11610.\n    assert.equal(11592, length_after_query);\n    // We have 202 not 201 because the trailing '\\n' maps to a trailing empty line in VSCode.\n    assert.equal(202, active_doc.lineCount);\n\n    // Test UPDATE, no warnings and copy back.\n    uri = vscode.Uri.joinPath(test_folder_uri, 'csv_files', 'countries.csv');\n    active_doc = await vscode.workspace.openTextDocument(uri);\n    let filename_before = active_doc.fileName;\n    let length_before_query = active_doc.getText().length;\n    editor = await vscode.window.showTextDocument(active_doc);\n    assert(active_doc.getText().indexOf('oceania') == -1);\n    assert(active_doc.getText().indexOf('OCEANIA') > 0);\n    await sleep(1000);\n\n    test_task = {rbql_backend: \"python\", with_headers: true, rbql_query: \"UPDATE set a.Region = a.Region.lower()\"};\n    await vscode.commands.executeCommand('rainbow-csv.RBQL', test_task);\n    await sleep(poor_rbql_async_design_workaround_timeout);\n    state_report = await vscode.commands.executeCommand('rainbow-csv.InternalTest', {check_last_rbql_warnings: true});\n    assert.equal('[]', JSON.stringify(state_report.warnings));\n    active_doc = vscode.window.activeTextEditor.document;\n    let filename_after = active_doc.fileName;\n    length_after_query = active_doc.getText().length;\n    log_message(`Length after update query: ${length_after_query}`);\n    // Changing column to lowercase should not affect the doc length if we account for the '\\r\\n' line endings.\n    assert.equal(length_before_query, length_after_query - active_doc.lineCount + 1);\n    assert(active_doc.getText().indexOf('OCEANIA') == -1);\n    assert(active_doc.getText().indexOf('oceania') > 0);\n\n    await sleep(1000);\n    await vscode.commands.executeCommand('rainbow-csv.CopyBack');\n    await sleep(1000);\n    active_doc = await vscode.workspace.openTextDocument(uri);\n    let filename_after_copy_back = active_doc.fileName;\n    // Make sure that the name stays the same as the original doc but the content has changed.\n    assert.equal(filename_before, filename_after_copy_back);\n    assert(active_doc.getText().indexOf('OCEANIA') == -1);\n    assert(active_doc.getText().indexOf('oceania') > 0);\n}\n\n\nasync function test_rbql_web(test_folder_uri) {\n    let [uri, active_doc, editor] = [null, null, null];\n\n    // Test comment prefix and js query with it.\n    await test_comment_prefix_js(test_folder_uri);\n\n    uri = vscode.Uri.joinPath(test_folder_uri, 'csv_files', 'university_ranking.csv');\n    active_doc = await vscode.workspace.openTextDocument(uri);\n    editor = await vscode.window.showTextDocument(active_doc);\n    await sleep(1000);\n    let test_task = {rbql_backend: \"js\", with_headers: true, rbql_query: \"select top 20 a1, Math.ceil(parseFloat(a.total_score) * 100), a['university_name'], null, 'foo bar' order by a2\"};\n    await vscode.commands.executeCommand('rainbow-csv.RBQL', test_task);\n    await sleep(poor_rbql_async_design_workaround_timeout);\n\n    // Indirectly check reported warnings.\n    let state_report = await vscode.commands.executeCommand('rainbow-csv.InternalTest', {check_last_rbql_warnings: true});\n    assert.equal('[\"null values in output were replaced by empty strings\"]', JSON.stringify(state_report.warnings));\n    active_doc = vscode.window.activeTextEditor.document;\n    let length_after_query = active_doc.getText().length;\n    log_message(`Length after first js query: ${length_after_query}`);\n    assert.equal(846, length_after_query);\n\n    test_task = {rbql_backend: \"js\", rbql_query: \"select a2 * 10, a3, a3.length where NR > 1 order by a3.length limit 10\"};\n    await vscode.commands.executeCommand('rainbow-csv.RBQL', test_task);\n    await sleep(poor_rbql_async_design_workaround_timeout);\n    active_doc = vscode.window.activeTextEditor.document;\n    length_after_query = active_doc.getText().length;\n    log_message(`Length after second js query: ${length_after_query}`);\n    // 267 instead of 268 because no trailing '\\n' at the end of file.\n    assert.equal(267, length_after_query);\n\n    // Test RBQL query error reporting.\n    test_task = {rbql_backend: \"js\", rbql_query: \"select nonexistent_function(a1)\"};\n    await vscode.commands.executeCommand('rainbow-csv.RBQL', test_task);\n    await sleep(poor_rbql_async_design_workaround_timeout);\n    state_report = await vscode.commands.executeCommand('rainbow-csv.InternalTest', {check_last_rbql_report: true});\n    assert.equal('query execution', state_report.error_type);\n    assert.equal(\"At record 1, Details: nonexistent_function is not defined\", state_report.error_msg);\n\n    // Test with multiline records.\n    log_message('Starting multiline records test');\n    uri = vscode.Uri.joinPath(test_folder_uri, 'csv_files', 'synthetic_rfc_newline_data.csv');\n    active_doc = await vscode.workspace.openTextDocument(uri);\n    editor = await vscode.window.showTextDocument(active_doc);\n    await sleep(1000);\n\n    test_task = {rbql_backend: \"js\", rbql_query: \"select '<<<<<', a3, a2, a1, '>>>>> NR: ' + NR\", enable_rfc_newlines: true};\n    await vscode.commands.executeCommand('rainbow-csv.RBQL', test_task);\n    await sleep(poor_rbql_async_design_workaround_timeout);\n    active_doc = vscode.window.activeTextEditor.document;\n    length_after_query = active_doc.getText().length;\n    log_message(`Length after js multiline-record query: ${length_after_query}`);\n    // 644 instead of 645 because no trailing '\\n' at the end of file.\n    assert.equal(644, length_after_query);\n}\n\n\nasync function test_double_width_chars_alignment(test_folder_uri) {\n    let uri = vscode.Uri.joinPath(test_folder_uri, 'csv_files', 'double_width_chars.csv');\n    let active_doc = await vscode.workspace.openTextDocument(uri);\n    let editor = await vscode.window.showTextDocument(active_doc);\n    let length_original = active_doc.getText().length;\n    log_message(`Original length: ${length_original}`);\n    assert.equal(274, length_original);\n    await sleep(2000);\n\n    await vscode.commands.executeCommand('rainbow-csv.Align');\n    let length_aligned = active_doc.getText().length;\n    log_message(`Aligned length: ${length_aligned}`);\n    assert.equal(461, length_aligned);\n    assert(length_aligned > length_original);\n    let lint_report = await vscode.commands.executeCommand('rainbow-csv.CSVLint');\n    assert(lint_report.is_ok);\n    await sleep(2000);\n\n    await vscode.commands.executeCommand('rainbow-csv.Shrink');\n    let length_shrinked = active_doc.getText().length;\n    log_message(`Shrinked length: ${length_shrinked}`);\n    // This is to ensure that after original -> align -> shrink sequence we get back to original doc.\n    assert.equal(length_original, length_shrinked);\n    await sleep(1000);\n\n    // Now do virtual Alignment.\n    await vscode.commands.executeCommand('rainbow-csv.VirtualAlign');\n    await sleep(2000);\n    await vscode.commands.executeCommand('rainbow-csv.VirtualShrink');\n    await sleep(1000);\n}\n\nasync function test_virtual_alignment(test_folder_uri) {\n    let uri = vscode.Uri.joinPath(test_folder_uri, 'csv_files', 'virtual_align_test.csv');\n    let active_doc = await vscode.workspace.openTextDocument(uri);\n    let editor = await vscode.window.showTextDocument(active_doc);\n    await sleep(1500);\n    await vscode.commands.executeCommand('rainbow-csv.VirtualAlign');\n    await sleep(5000);\n    await vscode.commands.executeCommand('rainbow-csv.VirtualShrink');\n    await sleep(5000);\n\n    uri = vscode.Uri.joinPath(test_folder_uri, 'csv_files', 'synthetic_rfc_newline_data.csv');\n    active_doc = await vscode.workspace.openTextDocument(uri);\n    editor = await vscode.window.showTextDocument(active_doc);\n    await sleep(1500);\n    await vscode.commands.executeCommand('rainbow-csv.VirtualAlign');\n    await sleep(5000);\n    await vscode.commands.executeCommand('rainbow-csv.VirtualShrink');\n    await sleep(1500);\n}\n\n\nasync function test_column_tracking(test_folder_uri) {\n    let uri = vscode.Uri.joinPath(test_folder_uri, 'csv_files', 'column_tracking_test.csv');\n    let active_doc = await vscode.workspace.openTextDocument(uri);\n    let editor = await vscode.window.showTextDocument(active_doc);\n    await sleep(2000);\n    for (let i = 0; i < 14; i++) {\n        await vscode.commands.executeCommand(\"cursorRight\");\n    }\n    await sleep(500);\n    await vscode.commands.executeCommand('rainbow-csv.ToggleColumnTracking');\n    await sleep(2000);\n    for (let i = 0; i < 50; i++) {\n        await vscode.commands.executeCommand(\"cursorDown\");\n        await sleep(10);\n    }\n    await sleep(2000);\n}\n\n\nasync function test_alternate_row_background(test_folder_uri) {\n    let uri = vscode.Uri.joinPath(test_folder_uri, 'csv_files', 'alternate_row_background_test.csv');\n    let active_doc = await vscode.workspace.openTextDocument(uri);\n    let editor = await vscode.window.showTextDocument(active_doc);\n    await sleep(1000);\n    await vscode.commands.executeCommand('rainbow-csv.ToggleRowBackground');\n    await sleep(2000);\n    for (let i = 0; i < 50; i++) {\n        await vscode.commands.executeCommand(\"cursorDown\");\n        await sleep(10);\n    }\n    await sleep(6000);\n}\n\n\nasync function test_align_shrink_lint(test_folder_uri) {\n    let uri = vscode.Uri.joinPath(test_folder_uri, 'csv_files', 'university_ranking.csv');\n    let active_doc = await vscode.workspace.openTextDocument(uri);\n    let editor = await vscode.window.showTextDocument(active_doc);\n    let length_original = active_doc.getText().length;\n    log_message(`Original length: ${length_original}`);\n    assert.equal(12538, length_original);\n    await sleep(1000);\n\n    await vscode.commands.executeCommand('rainbow-csv.VirtualAlign');\n    await sleep(1000);\n    await vscode.commands.executeCommand('rainbow-csv.VirtualShrink');\n    await sleep(1000);\n\n    await vscode.commands.executeCommand('rainbow-csv.Align');\n    let length_aligned = active_doc.getText().length;\n    log_message(`Aligned length: ${length_aligned}`);\n    assert.equal(25896, length_aligned);\n    assert(length_aligned > length_original);\n    let lint_report = await vscode.commands.executeCommand('rainbow-csv.CSVLint');\n    assert(lint_report.is_ok);\n    await sleep(2000);\n\n    await vscode.commands.executeCommand('rainbow-csv.Shrink');\n    let length_shrinked = active_doc.getText().length;\n    log_message(`Shrinked length: ${length_shrinked}`);\n    // This is to ensure that after original -> align -> shrink sequence we get back to original doc.\n    assert.equal(length_original, length_shrinked);\n    await sleep(500);\n\n    let text_with_comma = 'foobar,';\n    await vscode.commands.executeCommand('default:type', { text: text_with_comma });\n    lint_report = await vscode.commands.executeCommand('rainbow-csv.CSVLint');\n    assert(lint_report.fields_info.size > 1);\n    await sleep(500);\n\n    for (let i = 0; i < text_with_comma.length; i++) {\n        await vscode.commands.executeCommand(\"deleteLeft\");\n    }\n    await sleep(500);\n}\n\n\nasync function test_column_edit(test_folder_uri) {\n    let uri = vscode.Uri.joinPath(test_folder_uri, 'csv_files', 'movies.txt');\n    let active_doc = await vscode.workspace.openTextDocument(uri);\n    let editor = await vscode.window.showTextDocument(active_doc);\n    let length_original = active_doc.getText().length;\n    assert.equal(9986, length_original);\n    await SetCursorToTheTopAtStartWorkaround();\n    for (let i = 0; i < 10; i++) {\n        await vscode.commands.executeCommand(\"cursorRight\");\n    }\n    await sleep(1000);\n    await vscode.commands.executeCommand(\"rainbow-csv.ColumnEditAfter\");\n    await sleep(1000);\n    let text_with_comma = 'foobar,';\n    await vscode.commands.executeCommand('default:type', { text: text_with_comma });\n    let length_after_column_edit = active_doc.getText().length;\n    assert.equal(length_original + active_doc.lineCount * text_with_comma.length, length_after_column_edit);\n    await sleep(1000);\n    for (let i = 0; i < text_with_comma.length; i++) {\n        await vscode.commands.executeCommand(\"deleteLeft\");\n    }\n    await sleep(1000);\n    let length_after_delete = active_doc.getText().length;\n    // Ensure that after multicursor deletion of the added `text_with_comma` text we get back to the original doc.\n    assert.equal(length_original, length_after_delete);\n}\n\n\nasync function test_no_autodetection(test_folder_uri) {\n    let uri = vscode.Uri.joinPath(test_folder_uri, 'csv_files', 'lorem_ipsum.txt');\n    let active_doc = await vscode.workspace.openTextDocument(uri);\n    log_message(`languageId for lorem_ipsum.txt: ${active_doc.languageId}`);\n    assert.equal(active_doc.languageId, 'plaintext');\n    let editor = await vscode.window.showTextDocument(active_doc);\n    await sleep(1000);\n\n    uri = vscode.Uri.joinPath(test_folder_uri, 'suite', 'index.js');\n    active_doc = await vscode.workspace.openTextDocument(uri);\n    log_message(`languageId for index.js: ${active_doc.languageId}`);\n    assert.equal(active_doc.languageId, 'javascript');\n    editor = await vscode.window.showTextDocument(active_doc);\n    await sleep(1000);\n\n    uri = vscode.Uri.joinPath(test_folder_uri, 'csv_files', 'lorem_ipsum');\n    active_doc = await vscode.workspace.openTextDocument(uri);\n    log_message(`languageId for lorem_ipsum: ${active_doc.languageId}`);\n    assert.equal(active_doc.languageId, 'plaintext');\n    editor = await vscode.window.showTextDocument(active_doc);\n    await sleep(1000);\n}\n\n\nasync function test_dynamic_csv(test_folder_uri) {\n    let uri = vscode.Uri.joinPath(test_folder_uri, 'csv_files', 'movies_multichar_separator.txt');\n    let active_doc = await vscode.workspace.openTextDocument(uri);\n    log_message(`languageId for movies_multichar_separator.txt: ${active_doc.languageId}`);\n    assert.equal(active_doc.languageId, 'plaintext');\n    let editor = await vscode.window.showTextDocument(active_doc);\n    await SetCursorToTheTopAtStartWorkaround();\n    await sleep(1000);\n    for (let i = 0; i < 6; i++) {\n        await vscode.commands.executeCommand(\"cursorRight\");\n    }\n    for (let i = 0; i < 3; i++) {\n        await vscode.commands.executeCommand(\"cursorRightSelect\");\n    }\n    await sleep(1000);\n    let dialect_test_task = {'integration_test': true};\n    await vscode.commands.executeCommand('rainbow-csv.RainbowSeparator', dialect_test_task);\n    await sleep(4000);\n    log_message(`languageId for small_movies.pipe after RainbowSeparator: ${active_doc.languageId}`);\n    assert.equal(active_doc.languageId, 'dynamic csv');\n    await vscode.commands.executeCommand('rainbow-csv.RainbowSeparatorOff');\n    await sleep(2000);\n    log_message(`languageId for small_movies.pipe after RainbowSeparatorOff: ${active_doc.languageId}`);\n    assert.equal(active_doc.languageId, 'plaintext');\n    await sleep(1000);\n\n    await vscode.commands.executeCommand('rainbow-csv.RainbowSeparator', dialect_test_task);\n    await sleep(4000);\n\n    // Scroll around to test.\n    await vscode.commands.executeCommand(\"scrollPageDown\");\n    await sleep(500);\n    await vscode.commands.executeCommand(\"scrollPageUp\");\n    await sleep(500);\n\n    let length_original = active_doc.getText().length;\n    await vscode.commands.executeCommand('rainbow-csv.Align');\n    let length_aligned = active_doc.getText().length;\n    assert.equal(length_original + 8513, length_aligned); // 8513 was calculated as the difference in file sizes reported by wc -c.\n    await sleep(1000);\n    await vscode.commands.executeCommand('rainbow-csv.Shrink');\n    await sleep(1000);\n    let length_shrinked = active_doc.getText().length;\n    assert.equal(length_original, length_shrinked);\n\n    // Now we need to undo the commands to run RBQL.\n    await vscode.commands.executeCommand('undo'); // Undo Shrink.\n    await sleep(500);\n    await vscode.commands.executeCommand('undo'); // Undo Align.\n    await sleep(500);\n\n    let test_task = {rbql_backend: \"js\", rbql_query: \"select a1, a4 % 100, a5 order by a1 limit 20\"};\n    await vscode.commands.executeCommand('rainbow-csv.RBQL', test_task);\n    await sleep(poor_rbql_async_design_workaround_timeout);\n    active_doc = vscode.window.activeTextEditor.document;\n    let length_after_query = active_doc.getText().length;\n    log_message(`Length after js query: ${length_after_query}`);\n    await sleep(1000);\n    let expected_num_lines = 742;\n    if (!is_web_ext) {\n        expected_num_lines += 1; // Standard non-web CSV writer adds a newline at the end.\n    }\n    assert.equal(expected_num_lines, length_after_query);\n\n    await vscode.commands.executeCommand('rainbow-csv.VirtualAlign');\n    await sleep(2000);\n    await vscode.commands.executeCommand('rainbow-csv.VirtualShrink');\n    await sleep(1000);\n\n}\n\nasync function test_huge_file(test_folder_uri) {\n    // Test huge file close to VSCode syntax highlighting limit (20MB Or 300K lines).\n    // Do some basic navigation commands and some basic editing to ensure that performance is OK.\n    let start_time = performance.now();\n    let uri = vscode.Uri.joinPath(test_folder_uri, 'csv_files', 'books_huge.txt');\n    let active_doc = await vscode.workspace.openTextDocument(uri);\n    let editor = await vscode.window.showTextDocument(active_doc);\n    assert.equal(active_doc.languageId, 'csv');\n    await vscode.commands.executeCommand(\"cursorBottom\");\n    await sleep(500);\n    await vscode.commands.executeCommand(\"cursorTop\");\n    await sleep(500);\n    for (let i = 0; i < 100; i++) {\n        await vscode.commands.executeCommand(\"scrollPageDown\");\n        await sleep(10);\n    }\n    for (let i = 0; i < 10; i++) {\n        // Delete some lines.\n        await vscode.commands.executeCommand(\"editor.action.deleteLines\");\n        await sleep(10);\n    }\n    await sleep(500);\n    await vscode.commands.executeCommand(\"cursorTop\");\n    await sleep(500);\n    let end_time = performance.now();\n    let total_sleep_time = 500 * 4 - 10 * 100 - 10 * 10;\n    let total_adjusted_latency = (end_time - start_time) - total_sleep_time;\n    log_message(`total adjusted latency: ${total_adjusted_latency}`);\n    assert(total_adjusted_latency < 20000);\n}\n\nasync function test_autodetection(test_folder_uri) {\n    let uri = vscode.Uri.joinPath(test_folder_uri, 'csv_files', 'university_ranking_semicolon.txt');\n    let active_doc = await vscode.workspace.openTextDocument(uri);\n    let editor = await vscode.window.showTextDocument(active_doc);\n    log_message(`languageId for university_ranking_semicolon.txt: ${active_doc.languageId}`);\n    assert.equal(active_doc.languageId, 'csv (semicolon)');\n    await sleep(1000);\n}\n\n\nasync function test_manual_enable_disable(test_folder_uri) {\n    let uri = vscode.Uri.joinPath(test_folder_uri, 'csv_files', 'small_movies.pipe');\n    let active_doc = await vscode.workspace.openTextDocument(uri);\n    log_message(`languageId for small_movies.pipe: ${active_doc.languageId}`);\n    assert.equal(active_doc.languageId, 'plaintext');\n    let editor = await vscode.window.showTextDocument(active_doc);\n    await SetCursorToTheTopAtStartWorkaround();\n    await sleep(1000);\n    for (let i = 0; i < 6; i++) {\n        await vscode.commands.executeCommand(\"cursorRight\");\n    }\n    await vscode.commands.executeCommand(\"cursorRightSelect\");\n    await sleep(1000);\n    let dialect_test_task = {'integration_test': true};\n    await vscode.commands.executeCommand('rainbow-csv.RainbowSeparator', dialect_test_task);\n    await sleep(4000);\n    log_message(`languageId for small_movies.pipe after RainbowSeparator: ${active_doc.languageId}`);\n    assert.equal(active_doc.languageId, 'dynamic csv');\n    await vscode.commands.executeCommand('rainbow-csv.RainbowSeparatorOff');\n    await sleep(2000);\n    log_message(`languageId for small_movies.pipe after RainbowSeparatorOff: ${active_doc.languageId}`);\n    assert.equal(active_doc.languageId, 'plaintext');\n    await sleep(1000);\n}\n\n\nfunction test_range_position_contains_equivalence() {\n    // Ensure equivalence of test double and native classes \"contains\" logic.\n    let [vscode_range, vscode_position, test_double_range, test_double_position] = [null, null, null, null];\n\n    // Simple test.\n    vscode_range = new vscode.Range(1, 0, 1, 10);\n    vscode_position = new vscode.Position(1, 4);\n    test_double_range = new unit_tests.VscodeRangeTestDouble(1, 0, 1, 10);\n    test_double_position = new unit_tests.VscodePositionTestDouble(1, 4);\n    assert(vscode_range.contains(vscode_position));\n    assert(test_double_range.contains(test_double_position));\n\n    // Simple not contains test - different line.\n    vscode_range = new vscode.Range(1, 0, 1, 10);\n    vscode_position = new vscode.Position(2, 4);\n    test_double_range = new unit_tests.VscodeRangeTestDouble(1, 0, 1, 10);\n    test_double_position = new unit_tests.VscodePositionTestDouble(2, 4);\n    assert(!vscode_range.contains(vscode_position));\n    assert(!test_double_range.contains(test_double_position));\n\n    // Simple not contains test - after last character.\n    vscode_range = new vscode.Range(3, 5, 3, 10);\n    vscode_position = new vscode.Position(3, 11);\n    test_double_range = new unit_tests.VscodeRangeTestDouble(3, 5, 3, 10);\n    test_double_position = new unit_tests.VscodePositionTestDouble(3, 11);\n    assert(!vscode_range.contains(vscode_position));\n    assert(!test_double_range.contains(test_double_position));\n\n    // Contains test - last character.\n    vscode_range = new vscode.Range(3, 5, 3, 10);\n    vscode_position = new vscode.Position(3, 10);\n    test_double_range = new unit_tests.VscodeRangeTestDouble(3, 5, 3, 10);\n    test_double_position = new unit_tests.VscodePositionTestDouble(3, 10);\n    assert(vscode_range.contains(vscode_position));\n    assert(test_double_range.contains(test_double_position));\n\n    // Contains test - first character.\n    vscode_range = new vscode.Range(3, 5, 3, 10);\n    vscode_position = new vscode.Position(3, 5);\n    test_double_range = new unit_tests.VscodeRangeTestDouble(3, 5, 3, 10);\n    test_double_position = new unit_tests.VscodePositionTestDouble(3, 5);\n    assert(vscode_range.contains(vscode_position));\n    assert(test_double_range.contains(test_double_position));\n\n    // Not contains test - line before.\n    vscode_range = new vscode.Range(3, 5, 3, 10);\n    vscode_position = new vscode.Position(2, 5);\n    test_double_range = new unit_tests.VscodeRangeTestDouble(3, 5, 3, 10);\n    test_double_position = new unit_tests.VscodePositionTestDouble(2, 5);\n    assert(!vscode_range.contains(vscode_position));\n    assert(!test_double_range.contains(test_double_position));\n\n    // Contains test - multiline range, but character is off - still contains.\n    vscode_range = new vscode.Range(3, 5, 10, 4);\n    vscode_position = new vscode.Position(3, 100);\n    test_double_range = new unit_tests.VscodeRangeTestDouble(3, 5, 10, 4);\n    test_double_position = new unit_tests.VscodePositionTestDouble(3, 100);\n    assert(vscode_range.contains(vscode_position));\n    assert(test_double_range.contains(test_double_position));\n}\n\n\nfunction test_autodetect_dialect_frequency_based() {\n    let [doc_lines, active_doc, candidate_separators, max_num_chars_to_test, dialect_info] = [null, null, null, null, null];\n\n    // Basic test.\n    doc_lines = ['a1;a2', 'b1;b2', '#comment', 'c1;c2', 'd1;d2'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines);\n    candidate_separators = [',', ';'];\n    max_num_chars_to_test = 10000;\n    dialect_info = extension.autodetect_dialect_frequency_based(active_doc, candidate_separators, max_num_chars_to_test);\n    assert.deepEqual(['csv (semicolon)', ';', 'quoted'], dialect_info);\n\n    // Empty doc - should return csv since this is the default (presumably doc has .csv extension in order to call this function).\n    doc_lines = [];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines);\n    candidate_separators = ['|', ' ', '\\t', ',', ';'];\n    max_num_chars_to_test = 10000;\n    dialect_info = extension.autodetect_dialect_frequency_based(active_doc, candidate_separators, max_num_chars_to_test);\n    assert.deepEqual(['csv', ',', 'quoted'], dialect_info);\n\n    // Test max_num_chars_to_test effect on autodetection result.\n    doc_lines = ['a|b|c|d,f|g|h|d', 'a,b', 'c,d', 'e,f', 'g,h', 'k,l', 'm,n', 'o,p'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines);\n    candidate_separators = ['|', ',', ';'];\n    assert.deepEqual(['csv (pipe)', '|', 'simple'], extension.autodetect_dialect_frequency_based(active_doc, candidate_separators, /*max_num_chars_to_test=*/10));\n    assert.deepEqual(['csv', ',', 'quoted'], extension.autodetect_dialect_frequency_based(active_doc, candidate_separators, /*max_num_chars_to_test=*/10000));\n\n    // Dynamic csv test.\n    doc_lines = ['a$b', 'c$d', 'e$f', 'g,h', 'k,l'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines);\n    candidate_separators = ['$', ',', ';'];\n    assert.deepEqual(['dynamic csv', '$', 'simple'], extension.autodetect_dialect_frequency_based(active_doc, candidate_separators, /*max_num_chars_to_test=*/10000));\n\n    // Skipping frequent dot and whitespace because they are in blocklist.\n    doc_lines = ['a;  b...', 'c ;d...', 'e   ;f...', 'g  ; h...', 'k  l...'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines);\n    candidate_separators = [' ', '.', ';'];\n    assert.deepEqual(['csv (semicolon)', ';', 'quoted'], extension.autodetect_dialect_frequency_based(active_doc, candidate_separators, /*max_num_chars_to_test=*/10000));\n\n    // Using default comma separator because the user configured ones have zero frequency. Not sure if this is the right behavior in this case though.\n    doc_lines = ['a|b', 'c|d', 'e|f'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines);\n    candidate_separators = [';', '\\t'];\n    assert.deepEqual(['csv', ',', 'quoted'], extension.autodetect_dialect_frequency_based(active_doc, candidate_separators, /*max_num_chars_to_test=*/10000));\n\n    // Empty configured separators list.\n    doc_lines = ['a|b', 'c|d', 'e|f'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines);\n    candidate_separators = [];\n    assert.deepEqual(['csv', ',', 'quoted'], extension.autodetect_dialect_frequency_based(active_doc, candidate_separators, /*max_num_chars_to_test=*/10000));\n}\n\n\nasync function test_try_autoenable_rainbow_csv() {\n    let [config, extension_context, doc_lines, active_doc] = [null, null, null, null];\n\n    // Simple test. `other_fake.txt` in stop list doesn't prevent autodetection. Trailing space is not detected because the config option is set to 'false'.\n    doc_lines = ['a|b', 'c|d  ', 'e|f'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set(['other_fake.txt'])};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3]]);\n    await extension.try_autodetect_and_set_rainbow_filetype(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('csv (pipe)', active_doc.languageId);\n    assert.deepEqual([['fake.txt.csv (pipe)', {is_ok: true, first_trailing_space_line: null}]], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([['fake.txt', 'plaintext']], Array.from(extension_context.original_language_ids.entries()));\n\n    // Simple test. No autodetection.\n    doc_lines = ['a|b', 'c|d', 'e|f', 'g,h'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3], ['comment_prefix', '#']]);\n    await extension.try_autodetect_and_set_rainbow_filetype(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('plaintext', active_doc.languageId);\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test that the autodetection doesn't happen if enable_separator_autodetection is false.\n    doc_lines = ['a|b', 'c|d', 'e|f'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', false], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3], ['comment_prefix', '#']]);\n    await extension.try_autodetect_and_set_rainbow_filetype(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('plaintext', active_doc.languageId);\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test `TAB` to -> '\\t' conversion.\n    doc_lines = ['a\\tb', 'c\\td', 'e\\tf'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', false], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3], ['comment_prefix', '#']]);\n    await extension.try_autodetect_and_set_rainbow_filetype(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('plaintext', active_doc.languageId);\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test stoplist.\n    doc_lines = ['a|b', 'c|d', 'e|f'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set(['fake.txt'])};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3], ['comment_prefix', '#']]);\n    await extension.try_autodetect_and_set_rainbow_filetype(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('plaintext', active_doc.languageId);\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // No filename - no autodetection.\n    doc_lines = ['a|b', 'c|d', 'e|f'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, '', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3], ['comment_prefix', '#']]);\n    await extension.try_autodetect_and_set_rainbow_filetype(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('plaintext', active_doc.languageId);\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // Emulating a virtual .git file - no autodetection.\n    doc_lines = ['a|b', 'c|d', 'e|f'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.git', 'plaintext', 'git');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3], ['comment_prefix', '#']]);\n    await extension.try_autodetect_and_set_rainbow_filetype(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('plaintext', active_doc.languageId);\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // Non-plaintext language id - no autodetection.\n    doc_lines = ['a|b', 'c|d', 'e|f'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'foobar');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3], ['comment_prefix', '#']]);\n    await extension.try_autodetect_and_set_rainbow_filetype(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('foobar', active_doc.languageId);\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // Non-plaintext language id but filename has .csv extension - autodetection.\n    doc_lines = ['a|b', 'c|d', 'e|f'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.csv', 'csv');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3], ['comment_prefix', '#']]);\n    await extension.try_autodetect_and_set_rainbow_filetype(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('csv (pipe)', active_doc.languageId);\n    assert.deepEqual([['fake.csv.csv (pipe)', {is_ok: true, first_trailing_space_line: null}]], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    // We don't save `csv` and other rainbow dialects into original_language_ids.\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test quoted_rfc policy autodetection for `,` and `;` separators.\n    doc_lines = ['a,b', 'c,\"d', 'a\"\"sd\"\"f', 'ef\"', 'g,h', 'i,j'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3]]);\n    await extension.try_autodetect_and_set_rainbow_filetype(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('dynamic csv', active_doc.languageId);\n    assert.deepEqual([['fake.txt.dynamic csv', {is_ok: true, first_trailing_space_line: null}]], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([['fake.txt', {delim: ',', policy: 'quoted_rfc'}]], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([['fake.txt', 'plaintext']], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test that quoted_rfc policy doesn't extend for other separators e.g. pipe `|`.\n    doc_lines = ['a|b', 'c|\"d', 'a\"\"sd\"\"f', 'ef\"', 'g|h', 'i|j'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3], ['comment_prefix', '#']]);\n    await extension.try_autodetect_and_set_rainbow_filetype(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('plaintext', active_doc.languageId);\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test trailing spaces detection.\n    doc_lines = ['a|b', 'c  |d', 'e|f'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set(['other_fake.txt'])};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', true], ['autodetection_min_line_count', 3], ['comment_prefix', '#']]);\n    await extension.try_autodetect_and_set_rainbow_filetype(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('csv (pipe)', active_doc.languageId);\n    assert.deepEqual([['fake.txt.csv (pipe)', {is_ok: true, first_trailing_space_line: 1}]], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([['fake.txt', 'plaintext']], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test too few lines for autodetection.\n    doc_lines = ['a|b', 'c|d', 'e|f'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 4], ['comment_prefix', '#']]);\n    await extension.try_autodetect_and_set_rainbow_filetype(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('plaintext', active_doc.languageId);\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test autodetection with default comment prefix.\n    doc_lines = ['a|b', '#comment', 'c|d', 'e|f'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3]]);\n    await extension.try_autodetect_and_set_rainbow_filetype(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('csv (pipe)', active_doc.languageId);\n    assert.deepEqual([['fake.txt.csv (pipe)', {is_ok: true, first_trailing_space_line: null}]], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([['fake.txt', 'plaintext']], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test autodetection with custom comment prefix\n    doc_lines = ['a|b', '$$comment', 'c|d', 'e|f'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3], ['comment_prefix', '$$']]);\n    await extension.try_autodetect_and_set_rainbow_filetype(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('csv (pipe)', active_doc.languageId);\n    assert.deepEqual([['fake.txt.csv (pipe)', {is_ok: true, first_trailing_space_line: null}]], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([['fake.txt', 'plaintext']], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test no autodetection with default comment prefix.\n    doc_lines = ['a|b', '$$comment', 'c|d', 'e|f'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3]]);\n    await extension.try_autodetect_and_set_rainbow_filetype(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('plaintext', active_doc.languageId);\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test second candidate (TAB) more popular than the first (comma).\n    doc_lines = ['a,b\\tc\\td', 'a,b\\tc\\td', 'a,b\\tc\\td', 'a,b\\tc\\td'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', 'TAB']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3], ['comment_prefix', '$$']]);\n    await extension.try_autodetect_and_set_rainbow_filetype(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('tsv', active_doc.languageId);\n    assert.deepEqual([['fake.txt.tsv', {is_ok: true, first_trailing_space_line: null}]], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([['fake.txt', 'plaintext']], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test inconsistent num of fields.\n    doc_lines = ['a|b', 'c|d', 'e|f', 'e|f|g'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3]]);\n    await extension.try_autodetect_and_set_rainbow_filetype(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('plaintext', active_doc.languageId);\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test defective line (quoting error).\n    doc_lines = ['a,b', 'c,d', 'e,\"fsdf\"\"', 'g,h'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', ';', '\\t', '|']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3]]);\n    await extension.try_autodetect_and_set_rainbow_filetype(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('plaintext', active_doc.languageId);\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test switch to frequency based autodetection.\n    doc_lines = ['a,b,c', 'a,b,c', 'a,b,c', 'a,b\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tc'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.csv', 'csv');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', 'TAB']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3]]);\n    await extension.try_autodetect_and_set_rainbow_filetype(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('tsv', active_doc.languageId);\n    // In case of frequency based autodetection we will have lint results cache empty - this is probably fine because we will recalculate it later after enabling rainbow features for the file.\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test that autodetected language matches the original language id.\n    doc_lines = ['a,b,c', 'a,b,c', 'a,b ,c', '#comment'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.csv', 'csv');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', 'TAB']], ['csv_lint_detect_trailing_spaces', true], ['autodetection_min_line_count', 3]]);\n    await extension.try_autodetect_and_set_rainbow_filetype(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('csv', active_doc.languageId);\n    assert.deepEqual([['fake.csv.csv', {is_ok: true, first_trailing_space_line: 2}]], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    // Original language id should not be set since it matches the autodetected language\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test that autodetection_min_line_count also applies to the record count, not just source lines - do not count comment lines.\n    doc_lines = ['Device ids, use with caution!', '#a20', '#a50', '#a30'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', 'TAB']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3]]);\n    await extension.try_autodetect_and_set_rainbow_filetype(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('plaintext', active_doc.languageId);\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n\n    // Test that autodetection_min_line_count also applies to the record count, not just source lines - count multiline record once.\n    doc_lines = ['hello,\"world', 'asd,fasf', '', 'sadf', 'fasdf\"'];\n    active_doc = new unit_tests.VscodeDocumentTestDouble(doc_lines, 'fake.txt', 'plaintext');\n    extension_context = {lint_results: new Map(), dynamic_document_dialects: new Map(), original_language_ids: new Map(), autodetection_stoplist: new Set()};\n    config = new Map([['enable_separator_autodetection', true], ['autodetect_separators', [',', 'TAB']], ['csv_lint_detect_trailing_spaces', false], ['autodetection_min_line_count', 3]]);\n    await extension.try_autodetect_and_set_rainbow_filetype(unit_tests.vscode_test_double, config, extension_context, active_doc);\n    assert.equal('plaintext', active_doc.languageId);\n    assert.deepEqual([], Array.from(extension_context.lint_results.entries()));\n    assert.deepEqual([], Array.from(extension_context.dynamic_document_dialects.entries()));\n    assert.deepEqual([], Array.from(extension_context.original_language_ids.entries()));\n}\n\n\nasync function run() {\n    try {\n        log_message('Starting tests');\n\n        assert.equal(-1, [1, 2, 3].indexOf(0));\n\n        let use_script_based_root = false; // This is a workaround for running unit tests from inside VSCode UI instead of command line, but we probably don't need this since we are passing the workspace file explicitly.\n        let workspace_folder_uri = null;\n        if (!is_web_ext && use_script_based_root) {\n            workspace_folder_uri = vscode.Uri.file('file:/' + __dirname);\n        } else {\n            assert(vscode.workspace.workspaceFolders);\n            assert.equal(1, vscode.workspace.workspaceFolders.length);\n            workspace_folder_uri = vscode.workspace.workspaceFolders[0].uri;\n        }\n        let test_folder_uri = workspace_folder_uri; // FIXME check if need to adjust for web test, but better start web version in the test directory (last arg in cmd) instead of the cwd.\n\n        test_range_position_contains_equivalence();\n\n        unit_tests.test_all();\n\n        test_autodetect_dialect_frequency_based();\n\n        await test_try_autoenable_rainbow_csv();\n\n        await test_no_autodetection(test_folder_uri);\n        if (!is_web_ext) {\n            // Ensure that opening non-csv files doesn't cause rainbow csv to import relatively heavy lazy-loaded code.\n            // There is no point to check this in web since all of the files are bundled into a single script anyway.\n            let state_report = await vscode.commands.executeCommand('rainbow-csv.InternalTest', {check_initialization_state: true});\n            assert(state_report.initialized);\n            assert(!state_report.lazy_loaded);\n        }\n\n        await test_autodetection(test_folder_uri);\n        await test_manual_enable_disable(test_folder_uri);\n\n        await test_huge_file(test_folder_uri);\n\n        await test_dynamic_csv(test_folder_uri);\n\n        if (is_web_ext) {\n            await test_rbql_web(test_folder_uri);\n        } else {\n            await test_rbql_node(test_folder_uri);\n        }\n\n        if (!is_web_ext) {\n            // Sanity check that after using advanced functionality such as RBQL, the non-basic code is lazy loaded.\n            let state_report = await vscode.commands.executeCommand('rainbow-csv.InternalTest', {check_initialization_state: true});\n            assert(state_report.initialized);\n            assert(state_report.lazy_loaded);\n        }\n\n        await test_virtual_alignment(test_folder_uri);\n        await test_column_tracking(test_folder_uri);\n        await test_alternate_row_background(test_folder_uri);\n        await test_align_shrink_lint(test_folder_uri);\n        await test_double_width_chars_alignment(test_folder_uri);\n        await test_column_edit(test_folder_uri);\n\n        log_message('Finishing tests');\n    } catch (e) {\n        log_message('Error: tests have failed. Exception:');\n        log_message(String(e));\n        log_message(String(e.stack));\n    }\n}\n\nexports.run = run;\n"],"names":["$defineProperty","$SyntaxError","$TypeError","gopd","module","exports","obj","property","value","arguments","length","nonEnumerable","nonWritable","nonConfigurable","loose","desc","configurable","enumerable","writable","Function","prototype","call","Math","round","undefined","$Object","$Error","$EvalError","$RangeError","$ReferenceError","$URIError","abs","floor","max","min","pow","sign","$Function","getEvalledConstructor","expressionSyntax","e","$gOPD","throwTypeError","ThrowTypeError","calleeThrows","get","gOPDthrows","hasSymbols","getProto","$ObjectGPO","$ReflectGPO","$apply","$call","needsEval","TypedArray","Uint8Array","INTRINSICS","__proto__","AggregateError","Array","ArrayBuffer","Symbol","iterator","Atomics","BigInt","BigInt64Array","BigUint64Array","Boolean","DataView","Date","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","eval","Float16Array","Float32Array","Float64Array","FinalizationRegistry","Int8Array","Int16Array","Int32Array","isFinite","isNaN","JSON","Map","Number","parseFloat","parseInt","Promise","Proxy","Reflect","RegExp","Set","SharedArrayBuffer","String","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","WeakRef","WeakSet","error","errorProto","doEval","name","fn","gen","LEGACY_ALIASES","bind","hasOwn","$concat","concat","$spliceApply","splice","$replace","replace","$strSlice","slice","$exec","exec","rePropName","reEscapeChar","getBaseIntrinsic","allowMissing","alias","intrinsicName","parts","string","first","last","result","match","number","quote","subString","stringToPath","intrinsicBaseName","intrinsic","intrinsicRealName","skipFurtherCaching","i","isOwn","part","setFunctionLength","callBindBasic","applyBind","originalFunction","func","adjustedLength","apply","getOwnPropertyDescriptors","Object","keys","descriptors","getOwnPropertyDescriptor","formatRegExp","format","f","isString","objects","push","inspect","join","args","len","str","x","stringify","_","isNull","isObject","deprecate","msg","process","noDeprecation","this","warned","throwDeprecation","Error","traceDeprecation","console","trace","debugs","debugEnvRegex","env","NODE_DEBUG","debugEnv","toUpperCase","opts","ctx","seen","stylize","stylizeNoColor","depth","colors","isBoolean","showHidden","_extend","isUndefined","customInspect","stylizeWithColor","formatValue","styleType","style","styles","recurseTimes","isFunction","constructor","ret","primitive","simple","isNumber","formatPrimitive","visibleKeys","array","hash","forEach","val","idx","arrayToHash","getOwnPropertyNames","isError","indexOf","formatError","isRegExp","toString","isDate","output","base","braces","isArray","toUTCString","l","hasOwnProperty","formatProperty","key","formatArray","map","pop","reduce","prev","cur","reduceToSingleString","set","split","line","ar","arg","re","objectToString","d","o","pad","n","debuglog","test","pid","types","isNullOrUndefined","isSymbol","isNativeError","isPrimitive","isBuffer","months","prop","log","time","getHours","getMinutes","getSeconds","getDate","getMonth","inherits","origin","add","kCustomPromisifiedSymbol","callbackifyOnRejected","reason","cb","newReason","promisify","original","TypeError","defineProperty","promiseResolve","promiseReject","promise","resolve","reject","err","setPrototypeOf","getPrototypeOf","defineProperties","custom","callbackify","callbackified","maybeCb","self","then","nextTick","rej","hasPropertyDescriptors","hasArrayLengthDefineBug","os","fs","path","rbql","rbql_csv","csv_utils","fast_load_utils","wcwidth","number_regex","QUOTED_RFC_POLICY","QUOTED_POLICY","AssertionError","assert","condition","message","ColumnStat","enable_double_width_alignment","can_be_numeric","max_total_length","max_int_length","max_fractional_length","only_ascii","has_wide_chars","mark_non_numeric","is_numeric","reconcile","rhs","get_adjusted_total_length","get_adjusted_int_length","update_from_field","multiline_field_segments","is_first_record","field_segment","visual_field_length","match_result","cur_integer_part_length","cur_fractional_part_length","evaluate_align_field","field","is_first_in_line","is_last_in_line","readability_gap","delta_length","dot_pos","integer_delta_length","fractional_delta_length","update_column_stats_from_record","record_fields","all_columns_stats","fnum","get_trimmed_rfc_record_fields_from_record","record","field_segments","v","trim","calculate_column_offsets","column_stats","delim_length","previous_length","previous_offset","evaluate_rfc_align_field","column_stat","column_offset","is_field_segment","num_before","num_after","rfc_align_field","repeat","RecordCommentMerger","records","comments","nr","next_comment","get_next","has_comments_left","has_records_left","record_num","comment_text","has_entries_left","make_table_name_key","file_path","find_table_path","vscode_global_state","main_table_dir","table_id","filepath","candidate_path","charAt","homedir","existsSync","isAbsolute","table_path","RbqlIOHandlingError","VSCodeRecordIterator","RBQLInputIterator","document","delim","policy","has_header","comment_prefix","table_name","variable_prefix","super","NR","NL","fail_on_warning","_num_records_parsed","_comments","fields_info","first_defective_line","_first_trailing_space_line","parse_document_records","first_record","next_record_index","stop","get_variables_map","query_text","variable_map","parse_basic_variables","parse_array_variables","parse_attribute_variables","parse_dictionary_variables","get_header","do_get_record","get_record","get_warnings","size","inconsistent_records_info","record_num_1","num_fields_1","record_num_2","num_fields_2","sample_first_two_inconsistent_records","warn_msg","make_inconsistent_num_fields_warning","VSCodeWriter","RBQLOutputWriter","header_len","null_in_output","delim_in_simple_output","output_lines","polymorphic_join","simple_join","quoted_join","quoted_join_rfc","mono_join","set_header","header","write","fields","quote_field","rfc_quote_field","res","normalize_fields","out_fields","sub_array_delim","finish","VSCodeTableRegistry","get_iterator_by_table_id","_table_id","VSCodeFileSystemCSVRegistry","RBQLTableRegistry","input_file_dir","encoding","options","stream","record_iterator","bulk_input_path","createReadStream","CSVRecordIterator","output_warnings","basename","make_multiline_row_info","vscode","include_delim_length_in_ranges","newline_marker","start_line","expected_end_line_for_control","record_ranges","lnum_current","pos_in_editor_line","next_pos_in_editor_line","pos_in_multiline_field","multiline_field_singleline_ranges","multiline_field_singleline_components","newline_marker_pos","substring","Range","current_range_end","RowInfo","is_opening_rfc_line","line_text","_record","warning","split_quoted_str","comment_range","parse_document_range_rfc","doc","range","custom_parsing_margin","begin_line","start","end_line","lineCount","end","table_ranges","line_aggregator","MultilineRecordAggregator","lnum","lineAt","text","inside_multiline_record_before","is_inside_multiline_record","get_num_lines_in_record","add_line","inside_multiline_record_after","reset","has_comment_line","has_full_record","combined_line","get_full_line","smart_split","row_info","parse_document_range_single_line","startsWith","cpos","next_cpos","get_field_by_line_position","query_pos","col_num","read_header","async","input_reader","createInterface","input","closed","promise_resolve","promise_reject","output_promise","on","close","rbql_query_web","input_document","input_delim","input_policy","output_delim","output_policy","with_headers","join_tables_registry","input_iterator","output_writer","query","rbql_query_node","input_path","output_path","csv_encoding","user_init_code","input_stream","stdin","output_stream","close_output_on_finish","stdout","createWriteStream","is_ascii","default_init_source_path","read_user_init_code","dirname","CSVWriter","get_header_line","num_lines","get_default_js_udf_content","get_default_python_udf_content","align_columns","column_offsets","result_lines","merger","comment","aligned_fields","is_last_field","aligned_field","shrink_columns","active_doc","_fields_info","has_edit","field_lines","calc_column_stats","calc_column_stats_for_fragment","row_infos","reconcile_whole_doc_and_local_column_stats","whole_doc_column_stats","local_column_stats","max_num_fields","get_cursor_position_info","position","last_found_position_info","contains","is_comment","record_range","column_number","total_columns","split_warning","get_cursor_position_info_rfc","cnum","character","entries","get_cursor_position_info_standard","format_cursor_position_info","cursor_position_info","show_column_names","show_comments","max_label_length","short_report","full_report","column_label","short_column_label","substr","parse_document_range","sample_preview_records_from_context","rbql_context","dst_message","preview_window_size","cached_table_parse_result","requested_start_record","stop_on_warning","first_failed_line","end_record","vscode_doc_version","need_full_doc_parse","has","fileName","version","sample_records","preview_sampling_error","preview_records","r","cur_record","c","actual_start_record","show_lint_status_bar_button","extension_context","language_id","COLOR_ERROR","lint_cache_key","lint_results","lint_report","lint_status_bar_button","window","createStatusBarItem","StatusBarAlignment","Left","lint_report_msg","is_processing","color","isInteger","first_trailing_space_line","is_ok","tooltip","command","show","get_cursor_position_if_unambiguous","active_editor","selections","selection","active","isEqual","anchor","generate_column_edit_selections","edit_mode","warning_msg","char_pos_before","char_pos_after","position_before","Position","position_after","Selection","generate_inlay_hints","alignment_char","enable_vertical_grid","inlay_hints","field_segments_ranges","field_segment_range","hint_label","InlayHint","toStr","isArgs","callee","copy","fill","readUInt8","origKeys","keysShim","originalKeys","shim","keysWorksWithArguments","object","EvalError","getOwnPropertySymbols","sym","symObj","syms","propertyIsEnumerable","descriptor","require","actualApply","_slicedToArray","arr","_arrayWithHoles","t","u","a","next","done","return","_iterableToArrayLimit","minLen","_arrayLikeToArray","from","_unsupportedIterableToArray","_nonIterableRest","arr2","_typeof","regexFlagsSupported","flags","arrayFromSet","arrayFromMap","objectIs","is","objectGetOwnPropertySymbols","numberIsNaN","uncurryThis","_require$types","isAnyArrayBuffer","isArrayBufferView","isMap","isSet","isBoxedPrimitive","isNumberObject","isStringObject","isBooleanObject","isBigIntObject","isSymbolObject","isFloat32Array","isFloat64Array","isNonIndex","code","charCodeAt","getOwnNonIndexProperties","filter","compare","b","y","innerDeepEqual","val1","val2","strict","memos","buf1","buf2","val1Tag","keys1","keys2","keyCheck","getTime","source","byteLength","buffer","byteOffset","areSimilarTypedArrays","offset","areSimilarFloatArrays","_keys","_keys2","valueOf","isEqualBoxedPrimitive","getEnumerables","k","iterationType","aKeys","bKeys","symbolKeysA","count","symbolKeysB","_symbolKeysB","val2MemoA","val2MemoB","areEq","memo","aValues","setMightHaveLoosePrim","bValues","_i","_val","setHasEqualElement","setEquiv","aEntries","_aEntries$i","item1","item2","mapMightHaveLoosePrim","bEntries","_i2","_bEntries$_i","_key","item","mapHasEqualEntry","mapEquiv","keysA","_key2","objEquiv","delete","setValues","findLooseMatchingPrimitives","prim","altValue","curB","key1","key2","isDeepEqual","isDeepStrictEqual","define","getPolyfill","polyfill","isCallable","list","thisArg","receiver","forEachArray","forEachString","forEachObject","$isNaN","$actualApply","$reflectApply","combining","DEFAULTS","nul","control","ucs","mid","bisearch","s","wcswidth","RecordTextConsumer","collect_records","preserve_quotes_and_whitespaces","detect_trailing_spaces","min_num_fields_for_autodetection","num_records_parsed","consume","record_text","record_start_line","max_records_to_parse","consumer","reflectGetProto","originalGetProto","getDunderProto","O","ownKeys","_objectSpread","_toPropertyKey","_defineProperties","target","props","toPrimitive","hint","_toPrimitive","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","_wrapNativeSuper","Class","_cache","Wrapper","_construct","_getPrototypeOf","create","_setPrototypeOf","Parent","_isNativeReflectConstruct","construct","instance","sham","p","ERR_INVALID_ARG_TYPE","codes","endsWith","search","this_len","blue","green","red","white","kReadableOperator","deepStrictEqual","strictEqual","strictEqualObject","deepEqual","equal","notDeepStrictEqual","notStrictEqual","notStrictEqualObject","notDeepEqual","notEqual","notIdentical","copyError","inspectValue","compact","maxArrayLength","Infinity","breakLength","showProxy","sorted","getters","_Error","_inspect$custom","subClass","superClass","_inherits","Derived","hasNativeReflectConstruct","Constructor","protoProps","_super","Super","NewTarget","_this","_classCallCheck","operator","stackStartFn","actual","expected","limit","stackTraceLimit","stderr","isTTY","getColorDepth","other","lastPos","skipped","actualInspected","actualLines","expectedLines","indicator","inputLength","columns","maxCount","maxLines","_actualLines","printedLines","skippedMsg","expectedLine","actualLine","divergingLines","createErrDiff","_res","knownOperators","generatedMessage","captureStackTrace","stack","child_process","rainbow_utils","ll_rainbow_utils","is_web_ext","web_extension_uri","scratch_buf_marker","whitespace_aligned_files","alternate_row_background_decoration_type","tracked_field_decoration_types","custom_virtual_alignment_modes","VA_EXPLICITLY_ENABLED","VA_EXPLICITLY_DISABLED","whole_doc_alignment_stats","result_set_parent_map","manual_comment_prefix_stoplist","rbql_status_bar_button","align_shrink_button","copy_back_button","column_info_button","dynamic_dialect_select_button","debug_log_output_channel","last_rbql_queries","client_html_template","dialect_selection_html_template","global_state","rbql_preview_panel","dialect_panel","doc_first_edit_subscription","column_info_cursor_subscription","alt_background_cursor_subscription","last_closed_rainbow_doc_info","_unit_test_last_rbql_report","_unit_test_last_warnings","cursor_timeout_handle_for_column_info","cursor_timeout_handle_for_alt_row_background","rainbow_token_event","comment_token_event","row_background_decoration_event","column_tracking_decoration_event","sticky_header_disposable","inlay_hint_disposable","PLAINTEXT","DYNAMIC_CSV","WHITESPACE_POLICY","SIMPLE_POLICY","dynamic_document_dialects","custom_comment_prefixes","original_language_ids","toggle_enabled_rows_backgrounds","tracked_columns","reenable_rainbow_language_infos","autodetection_stoplist","autodetection_temporarily_disabled_for_rbql","dynamic_dialect_for_next_request","logging_enabled","logging_next_context_id","dialect_map","COMMENT_TOKEN","rainbow_token_types","all_token_types","tokens_legend","SemanticTokensLegend","is_eligible_doc","vscode_doc","uri","scheme","is_eligible_scheme","is_rainbow_dialect_doc","languageId","make_dialect_info","make_dynamic_dialect_key","save_dynamic_info","dialect_info","save_to_global_state","get_dynamic_info","get_from_global_state","safe_lower","src_str","toLowerCase","get_default_policy","separator","map_dialect_to_language_id","absolute_path_map","show_single_line_error","error_msg","active_window","showErrorMessage","sleep","ms","setTimeout","report_progress","progress","status_message","report","default_value","update","replace_doc_content","new_content","invalid_range","full_range","validateRange","edit","make_header_key","make_with_headers_key","get_from_config","param_name","config","workspace","getConfiguration","TrackedColumns","column_to_decoration_id","is_tracked","column_num","get_tracked_columns","toggle_tracking","num_tracked","existing_decoration_ids","values","new_id","includes","get_decoration_type","empty","StackContextLogWrapper","context_name","caller_context_id","context_id","log_doc_event","event_name","full_event","info","log_simple_event","get_header_from_document","_header_lnum","header_line","header_info","get_dialect","StickyHeaderProvider","provideDocumentSymbols","_delim","header_lnum","header_line_num","header_range","symbol_kind","SymbolKind","File","DocumentSymbol","get_all_rainbow_lang_selector","document_selector","language","reconfigure_sticky_header_provider","force","dispose","header_symbol_provider","languages","registerDocumentSymbolProvider","reenable_inlay_hints_provider","inlay_hints_provider","InlayHintProvider","registerInlayHintsProvider","configure_inlay_hints_alignment","log_wrapper","get_active_editor","tabSize","update_global_settings","enable_dynamic_semantic_tokenization","token_provider","RainbowTokenProvider","registerDocumentRangeSemanticTokensProvider","row_background_enabled","default_enabled","toggle_row_background","get_active_doc","_comment_prefix","highlighting_enabled","setDecorations","register_row_background_decorations_provider","onDidChangeTextEditorSelection","handle_cursor_movement_for_alt_row_background","toggle_column_tracking","trackings","decoration_type","decorations_provider","ColumnTrackingDecorationsProvider","register_column_tracking_decorations_provider","RowBackgroundDecorationsProvider","register_comment_tokenization_handler","CommentTokenProvider","choose_dynamic_separator","integration_test_options","selected_separator","get_selected_separator","load_resource_file_universal","createWebviewPanel","ViewColumn","Beside","enableScripts","webview","html","adjust_webview_paths","onDidReceiveMessage","origin_doc","dialect_webview_panel","msg_type","init_msg","integration_test","postMessage","is_active_doc","enable_rainbow_features_if_csv","setTextDocumentLanguage","handle_dialect_selection_message","disable_ui_elements","setLanguageConfiguration","lineComment","hide","show_align_shrink_button","parent_table_path","parent_basename","show_rbql_copy_to_source_button","show_column_info_button","handle_cursor_movement_for_column_info","enable_rainbow_ui","csv_lint","all_buttons","disable_rainbow_features_if_non_csv","activeTextEditor","virtual_alignment_enabled","virtual_alignment_mode","custom_alignment_mode","is_aligned","config_whitespace_alignment_button","config_virtual_alignment_button","enable_tooltip_column_names","Right","do_show_column_info_button","is_manual_op","_records","lint_result","csv_lint_cmd","run_internal_test_cmd","check_initialization_state","initialized","lazy_loaded","check_last_rbql_report","check_last_rbql_warnings","show_warnings","warnings","showWarningMessage","handle_rbql_result_file_node","text_doc","showTextDocument","file_path_to_query_key","run_command_and_parse_output","cmd","execution_result","stdout_data","stderr_data","spawn","data","command_async_wrapper","error_type","invocation_error","json_report","parse","run_first_working_interpreter_command_and_parse_output","interpreters_list","interpreter_cmd","send_report_to_webview","report_msg","set_header_line","raw_header","preserve_original_language_id_if_needed","original_language_id","set_comment_prefix","restore_original_language","current_language_info","dynamic_dialect_info","remove_dynamic_info","reenable_rainbow_language","rainbow_language_info","set_join_table_name","showInputBox","set_virtual_header","old_header","old_header_str","quoted_fields","input_box_props","raw_new_header","new_header","column_edit","virtual_shrink_table","whitespace_shrink_table","progress_options","location","ProgressLocation","Window","title","withProgress","shrinked_doc_text","virtual_align_table","double_width_alignment","content_modifying_align_table","aligned_doc_text","align_in_scratch_file","is_scratch_file","aligned_doc_cfg","content","scratch_doc","openTextDocument","copy_back","result_doc","parent_doc","parent_editor","query_result_doc","getText","do_copy_back","handle_rbql_client_message","message_type","path_key","input_document_path","history_list","header_for_ui","rbql_backend","rbql_query","integration_test_delay","input_table_dir","navig_direction","protocol_message","backend_language","output_dialect","old_index","update_query_history","interpreters_preference_list","input_table_path","rbql_output_dir","tmpdir","get_dst_table_dir","orig_extension","extname","delim_ext_map","dst_extension","result_table_name","get_dst_table_name","target_language_id","output_doc_cfg","handle_rbql_result_file_web","csv_options","exception_to_error_info","cmd_safe_query","Buffer","output_doc","run_rbql_query","udf_file_path","default_content","writeFileSync","udf_doc","preview_panel","client_html","paths_list","local_path","adjusted_webview_url","asWebviewUri","Uri","file","edit_rbql","orig_uri","isDirty","rnd_suffix","random","with_headers_by_default","Active","autodetect_dialect_frequency_based","candidate_separators","max_num_chars_to_test","best_dialect","best_separator","best_policy","best_dialect_frequency","frequency","j","dialect_id","try_autodetect_and_set_rainbow_filetype","logging_context_id","is_default_csv","now","timestamp","comment_prefix_for_autodetection","rainbow_csv_language_id","candidate_dialects","min_num_lines","best_dialect_first_trailing_space_line","best_dialect_num_columns","candidate_dialect","num_columns","autodetect_dialect","new_doc","handle_first_edit_for_an_empty_doc","change_event","handle_editor_switch","editor","_cursor_event","clearTimeout","visibleRanges","provide_row_background_decorations","do_handle_cursor_movement_for_row_background","handle_doc_open","isUntitled","onDidChangeTextDocument","filetype_changed","handle_doc_close","doc_to_close","handle_config_change","_config_change_event","logging_enabled_before","make_preview","preview_mode","fsPath","size_limit","file_size_in_bytes","statSync","full_orig_doc","file_basename","out_path","open","fd","alloc","read_begin_pos","read","_num","buffer_str","lastIndexOf","register_csv_hover_info_provider","context","hover_provider","registerHoverProvider","provideHover","token","cancellation_token","isCancellationRequested","_full_text","mds","MarkdownString","appendText","Hover","make_hover","subscriptions","selection_start_line","selection_end_line","isEmpty","alternating_row_ranges","provideDocumentRangeSemanticTokens","_document","_token","tracked_column_ranges","current_column_ranges","tracked_decoration_type","provide_tracked_column_decorations","builder","SemanticTokensBuilder","token_id","build","provideInlayHints","_cancellation_token","vertical_grid_enabled","resource_path","resource_data","extension_uri","resource_uri","joinPath","bytes","readFile","TextDecoder","decode","load_resource_file_for_web","readFileSync","activate","globalState","extensionUri","asAbsolutePath","lint_cmd","commands","registerCommand","rbql_cmd","set_header_line_cmd","set_comment_prefix_cmd","edit_column_names_cmd","set_join_table_name_cmd","column_edit_before_cmd","column_edit_after_cmd","column_edit_select_cmd","set_separator_cmd","rainbow_off_cmd","rainbow_on_cmd","sample_head_cmd","sample_tail_cmd","align_cmd","virtual_align_cmd","shrink_cmd","virtual_shrink_cmd","copy_back_cmd","toggle_row_background_cmd","toggle_column_tracking_cmd","internal_test_cmd","doc_open_event","onDidOpenTextDocument","doc_close_event","onDidCloseTextDocument","config_change_event","onDidChangeConfiguration","switch_event","onDidChangeActiveTextEditor","createOutputChannel","createTextEditorDecorationType","backgroundColor","ThemeColor","isWholeLine","borderStyle","borderWidth","borderColor","generate_tracked_field_decoration_types","deactivate","callBound","hasToStringTag","gOPD","isRegexMarker","throwRegexMarker","badStringifier","$toString","origSymbol","hasSymbolSham","callBind","implementation","_createClass","staticProps","_require$codes","ERR_AMBIGUOUS_ARGUMENT","ERR_INVALID_ARG_VALUE","ERR_INVALID_RETURN_VALUE","ERR_MISSING_ARGS","isPromise","objectAssign","RegExpPrototypeTest","lazyLoadComparison","comparison","ok","NO_EXCEPTION_SENTINEL","innerFail","innerOk","argLen","_len","fail","internalMessage","argsLen","emitWarning","warn","errArgs","Comparison","expectedException","compareExceptionKey","isPrototypeOf","getActual","checkIsPromise","catch","waitForActual","promiseFn","resultPromise","expectsError","details","fnType","expectsNoError","internalMatch","regexp","fnName","_len6","_key6","throws","_len2","rejects","_len3","_key3","doesNotThrow","_len4","_key4","doesNotReject","_len5","_key5","ifError","newErr","origStack","tmp2","shift","tmp1","pos","doesNotMatch","field_regular_expression","field_rgx","field_rgx_external_whitespaces","extract_next_field","src","dlm","allow_external_whitespaces","cidx","src_cur","match_obj","match_end","uidx","extraction_report","unquote_field","split_whitespace_separated_str","preserve_whitespaces","rgxp","unquote_fields","split_lines","rfc_line_buffer","match_list","has_unbalanced_double_quote","line_separator","URIError","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","marker","runClearTimeout","Item","noop","browser","argv","versions","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","whichTypedArray","availableTypedArrays","g","globalThis","typedArrays","$slice","$indexOf","cache","typedArray","toStringTag","proto","superProto","tag","found","getter","trySlices","tryTypedArrays","GetIntrinsic","NaN","ctor","superCtor","super_","TempCtor","hasDescriptors","$floor","functionLengthIsConfigurable","functionLengthIsWritable","util","utf_decoding_error","rbql_init_source_path","name_record","index_path","lines","try_read_index","get_index_record","RecordQueue","push_stack","pull_stack","enqueue","dequeue","reverse","csv_path","first_record_should_be_emitted","header_preread_complete","decoder","fatal","input_exhausted","started","utf8_bom_removed","partially_decoded_line","partially_decoded_line_ends_with_cr","resolve_current_record","reject_current_record","current_exception","produced_records_queue","process_line_polymorphic","process_partial_rfc_record_line","process_record_line_simple","handle_query_modifier","modifier","reset_external_callbacks","try_propagate_exception","exception","store_or_propagate_exception","preread_first_record","pause","try_resolve_next_record","isPaused","resume","parent_iterator","current_record_promise","get_all_records","num_records","process_record_line","num_fields","process_line","clean_line","assumed_source_encoding","remove_utf8_bom","process_data_stream_chunk","data_chunk","decoded_string","first_line_index","process_data_bulk","data_blob","control_buffer","process_data_stream_end","last_line","destroy","close_stream_on_finish","setDefaultEncoding","error_obj","store_first_error","first_error","writer_error","_write_all","table","output_encoding","FileSystemCSVRegistry","interpret_named_csv_format","format_name","query_csv","hasProtoAccessor","$getPrototypeOf","VscodePositionTestDouble","VscodeSelectionTestDouble","VscodeRangeTestDouble","l1","c1","l2","c2","after_start","before_end","UriTestDouble","VscodeDocumentTestDouble","lines_buffer","VscodeStatusBarItemTestDouble","is_visible","InlayHintTestDouble","label","vscode_test_double","_alignment","target_document","raw_column_stats_to_typed","raw_stat","typed_stat","column_stats_helper","column_stats_raw_objects","align_field","line_range_to_triple","vscode_range","convert_ranges_to_triples","table_comment_ranges","table_record_ranges","row_triple_groups","field_ranges","field_triples","field_range","fvr","get_all_entries","record_comment_merger","test_all","offsets","expected_offsets","test_offsets_calculation","test_adjusted_length","column_stats_local","column_stats_global","test_reconcile_single","expected_reconciled_column_stats","test_reconcile_multiple","doc_lines","expected_inlay_hints","test_generate_inlay_hints","expected_column_stats","test_calc_column_stats_for_fragment","is_first_line","test_align_stats","test_field_align","test_rfc_field_align","unaligned_doc_lines","aligned_doc_lines","expected_doc_lines","test_align_columns","original_doc_lines","shrinked_doc_lines","test_shrink_columns","test_calc_column_stats","test_parse_document_records","record_ranges_0","record_ranges_1","record_ranges_2","record_ranges_3","test_parse_document_range_rfc","test_parse_document_range_single_line","doc_file_name","test_sample_preview_records_from_context","test_show_lint_status_bar_button","position_info","test_get_cursor_position_info","expected_entries","test_record_comment_merger","expected_selections","expected_error_msg","expected_warning_msg","test_generate_column_edit_selections","isStandardArguments","isLegacyArguments","supportsStandardArguments","SyntaxError","GeneratorFunction","isFnRegex","safeRegexTest","fnToStr","generatorFunc","getGeneratorFunc","objectKeys","$push","$propIsEnumerable","originalGetSymbols","source1","to","getSymbols","nextKey","propValue","defineDataProperty","supportsDescriptors","predicate","predicates","isEnumerable","hasDontEnumBug","hasProtoEnumBug","dontEnums","equalsConstructorPrototype","excludedKeys","$applicationCache","$console","$external","$frame","$frameElement","$frames","$innerHeight","$innerWidth","$onmozfullscreenchange","$onmozfullscreenerror","$outerHeight","$outerWidth","$pageXOffset","$pageYOffset","$parent","$scrollLeft","$scrollTop","$scrollX","$scrollY","$self","$webkitIndexedDB","$webkitStorageInfo","$window","hasAutomationEqualityBug","isArguments","theKeys","skipProto","skipConstructor","equalsConstructorPrototypeIfNotBuggy","RbqlParsingError","RbqlRuntimeError","InternalBadFieldError","bad_idx","params","replace_all","replacement","RBQLContext","writer","unnest_list","top_count","like_regex_cache","sort_key_expression","aggregation_stage","aggregation_key_expression","functional_aggregators","join_map_impl","join_map","lhs_join_var_expression","where_expression","select_expression","update_expressions","variables_init_code","query_context","wrong_aggregation_usage_error","RBQL_VERSION","check_if_brackets_match","opening_bracket","closing_bracket","parse_root_bracket_level_text_spans","text_spans","last_pos","bracket_stack","cur_char","span","unquote_string","quoted_str","column_info_from_text_span","text_span","string_literals","rbql_star_marker","simple_var_match","attribute_match","subscript_int_match","subscript_str_match","as_alias_match","column_index","column_name","is_star","alias_name","replaced_string_literal_id","unquoted_column_name","adhoc_parse_select_expression_to_column_infos","ts","stable_compare","safe_get","safe_join_get","safe_set","regexp_escape","like_to_regex","pattern","converted","like","matcher","LIKE","RBQLAggregationToken","marker_id","UnnestMarker","UNNEST","vals","unnest","Unnest","UNFOLD","parse_number","AnyValueAggregator","stats","increment","get_final","MinAggregator","cur_aggr","MaxAggregator","SumAggregator","AvgAggregator","cur_sum","cur_cnt","VarianceAggregator","cur_sum_sq","avg_val","MedianAggregator","sort","m","CountAggregator","ArrayAggAggregator","post_proc","ConstGroupVerifier","output_index","const_values","old_value","init_aggregator","generator_name","ANY_VALUE","any_value","Any_value","MIN","Min","MAX","Max","COUNT","Count","SUM","sum","Sum","AVG","avg","Avg","VARIANCE","variance","Variance","MEDIAN","median","Median","ARRAY_AGG","array_agg","FOLD","add_to_set","dst_set","len_before","TopWriter","subwriter","NW","UniqWriter","UniqCountWriter","old_val","unshift","SortedWriter","reverse_sort","unsorted_entries","stable_entry","entry","AggregateWriter","aggregators","aggregation_keys","all_keys","ag","InnerJoiner","get_rhs","lhs_key","get_join_records","LeftJoiner","null_record","max_record_len","StrictLeftJoiner","select_except","except_fields","select_simple","sort_key","sort_entry","select_aggregated","transparent_values","num_aggregators_found","trans_value","select_unnested","folded_fields","unnest_pos","findIndex","PROCESS_SELECT_COMMON","PROCESS_SELECT_SIMPLE","PROCESS_SELECT_JOIN","PROCESS_UPDATE_JOIN","PROCESS_UPDATE_SIMPLE","MAIN_LOOP_BODY","embed_expression","parent_code","child_placeholder","child_expression","embed_code","child_code","parent_lines","child_lines","placeholder_indentation","generate_main_loop_code","is_select_query","is_join_query","js_code","compile_and_run","main_loop_body","main_loop_promise","lower_case_query","GROUP_BY","UPDATE","SELECT","JOIN","INNER_JOIN","LEFT_JOIN","LEFT_OUTER_JOIN","STRICT_LEFT_JOIN","ORDER_BY","WHERE","LIMIT","EXCEPT","WITH","get_ambiguous_error_msg","variable_name","get_all_matches","str_strip","strip_comments","cline","combine_string_literals","backend_expression","prefix","dst_variables_map","matches","field_num","initialize","index","js_string_escape_column_name","quote_char","query_probably_has_dictionary_variable","continuous_name_segments","continuous_segment","column_names","dict_test_rgx","escaped_column_name","column_names_source","column_names_from_query","zero_based_idx","map_variables_directly","ensure_no_ambiguous_variables","input_column_names","join_column_names","join_column_names_set","parse_join_expression","invalid_join_syntax_error","variable_pairs","pair_rgx","and_rgx","resolve_join_variables","input_variables_map","join_variables_map","lhs_variables","rhs_indices","valid_join_syntax_msg","variable_pair","join_var_1","join_var_2","lhs_key_index","rhs_key_index","generate_common_init_code","base_var","attr_var","generate_init_statements","variables_map","indent","code_lines","simple_var_name_rgx","var_info","variable_declaration_keyword","replace_star_count","aggregate_expression","replace_star_vars","rbql_expression","replacement_expression","replace_star_vars_for_header_parsing","translate_update_expression","update_expression","first_assignment_error","assignment_looking_rgx","dst_var_name","var_index","current_indent","translate_select_expression","expression_without_counting_stars","translated","translated_for_header","separate_string_literals","rgx","format_parts","idx_before","literal_id","string_literal","start_index","lastIndex","format_expression","locate_statements","statement_groups","ig","statement","match_str","separate_actions","with_match","ordered_statements","statement_start","span_start","span_end","statement_params","new_span","find_top","rb_actions","select_action","translate_except_expression","except_expression","input_header","skip_vars","skip_indices","var_name","HashJoinMap","key_indices","hash_map","key_index","polymorphic_get_key","get_single_key","get_multi_key","ki","nf","key_records","cleanup_query","remove_redundant_table_name","select_output_header","join_header","query_column_infos","query_has_star","query_has_column_alias","qci","output_header","TableIterator","normalize_column_names","stopped","TableWriter","external_table","SingleTableRegistry","shallow_parse_input_query","rhs_table_id","join_record_iterator","sql_join_type","select_expression_for_header","query_table","input_table","output_table","join_table","output_column_names","exceptions_type_map","isArgumentsObject","isGeneratorFunction","isTypedArray","BigIntSupported","SymbolSupported","ObjectToString","numberValue","stringValue","booleanValue","bigIntValue","symbolValue","checkBoxedPrimitive","prototypeValueOf","isMapToString","isSetToString","isWeakMapToString","isWeakSetToString","isArrayBufferToString","isArrayBuffer","working","isDataViewToString","isDataView","isView","isUint8Array","isUint8ClampedArray","isUint16Array","isUint32Array","isInt8Array","isInt16Array","isInt32Array","isBigInt64Array","isBigUint64Array","isWeakMap","isWeakSet","SharedArrayBufferCopy","isSharedArrayBufferToString","isSharedArrayBuffer","isAsyncFunction","isMapIterator","isSetIterator","isGeneratorObject","isWebAssemblyCompiledModule","method","assign","letters","lacksProperEnumerationOrder","preventExtensions","thrower","assignHasPendingExceptions","possibleNames","out","RangeError","concatty","that","bound","arrLike","slicy","boundLength","boundArgs","joiny","Empty","createErrorType","Base","NodeError","_Base","arg1","arg2","arg3","getMessage","oneOf","thing","determiner","type","inspected","badArrayLike","isCallableMarker","reflectApply","constructorRegex","isES6ClassFn","fnStr","tryFunctionObject","isIE68","isDDA","all","strClass","isRegex","regex","$hasOwn","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","executeCommand","test_folder_uri","num_lines_after_query","expected_num_lines","workspace_folder_uri","workspaceFolders","vscode_position","test_double_range","test_double_position","state_report","start_time","performance","total_adjusted_latency","dialect_test_task","length_original","length_aligned","length_shrinked","length_after_query","test_task","enable_rfc_newlines","filename_before","length_before_query","filename_after_copy_back","text_with_comma","length_after_column_edit","length_after_delete"],"sourceRoot":""}